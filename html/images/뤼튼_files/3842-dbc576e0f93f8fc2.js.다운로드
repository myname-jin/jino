"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3842],{4142:function(e,t,n){n.d(t,{Ks:function(){return ChatListItemTopicModeContainer},s0:function(){return ChatModeContainer},yd:function(){return ChatSelectContainer},IU:function(){return ChatTopicEditInput},Ar:function(){return ChatUpdateDateLabel},fl:function(){return EditModeSection},aU:function(){return EditToggleButton}});var r=n(44194);let ChatModeContainer=e=>{let{children:t}=e,[n,l]=(0,r.useState)("default");return t({mode:n,toggleMode:()=>l(e=>"edit"===e?"default":"edit")})};var l=n(45141),a=n(34715);let ChatSelectContainer=e=>{let{children:t}=e,{trackEvent:n}=(0,a.Ke)(),[o,i]=(0,r.useState)([]);return t({selectedChatIdList:o,selectChatId:e=>{i(t=>t.some(t=>t===e)?(0,l.zu)(t,e):(0,l.jj)([...t,e])),n("select_chat_delete",{status:!o.some(t=>t===e),type:"each"})},selectAllIds:e=>{i(e),n("select_chat_delete",{status:!0,type:"all"})},clearSelectedIds:()=>{i([]),n("select_chat_delete",{status:!1,type:"all"})}})};var o=n(5079),i=n(54067),u=n(35237),c=n(22346),d=n(86396),s=n(96707),p=n(9628);function _templateObject(){let e=(0,o._)(["\n        &:hover {\n          background-color: var(--palette_gray_gray_100);\n        }\n      "]);return _templateObject=function(){return e},e}let EditToggleButton=e=>{let{onClick:t}=e,{trackEvent:n}=(0,a.Ke)(),r=(0,p.T_)();return(0,i.BX)(d.zx,{px:"6px",gap:"4px",height:"28px",borderRadius:"5px",display:"flex",alignItems:"center",justifyContent:"center",css:(0,u.iv)(_templateObject()),onClick:()=>{t(),n("click_chat_edit_btn")},children:[(0,i.tZ)(s.JO,{as:c.tNo,size:16,color:"$color_icon_secondary"}),(0,i.tZ)(d.Jd,{typo:"$100-13-med",color:"$color_text_secondary",children:r("common.button.edit")})]})};var g=n(74230);let EditModeSection=e=>{let{selectedLength:t,isAllSelected:n,bgColor:r,onSelectAll:l,onRemoveAll:a,onDelete:o,onCloseEditMode:u}=e,_=(0,p.T_)(),m=t>0;return(0,i.BX)(d.Ug,{width:"100%",alignItems:"center",backgroundColor:r,zIndex:20,children:[(0,i.BX)(d.zx,{gap:"6px",display:"flex",alignItems:"center",onClick:n?a:l,children:[(0,i.tZ)(g.d,{checked:n}),(0,i.tZ)(d.Jd,{typo:"$100-13-semi",color:"$color_text_primary",children:_("common.unit.count",{count:t})})]}),(0,i.tZ)(d.LZ,{}),(0,i.BX)(d.zx,{p:"6px",gap:"4px",display:"flex",alignItems:"center",borderRadius:"5px",disabled:!m,onClick:o,children:[(0,i.tZ)(s.JO,{as:c.$yH,size:16,color:m?"$color_icon_brand":"$color_icon_disabled"}),(0,i.tZ)(d.Jd,{typo:"$100-13-semi",color:m?"$color_text_brand":"$color_text_disabled",children:_("chat.chat_list.delete_button")})]}),(0,i.tZ)(d.zx,{p:"6px",display:"flex",alignItems:"center",borderRadius:"5px",onClick:()=>{a(),u()},children:(0,i.tZ)(d.Jd,{typo:"$100-13-semi",color:"$color_text_primary",children:_("chat.chat_list.done_button")})})]})};var _=n(66001),m=n(73186);function ChatUpdateDateLabel_templateObject(){let e=(0,o._)(["\n        user-select: none;\n      "]);return ChatUpdateDateLabel_templateObject=function(){return e},e}let ChatUpdateDateLabel=e=>{let{date:t}=e,[n,l]=(0,r.useState)(""),{getFormatUpdateAt:a}=(0,_.xh)();return(0,m.Yz)(()=>{l(a(new Date(t)))},6e4),(0,r.useEffect)(()=>{l(a(new Date(t)))},[t]),(0,i.tZ)(d.Jd,{display:"none",className:"chat-update-date-label",minWidth:"52px",as:"span",color:"$color_text_secondary",typo:"$100-12-med",textAlign:"right",css:(0,u.iv)(ChatUpdateDateLabel_templateObject()),children:n})},ChatListItemTopicModeContainer=e=>{let{children:t,chatId:n}=e,[l,o]=(0,r.useState)("default"),{trackEvent:i}=(0,a.Ke)();return t({mode:l,onToggleMode:()=>{"default"===l&&i("click_edit_chat_name",{chat_id:n}),o(e=>"default"===e?"edit":"default")}})};function ChatTopicEditInput_templateObject(){let e=(0,o._)(["\n        cursor: inherit;\n        border: none;\n        background: transparent;\n\n        &:focus {\n          outline: none;\n        }\n\n        vertical-align: top;\n\n        caret-color: ",";\n\n        &::selection {\n          background-color: ",";\n        }\n      "]);return ChatTopicEditInput_templateObject=function(){return e},e}let ChatTopicEditInput=e=>{let{onBlur:t,value:n,update:l,onChange:a}=e,o=(0,r.useRef)(null),[c,s]=(0,r.useState)(""),onKeyPressEdit=async e=>{"Enter"===e.key&&o.current&&(null==l||l(null!=c?c:""),null==t||t())},onChangeInput=e=>{s(e),null==a||a(e)};return(0,r.useEffect)(()=>{null==s||s(null!=n?n:"")},[]),(0,r.useEffect)(()=>{var e;null==o||null===(e=o.current)||void 0===e||e.focus()},[]),(0,i.tZ)(d.II,{width:"100%",type:"text",typo:"$100-14-med",color:"$color_text_primary",value:c,css:e=>{var t,n;return(0,u.iv)(ChatTopicEditInput_templateObject(),null==e?void 0:null===(t=e.colors)||void 0===t?void 0:t.$color_surface_brand,null==e?void 0:null===(n=e.colors)||void 0===n?void 0:n.$color_surface_accent_red)},onChange:e=>onChangeInput(e.target.value),onBlur:t,ref:o,onKeyDown:onKeyPressEdit})}},74230:function(e,t,n){n.d(t,{d:function(){return ChatCheckbox}});var r=n(54067);n(44194);var l=n(22346),a=n(86396),o=n(96707);let ChatCheckbox=e=>{let{checked:t}=e;return(0,r.tZ)(a.xu,{width:"12px",height:"12px",borderRadius:"50%",border:"1px solid",borderColor:t?"$color_action_blue_primary":"$color_divider_primary",backgroundColor:t?"$color_action_blue_primary":"transparent",display:"flex",justifyContent:"center",alignItems:"center",children:(0,r.tZ)(o.JO,{as:l.wlE,size:12,color:t?"$color_icon_white":"transparent"})})}},7869:function(e,t,n){n.d(t,{U:function(){return Markdown}});var r=n(54067),l=n(35732),a=n(22101),o=n(14132),i=n(50123),u=n(5079);n(44194);var c=n(35237),d=n(48328),s=n(86396);function _templateObject(){let e=(0,u._)(["\n          cursor: ",";\n        "]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,u._)(["\n  white-space: pre-line;\n  text-decoration: underline;\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){let e=(0,u._)(["\n          white-space: pre-wrap;\n          word-break: break-all;\n          padding-bottom: 18px;\n          ","\n        "]);return _templateObject2=function(){return e},e}function _templateObject3(){let e=(0,u._)(["\n        list-style-position: outside;\n        list-style-type: disc;\n      "]);return _templateObject3=function(){return e},e}function _templateObject4(){let e=(0,u._)(["\n        list-style-position: outside;\n        list-style-type: decimal;\n      "]);return _templateObject4=function(){return e},e}function _templateObject5(){let e=(0,u._)(["\n        ::marker {\n          position: absolute;\n          left: -5px;\n          margin-right: 5px;\n        }\n      "]);return _templateObject5=function(){return e},e}function _templateObject6(){let e=(0,u._)(["\n        //margin: 12px 0;\n        border-collapse: collapse;\n        box-shadow: 0 0 0 1px ",";\n      "]);return _templateObject6=function(){return e},e}function _templateObject7(){let e=(0,u._)(["\n        td:first-child {\n          text-align: center;\n          vertical-align: top;\n        }\n      "]);return _templateObject7=function(){return e},e}function _templateObject8(){let e=(0,u._)(["\n        @media (max-width: 425px) {\n          font-size: 28px;\n        }\n      "]);return _templateObject8=function(){return e},e}function _templateObject9(){let e=(0,u._)(["\n        @media (max-width: 425px) {\n          font-size: 22px;\n        }\n      "]);return _templateObject9=function(){return e},e}function _templateObject10(){let e=(0,u._)(["\n        @media (max-width: 425px) {\n          font-size: 18px;\n        }\n      "]);return _templateObject10=function(){return e},e}let isRelatedLink=e=>(null==e?void 0:e[0])&&/\[\d+\]/.test(String(e[0])),extractNumber=e=>e.replace(/[[\]]/g,""),isValidURL=e=>!!e&&/https?:\/\/[^\s/$.?#].[^\s]*/.test(e),A=e=>{let{...t}=e,{children:n,href:l,handleLinkEventFactory:a,isAdWebview:o}=t,i=(0,s.Fg)(),u=i.colors.$color_action_blue_primary||"";if(isRelatedLink(n)){let e=extractNumber(String(n[0]));return(0,r.tZ)(s.zx,{...t,onClick:()=>{let t=null==a?void 0:a({url:l,index:e});null==t||t(),!o&&isValidURL(l)&&window.open(l,"_blank","noopener")},typo:"$100-12-semi",color:"$color_action_blue_primary",width:"18px",height:"18px",backgroundColor:"$color_surface_secondary",borderRadius:"100%",margin:"2px",css:(0,c.iv)(_templateObject(),isValidURL(l)?"pointer":"default"),children:e})}return(0,r.tZ)(p,{...t,target:"_blank",rel:"noopener",color:u,onClick:null==a?void 0:a({url:l})})},p=d.Z.a(_templateObject1()),Components=e=>{let{colorSet:t,customCss:n}=e;return{div:e=>{let{...n}=e;return(0,r.tZ)(s.xu,{...n,typo:"$ex_180-16-med",color:t.primary})},p:e=>{let{...l}=e,{children:a}=l;return a&&a[0]&&1===a.length&&a[0].props&&a[0].props.src?a:(0,r.tZ)(s.Jd,{...l,as:"p",typo:"$ex_180-16-med",color:t.primary,css:(0,c.iv)(_templateObject2(),null==n?void 0:n.p)})},span:e=>{let{...n}=e;return(0,r.tZ)(s.xu,{as:"span",...n,color:t.primary})},ul:e=>{let{...n}=e;return(0,r.tZ)(s.xu,{...n,as:"ul",typo:"$ex_180-16-med",color:t.primary,paddingLeft:"20px",paddingY:"4px",css:(0,c.iv)(_templateObject3())})},ol:e=>{let{...n}=e;return(0,r.tZ)(s.xu,{...n,as:"ol",typo:"$ex_180-16-med",color:t.primary,paddingLeft:"20px",paddingY:"4px",css:(0,c.iv)(_templateObject4())})},li:e=>{let{...n}=e;return(0,r.tZ)(s.xu,{...n,as:"li",typo:"$ex_180-16-med",color:t.primary,css:(0,c.iv)(_templateObject5())})},table:e=>{let{...t}=e;return(0,r.tZ)(s.xu,{...t,as:"table",borderRadius:"5px",borderStyle:"hidden",overflow:"hidden",css:e=>{var t;return(0,c.iv)(_templateObject6(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_secondary)}})},thead:e=>{let{...t}=e;return(0,r.tZ)(s.xu,{...t,as:"thead",typo:"$ex_180-16-semi",color:"$color_action_blue_primary",backgroundColor:"$color_surface_tertiary"})},tbody:e=>{let{...n}=e;return(0,r.tZ)(s.xu,{...n,as:"tbody",typo:"$ex_180-16-med",color:t.primary,css:(0,c.iv)(_templateObject7())})},tr:e=>{let{...t}=e;return(0,r.tZ)(s.xu,{...t,as:"tr"})},th:e=>{let{...t}=e;return(0,r.tZ)(s.xu,{...t,as:"th",padding:"6px 10px",border:"1px solid",borderColor:"$color_outline_secondary"})},td:e=>{let{...t}=e;return(0,r.tZ)(s.xu,{...t,as:"td",padding:"6px 10px",border:"1px solid",borderColor:"$color_outline_secondary"})},h1:e=>{let{...n}=e;return(0,r.tZ)(s.Jd,{...n,as:"h1",color:t.primary,lineHeight:"180%",fontSize:"30px",fontWeight:"600",py:"6px",css:(0,c.iv)(_templateObject8())})},h2:e=>{let{...n}=e;return(0,r.tZ)(s.Jd,{...n,as:"h2",color:t.primary,lineHeight:"180%",fontSize:"24px",fontWeight:"600",py:"6px",css:(0,c.iv)(_templateObject9())})},h3:e=>{let{...n}=e;return(0,r.tZ)(s.Jd,{...n,as:"h3",color:t.primary,lineHeight:"180%",fontSize:"20px",fontWeight:"600",py:"6px",css:(0,c.iv)(_templateObject10())})},h4:e=>{let{...n}=e;return(0,r.tZ)(s.Jd,{...n,as:"h4",color:t.primary,lineHeight:"180%",py:"6px"})},h5:e=>{let{...n}=e;return(0,r.tZ)(s.Jd,{...n,as:"h5",color:t.primary,lineHeight:"180%",py:"6px"})},h6:e=>{let{...n}=e;return(0,r.tZ)(s.Jd,{...n,as:"h6",color:t.primary,lineHeight:"180%",py:"6px"})},strong:e=>{let{...n}=e;return(0,r.tZ)(s.Jd,{...n,as:"strong",typo:"$ex_180-16-bold",color:t.primary})},blockquote:e=>{let{...t}=e;return(0,r.tZ)(s.xu,{...t,as:"blockquote",color:"$color_text_secondary",paddingLeft:"16px",borderLeft:"2px solid",borderColor:"$color_outline_secondary"})}}};var g=n(74293),_=n(31190),m=n(96707),y=n(22346),h=n(1442),x=n(85571),b=n(34371),f=n(48863),Z=n(94730),k=n(49561),v=n(65992),C=n(90357),j=n(23359),w=n(42302),$=n(8785),O=n(74888),E=n(27080),I=n(75101),L=n(95882),z=n(87032),S=n(91404),D=n(91419),R=n(59070),J=n(30824),T=n(12868),M=n(38849),N=n(8247),U=n(62519),B=n(12626),K=n(34847),P=n(62208),q=n(97778),H=n(62784),G=n(70361),X=n(49647),F=n(53188),W=n(73236),V=n(93375),Y=n(62893),Q=n(24741),ee=n(49147),et=n(63366),en=n(30857),er=n(74499),el=n(29450),ea=n(27304),eo=n(99541);let ei=[{key:"apache",language:h.Z},{key:"armasm",language:x.Z},{key:"bash",language:b.Z},{key:"c",language:f.Z},{key:"coffeescript",language:Z.Z},{key:"cpp",language:k.Z},{key:"csharp",language:v.Z},{key:"css",language:C.Z},{key:"d",language:j.Z},{key:"diff",language:w.Z},{key:"go",language:$.Z},{key:"handlebars",language:O.Z},{key:"haskell",language:E.Z},{key:"http",language:I.Z},{key:"ini",language:L.Z},{key:"java",language:z.Z},{key:"javascript",language:S.Z},{key:"json",language:D.Z},{key:"julia",language:R.Z},{key:"kotlin",language:J.Z},{key:"less",language:T.Z},{key:"lua",language:M.Z},{key:"makefile",language:N.Z},{key:"markdown",language:U.Z},{key:"nginx",language:B.Z},{key:"objectivec",language:K.Z},{key:"perl",language:P.Z},{key:"php",language:q.Z},{key:"plaintext",language:H.Z},{key:"properties",language:G.Z},{key:"python",language:X.Z},{key:"r",language:F.Z},{key:"ruby",language:W.Z},{key:"rust",language:V.Z},{key:"scala",language:Y.Z},{key:"scss",language:Q.Z},{key:"shell",language:ee.Z},{key:"sql",language:et.Z},{key:"swift",language:en.Z},{key:"typescript",language:er.Z},{key:"x86asm",language:el.Z},{key:"xml",language:ea.Z},{key:"yaml",language:eo.Z}];ei.forEach(e=>{g.Z.registerLanguage(e.key,e.language)});let Code=e=>{let{onClickCode:t,inline:n,className:l,...a}=e,o=/language-(\w+)/.exec(l||"");return n?(0,r.tZ)("code",{style:{whiteSpace:"break-spaces"},...a}):(0,r.BX)(s.xu,{width:"100%",borderRadius:"8px",overflow:"hidden",children:[(0,r.BX)(s.xu,{display:"flex",justifyContent:"space-between",width:"100%",backgroundColor:"#42413D",padding:"10px 16px",children:[(0,r.tZ)(s.Jd,{typo:"$160-14-semi",color:"$color_surface_white",children:o&&(null==o?void 0:o.length)>1?o[1]:""}),(0,r.tZ)(s.zx,{onClick:e=>{var n,r,l;let a=null!==(l=null===(r=e.currentTarget.parentElement)||void 0===r?void 0:null===(n=r.nextElementSibling)||void 0===n?void 0:n.textContent)&&void 0!==l?l:"";window.navigator.clipboard.writeText(a),t()},children:(0,r.tZ)(m.JO,{as:y.Tgi,size:20,color:"$color_surface_white"})})]}),(0,r.tZ)(g.Z,{style:_.Z,language:o&&(null==o?void 0:o.length)>1?o[1]:"javascript",highlighter:"hljs",customStyle:{whiteSpace:"pre-wrap",padding:"10px 16px"},children:a.children})]})};n(96528);let Markdown=e=>{let{content:t,onClickCode:n,colorSet:u={primary:"$color_text_primary",secondary:"$color_text_secondary"},handleLinkEventFactory:c,isAdWebview:d,addonComponents:s,remarkOptions:p,customCss:g}=e;return(0,r.tZ)(l.D,{remarkPlugins:[[o.Z,p],i.Z],rehypePlugins:[a.Z],components:{...Components({colorSet:u,customCss:g}),a:e=>{let{...t}=e;return(0,r.tZ)(A,{...t,handleLinkEventFactory:c,isAdWebview:d})},code:e=>{let{...t}=e;return(0,r.tZ)(Code,{...t,onClickCode:()=>null==n?void 0:n()})},...s},children:t})}},5553:function(e,t,n){n.d(t,{m:function(){return useAdCollectEvent}});var r=n(44194),l=n(84631),a=n(3628),o=n(43621),i=n(34715),u=n(77095),c=n(14633),d=n.n(c);let useAdCollectEvent=()=>{let{user:e}=(0,u.aF)(),t=(0,i.jc)(),{trackEvent:n}=(0,i.Ke)(),c=(0,r.useCallback)(d()((r,i)=>{let u={w_id:o.VI,wrtn_uid:null==e?void 0:e.wrtnUid,created_at:Date.now(),user_id:null==e?void 0:e._id,...e&&{is_wrtn:e.email.includes("@wrtn.io")},is_login:!!e,screen_name:t,platform_type:(0,a.ij)()},{ad_uid:c,...d}=i;n(r,{...d}),l.Np.TREND.post("/event",{name:r,...u,ad_uid:c,...d})},3e4),[e,t,n]);return{handleEvent:c}}},45141:function(e,t,n){n.d(t,{vM:function(){return r.groupBy},jj:function(){return r.uniq},mN:function(){return r.uniqBy},zu:function(){return r.without}});var r=n(39378)},24678:function(e,t,n){n.d(t,{Zr:function(){return useAnonymousDialog_useAnonymousDialog},Tt:function(){return useGenerateAndPushNormalChatRoom},DD:function(){return useGenerateLatencyMark}});var r=n(5553),l=n(3521),a=n(11894),o=n(33065),i=n(98511);let useGenerateLatencyMark=()=>({markGenerateRequest:()=>{performance.mark("generate-request")}}),useGenerateAndPushNormalChatRoom=()=>{let e=(0,o.tv)(),t=(0,i.Zl)(l._8),{chatList:n,loading:u,refetch:c}=(0,a.c9)("model"),{createChatMutation:d}=(0,a.hY)("model"),{markGenerateRequest:s}=useGenerateLatencyMark(),{handleEvent:p}=(0,r.m)(),generateAndPushNormalChatRoom=async r=>{var l;let{selectedModel:a,generateMessage:o,callback:i,generation_type:g,trendId:_,adContext:m,adEvent:y}=r;s(),await c();let h=n.sort((e,t)=>null===e.model&&null!==t.model?-1:null!==e.model&&null===t.model?1:0),x=u||(null==h?void 0:null===(l=h[0])||void 0===l?void 0:l.model)?void 0:h[0],b=x?x._id:await d({unitId:a._id,type:"model"}).then(e=>e._id);t({input:o,isChocoChip:!1,trendId:_,images:[],chatId:b,adContext:m});let f="/chat/u/".concat(a._id,"/c/").concat(b,"?type=u").concat(g?"&gt="+g:"");y&&p(y.adEventName,{...y.adEventBody,url:f}),await e.push(f),null==i||i()};return{generateAndPushNormalChatRoom}};var u=n(53423),c=n(77095);let useAnonymousDialog_useAnonymousDialog=e=>{let{handleOpenLoginDialog:t}=(0,u.tF)(),{user:n}=(0,c.aF)();return{handleOpenLoginDialog:t,handleOpenAnonymousDialog:()=>!e||!!e.allowAnonymous||!!n||(t(),!1)}};n(6916),n(44684),n(45570)}}]);