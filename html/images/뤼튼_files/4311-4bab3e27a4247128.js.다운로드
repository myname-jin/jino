"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[4311,9721,3321],{63570:function(e,t,n){n.d(t,{WQ:function(){return AssignmentChangedProvider},PO:function(){return AssignmentFileProvider},no:function(){return AssignmentLinkProvider},GN:function(){return AssignmentProvider},N3:function(){return AssignmentStepProvider},Z6:function(){return AssignmentValidationProvider},Yh:function(){return l},qP:function(){return d},nf:function(){return h},_U:function(){return v},jw:function(){return x},ZH:function(){return u}});var r=n(54067),o=n(44194),i=n(42761);let a=(0,o.createContext)(null),AssignmentChangedProvider=e=>{let{children:t}=e,[n,i]=(0,o.useState)({description:!1,topic:!1}),l=(0,o.useCallback)((e,t)=>{i(n=>({...n,[e]:t}))},[]),c=(0,o.useMemo)(()=>({hasChanged:n,updateHasChanged:l}),[n,l]);return(0,r.tZ)(a.Provider,{value:c,children:t})},l=(0,i.TR)(a,"[AssignmentChangedProvider] cannot find context provider"),c=(0,o.createContext)(null),AssignmentProvider=e=>{let{data:t,children:n}=e,[i,a]=(0,o.useState)({_id:(null==t?void 0:t._id)||"",userInstruction:(null==t?void 0:t.userInstruction)||"",pageLength:(null==t?void 0:t.pageLength)||1,userId:(null==t?void 0:t.userId)||"",referenceIds:(null==t?void 0:t.referenceIds)||[],chatId:(null==t?void 0:t.chatId)||"",requestId:(null==t?void 0:t.requestId)||"",status:(null==t?void 0:t.status)||"",createdAt:(null==t?void 0:t.createdAt)||"",updatedAt:(null==t?void 0:t.updatedAt)||"",topics:(null==t?void 0:t.topics)||[],selectedTopic:(null==t?void 0:t.selectedTopic)||"",step:(null==t?void 0:t.step)||0,outlines:(null==t?void 0:t.outlines)||[]}),{updateHasChanged:d}=l(),s=(0,o.useCallback)(e=>{a(t=>({...t,...e}))},[]),u=(0,o.useCallback)(()=>{a({_id:"",userInstruction:"",pageLength:1,userId:"",referenceIds:[],chatId:"",requestId:"",status:"",createdAt:"",updatedAt:"",topics:[],selectedTopic:"",step:0,outlines:[]})},[]),p=(0,o.useCallback)(e=>{a(t=>({...t,referenceIds:[...t.referenceIds,e]}))},[]),_=(0,o.useCallback)(e=>{a(t=>({...t,referenceIds:t.referenceIds.filter(t=>t!==e)}))},[]),[m,h]=(0,o.useState)([]),g=(0,o.useCallback)((e,t)=>{h(n=>{let r=[...n];return r[e]=t,r})},[]),v=(0,o.useMemo)(()=>({...i,updateAssignment:s,resetAssignment:u,addReferenceId:p,removeReferenceId:_,newOutlineTitles:m,updateOutlineTitles:g}),[i,s,u,p,_,m,g]);return(0,o.useEffect)(()=>{d&&d("description",!0)},[i.userInstruction,i.pageLength,i.referenceIds,d]),(0,o.useEffect)(()=>{d("topic",!0)},[i.selectedTopic,d]),(0,r.tZ)(c.Provider,{value:v,children:n})},d=(0,i.TR)(c,"[AssignmentProvider] cannot find context provider"),s=(0,o.createContext)(null),AssignmentValidationProvider=e=>{let{children:t}=e,[n,i]=(0,o.useState)({valid:!1,error:""}),[a,l]=(0,o.useState)({valid:!1,error:""}),[c,d]=(0,o.useState)([]),[u,p]=(0,o.useState)([]),_=(0,o.useCallback)((e,t,n)=>{let{valid:r,error:o}=t;"userInstruction"===e?i({valid:r,error:o}):"selectedTopic"===e?l({valid:r,error:o}):void 0!==n&&"outlineTitle"===e?d(e=>{let t=[...e];return t[n]={valid:r,error:o},t}):void 0!==n&&"outlineContent"===e&&p(e=>{let t=[...e];return t[n]={valid:r,error:o},t})},[]),m=(0,o.useCallback)((e,t)=>{"userInstruction"===e?i({valid:!1,error:""}):"selectedTopic"===e?l({valid:!1,error:""}):void 0!==t&&"outlineTitle"===e?d(e=>{let n=[...e];return n[t]={valid:!1,error:""},n}):void 0!==t&&"outlineContent"===e&&p(e=>{let n=[...e];return n[t]={valid:!1,error:""},n})},[]),h=(0,o.useMemo)(()=>({userInstructionValidation:n,selectedTopicValidation:a,outlineTitleValidation:c,outlineContentValidation:u,updateValidationError:_,resetValidation:m}),[n,a,c,u,_,m]);return(0,r.tZ)(s.Provider,{value:h,children:t})},u=(0,i.TR)(s,"[AssignmentValidationProvider] cannot find context provider");var p=n(45570);let _=(0,p.cn)({key:"assignmentFileState",default:[]}),m=(0,o.createContext)(null),AssignmentFileProvider=e=>{let{children:t}=e,[n,i]=(0,p.FV)(_),a=(0,o.useCallback)(e=>{i(t=>[...t,e])},[i]),l=(0,o.useCallback)((e,t)=>{i(n=>n.map(n=>n._id===e?{...n,...t}:n))},[i]),c=(0,o.useCallback)(e=>{i(t=>t.filter(t=>t._id!==e))},[i]),d=(0,o.useMemo)(()=>n.length,[n]),s=(0,o.useMemo)(()=>({files:n,addFile:a,updateFile:l,removeFile:c,fileCount:d}),[n,a,l,c,d]);return(0,r.tZ)(m.Provider,{value:s,children:t})},h=(0,i.TR)(m,"[AssignmentFileProvider] cannot find context provider"),g=(0,o.createContext)(null),AssignmentLinkProvider=e=>{let{children:t}=e,[n,i]=(0,o.useState)([]),a=(0,o.useCallback)(e=>{i(t=>[...t,e])},[]),l=(0,o.useCallback)(e=>{i(t=>t.filter(t=>t._id!==e))},[]),c=(0,o.useCallback)((e,t)=>{i(n=>n.map(n=>n._id===e?{...n,...t}:n))},[]),d=(0,o.useMemo)(()=>n.length,[n]),s=(0,o.useMemo)(()=>({links:n,addLink:a,removeLink:l,updateLink:c,linkCount:d}),[n,a,l,c,d]);return(0,r.tZ)(g.Provider,{value:s,children:t})},v=(0,i.TR)(g,"[AssignmentLinkProvider] cannot find context provider"),f=(0,o.createContext)(null),AssignmentStepProvider=e=>{let{children:t}=e,[n,i]=(0,o.useState)({topic:!1,outline:!1}),[a,l]=(0,o.useState)({topic:!1,outline:!1}),c=(0,o.useCallback)((e,t)=>{i(n=>({...n,[e]:t}))},[]),d=(0,o.useCallback)((e,t)=>{l(n=>({...n,[e]:t}))},[]),s=(0,o.useMemo)(()=>({loading:n,updateLoading:c,error:a,updateError:d}),[n,a,c,d]);return(0,r.tZ)(f.Provider,{value:s,children:t})},x=(0,i.TR)(f,"[AssignmentStepProvider] cannot find context provider")},35893:function(e,t,n){n.d(t,{qf:function(){return useAssignment},Pu:function(){return useGenerateAssignmentOutlines},FH:function(){return useGenerateAssignmentTopics},c7:function(){return usePostAssignment},Oi:function(){return usePostAssignmentFile},xl:function(){return usePostAssignmentLink}});var r=n(84631),o=n(92120);let getAssignment=async()=>await r.Np.William.get("/write-assignment"),useAssignment=()=>(0,o.dH)("/assignment",()=>getAssignment(),{revalidateOnFocus:!1}),generateAssignmentTopics=async e=>await r.Np.William.put("/write-assignment/".concat(e,"/topics")),useGenerateAssignmentTopics=e=>(0,o._5)("/write-assignment/topics",()=>generateAssignmentTopics(e)),generateAssignmentOutlines=async e=>{let{assignmentId:t,selectedTopic:n}=e;return await r.Np.William.put("/write-assignment/".concat(t,"/outlines"),{selectedTopic:n})},useGenerateAssignmentOutlines=()=>(0,o._5)("/write-assignment/outlines",async(e,t)=>{let{arg:n}=t;return await generateAssignmentOutlines(n)}),postAssignmentFile=async e=>{let{fileUuid:t,extension:n,title:o}=e;return await r.Np.William.post("/write-assignment/file",{fileUuid:t,extension:n,title:o})},usePostAssignmentFile=()=>(0,o._5)("/write-assignment/file",async(e,t)=>{let{arg:n}=t;return await postAssignmentFile(n)}),postAssignmentLink=async e=>{let{url:t,favicon:n,title:o}=e;return await r.Np.William.post("/write-assignment/link",{url:t,favicon:n,title:o})},usePostAssignmentLink=()=>(0,o._5)("/write-assignment/link",async(e,t)=>{let{arg:n}=t;return await postAssignmentLink(n)}),postAssignment=async e=>{let{userInstruction:t,pageLength:n,referenceIds:o}=e;return await r.Np.William.post("/write-assignment",{userInstruction:t,pageLength:n,referenceIds:o})},usePostAssignment=()=>(0,o._5)("/write-assignment",async(e,t)=>{let{arg:n}=t;return await postAssignment(n)})},84002:function(e,t,n){n.d(t,{X:function(){return useChatHomeContext},c:function(){return ChatHomeProvider}});var r=n(54067),o=n(44194),i=n(52708),a=n(3628);let l=(0,o.createContext)({unitList:[],selectedUnit:null,setSelectedUnit:()=>{},chatInputRef:null,scrollRef:null,isRedirecting:!1,setIsRedirecting:()=>{}}),ChatHomeProvider=e=>{let{children:t}=e,[n,c]=(0,o.useState)(!1),{value:d,setItem:s}=(0,a.Xs)("TEMP_UNIT",null),u=(0,o.useRef)(null),p=(0,o.useRef)(null),{data:_}=(0,i.u7)();return(0,o.useEffect)(()=>{!d&&_&&_.length>0&&s(null==_?void 0:_[0])},[_,d]),(0,r.tZ)(l.Provider,{value:{isRedirecting:n,setIsRedirecting:c,chatInputRef:u,scrollRef:p,selectedUnit:d,setSelectedUnit:s,unitList:_},children:t})},useChatHomeContext=()=>(0,o.useContext)(l)},75007:function(e,t,n){n.d(t,{Q:function(){return c},b:function(){return DefaultChatInputStateProvider}});var r=n(54067),o=n(44194),i=n(3628),a=n(42761);let l=(0,o.createContext)(null),DefaultChatInputStateProvider=e=>{let{children:t}=e,[n,a]=(0,o.useState)(""),[c,d]=(0,o.useState)(!1),{value:s,removeItem:u}=(0,i.Xs)("CHAT_HOME_INPUT_STATE_SESSION_KEY",""),p=(0,o.useCallback)(e=>{a(e)},[]),_=(0,o.useCallback)(e=>{d(e)},[]),m=(0,o.useMemo)(()=>({input:n,changeInput:p,isFocus:c,changeFocus:_}),[p,n,c,_]);return(0,o.useEffect)(()=>(s&&(a(s),u()),()=>{u()}),[]),(0,r.tZ)(l.Provider,{value:m,children:t})},c=(0,a.TR)(l,"[DefaultChatInputStateProvider] cannot find context provider")},66807:function(e,t,n){n.d(t,{M:function(){return u},R:function(){return SelectModelWithChatHomeV2Provider}});var r=n(54067),o=n(44194),i=n(3628),a=n(53261),l=n(33065),c=n(42761),d=n(77095);let s=(0,o.createContext)(null),SelectModelWithChatHomeV2Provider=e=>{let{children:t}=e,{value:n,setItem:c}=(0,i._)("SELECTED_MODEL",null),{searchParams:u}=(0,l.je)(),p=u.has("qi"),{id:_}=(0,a.Jv)(),{id:m}=(0,a.mn)(),{id:h}=(0,a._n)(),{isLoading:g,user:v}=(0,d.aF)(),f=!!(!g&&(null==v?void 0:v._id)),x=p?_:void 0,b=(0,o.useMemo)(()=>x||(f?m:_),[x,f,m,_]),C=(0,o.useMemo)(()=>x?null:n,[x,n]),[y,k]=(0,o.useState)(),{data:w}=(0,a.l_)(),Z=(0,o.useMemo)(()=>null!=w?w:[],[w]),I=(0,o.useMemo)(()=>(null==y?void 0:y._id)===m||(null==y?void 0:y._id)===h,[null==y?void 0:y._id,m,h]),O=(0,o.useCallback)(e=>{k(e),x||c(e._id)},[x,c]),S=(0,o.useMemo)(()=>({modelList:Z,selectedModel:y,isProMode:I,selectModel:O}),[Z,I,O,y]);return(0,o.useEffect)(()=>{var e;let t=null!==(e=null!=C?C:null==y?void 0:y._id)&&void 0!==e?e:b;k(Z.find(e=>{let{_id:n}=e;return n===t}))},[b,Z,null==y?void 0:y._id,C]),(0,r.tZ)(s.Provider,{value:S,children:t})},u=(0,c.TR)(s,"[SelectModelWithChatHomeV2Provider] cannot find context provider")},50158:function(e,t,n){n.d(t,{M2:function(){return r.M},Qc:function(){return i.Q},Rm:function(){return r.R},XV:function(){return o.X},c6:function(){return o.c}});var r=n(66807),o=n(84002),i=n(75007)},22601:function(e,t,n){n.d(t,{M:function(){return usePushChatRoom}});var r=n(84168),o=n(3521);n(33065);var i=n(98511),a=n(53423),l=n(44684);let usePushChatRoom=e=>{let t=(0,l.useRouter)(),n=(0,i.Zl)(o._8),c=(0,i.Zl)(o.yI),{handleOpenAnonymousDialog:d}=(0,a.Zr)(e),{createChatMutation:s,refetch:u}=(0,r.h)(),onMakeNewChat=async(e,r)=>{let{unitId:o,input:i,isChocoChip:a,images:l,from:p,adId:_,inventory:m,chatId:h,mobileAllowedQuery:g}=e;if(!o||o.length<1)return{newChatCreated:!1};let v=d();if(!v)return{newChatCreated:!1};p||n({input:i,isChocoChip:a||!1,images:l||[],adId:_}),"chatRoom"===p&&c(-1);let f=h;if(h)u();else{let e=await s(o);f=e._id}return"chatRoom"===p&&(c(1),n({input:i,isChocoChip:a||!1,images:l||[],chatId:f})),t.push("/chat/u/".concat(o,"/c/").concat(f).concat(m?"?inventory=".concat(m):"").concat(g?"".concat(m?"&":"?","input_kb"):"")),null==r||r(),{newChatCreated:!0}};return{onMakeNewChat,onMoveToLanding:e=>{let{unitId:n}=e;n&&!(n.length<1)&&t.push("/chat/u/".concat(n))}}}},54311:function(e,t,n){n.d(t,{nT:function(){return AppAdChatRoomPageHome},RE:function(){return AppChatHomePage},$0:function(){return AppTrendAiSearchPage},pe:function(){return AssignmentPage},UB:function(){return BookmarksPage},qE:function(){return ChatHomePage},g7:function(){return ChatLayout},PS:function(){return ChatRoomPage},Nq:function(){return ChatRoomV2Page},Di:function(){return LegacyHome}});var r,o,i,a,l,c,d,s,u,p,_,m,h,g,v,f,x,b,C,y,k,w,Z,I,O,S,B,$,M,R,j,E,A,T,L,F,P,U,D,X,J,z,N,H,G,W,K,V,Y,q,Q,ee,et,en,er,eo,ei,ea,el,ec,ed,es,eu=n(54067),ep=n(5079),e_=n(44194),em=n(35237),eh=n(86396),eg=n(3628),ev=n(34715),ef=n(9628),ex=n(33065);function _templateObject(){let e=(0,ep._)(["\n            line-height: 130%;\n          "]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,ep._)(["\n              line-height: 130%;\n            "]);return _templateObject1=function(){return e},e}function _templateObject2(){let e=(0,ep._)(["\n              box-shadow: 0px 0px 20px 0px rgba(0, 0, 0, 0.25);\n            "]);return _templateObject2=function(){return e},e}let MobileGuideView=()=>{let{push:e}=(0,ex.tv)(),{trackEvent:t}=(0,ev.Ke)(),n=(0,ef.T_)(),r=(0,eg.ac)("(max-width: 539px)");return(0,e_.useEffect)(()=>{t("view_mobile_app_download_recommend_page ")},[]),(0,eu.BX)(eh.gC,{width:"100%",minHeight:"calc(100dvh - 48px)",overflow:"hidden",position:"relative",children:[(0,eu.BX)(eh.gC,{gap:"31px",children:[(0,eu.tZ)(eh.Ug,{width:"100%",justifyContent:"center",paddingTop:"150px",children:(0,eu.tZ)(eh.xu,{width:["89px","123px"],children:(0,eu.tZ)("img",{width:"100%",height:"auto",src:"https://fe-web-assets.wow.wrtn.ai/mobile-guide/app-icon.svg",alt:"app-logo"})})}),(0,eu.tZ)(eh.Jd,{typo:r?"$content-28-bold":"$content-48-bold",color:"$palette_gray_gray_black",textAlign:"center",paddingX:r?"44px":"22px",css:(0,em.iv)(_templateObject()),children:n("chat.feature_home.title")}),(0,eu.BX)(eh.gC,{gap:"15px",children:[(0,eu.tZ)(eh.Jd,{typo:r?"$100-18-semi":"$100-24-semi",color:"$color_text_tertiary",textAlign:"center",css:(0,em.iv)(_templateObject1()),paddingX:r?"76px":"128px",children:n("chat.feature_home.sub_title")}),(0,eu.tZ)(eh.Jd,{typo:r?"$100-15-semi":"$100-18-semi",color:"$color_text_brand",textAlign:"center",paddingX:r?"76px":"128px",children:n("chat.feature_home.can_use_character_mobile")})]}),(0,eu.tZ)(eh.xu,{height:r?"205px":"216px"})]}),(0,eu.tZ)(eh.xu,{width:"100%",paddingX:r?"32px":"36px",paddingBottom:"35px",position:"fixed",bottom:0,left:0,right:0,children:(0,eu.BX)(eh.gC,{width:"100%",gap:"14px",children:[(0,eu.tZ)(eh.zx,{width:"100%",height:r?"58px":"84px",borderRadius:"15px",backgroundColor:"$color_icon_white",onClick:()=>{t("click_go_character_home_btn_recommend_page"),e("/chat/character")},css:(0,em.iv)(_templateObject2()),children:(0,eu.tZ)(eh.Jd,{color:"$color_alert_surface",typo:r?"$100-20-semi":"$100-24-semi",children:n("chat.feature_home.navigate_character_home")})}),(0,eu.tZ)(eh.zx,{width:"100%",height:r?"58px":"84px",borderRadius:"15px",backgroundColor:"$color_alert_surface",onClick:()=>{t("click_app_download_btn_recommend_page"),window.open("https://agent.wrtn.ai/zhoxyo","_blank","noopener")},children:(0,eu.tZ)(eh.Jd,{color:"$color_surface_white",typo:r?"$100-20-semi":"$100-24-semi",children:n("chat.feature_home.use_app_free")})})]})}),(0,eu.tZ)(eh.xu,{backgroundImage:"url(https://fe-web-assets.wow.wrtn.ai/mobile-guide/circle.png)",backgroundRepeat:"no-repeat",backgroundSize:"cover",backgroundPosition:"50%",width:r?"761px":"987px",height:r?"761px":"987px",position:"absolute",top:r?"346px":"439px",left:0,zIndex:"-1"})]})};var eb=n(9386),eC=n(48343),ey=n(12027),ek=n(84631),ew=n(45141),eZ=n(66001),eI=n(92120),eO=n(44684);let getEventModal=e=>ek.Np.BE.get((0,ey.stringifyQueryParams)("/banner",{type:e,platform:(0,eg.Xf)()}),{headers:{"Cache-Control":"no-store"}}),useEventModal=e=>{let{type:t}=e,{trackEvent:n}=(0,ev.Ke)(),{pathname:r}=(0,eO.useRouter)(),{data:o}=(0,eI.dH)("/eventModal",()=>getEventModal(t)),{value:i,setItem:a}=(0,eg._)("NONE_DISPLAY_EVENT_MODAL_ID"),l=Array.isArray(i)?i:[],c=(0,e_.useMemo)(()=>l.filter(e=>{let{expires:t}=e;return(0,eZ.RR)(new Date,new Date(t))}).map(e=>{let{id:t}=e;return t}),[l]),d=(0,e_.useMemo)(()=>{var e;let t=null!==(e=null==o?void 0:o.filter(e=>{var t,n,o;return r.match((null===(t=e.options)||void 0===t?void 0:t.path)||"")&&!(null===(o=e.options)||void 0===o?void 0:null===(n=o.exceptPath)||void 0===n?void 0:n.some(e=>r.match(e)))}))&&void 0!==e?e:[];return c.length?t.filter(e=>!c.includes(e._id)):t},[o]);return{eventModalList:d,noneDisplayEventModal:e=>{n("click_event_modal_cta",{feature_name:null==e?void 0:e.name,link:r,btn_type:"not_see"});let t={id:e._id,expires:(0,eZ.IH)(new Date,99,"year").toDate()},o=l?(0,ew.mN)([...l,t],"id"):[t];a(o)}}};var eS=n(22346),eB=n(75659),e$=n(96707);function CloseActionComponent_templateObject(){let e=(0,ep._)(["\n            @media (max-width: 480px) {\n              font-size: 12px;\n            }\n          "]);return CloseActionComponent_templateObject=function(){return e},e}let CloseActionComponent=e=>{let{item:t,closeModal:n,noneDisplayEventModal:r}=e,o=(0,ef.T_)("event_modal"),{pathname:i}=(0,eO.useRouter)(),{trackEvent:a}=(0,ev.Ke)();return(0,eu.tZ)(eh.Ug,{width:"100%",children:(0,eu.tZ)(eh.zx,{width:"100%",height:[60,60,60,90],backgroundColor:"$palette_gray_gray_800",flexShrink:0,onClick:()=>{r(t),a("click_event_modal_cta",{feature_name:t.featureName,link:i,btn_type:"not_see",eventName:t.name}),n()},children:(0,eu.tZ)(eh.Jd,{typo:"$100-18-med",fontSize:[12,12,12,18],color:"$color_text_disabled",css:(0,em.iv)(CloseActionComponent_templateObject()),children:o("not_see_again")})})})};function MoveActionComponent_templateObject(){let e=(0,ep._)(["\n            @media (max-width: 480px) {\n              font-size: 12px;\n            }\n          "]);return MoveActionComponent_templateObject=function(){return e},e}function MoveActionComponent_templateObject1(){let e=(0,ep._)(["\n            @media (max-width: 480px) {\n              font-size: 12px;\n            }\n          "]);return MoveActionComponent_templateObject1=function(){return e},e}let MoveActionComponent=e=>{var t,n,r,o,i;let{item:a,closeModal:l,noneDisplayEventModal:c}=e,d=(0,ef.T_)("event_modal"),{mediaQueries:s}=(0,eB.TC)(),u=(0,eg.ac)(s.desktop),{trackEvent:p}=(0,ev.Ke)(),_=null!==(i=u?null===(t=a.linkOptions)||void 0===t?void 0:t.webLink:null!==(o=null===(n=a.linkOptions)||void 0===n?void 0:n.mobileWebLink)&&void 0!==o?o:null===(r=a.linkOptions)||void 0===r?void 0:r.webLink)&&void 0!==i?i:"";return(0,eu.BX)(eh.Ug,{width:"100%",children:[(0,eu.tZ)(eh.zx,{width:[100,100,100,150],height:[60,60,60,90],backgroundColor:"$palette_gray_gray_800",flexShrink:0,onClick:()=>{p("click_event_modal_cta",{feature_name:a.featureName,link:_,btn_type:"not_see",eventName:a.name}),c(a),l()},children:(0,eu.tZ)(eh.Jd,{typo:"$100-18-med",fontSize:[12,12,12,18],color:"$color_text_disabled",css:(0,em.iv)(MoveActionComponent_templateObject()),children:d("not_see_again")})}),(0,eu.tZ)(eh.zx,{width:"100%",height:[60,60,60,90],backgroundColor:"$color_surface_primary",onClick:()=>{p("click_event_modal_cta",{feature_name:a.featureName,link:_,btn_type:"start",eventName:a.name}),window.open(_,"_blank","noopener,noreferrer")},children:(0,eu.tZ)(eh.Jd,{typo:"$100-18-semi",fontSize:[12,12,12,18],color:"$color_text_ivory",css:(0,em.iv)(MoveActionComponent_templateObject1()),children:d("go_to_event")})})]})},EventModalContent=e=>{let{closeModal:t,item:n,noneDisplayEventModal:r}=e,{mediaQueries:o}=(0,eB.TC)(),i=(0,eg.ac)(o.desktop),{trackEvent:a}=(0,ev.Ke)();return(0,e_.useEffect)(()=>{var e,t,r,o,l;let c=null!==(l=i?null===(e=n.linkOptions)||void 0===e?void 0:e.webLink:null!==(o=null===(t=n.linkOptions)||void 0===t?void 0:t.mobileWebLink)&&void 0!==o?o:null===(r=n.linkOptions)||void 0===r?void 0:r.webLink)&&void 0!==l?l:"";a("view_event_modal",{feature_name:n.featureName,link:c,event_name:n.name})},[]),(0,eu.BX)(eh.gC,{width:[300,300,300,450],height:[360,360,360,630],maxWidth:"90vw",maxHeight:"90vh",backgroundSize:"contain",overflow:"hidden",borderRadius:"15px",backgroundImage:"url(".concat(n.mobileWebImageUrl?n.mobileWebImageUrl:n.imageUrl,")"),position:"relative",children:[(0,eu.tZ)(eh.gC,{width:"100%",height:"540px",children:(0,eu.tZ)(eh.Ug,{justifyContent:"flex-end",padding:[12,12,12,20],alignItems:"center",children:(0,eu.tZ)(eh.zx,{width:24,height:24,backgroundColor:"$color_bg_dimmed",borderRadius:"5px",alignItems:"center",onClick:()=>{t(),a("click_event_modal_cta",{feature_name:n.featureName,btn_type:"exit",eventName:n.name})},children:(0,eu.tZ)(e$.JO,{as:eS.S5X,size:24,color:"$color_icon_white"})})})}),(0,eu.tZ)(eh.xu,{width:"100%",position:"absolute",bottom:0,left:0,right:0,children:(0,eu.tZ)(()=>{switch(n.actionType){case"move":return(0,eu.tZ)(MoveActionComponent,{noneDisplayEventModal:r,closeModal:t,item:n});case"close":return(0,eu.tZ)(CloseActionComponent,{noneDisplayEventModal:r,closeModal:t,item:n});default:return(0,eu.tZ)(eu.HY,{})}},{})})]})},EventModal=e=>{let{type:t}=e,{eventModalList:n,noneDisplayEventModal:r}=useEventModal({type:t});return n.length?n.map(e=>(0,eu.tZ)(eC.CO,{opened:!0,renderContent:t=>{let{closeModal:n}=t;return(0,eu.tZ)(eh.xu,{children:(0,eu.tZ)(EventModalContent,{noneDisplayEventModal:r,closeModal:n,item:e})})}},e._id)):null};var eM=n(82626),eR=n(30381),ej=n(3372),eE=n.n(ej);function AppInstallModal_templateObject(){let e=(0,ep._)(["\n                    font-size: 8px;\n                  "]);return AppInstallModal_templateObject=function(){return e},e}let AppInstallModal=e=>{let{closeModal:t}=e,n=(0,ef.T_)(),r=(0,ef.bU)();return(0,eu.BX)(eh.xu,{position:"relative",padding:"20px 20px 43px 20px",width:440,height:428,borderRadius:12,backgroundColor:"#fff",children:[(0,eu.BX)(eh.gC,{width:"100%",height:"100%",alignItems:"center",justifyContent:"top",gap:"16px",children:[(0,eu.tZ)(eh.xu,{height:"12px"}),(0,eu.tZ)(eh.Jd,{typo:"$100-24-bold",color:"#1A1918",children:n("feature_mobile_install.sub_title1")}),(0,eu.tZ)(eh.Jd,{typo:"$100-24-bold",color:"#F72F08",children:n("feature_mobile_install.sub_title2")}),(0,eu.tZ)(eh.xu,{width:301,height:105,borderRadius:12,marginTop:"5px",marginBottom:"5px",backgroundColor:"#F7F7F5",children:(0,eu.BX)(eh.Ug,{alignItems:"flex-start",justifyContent:"left",marginLeft:18,marginTop:22,children:[(0,eu.tZ)(e$.tD,{width:61,height:61}),(0,eu.BX)(eh.gC,{alignItems:"flex-start",marginLeft:16,gap:"6px",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-18-semi",color:"#1A1918",children:n("feature_mobile_install.cta_title")}),(0,eu.BX)(eh.Ug,{alignItems:"flex-end",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-12-semi",color:"#85837D",marginTop:10,children:n("feature_mobile_install.cta_word")}),(0,eu.tZ)(eh.Jd,{color:"#A8A69D",marginLeft:"4px",css:(0,em.iv)(AppInstallModal_templateObject()),children:n("feature_mobile_install.cta_word2")})]}),(0,eu.tZ)(e$.A3,{})]})]})}),(0,eu.tZ)(eE(),{src:"ko-KR"===r?"https://d1k8apdmymvh8f.cloudfront.net/wrtn/wrtn_app_install_qr.png":"https://d1k8apdmymvh8f.cloudfront.net/wrtn/jt4lfh16_qr_code.png",alt:"WRTN App Installer QR",width:92,height:92}),(0,eu.tZ)(eh.Jd,{typo:"$100-14-semi",color:"#A8A69D",marginTop:"5px",children:n("feature_mobile_install.sub_title3")})]}),(0,eu.tZ)(eh.zx,{position:"absolute",top:"20px",right:"20px",width:"20px",height:"20px",onClick:t,children:(0,eu.tZ)(e$.JO,{as:eS.S5X,size:20,color:"$color_text_tertiary"})})]})},AppInstallButton=()=>{let{trackEvent:e}=(0,ev.Ke)(),t=(0,ef.T_)(),n=(0,ef.bU)();return"ja-JP"!==n&&"ko-KR"!==n?null:(0,eu.tZ)(eC.CO,{renderOpener:n=>{let{openModal:r}=n;return(0,eu.tZ)(eh.xu,{children:(0,eu.BX)(eh.Wv,{size:"$small",hierarchy:"$tertiary",onClick:()=>{r(),e("click_home_screen_mobile_app_download_btn")},endContainer:(0,eu.tZ)(e$.JO,{as:eS.xMl,size:12,color:"$color_icon_secondary"}),children:[(0,eu.tZ)(e$.yC,{}),(0,eu.tZ)(eh.Jd,{typo:"$100-13-med",color:"$color_text_secondary",children:t("feature_mobile_install.title")})]})})},renderContent:e=>{let{closeModal:t}=e;return(0,eu.tZ)(AppInstallModal,{closeModal:t})}})};var eA=n(84168),eT=n(77095);let EmptyChatController=()=>{let{chatList:e,isLoading:t}=(0,eA.c)(),{createChatMutation:n}=(0,eA.h)(),[r,o]=(0,e_.useState)(!1),{user:i}=(0,eT.aF)(),a=e.sort((e,t)=>null===e.model&&null!==t.model?-1:null!==e.model&&null===t.model?1:0),l=!!(null==i?void 0:i._id);return(0,e_.useEffect)(()=>{if(l&&!t){if(r){(0===a.length||null!==a[0].model)&&n();return}o(!0)}},[t,r,a,n,l]),null},IssueTalkFeatureFlagContainer=e=>{let{children:t}=e,{flag:n,loading:r}=(0,eR.T6)("fe-web-chatHome-issueTalk"),o=!r&&n;return null==t?void 0:t({opened:o})};var eL=n(43938),eF=n(53261);let getChatBanners=()=>ek.Np.BE.get((0,ey.stringifyQueryParams)("/api/v2/chat-banners",{platform:(0,eg.Xf)()})),getTrend=async()=>await ek.Np.TREND.get("/v1/trend"),useGetTrend=()=>(0,eI.dH)("/v1/trend",async()=>(await getTrend()).data,{refreshInterval:15e3,refreshWhenHidden:!0,revalidateOnFocus:!1}),getIssueTalkPosts=async e=>await ek.Np.William.get("/issue-talk/articles",e),getIssueTalkPostsKey=(e,t)=>{let n="/issue-talk/articles";return 0===e?[n,String(e)]:t?[n,String(e),t.nextCursor]:null},useInfiniteIssueTalkPosts=()=>{let{data:e,size:t,setSize:n,isLoading:r,isValidating:o,mutate:i}=(0,eI.g_)((e,t)=>getIssueTalkPostsKey(e,t),async e=>await getIssueTalkPosts({params:{...e?{cursorId:e[2]}:{}}}),{fallback:[]});return{data:e,size:t,setSize:n,isLoading:r,isValidating:o,mutate:i}},postVoteIssueTalk=async e=>{let{articleId:t,choiceId:n,voteId:r}=e;return await ek.Np.William.post("/issue-talk/articles/".concat(t),{choiceId:n,voteId:r})},useVoteIssueTalk=e=>(0,eI._5)("/issue-talk/articles/".concat(e),async function(t,n){let{arg:r}=n,{choiceId:o,voteId:i}=r;return await postVoteIssueTalk({articleId:e,choiceId:o,voteId:i})}),getPost=async e=>{let{postId:t}=e;return await ek.Np.William.get("/issue-talk/articles/".concat(t))},usePost=e=>{let{postId:t}=e;return(0,eI.dH)("/issue-talk/articles/".concat(t),()=>getPost({postId:t}))},useFlattenPosts=()=>{var e;let{data:t,setSize:n,isLoading:r,isValidating:o}=useInfiniteIssueTalkPosts(),i=(null==t?void 0:t.flatMap(e=>e.list))||[],a=(null==t?void 0:null===(e=t[t.length-1])||void 0===e?void 0:e.nextCursor)||!1,l=(0,eg.dg)(e=>{e.isIntersecting&&a&&!r&&!o&&n(e=>e+1)});return{posts:i,isValidating:o,refreshRef:l}},useHandleClickScrollButton=()=>{let{trackEvent:e}=(0,ev.Ke)(),{variant:t}=(0,eL.Zp)(),{variant:n}=(0,eL.kY)();return{handleClickScrollButton:r=>{e("click_post_next_btn",{issue_talk_abtest_group:t,issue_talk_top_spacer_abtest_group:n,direction:r})}}},useHoverIssueTalkList=()=>{let[e,t]=(0,e_.useState)(!1),[n,r]=(0,e_.useState)(null),{trackEvent:o}=(0,ev.Ke)(),{variant:i}=(0,eL.Zp)(),{variant:a}=(0,eL.kY)();return(0,e_.useEffect)(()=>()=>{n&&clearTimeout(n)},[n]),{scheduleEvent:()=>{if(e||n)return;let l=setTimeout(()=>{o("hover_home_issue_talk_list",{issue_talk_abtest_group:i,issue_talk_top_spacer_abtest_group:a}),t(!0)},2e3);r(l)},cancelEvent:()=>{n&&(clearTimeout(n),r(null))}}};var eP=n(77837),eU=n.n(eP);function CarouselScrollButton_templateObject(){let e=(0,ep._)(["\n          background: ",";\n        "]);return CarouselScrollButton_templateObject=function(){return e},e}function CarouselScrollButton_templateObject1(){let e=(0,ep._)(["\n          transform: translateY(-50%);\n\n          &:hover {\n            background-color: ",";\n          }\n        "]);return CarouselScrollButton_templateObject1=function(){return e},e}let CarouselScrollButton=e=>{let{onClick:t,direction:n,width:r="91px",height:o="100%"}=e,i="left"===n?"90deg":"270deg";return(0,eu.tZ)(eh.xu,{width:r,height:o,position:"absolute",top:"0",right:"right"===n?"-1px":void 0,left:"left"===n?"-1px":void 0,zIndex:2,css:e=>(0,em.iv)(CarouselScrollButton_templateObject(),"dark"===e.mode?"linear-gradient(".concat(i,", #1A1918 0%, rgba(26, 25, 24, 0.00) 100%)"):"linear-gradient(".concat(i,", #FFF 0%, rgba(255, 255, 255, 0.00) 100%)")),children:(0,eu.tZ)(eh.zx,{position:"absolute",right:"right"===n?"0":void 0,left:"left"===n?"0":void 0,top:"50%",borderRadius:"50%",width:"36px",height:"36px",display:"flex",justifyContent:"center",alignItems:"center",onClick:()=>null==t?void 0:t(),backgroundColor:"$color_surface_secondary",zIndex:3,css:e=>(0,em.iv)(CarouselScrollButton_templateObject1(),(0,eh.JH)({theme:e,overlayColor:"$color_surface_hover",backgroundColor:"$color_surface_elevated"})),children:(0,eu.tZ)(e$.JO,{as:"left"===n?eS.k9_:eS.xMl,size:24,color:"$color_icon_secondary"})})})};function CarouselContainer_templateObject(){let e=(0,ep._)(["\n          -ms-overflow-style: none; /* IE and Edge */\n          scrollbar-width: none; /* Firefox */\n\n          ::-webkit-scrollbar {\n            display: none; /* Chrome, Safari, Opera*/\n          }\n        "]);return CarouselContainer_templateObject=function(){return e},e}let CarouselContainer=e=>{var t;let{renderContent:n,onClickScrollButton:r,isCharacterCarousel:o=!0,pixelMoveAmount:i=350,...a}=e,l=(0,e_.useRef)(null),[c,d]=(0,e_.useState)(!1),[s,u]=(0,e_.useState)(!0),{trackEvent:p}=(0,ev.Ke)(),handleScroll=()=>{if(!l.current)return;let e=l.current.scrollLeft>0,t=l.current.scrollLeft+l.current.clientWidth<l.current.scrollWidth;d(e),u(t)},handleScrollFactory=e=>{var t;let n="left"===e?-1*i:i;null===(t=l.current)||void 0===t||t.scrollBy({left:n,behavior:"smooth"}),handleScroll(),null==r||r(e)};return(0,e_.useEffect)(()=>{let e=eU()(()=>{l.current&&handleScroll()},50);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[l,null==l?void 0:null===(t=l.current)||void 0===t?void 0:t.clientWidth]),(0,e_.useEffect)(()=>{handleScroll()},[l,n]),(0,eu.BX)(eh.xu,{width:"100%",position:"relative",children:[!eg.P8&&c&&(0,eu.tZ)(CarouselScrollButton,{direction:"left",onClick:()=>{handleScrollFactory("left"),o&&p("click_next_btn",{section_name:"캐릭터 AI",section_order:4})},width:"91px"}),(0,eu.tZ)(eh.Ug,{width:"100%",overflowX:"scroll",overflowY:"hidden",ref:l,css:(0,em.iv)(CarouselContainer_templateObject()),onScroll:handleScroll,...a,children:n()}),!eg.P8&&s&&(0,eu.tZ)(CarouselScrollButton,{direction:"right",onClick:()=>{handleScrollFactory("right"),o&&p("click_next_btn",{section_name:"캐릭터 AI",section_order:4})},width:"91px"})]})};var eD=n(70153),eX=n(53423);function BaseButton_templateObject(){let e=(0,ep._)(["\n        border-top: 2px solid currentcolor;\n        border-right: 2px solid currentcolor;\n        border-bottom-width: 2px;\n        border-left-width: 2px;\n        border-bottom-color: transparent;\n        border-left-color: transparent;\n        color: currentcolor;\n\n        animation: 0.75s linear 0s infinite normal none running spin;\n        @keyframes spin {\n          0% {\n            transform: rotate(0deg);\n          }\n          100% {\n            transform: rotate(360deg);\n          }\n        }\n      "]);return BaseButton_templateObject=function(){return e},e}function BaseButton_templateObject1(){let e=(0,ep._)(["\n        cursor: ",";\n      "]);return BaseButton_templateObject1=function(){return e},e}function BaseButton_templateObject2(){let e=(0,ep._)(["\n          transform: translate(-50%, -50%);\n        "]);return BaseButton_templateObject2=function(){return e},e}function _templateObject3(){let e=(0,ep._)(["\n          visibility: ",";\n        "]);return _templateObject3=function(){return e},e}let Loader=()=>(0,eu.tZ)(eh.xu,{mt:"3px",display:"inline-block",width:"13px",height:"14px",borderRadius:"100%",borderBottomStyle:"solid",borderLeftStyle:"solid",css:()=>(0,em.iv)(BaseButton_templateObject())}),BaseButton=e=>{let{onClick:t,children:n,disabled:r,pending:o,...i}=e;return(0,eu.BX)(eh.zx,{onClick:t,position:"relative",css:(0,em.iv)(BaseButton_templateObject1(),o||r?"default":"pointer"),...i,children:[(0,eu.tZ)(eh.xu,{display:o?"block":"none",position:"absolute",top:"50%",left:"50%",css:(0,em.iv)(BaseButton_templateObject2()),children:(0,eu.tZ)(Loader,{})}),(0,eu.tZ)(eh.xu,{css:(0,em.iv)(_templateObject3(),o?"hidden":"visible"),children:n})]})},VoteButton=e=>{let{onClick:t,active:n,pending:r}=e,handleClick=async()=>{!r&&n&&t()};return(0,eu.tZ)(BaseButton,{disabled:!n,onClick:handleClick,pending:r,bg:"$color_bg_screen",borderRadius:"31px",border:"1px solid",borderColor:n&&!r?"$color_action_blue_primary":"$color_outline_secondary",width:"fit-content",p:"14px 24px",typo:"$100-16-med",color:n&&!r?"$color_action_blue_primary":"$color_text_tertiary",children:"투표하기"})};var eJ=n(92288),ez=n.n(eJ);let ResultButton=e=>{let{_id:t,onClick:n}=e;return(0,eu.tZ)(ez(),{href:"/issue/posts/".concat(t,"?position=view_result#vote_anchor"),onClick:n,children:(0,eu.tZ)(eh.zx,{bg:"$color_bg_screen",borderRadius:"31px",border:"1px solid",borderColor:"$color_outline_primary",width:"fit-content",p:"14px 24px",color:"$color_text_primary",children:"결과보기"})})},Card=e=>{let{_id:t,thumbnail:n,topic:r,voteCount:o,commentCount:i,onClick:a}=e;return(0,eu.tZ)(ez(),{href:"/issue/posts/".concat(t,"?position=post_thumbnail"),style:{width:"100%"},onClick:a,children:(0,eu.BX)(eh.gC,{width:"100%",height:"224px",bg:"$color_bg_elevated_primary",borderRadius:"8px",boxShadow:"0px 2px 10px 0px rgba(0, 0, 0, 0.10)",children:[(0,eu.tZ)(eh.xu,{width:"100%",height:"100px",minHeight:"100px",borderRadius:"8px 8px 0px 0px",children:(0,eu.tZ)(eE(),{src:n,width:330,height:100,sizes:"330px",layout:"fixed",alt:"thumbnail",priority:!0,style:{objectFit:"cover",borderRadius:"inherit",width:"100%",height:"100%"}})}),(0,eu.BX)(eh.gC,{p:"16px",justifyContent:"space-between",height:"100%",children:[(0,eu.tZ)(eh.Jd,{typo:"$160-16-semi",color:"$color_text_primary",children:r}),(0,eu.BX)(eh.Ug,{width:"100%",justifyContent:"space-between",children:[(0,eu.BX)(eh.Ug,{gap:"4px",p:"5px 11px",borderRadius:"4px",bg:"$color_surface_secondary",alignItems:"center",children:[(0,eu.tZ)(e$.JO,{as:eS.SB_,size:16,color:"$color_icon_secondary"}),(0,eu.BX)(eh.Jd,{typo:"$100-12-med",color:"$color_text_secondary",children:[o.toLocaleString(),"명이 투표"]})]}),(0,eu.BX)(eh.Ug,{gap:"4px",alignItems:"center",children:[(0,eu.tZ)(e$.JO,{as:eS.MQJ,size:16,color:"$color_icon_secondary"}),(0,eu.tZ)(eh.Jd,{typo:"$100-12-med",color:"$color_text_secondary",children:i})]})]})]})]})})},ChoiceLabel=e=>{let{type:t}=e;return(0,eu.tZ)(eh.xu,{p:"7px 12px",bg:"A"===t?"$color_text_accent_bg_red":"$color_text_accent_bg_blue",borderRadius:"18px",width:"fit-content",minWidth:"fit-content",children:(0,eu.BX)(eh.Jd,{typo:"$100-12-semi",color:"$color_text_ivory",children:["의견 ",t]})})};function ChoiceListItem_templateObject(){let e=(0,ep._)(["\n        cursor: pointer;\n      "]);return ChoiceListItem_templateObject=function(){return e},e}let ChoiceListItem=e=>{let{type:t,choice:n,onClick:r,selected:o,unselected:i}=e,{variant:a}=(0,eL._O)();return(0,eu.BX)(eh.gC,{gap:"8px",p:"12px",borderRadius:"8px",bg:"$color_bg_elevated_secondary",css:(0,em.iv)(ChoiceListItem_templateObject()),onClick:r,opacity:i?.5:1,border:o?"1px solid ".concat("A"===t?"var(--color_outline_accent_red)":"var(--color_outline_accent_blue)"):"none",children:["A"===a&&(0,eu.tZ)(ChoiceLabel,{type:t}),(0,eu.tZ)(eh.Jd,{typo:"$160-14-med",color:"$color_text_primary",children:n.content})]})},ChoiceList=e=>{let{choices:t,vote:n,onClickChoice:r,currentSelected:o}=e;return(0,eu.tZ)(eh.gC,{width:"100%",gap:"16px",children:t.map((e,t)=>(0,eu.tZ)(ChoiceListItem,{type:0===t?"A":"B",choice:e,onClick:()=>r(e._id,t+1),selected:!o&&(null==n?void 0:n.choiceId)===e._id||o===e._id,unselected:null!==o&&o!==e._id},e._id))})},IssueTalkListItem=e=>{var t;let{post:n,index:r}=e,[o,i]=(0,e_.useState)(null),[a,l]=(0,e_.useState)(!1),{trigger:c}=useVoteIssueTalk(n._id),{handleOpenLoginDialog:d}=(0,eX.tF)(),{user:s}=(0,eT.aF)(),{mutate:u}=useInfiniteIssueTalkPosts(),{mutate:p}=usePost({postId:n._id}),{variant:_,loading:m}=(0,eL.Zp)(),{variant:h,loading:g}=(0,eL.kY)(),{variant:v,loading:f}=(0,eL._O)(),{variant:x,loading:b}=(0,eL.Ul)(),{trackEvent:C}=(0,ev.Ke)();(0,e_.useEffect)(()=>{g||m||f||b||C("expose_post",{post_id:n._id,post_index:r,issue_talk_abtest_group:_,issue_talk_top_spacer_abtest_group:h,issue_talk_reduce_ui_abtest_group:v,issue_talk_grid_abtest_group:x})},[m,g,f,b]);let{push:y}=(0,eO.useRouter)(),handleNavigateToPost=()=>{y("/issue/posts/".concat(n._id,"?position=view_result#vote_anchor"))},handleVote=async e=>{var t,r;if(e){if(!s){d();return}l(!0),await c({choiceId:e,voteId:null!==(r=null===(t=n.vote)||void 0===t?void 0:t._id)&&void 0!==r?r:null},{onSuccess:async()=>{await p(),await u(),l(!1),"B"===v&&handleNavigateToPost()},onError:()=>{l(!1)}})}},handleClickPostLink=e=>{C("click_view_post_btn",{post_id:n._id,post_index:r,issue_talk_abtest_group:_,issue_talk_top_spacer_abtest_group:h,issue_talk_reduce_ui_abtest_group:v,issue_talk_grid_abtest_group:x,btn_type:e})},handleClickVoteButton=async()=>{C("click_vote_post_btn",{post_id:n._id,post_index:r,issue_talk_abtest_group:_,issue_talk_top_spacer_abtest_group:h,issue_talk_reduce_ui_abtest_group:v,issue_talk_grid_abtest_group:x,vote_option:n.choices.findIndex(e=>e._id===o)+1}),handleVote(o)};return(0,eu.BX)(eh.gC,{width:"364px",borderRadius:"16px",bg:"$color_bg_screen",border:"1px solid var(--color_outline_tertiary)",p:"16px",gap:"16px",alignItems:"center",children:[(0,eu.tZ)(Card,{_id:n._id,thumbnail:n.thumbnail,topic:n.topic,voteCount:n.voteCount,commentCount:n.commentCount,onClick:()=>handleClickPostLink("post_thumbnail")}),(0,eu.tZ)(ChoiceList,{currentSelected:"B"===v?null:o,onClickChoice:(e,t)=>{var o;C("click_post_poll_btn",{post_id:n._id,post_index:r,issue_talk_abtest_group:_,issue_talk_top_spacer_abtest_group:h,issue_talk_reduce_ui_abtest_group:v,issue_talk_grid_abtest_group:x,option_number:t}),"A"===v?i(e):(null===(o=n.vote)||void 0===o?void 0:o.choiceId)!==e?handleVote(e):handleNavigateToPost()},choices:n.choices,vote:n.vote}),"A"===v&&(0,eu.BX)(eh.Ug,{gap:"8px",children:[(0,eu.tZ)(VoteButton,{active:!!o&&o!==(null===(t=n.vote)||void 0===t?void 0:t.choiceId),onClick:handleClickVoteButton,pending:a}),(0,eu.tZ)(ResultButton,{_id:n._id,onClick:()=>handleClickPostLink("view_result")})]})]})},IssueTalkCarouselList=()=>{let{posts:e,refreshRef:t,isValidating:n}=useFlattenPosts(),{handleClickScrollButton:r}=useHandleClickScrollButton();return(0,eu.tZ)(CarouselContainer,{pixelMoveAmount:377,renderContent:()=>(0,eu.BX)(eh.Ug,{alignItems:"center",children:[(0,eu.tZ)(eh.Ug,{gap:"12px",children:e.map((e,t)=>(0,eu.tZ)(IssueTalkListItem,{post:e,index:t+1},e._id))}),n?(0,eu.tZ)(eh.gC,{width:"100%",height:"50px",justifyContent:"center",pl:"12px",children:(0,eu.tZ)(eD.$j,{})}):(0,eu.tZ)(eh.xu,{width:"1px",height:"1px",ref:t})]}),onClickScrollButton:r})};function IssueTalkGridList_templateObject(){let e=(0,ep._)(["\n            grid-column: 1 / -1;\n          "]);return IssueTalkGridList_templateObject=function(){return e},e}let IssueTalkGridList=()=>{let{posts:e,refreshRef:t,isValidating:n}=useFlattenPosts();return(0,eu.BX)(eh.rj,{width:"100%",gap:"12px",gridTemplateColumns:"repeat(2, 1fr)",children:[e.map((e,t)=>(0,eu.tZ)(IssueTalkListItem,{post:e,index:t+1},e._id)),n?(0,eu.tZ)(eh.gC,{width:"100%",height:"50px",justifyContent:"center",pl:"12px",css:(0,em.iv)(IssueTalkGridList_templateObject()),children:(0,eu.tZ)(eD.$j,{})}):(0,eu.tZ)(eh.xu,{width:"1px",height:"1px",ref:t})]})};function _extends(){return(_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var Infographic_chatting=function(e){return e_.createElement("svg",_extends({xmlns:"http://www.w3.org/2000/svg",width:30,height:30,fill:"none"},e),r||(r=e_.createElement("path",{fill:"url(#Infographic_chatting_svg__a)",fillRule:"evenodd",d:"M18.786 2.935a8.67 8.67 0 0 1 7.364 13.25l1.6 5.992-6.557-2.24a8.7 8.7 0 0 1-2.407.339h-3.233a8.67 8.67 0 0 1 0-17.341z",clipRule:"evenodd"})),o||(o=e_.createElement("path",{fill:"url(#Infographic_chatting_svg__b)",fillRule:"evenodd",d:"M18.786 2.935a8.67 8.67 0 0 1 7.364 13.25l1.6 5.992-6.557-2.24a8.7 8.7 0 0 1-2.407.339h-3.233a8.67 8.67 0 0 1 0-17.341z",clipRule:"evenodd"})),i||(i=e_.createElement("path",{fill:"url(#Infographic_chatting_svg__c)",fillRule:"evenodd",d:"M11.444 7.57a9.119 9.119 0 0 0-7.582 14.188L2.4 28.049l6.644-2.56a9.1 9.1 0 0 0 2.4.32h3.4a9.119 9.119 0 1 0 0-18.239z",clipRule:"evenodd"})),a||(a=e_.createElement("path",{stroke:"#636DBD",strokeWidth:.9,d:"M9.125 25.03c.75.205 1.541.315 2.358.315h3.264c4.834 0 8.753-3.85 8.753-8.601 0-4.75-3.4-7.473-5.874-8.246"})),e_.createElement("g",{filter:"url(#Infographic_chatting_svg__d)",style:{mixBlendMode:"multiply"}},l||(l=e_.createElement("path",{fill:"#fff",d:"M18.216 13.753H7.884c-.253 0-.459.162-.459.362v1.676c0 .2.206.362.46.362h10.331c.254 0 .46-.162.46-.362v-1.676c0-.2-.206-.362-.46-.362"}))),e_.createElement("g",{filter:"url(#Infographic_chatting_svg__e)",style:{mixBlendMode:"multiply"}},c||(c=e_.createElement("path",{fill:"#fff",d:"M13.694 17.953H7.692c-.147 0-.267.158-.267.352v1.628c0 .195.12.352.267.352h6.002c.147 0 .266-.157.266-.352v-1.628c0-.194-.12-.352-.266-.352"}))),d||(d=e_.createElement("defs",null,e_.createElement("linearGradient",{id:"Infographic_chatting_svg__a",x1:19.328,x2:20.043,y1:6.608,y2:3.079,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#8894FF"}),e_.createElement("stop",{offset:1,stopColor:"#A2ADFF"})),e_.createElement("linearGradient",{id:"Infographic_chatting_svg__b",x1:25.509,x2:10.671,y1:19.472,y2:2.162,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#636DBD"}),e_.createElement("stop",{offset:.49,stopColor:"#636DBD",stopOpacity:0})),e_.createElement("linearGradient",{id:"Infographic_chatting_svg__c",x1:17.626,x2:4.628,y1:24.597,y2:11.829,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#8894FF"}),e_.createElement("stop",{offset:1,stopColor:"#A2ADFF"})),e_.createElement("filter",{id:"Infographic_chatting_svg__d",width:11.547,height:2.994,x:7.425,y:13.753,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},e_.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),e_.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),e_.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),e_.createElement("feOffset",{dx:.297,dy:.594}),e_.createElement("feGaussianBlur",{stdDeviation:1}),e_.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),e_.createElement("feColorMatrix",{values:"0 0 0 0 0.388235 0 0 0 0 0.427451 0 0 0 0 0.741176 0 0 0 1 0"}),e_.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow_4116_48344"})),e_.createElement("filter",{id:"Infographic_chatting_svg__e",width:6.832,height:2.926,x:7.425,y:17.953,colorInterpolationFilters:"sRGB",filterUnits:"userSpaceOnUse"},e_.createElement("feFlood",{floodOpacity:0,result:"BackgroundImageFix"}),e_.createElement("feBlend",{in:"SourceGraphic",in2:"BackgroundImageFix",result:"shape"}),e_.createElement("feColorMatrix",{in:"SourceAlpha",result:"hardAlpha",values:"0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0"}),e_.createElement("feOffset",{dx:.297,dy:.594}),e_.createElement("feGaussianBlur",{stdDeviation:1}),e_.createElement("feComposite",{in2:"hardAlpha",k2:-1,k3:1,operator:"arithmetic"}),e_.createElement("feColorMatrix",{values:"0 0 0 0 0.388235 0 0 0 0 0.427451 0 0 0 0 0.741176 0 0 0 1 0"}),e_.createElement("feBlend",{in2:"shape",result:"effect1_innerShadow_4116_48344"})))))};let IssueTalkList=e=>{let{selectedModel:t}=e,{id:n}=(0,eF.Jv)(),{id:r}=(0,eF.Ob)(),{variant:o,loading:i}=(0,eL.Ul)(),{cancelEvent:a,scheduleEvent:l}=useHoverIssueTalkList();return(null==t?void 0:t._id)!==n&&(null==t?void 0:t._id)!==r||i?null:(0,eu.BX)(eh.gC,{width:"100%",onMouseEnter:l,onMouseLeave:a,children:[(0,eu.tZ)(eh.xu,{height:"20px"}),(0,eu.BX)(eh.Ug,{gap:"8px",alignItems:"center",children:[(0,eu.tZ)(Infographic_chatting,{}),(0,eu.tZ)(eh.Jd,{typo:"$100-20-semi",color:"$color_text_primary",children:"이슈 토크"})]}),(0,eu.tZ)(eh.xu,{height:"12px"}),"B"===o?(0,eu.tZ)(IssueTalkGridList,{}):(0,eu.tZ)(IssueTalkCarouselList,{})]})};var eN=n(50158),eH=n(12373),eG=n(98511);let ErrorIcon=()=>(0,eu.tZ)(eh.kC,{width:"30px",height:"30px",backgroundColor:"$color_surface_tertiary",borderRadius:"100%",alignItems:"center",justifyContent:"center",children:(0,eu.tZ)(e$.JO,{as:eS.aq6,size:16,color:"$color_alert_warning"})});function LoadingIcon_templateObject(){let e=(0,ep._)(["\n          animation: "," 1s linear infinite;\n        "]);return LoadingIcon_templateObject=function(){return e},e}function LoadingIcon_templateObject1(){let e=(0,ep._)(["\n    0% {\n        transform: rotate(0deg);\n    }\n    100% {\n        transform: rotate(360deg);\n    }\n"]);return LoadingIcon_templateObject1=function(){return e},e}let LoadingIcon=()=>(0,eu.tZ)(eh.kC,{width:"30px",height:"30px",backgroundColor:"$color_outline_secondary",borderRadius:"100%",alignItems:"center",justifyContent:"center",children:(0,eu.tZ)(eh.xu,{css:(0,em.iv)(LoadingIcon_templateObject(),eW),width:"18px",height:"18px",children:(0,eu.tZ)("svg",{width:"14",height:"17",viewBox:"0 0 14 17",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,eu.tZ)("path",{d:"M4.99852 15.9287C1.17217 13.7195 -0.138827 8.82681 2.07031 5.00047C4.27945 1.17413 9.17217 -0.136873 12.9985 2.07227",stroke:"white",strokeWidth:"2"})})})}),eW=(0,em.F4)(LoadingIcon_templateObject1());function RemoveButton_templateObject(){let e=(0,ep._)(["\n      cursor: pointer;\n    "]);return RemoveButton_templateObject=function(){return e},e}let RemoveButton=e=>{let{onClick:t,isError:n=!1}=e;return(0,eu.tZ)(eh.gC,{className:"remove-button",position:"absolute",top:"-10px",right:"-10px",width:"20px",height:"20px",borderRadius:"100%",backgroundColor:n?"$color_alert_error":"$color_icon_quaternary",zIndex:"1",onClick:e=>{t(),e.stopPropagation()},justifyContent:"center",alignItems:"center",css:(0,em.iv)(RemoveButton_templateObject()),children:(0,eu.tZ)(e$.JO,{as:eS.S5X,width:14,height:14,color:"$color_icon_white"})})};function FileItem_templateObject(){let e=(0,ep._)(["\n        cursor: ",";\n\n        :hover {\n          background-color: ",";\n        }\n\n        :hover .remove-button {\n          display: flex;\n        }\n\n        .remove-button {\n          display: ",";\n        }\n      "]);return FileItem_templateObject=function(){return e},e}function FileItem_templateObject1(){let e=(0,ep._)(["\n                white-space: nowrap;\n                overflow: hidden;\n                text-overflow: ellipsis;\n              "]);return FileItem_templateObject1=function(){return e},e}function FileItem_templateObject2(){let e=(0,ep._)(["\n                  white-space: nowrap;\n                  overflow: hidden;\n                  text-overflow: ellipsis;\n                "]);return FileItem_templateObject2=function(){return e},e}let FileItem=e=>{let{item:t,index:n,eventProperties:r,isDeletable:o=!1}=e,i="loading"===t.status||"analyzing"===t.status,a="error"===t.status,l="success"===t.status,c="success"===t.status,d=(0,ef.T_)(),s=(0,eG.Zl)(eH.u3),{getChatIdFromPath:u}=(0,eL.dt)(),p=u(),{trackEvent:_}=(0,ev.Ke)(),m={index:n,type:"file",_id:t._id,url:t.url},openLink=()=>{t.url&&(_("click_reference_box",{...r,...m}),window.open(t.url,"_blank","noopener,noreferrer"))};return(0,e_.useEffect)(()=>{a&&_("expose_failed_file_box",{index:n,file_id:t._id,file_name:t.title,fail_reason:t.errorReason,chat_id:p})},[t.status]),(0,eu.BX)(eh.gC,{onClick:()=>c&&openLink(),onMouseEnter:()=>{_("hover_reference_box",{...r,...m})},position:"relative",backgroundColor:"$color_surface_elevated",width:"196px",height:"60px",borderRadius:"8px",border:"1px solid",borderColor:"error"===t.status?"$color_alert_warning":"$color_outline_tertiary",padding:"15px 12px",css:e=>{var t,n;return(0,em.iv)(FileItem_templateObject(),c?"pointer":"inherit",c?null===(t=e.colors)||void 0===t?void 0:t.$color_surface_quaternary_hover:null===(n=e.colors)||void 0===n?void 0:n.$color_surface_elevated,a?"flex":"none")},children:[o&&(0,eu.tZ)(RemoveButton,{onClick:()=>{s(e=>e.filter((e,t)=>t!==n)),_("click_reference_box_delete_btn",{...r,...m})},isError:a}),(0,eu.BX)(eh.Ug,{gap:"8px",width:"100%",children:[i&&(0,eu.tZ)(LoadingIcon,{}),a&&(0,eu.tZ)(ErrorIcon,{}),l&&(0,eu.tZ)(eh.kC,{width:"30px",height:"30px",backgroundColor:"$color_outline_accent_red",borderRadius:"100%",alignItems:"center",justifyContent:"center",children:(0,eu.tZ)(e$.JO,{as:eS.qTh,size:16,color:"$color_icon_ivory"})}),(0,eu.BX)(eh.gC,{justifyContent:"center",width:"132px",gap:"6px",children:[a&&(0,eu.tZ)(eh.Jd,{typo:"$100-12-med",color:"$color_text_primary",css:(0,em.iv)(FileItem_templateObject1()),children:d("chat.ui_attachment.cannot_read_link")}),i&&(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(eC.Od,{width:"100%"}),(0,eu.tZ)(eC.Od,{width:"50px"})]}),l&&(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(eh.Jd,{typo:"$100-12-med",color:"$color_text_primary",css:(0,em.iv)(FileItem_templateObject2()),children:t.title}),(0,eu.tZ)(eh.Jd,{typo:"$100-10-semi",color:"$color_text_quaternary",children:t.extension.toUpperCase()})]})]})]})]})};function ImageItem_templateObject(){let e=(0,ep._)(["\n        cursor: pointer;\n        &:hover .remove-button {\n          display: flex;\n        }\n        .remove-button {\n          display: none;\n        }\n      "]);return ImageItem_templateObject=function(){return e},e}let ImageItem=e=>{let{item:t,index:n,eventProperties:r,isDeletable:o=!1}=e,i="loading"===t.status,a="success"===t.status,l=(0,eG.Zl)(eH.u3),{trackEvent:c}=(0,ev.Ke)(),d={index:n,type:"image",url:t.url},openUrl=()=>{t.url&&(c("click_reference_box",{...r,...d}),window.open(t.url,"_blank","noopener,noreferrer"))};return(0,eu.BX)(eh.gC,{onClick:()=>a&&openUrl(),onMouseEnter:()=>{c("hover_reference_box",{...r,...d})},position:"relative",width:"60px",height:"60px",borderRadius:"8px",border:"1px solid",borderColor:"$color_outline_tertiary",css:(0,em.iv)(ImageItem_templateObject()),children:[o&&(0,eu.tZ)(RemoveButton,{onClick:()=>{l(e=>e.filter((e,t)=>t!==n)),c("click_reference_box_delete_btn",{...r,...d})}}),i&&(0,eu.tZ)(eC.Od,{borderRadius:"8px"}),!i&&(0,eu.tZ)("img",{alt:t.url,src:t.url,width:"100%",height:"100%",style:{borderRadius:5}})]})};var eK=n(19250);function LinkItem_templateObject(){let e=(0,ep._)(["\n        cursor: ",";\n\n        :hover {\n          background-color: ",";\n        }\n\n        :hover .remove-button {\n          display: flex;\n        }\n        .remove-button {\n          display: ",";\n        }\n      "]);return LinkItem_templateObject=function(){return e},e}function LinkItem_templateObject1(){let e=(0,ep._)(["\n                white-space: nowrap;\n                overflow: hidden;\n                text-overflow: ellipsis;\n              "]);return LinkItem_templateObject1=function(){return e},e}function LinkItem_templateObject2(){let e=(0,ep._)(["\n                  white-space: nowrap;\n                  overflow: hidden;\n                  text-overflow: ellipsis;\n                "]);return LinkItem_templateObject2=function(){return e},e}function LinkItem_templateObject3(){let e=(0,ep._)(["\n                  white-space: nowrap;\n                  overflow: hidden;\n                  text-overflow: ellipsis;\n                "]);return LinkItem_templateObject3=function(){return e},e}let LinkItem=e=>{var t;let{item:n,index:r,eventProperties:o,setInput:i,isDeletable:a=!1}=e,{url:l,title:c,favicon:d,status:s,_id:u,errorReason:p}=n,_=(null===(t=l.match(/https?:\/\/([^/]+)/))||void 0===t?void 0:t[1])||l,m=(0,ef.T_)(),h=(0,eG.Zl)(eH.DY),[g,v]=(0,e_.useState)(null),[f,x]=(0,eG.FV)(eH.u3),{trigger:b}=(0,eK.y5)(),{trigger:C}=(0,eK.fw)(),{updateAttachment:y}=(0,eK.sH)(),{getChatIdFromPath:k}=(0,eL.dt)(),w=k(),{trackEvent:Z}=(0,ev.Ke)(),I={index:r,type:"link",url:n.url},O="success"===s,openUrl=()=>{n.url&&(Z("click_reference_box",{...o,...I}),window.open(n.url,"_blank","noopener,noreferrer"))},applyMetadata=async()=>{try{let e=await b({url:l});e&&(y(u,{title:""===e.title?l:e.title,favicon:e.favicon,url:e.url,status:"analyzing"}),v(null))}catch(n){var e,t;y(u,{url:l,title:"",favicon:"",status:"error",errorReason:(0,ek.IZ)(n)?null===(e=n.response)||void 0===e?void 0:e.data.message:"unknown"}),v(m("feature_assignment.form.fileAttachment.link.unreadable")),Z("upload_link_fail",{url:l,index:r,error_status:(0,ek.IZ)(n)?null===(t=n.response)||void 0===t?void 0:t.data.message:"unknown",chat_id:w})}},requestAnalysis=async()=>{try{let e=await C({url:l,title:c,favicon:d,chatId:w||void 0});h(t=>({...t,[l]:e._id})),y(u,{status:"success"}),Z("upload_link_done",{url:l,index:r,chat_id:w}),v(null)}catch(n){var e,t;y(u,{status:"error",errorReason:(0,ek.IZ)(n)?null===(e=n.response)||void 0===e?void 0:e.data.message:"unknown"}),v(m("chat.ui_attachment.error.cannot_read_link")),Z("upload_link_fail",{url:l,index:r,error_status:(0,ek.IZ)(n)?null===(t=n.response)||void 0===t?void 0:t.data.message:"unknown"})}};return(0,e_.useEffect)(()=>{"loading"===s&&(applyMetadata(),Z("expose_link_loading",{url:l,index:r,chat_id:w})),"analyzing"===s&&requestAnalysis(),"error"===s&&Z("expose_failed_link_box",{url:l,index:r,error_status:p,chat_id:w})},[l,s]),(0,eu.BX)(eh.gC,{onClick:()=>O&&openUrl(),onMouseEnter:()=>{Z("hover_reference_box",{...o,...I})},position:"relative",backgroundColor:"$color_surface_elevated",width:"196px",height:"60px",borderRadius:"8px",border:"1px solid",borderColor:"error"===s?"$color_alert_warning":"$color_outline_tertiary",padding:"15px 12px",css:e=>{var t,n;return(0,em.iv)(LinkItem_templateObject(),O?"pointer":"inherit",O?null===(t=e.colors)||void 0===t?void 0:t.$color_surface_quaternary_hover:null===(n=e.colors)||void 0===n?void 0:n.$color_surface_elevated,"error"===s?"flex":"none")},children:[a&&(0,eu.tZ)(RemoveButton,{onClick:()=>{var e;let t=(null===(e=f[r])||void 0===e?void 0:e.url)||"";null==i||i(e=>e.replace(decodeURI(t),"").replace(t,"")),x(e=>e.filter((e,t)=>t!==r)),Z("click_reference_box_delete_btn",{...o,...I})},isError:"error"===s}),(0,eu.BX)(eh.Ug,{gap:"8px",width:"100%",children:[("loading"===s||"analyzing"===s)&&(0,eu.tZ)(LoadingIcon,{}),"error"===s&&!d&&(0,eu.tZ)(ErrorIcon,{}),("error"===s&&d||"success"===s)&&(0,eu.tZ)(eh.kC,{width:"30px",height:"30px",backgroundColor:"$color_surface_tertiary",borderRadius:"100%",alignItems:"center",justifyContent:"center",children:d?(0,eu.tZ)("img",{alt:c,src:d,width:"16px",height:"16px"}):(0,eu.tZ)(e$.JO,{as:eS.kr2,size:16,color:"$color_text_accent_bg_blue"})}),(0,eu.BX)(eh.gC,{justifyContent:"center",width:"132px",gap:"6px",children:["error"===s&&!!g&&(0,eu.tZ)(eh.Jd,{typo:"$100-12-med",color:"$color_text_primary",css:(0,em.iv)(LinkItem_templateObject1()),children:g}),("loading"===s||"analyzing"===s)&&(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(eC.Od,{width:"100%"}),(0,eu.tZ)(eC.Od,{width:"50px"})]}),"success"===s&&(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(eh.Jd,{typo:"$100-12-med",color:"$color_text_primary",css:(0,em.iv)(LinkItem_templateObject2()),children:c}),(0,eu.tZ)(eh.Jd,{typo:"$100-10-semi",color:"$color_text_quaternary",css:(0,em.iv)(LinkItem_templateObject3()),children:_})]})]})]})]})},AttachmentItem=e=>{let{item:t,index:n,eventProperties:r,isDeletable:o=!1,setInput:i}=e;return"file"===t.type?(0,eu.tZ)(FileItem,{index:n,item:t,eventProperties:r,isDeletable:o},t._id):"link"===t.type?(0,eu.tZ)(LinkItem,{index:n,item:t,eventProperties:r,isDeletable:o,setInput:i},t._id):"image"===t.type?(0,eu.tZ)(ImageItem,{item:t,index:n,eventProperties:r,isDeletable:o},t._id):null},AttachmentList=e=>{let{eventProperties:t,setInput:n,marginBottom:r="0"}=e,o=(0,eG.sJ)(eH.u3);return(null==o?void 0:o.length)?(0,eu.tZ)(eh.Ug,{width:"100%",height:"auto",gap:"6px",flexWrap:"wrap",marginBottom:r,children:o.map((e,r)=>(0,eu.tZ)(AttachmentItem,{item:e,index:r,eventProperties:t,isDeletable:!0,setInput:n},e._id))}):null},ChatAttachmentList=e=>{let{eventProperties:t,references:n}=e;return n&&(null==n?void 0:n.length)!==0?(0,eu.tZ)(eh.Ug,{width:"100%",height:"auto",gap:"6px",flexWrap:"wrap",children:n.map((e,n)=>(0,eu.tZ)(AttachmentItem,{item:e,index:n,eventProperties:t},e._id))}):null};var eV=n(51577),eY=n(22933),eq=n(27335),eQ=n(73186),e0=n(45570);let ChatInputState=e=>{let{children:t}=e,n=(0,e0.sJ)(eH.dW),{searchParams:r}=(0,ex.je)(),o=r.get("qi"),[i,a]=(0,e_.useState)(n),{input:l,changeInput:c}=(0,eN.Qc)(),{setItem:d}=(0,eg.Xs)("CHAT_HOME_INPUT_STATE_SESSION_KEY","");return(0,e_.useEffect)(()=>{if(o){a(o);return}l&&(a(l),c(""))},[c,l,o]),(0,eQ.bX)(()=>{d(i)},[i],500),t({input:i,setInput:a,changeInput:e=>{a(e)}})},ChatLinkState=e=>{let{input:t,isDisabled:n,children:r}=e,{flag:o}=(0,eR.T6)("fe-web-chat-link"),i=(0,eG.Zl)(eH.u3),{linkCount:a}=(0,eG.sJ)(eH.h5),{updateAttachmentsWithLinks:l}=(0,eK.nB)({linkLimitExceeded:a>=2}),c=(0,e_.useCallback)(()=>{if(!o||n)return;let e=(0,eK.NH)(t).map(e=>(0,eK.R1)(e));i(t=>{let{newAttachments:n,isUpdated:r}=l(t,e);return r?n:t})},[t,i,l]);return(0,e_.useEffect)(()=>{c()},[t,c]),r};var e1=n(5553),e2=n(50129),e4=n(52708);let ChatTextareaV2=e=>{var t;let{placeholder:n="",value:r,onChange:o,selectedModel:i,padding:a,adEvent:l}=e,{trackEvent:c}=(0,ev.Ke)(),{handleEvent:d}=(0,e1.m)(),{generateAndPushNormalChatRoom:s}=(0,eL.Tt)(),{handleOpenAnonymousDialog:u}=(0,eL.Zr)(i),[p,_]=(0,e_.useState)(!1),{isProMode:m}=(0,eN.M2)(),{changeFocus:h}=(0,eN.Qc)(),g=(0,eG.sJ)(eH.h5),[v,f]=(0,e_.useState)([]),x=(0,e_.useRef)(null),b=(0,ef.bU)();(0,e_.useEffect)(()=>{l&&l.adEventBody&&l.adEventBody.ad_campaign_id&&d("expose_ad_input_keyin",{...l.adEventBody,event_type:"expose"})},[null==l?void 0:null===(t=l.adEventBody)||void 0===t?void 0:t.ad_campaign_id]),(0,e_.useEffect)(()=>{(async()=>{let e=await (0,e4._)(b);f(e)})()},[b]),(0,e_.useEffect)(()=>{x.current&&x.current.focus()},[i]);let makeNewChat=async()=>{let e=u();if(!e||!r||!i)return;_(!0);let t=v.find(e=>e.name===e2.ChatModel.PRO_MODE);s({selectedModel:m&&t?t:i,generateMessage:r,callback:()=>{_(!1)}})};return(0,eu.BX)(eu.HY,{children:[p&&(0,eu.tZ)(eC.fz,{isVisible:p}),(0,eu.tZ)(eV.kb,{ref:x,width:"100%",height:"100%",padding:a,value:r,placeholder:n,onChange:e=>{null==o||o(e.target.value)},onClick:()=>{c("click_chat_input_btn",{model_name:null==i?void 0:i.name.toUpperCase(),feature_menu:"chat",section_order:1,purpose:null==i?void 0:i.displayName})},linkHighlight:m,onKeyPress:e=>{r&&g.success&&("Enter"!==e.key||e.shiftKey||e.preventDefault(),e.metaKey||e.shiftKey||"Enter"!==e.key||!(r.trim().length>0)||(e.preventDefault(),e.stopPropagation(),makeNewChat()))},onFocus:()=>h(!0),onBlur:()=>h(!1),autoFocus:!0})]})};var e3=n(5559),e6=n(14633),e8=n.n(e6);let FastSearchToggle=e=>{let{isFastSearch:t,isDarkMode:n,selectedModel:r,fastSearchABValue:o,onToggleFastSearchMode:i}=e,[a,l]=(0,e_.useState)(!1),{trackEvent:c}=(0,ev.Ke)(),d=(0,ef.T_)(),s=(0,ef.bU)(),u=(0,e_.useCallback)(e8()(()=>{a||(l(!0),c("view_fast_ai_search_tool_tip",{purpose:null==r?void 0:r.displayName,is_fast_ai_search_toggle:t,chathome_fast_ai_search_abtest_group:o}))},1e3),[a,c,r,t]),p=(0,e_.useCallback)(()=>{l(!1)},[]);return s.includes("AE")?null:(0,eu.tZ)(eu.HY,{children:(0,eu.BX)(eh.Ug,{alignItems:"center",justifyContent:"flex-end",width:"140px",gap:"4px",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_text_brand",children:d("chat.feature_home.home.fast_search")}),(0,eu.tZ)(eC.u,{content:d("chat.feature_home.home.tool_tip.fast_search"),position:{top:"-150%",left:"-200%"},children:(0,eu.tZ)(eh.xu,{display:"flex",alignItems:"center",height:"28px",children:(0,eu.tZ)(e3.Z,{toggle:t,shadow:!0,onMouseEnter:u,onMouseLeave:p,onToggle:i,containerData:{width:54,height:28,px:4,py:4,borderRadius:50,bg:{checked:n?"#271511":"$color_surface_accent_red",unchecked:"$palette_gray_gray_150"}},sliderData:{size:20,bg:{checked:"$color_icon_brand",unchecked:"$color_icon_white"}},innerItem:(0,eu.tZ)(e$.JO,{as:e$.BZ,size:16,color:t?"$color_icon_white":"#F72F08"})})})})]})})},GenerateButton=e=>{let{active:t=!1,focus:n=!1,generateMessage:r,selectedModel:o,adContext:i,adEvent:a}=e,{generateAndPushNormalChatRoom:l}=(0,eL.Tt)(),{handleOpenAnonymousDialog:c}=(0,eL.Zr)(o),[d,s]=(0,e_.useState)(!1),u=(null==o?void 0:o.name)===e2.ChatModel.SD3_TURBO,p=[e2.ChatModel.WRTN_SEARCH,e2.ChatModel.WRTN_FAST_SEARCH],_=(null==o?void 0:o.name)!=null&&p.includes(o.name),m=(null==o?void 0:o.name)===e2.ChatModel.PRO_MODE,{mode:h}=(0,eB.TC)(),makeNewChat=async()=>{let e=c();e&&t&&o&&o&&(s(!0),l({selectedModel:o,generateMessage:r,adContext:i,adEvent:a,callback:()=>{s(!1)}}))};return(0,eu.tZ)(eh.zx,{onClick:makeNewChat,children:(0,eu.BX)(eh.xu,{width:"28px",height:"28px",backgroundColor:n&&t||t?m?"#7108F7":"$color_surface_brand":"$color_icon_primary",borderRadius:"16px",display:"flex",alignItems:"center",justifyContent:"center",children:[d&&(0,eu.tZ)(eC.fz,{isVisible:d}),(0,eu.tZ)(e$.JO,{as:u?eS.w6e:_?eS.hsj:eS.lA1,size:u?16:20,color:t?"dark"===h?"$color_text_primary":"$color_surface_ivory":"$color_surface_tertiary"})]})})};function DropdownOpenerWithButton_templateObject(){let e=(0,ep._)(["\n        cursor: ",";\n      "]);return DropdownOpenerWithButton_templateObject=function(){return e},e}function DropdownOpenerWithButton_templateObject1(){let e=(0,ep._)(["\n            :hover {\n              background-color: ",";\n            }\n          "]);return DropdownOpenerWithButton_templateObject1=function(){return e},e}function DropdownOpenerWithButton_templateObject2(){let e=(0,ep._)(["\n                cursor: default;\n              "]);return DropdownOpenerWithButton_templateObject2=function(){return e},e}let DropdownOpenerWithButton=e=>{let{loading:t,selectedModel:n,onClick:r}=e,{trackEvent:o}=(0,ev.Ke)(),[i,a]=(0,e_.useState)(!1),{value:l,setItem:c}=(0,eg.Xs)("CLICKED_MODEL_GUIDE_TOOLTIP_CLOSE",!1),{isProMode:d}=(0,eN.M2)(),s=(0,ef.T_)(),onClickButton=()=>{t||(o("click_purpose_list_btn",{purpose:null==n?void 0:n.name.toUpperCase(),is_pro_mode:d}),r())};return(0,e_.useEffect)(()=>{a(!l)},[l]),(0,eu.tZ)(eh.zx,{onClick:e=>{onClickButton(),e.stopPropagation()},css:(0,em.iv)(DropdownOpenerWithButton_templateObject(),t?"wait":"pointer"),children:(0,eu.BX)(eh.Ug,{gap:"5px",alignItems:"center",height:"100%",children:[(0,eu.tZ)(eh.xu,{width:"60px",height:"60px",backgroundColor:"$color_surface_tertiary",borderRadius:"1000px",display:"flex",alignItems:"center",justifyContent:"center",css:e=>{var t;return(0,em.iv)(DropdownOpenerWithButton_templateObject1(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_secondary)},children:n&&(0,eu.tZ)("img",{src:null==n?void 0:n.displayOptions.icon,width:"30px",height:"30px",alt:"model-icon"})}),(0,eu.tZ)(eC.ag,{position:"top",visible:i,closable:!1,content:(0,eu.BX)(eh.Ug,{gap:"8px",alignItems:"center",css:(0,em.iv)(DropdownOpenerWithButton_templateObject2()),onClick:e=>e.stopPropagation(),children:[(0,eu.tZ)(eh.Jd,{typo:"$100-14-bold",children:s("chat.feature_home.home.tool_tip.model_select")}),(0,eu.tZ)(eh.zx,{width:"16px",height:"16px",onClick:e=>{a(!1),c(!0),o("click_purpose_list_tool_tip_exit_btn",{purpose:null==n?void 0:n.name.toUpperCase(),is_pro_mode:d}),e.stopPropagation()},children:(0,eu.tZ)(e$.JO,{as:eS.S5X,size:16,color:"$color_text_tertiary"})})]}),children:(0,eu.tZ)(eh.gC,{width:"100%",height:"60px",alignItems:"center",justifyContent:"center",children:(0,eu.tZ)(e$.JO,{as:eS.jt3,size:20,color:"$color_icon_secondary"})})})]})})};var e5=n(72143);function ModelSelectButton_templateObject(){let e=(0,ep._)(["\n          &:hover {\n            background-color: ",";\n          }\n        "]);return ModelSelectButton_templateObject=function(){return e},e}let ModelSelectButton=e=>{var t,n,r;let{item:o,onClick:i}=e,[a,l]=(0,e_.useState)(),{isProMode:c}=(0,eN.M2)(),{trackEvent:d}=(0,ev.Ke)();return(0,e_.useEffect)(()=>{l(o)},[o]),(0,eu.tZ)(eh.zx,{onClick:()=>{d("select_purpose_btn",{purpose:null==o?void 0:o.name.toUpperCase(),last_purpose:a,is_pro_mode:c}),i()},children:(0,eu.BX)(eh.Ug,{gap:"10px",textAlign:"left",alignItems:"center",borderRadius:"8px",paddingX:"8px",marginX:"-8px",css:e=>{var t;return(0,em.iv)(ModelSelectButton_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_quaternary_hover)},children:[(0,eu.tZ)(eh.xu,{width:"30px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"1000px",children:(0,eu.tZ)(eh.xu,{width:"30px",height:"30px",borderRadius:"1000px",display:"flex",justifyContent:"center",alignItems:"center",backgroundColor:"$palette_gray_gray_50",children:(0,eu.tZ)("img",{src:null==o?void 0:null===(t=o.displayOptions)||void 0===t?void 0:t.icon,width:"16px",height:"16px",alt:"".concat(o.name,"-icon-alt")})})}),(0,eu.tZ)(eh.Ug,{paddingY:"8px",alignItems:"center",children:(0,eu.BX)(eh.gC,{gap:"2px",children:[(0,eu.BX)(eh.Ug,{alignItems:"center",gap:"4px",children:[(0,eu.tZ)(eh.Jd,{typo:"$160-13-med",color:"$color_text_primary",children:o.displayName}),(null===(n=o.displayOptions)||void 0===n?void 0:n.subDisplayName)&&(0,eu.tZ)(eh.Ug,{borderRadius:"4px",backgroundColor:"$color_surface_secondary",paddingX:"6px",paddingY:"3px",children:(0,eu.tZ)(eh.Jd,{typo:"$100-10-semi",color:"$color_text_brand",children:null===(r=o.displayOptions)||void 0===r?void 0:r.subDisplayName})})]}),(0,eu.tZ)(eh.Jd,{typo:"$100-12-med",color:"$color_text_quaternary",children:o.description})]})})]})})},ModelSelectList=e=>{let{menuList:t,changeModel:n}=e,{id:r}=(0,eF.mn)(),{id:o}=(0,eF.Ob)(),{id:i}=(0,eF.q)(),a=[r,o,i,e5.uv],l=t.filter(e=>!a.includes(e._id));return(0,eu.tZ)(eh.gC,{children:l.map(e=>(0,eu.tZ)(ModelSelectButton,{item:e,onClick:()=>n(e)},e._id))})};function DropdownRenderContent_templateObject(){let e=(0,ep._)(["\n        border: 1px solid ",";\n        box-shadow: 0px 5px 30px 0px rgba(0, 0, 0, 0.08);\n      "]);return DropdownRenderContent_templateObject=function(){return e},e}let DropdownRenderContent=e=>{let{changeModel:t,close:n,menuList:r}=e,o=(0,e_.useCallback)(e=>{t(e),n()},[t,n]);return(0,eu.tZ)(eh.xu,{backgroundColor:"$color_bg_elevated_primary",borderRadius:"16px",css:e=>{var t;return(0,em.iv)(DropdownRenderContent_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_secondary)},children:(0,eu.tZ)(eh.xu,{padding:"16px 20px",children:(0,eu.tZ)(ModelSelectList,{menuList:r,changeModel:o})})})},ModelSelectDropdown=e=>{let{changeModel:t,modelList:n,selectedModel:r}=e,{id:o}=(0,eF.mp)(),{id:i}=(0,eF.hw)(),{id:a}=(0,eF.mn)(),{id:l}=(0,eF._n)(),c=!n.length,changeModel=e=>{let r=e;e._id===o&&(r=n.find(e=>e._id===a)||e),e._id===i&&(r=n.find(e=>e._id===l)||e),t(r)};return(0,eu.tZ)(eC.Lt,{x:"left",padding:11,renderOpener:e=>{let{open:t}=e;return(0,eu.tZ)(eh.xu,{height:"60px",children:(0,eu.tZ)(DropdownOpenerWithButton,{loading:c,onClick:t,selectedModel:r})})},renderContent:e=>{let{close:t}=e;return(0,eu.tZ)(eh.xu,{width:"303px",children:(0,eu.tZ)(DropdownRenderContent,{menuList:n,close:t,changeModel:changeModel})})}})},ProModeToggle=e=>{let{isProMode:t,isDarkMode:n,selectedModel:r,onToggleProMode:o}=e,{trackEvent:i}=(0,ev.Ke)(),a=(0,ef.T_)(),l=e8()(()=>{i("view_pro_mode_tool_tip",{purpose:null==r?void 0:r.displayName,is_pro_mode:t})},1e3);return(0,eu.BX)(eh.Ug,{alignItems:"center",gap:"12px",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"#9644FF",children:"Pro"}),(0,eu.tZ)(eC.u,{content:a("chat.feature_home.home.tool_tip.pro_mode"),position:{top:"-220%",left:"-200%"},children:(0,eu.tZ)(eh.xu,{display:"flex",alignItems:"center",height:"28px",children:(0,eu.tZ)(e3.Z,{toggle:t,shadow:!0,onHover:l,onToggle:o,containerData:{width:54,height:28,px:4,py:4,borderRadius:50,bg:{checked:n?"#241536":"#DDCCF3",unchecked:"$palette_gray_gray_150"}},sliderData:{size:20,bg:{checked:"#7108F7",unchecked:"$color_icon_white"}},innerItem:(0,eu.tZ)(e$.JO,{as:e$.GU,size:14,color:t?"$color_icon_white":"#7108F7"})})})})]})};function ChatTextAreaForKeyin(e){var t;let{children:n,selectedModel:r,input:o}=e,i=(0,eb.TQ)({modelName:null!==(t=null==r?void 0:r.name)&&void 0!==t?t:""});if(i){let{keyin:e,getAdCreativeId:t,getPackageAdCreativeId:r,getInventoryCodes:a,getAdEvent:l}=i,c=0===o.trim().length?e:o,d=!!e,s=0===o.trim().length?e:o,u=s===e?{adCreativeId:t,packageAdCreativeId:r,inventoryCodes:a}:void 0;return n({placeholder:c,isGenerateButtonActive:d,advertOrInputMessage:s,adContext:u,adEvent:{adEventName:"click_ad_input_keyin",adEventBody:l}})}let a=null==r?void 0:r.displayOptions.placeholder,l=!!o;return n({placeholder:a,isGenerateButtonActive:l,advertOrInputMessage:o,adContext:void 0})}function ChatTextAreaGroup_templateObject(){let e=(0,ep._)(["\n                              linear-gradient(",", ","),\n                              linear-gradient(to bottom, #C9A9F4 0%, #924CEC 100%);\n                                  background-origin: border-box;\n                                  background-clip: content-box, border-box;\n                              "]);return ChatTextAreaGroup_templateObject=function(){return e},e}function ChatTextAreaGroup_templateObject1(){let e=(0,ep._)(["\n                    transition: border-color 0.4s ease-in-out,\n                      background-color 0.4s ease-in-out;\n                    background-image: ",";\n                  "]);return ChatTextAreaGroup_templateObject1=function(){return e},e}function ChatTextAreaGroup_templateObject2(){let e=(0,ep._)(["\n                          linear-gradient(",", ","),\n                          linear-gradient(to bottom, #FF9A86 0%, "," 100%);\n                              background-origin: border-box;\n                              background-clip: content-box, border-box;\n                          "]);return ChatTextAreaGroup_templateObject2=function(){return e},e}function ChatTextAreaGroup_templateObject3(){let e=(0,ep._)(["\n                      transition: border-color 0.4s ease-in-out,\n                        background-color 0.4s ease-in-out;\n                      background-image: ",";\n                    "]);return ChatTextAreaGroup_templateObject3=function(){return e},e}let isDrawable=(e,t)=>(null==e||!e.displayName.includes("GPT")||!!t)&&(null==e?void 0:e.enableOptions.draw),ChatTextAreaGroup=e=>{let{changeModel:t,modelList:n,selectedModel:r,isDarkMode:o}=e,{value:i}=(0,eg._)("isFastSearch"),a=(0,eG.Zl)(eH.u3),{success:l,totalCount:c}=(0,eG.sJ)(eH.h5),d=(0,eG.Zl)(eH.Aq),[s,u]=(0,eG.FV)(eH.gn),{isProMode:p}=(0,eN.M2)(),{isFocus:_}=(0,eN.Qc)(),{trackEvent:m}=(0,ev.Ke)(),{handleOpenLoginDialog:h}=(0,eY.tF)(),{id:g}=(0,eF.mp)(),{id:v}=(0,eF.Ob)(),{id:f}=(0,eF.Jv)(),{id:x}=(0,eF.mn)(),{id:b}=(0,eF.hw)(),{id:C}=(0,eF._n)(),{variant:y}=(0,eR.i6)("fe-web-fasearch-toggle"),{user:k}=(0,eT.aF)(),w=!r,Z=(null==r?void 0:r._id)===g,I=(null==r?void 0:r._id)===b,O=(null==r?void 0:r._id)===f,[S,B]=(0,e_.useState)(!!i);(0,e_.useEffect)(()=>{if((null==y?void 0:y.feature_enabled)!==void 0){let e=localStorage.getItem("isFastSearch");null===e&&B(S)}},[S]);let[$,M]=(0,e_.useState)(void 0);(0,e_.useEffect)(()=>{let e=n.find(e=>e._id===v);M(e),s||(S?u("fast_ai_search_toggle_A"):u("fast_ai_search_toggle_B"))},[n,S]);let R={model_name:null==r?void 0:r.name.toUpperCase(),uploadPosition:"home",purpose:null==r?void 0:r.displayName,is_pro_mode:p,current_box_number:c},onToggleProMode=()=>{let e;if(!p&&!k){h();return}m("click_pro_mode_toggle",{purpose:null==r?void 0:r.displayName,is_pro_mode:p}),(e=p?(null==r?void 0:r._id)===C?n.find(e=>e._id===b):n.find(e=>e._id===g):(null==r?void 0:r._id)===b?n.find(e=>e._id===C):n.find(e=>e._id===x))&&t(e)},onToggleFastSearchMode=()=>{let e=!S;B(e),d(e),localStorage.setItem("isFastSearch",JSON.stringify(e)),M(e?n.find(e=>e._id===v):n.find(e=>e._id===f)),m("click_fast_ai_search_toggle",{purpose:null==r?void 0:r.displayName,is_fast_ai_search_toggle:!S,chathome_fast_ai_search_abtest_group:s})};return(0,e_.useEffect)(()=>{(null==r?void 0:r._id)!==x&&a([])},[r,a]),(0,eu.BX)(eh.Ug,{gap:"5px",width:"100%",children:[(0,eu.tZ)(ModelSelectDropdown,{changeModel:t,modelList:n,selectedModel:r}),(0,eu.tZ)(ChatInputState,{children:e=>{var i,a;let{input:c,setInput:d,changeInput:u}=e;return(null==r?void 0:r._id)===g||(null==r?void 0:r._id)===b||(null==r?void 0:r._id)===x||(null==r?void 0:r._id)===C?(0,eu.tZ)(ChatLinkState,{input:c,isDisabled:!p,children:(0,eu.tZ)(eh.gC,{width:"100%",minHeight:"60px",borderRadius:"30px",border:"2px solid",borderColor:p?"transparent":_?"$color_outline_secondary":"transparent",backgroundColor:"$color_surface_tertiary",css:e=>{var t,n;return(0,em.iv)(ChatTextAreaGroup_templateObject1(),p?(0,em.iv)(ChatTextAreaGroup_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_tertiary,null===(n=e.colors)||void 0===n?void 0:n.$color_surface_tertiary):"none")},children:(0,eu.BX)(eV.aA,{gap:"0",onFocus:()=>{},isDisabled:w,padding:"16px 18px 16px 18px",attachmentList:(null==r?void 0:null===(i=r.enableOptions)||void 0===i?void 0:i.image)&&(0,eu.tZ)(AttachmentList,{eventProperties:R,setInput:d,marginBottom:"16px"}),children:[(0,eu.tZ)(ChatTextareaV2,{value:c,placeholder:null==r?void 0:r.displayOptions.placeholder,onChange:u,selectedModel:r}),(0,eu.tZ)(eh.Ug,{height:"8px"}),(0,eu.BX)(eh.Ug,{justifyContent:"space-between",alignItems:"center",children:[(0,eu.tZ)(eV.Z,{isDisabled:w,drawable:isDrawable(r,!!k),promptHub:null==r?void 0:r.enableOptions.promptHub,code:null==r?void 0:r.enableOptions.code,file:(null==r?void 0:null===(a=r.enableOptions)||void 0===a?void 0:a.file)||Z||I,fileOptionCallback:()=>{var e;let o=n.find(e=>e._id===x||e._id===C);(null==r?void 0:null===(e=r.enableOptions)||void 0===e?void 0:e.file)||!o||t(o)},iconGroupEventProperties:{purpose:null==r?void 0:r.displayName,is_pro_mode:p},fileEventProperties:R,setInputText:d,onError:eq.wp}),(0,eu.BX)(eh.Ug,{alignItems:"center",gap:"8px",children:[(0,eu.tZ)(ProModeToggle,{isProMode:p,isDarkMode:o,selectedModel:r,onToggleProMode:onToggleProMode}),(0,eu.tZ)(GenerateButton,{generateMessage:c,selectedModel:r,active:!!c&&l,focus:_})]})]})]})})}):(0,eu.tZ)(ChatTextAreaForKeyin,{selectedModel:r,input:c,children:e=>{let{placeholder:t,isGenerateButtonActive:n,advertOrInputMessage:i,adContext:a,adEvent:l}=e;return(0,eu.BX)(eh.Ug,{width:"100%",minHeight:"60px",borderRadius:"40px",alignItems:"flex-end",border:"2px solid",borderColor:O&&S?"transparent":_?"$color_outline_secondary":"transparent",backgroundColor:"$color_surface_tertiary",css:e=>{var t,n,r;return(0,em.iv)(ChatTextAreaGroup_templateObject3(),O&&S?(0,em.iv)(ChatTextAreaGroup_templateObject2(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_tertiary,null===(n=e.colors)||void 0===n?void 0:n.$color_surface_tertiary,null===(r=e.colors)||void 0===r?void 0:r.$color_surface_brand):"none")},children:[(0,eu.tZ)(eh.xu,{width:"100%",height:"100%",padding:"16px 16px 13px 25px",children:(0,eu.tZ)(ChatTextareaV2,{value:c,placeholder:t,onChange:u,selectedModel:O&&S?$:r,adEvent:l})}),(0,eu.tZ)(eh.xu,{padding:"16px",children:(0,eu.BX)(eh.Ug,{height:28,alignItems:"center",gap:"6px",justifyContent:"flex-end",children:[O&&(0,eu.tZ)(FastSearchToggle,{isFastSearch:S,isDarkMode:o,selectedModel:r,fastSearchABValue:s,onToggleFastSearchMode:onToggleFastSearchMode}),(0,eu.tZ)(GenerateButton,{generateMessage:i,selectedModel:O&&S?$:r,active:n,focus:_,adContext:a,adEvent:l})]})})]})}})}})]})},getChipList=e=>{let{model:t,count:n}=e;return ek.Np.William.get((0,ey.stringifyQueryParams)("/api/v2/chip",{model:t,count:n}))},getGPT4vChipList=()=>ek.Np.William.get("/chip/gpt4v"),useChipList=e=>{let t=(0,ef.bU)(),n="ja-JP"===t?6:3;return(0,eI.dH)("/api/v2/chip?model=".concat(e,"&count=").concat(n),()=>getChipList({model:e,count:n}),{revalidateOnFocus:!1})},useGPT4vChipList=e=>(0,eI.dH)("/chip/gpt4v",()=>getGPT4vChipList(),{revalidateOnFocus:!1});function ImageCachedChip_templateObject(){let e=(0,ep._)(["\n        position: relative;\n        cursor: pointer;\n        aspect-ratio: 1;\n        box-shadow: 10px 10px 20px 0px rgba(0, 0, 0, 0.1);\n        background: url(thumbnail) lightgray 50%, no-repeat;\n\n        &:hover {\n          .overlay {\n            opacity: 1;\n          }\n        }\n      "]);return ImageCachedChip_templateObject=function(){return e},e}function ImageCachedChip_templateObject1(){let e=(0,ep._)(["\n          transition: opacity 0.3s ease-out;\n        "]);return ImageCachedChip_templateObject1=function(){return e},e}function ImageCachedChip_templateObject2(){let e=(0,ep._)(["\n          transition: opacity 0.3s ease-out;\n        "]);return ImageCachedChip_templateObject2=function(){return e},e}let ImageCachedChip=e=>{let{item:{thumbnail:t,content:n,prompt:r},index:o}=e,{trackEvent:i}=(0,ev.Ke)(),{selectedModel:a}=(0,eN.M2)(),{changeInput:l}=(0,eN.Qc)();return(0,eu.BX)(eh.xu,{flex:1,borderRadius:"20px",overflow:"hidden",onMouseOver:()=>{i("hover_cached_chip_img_card",{model_name:e2.ChatModel.SD3_TURBO.toUpperCase(),input_content:r,title:n,index:o,purpose:null==a?void 0:a.displayName})},onClick:()=>{i("click_cached_chip",{model_name:e2.ChatModel.SD3_TURBO.toUpperCase(),command_chip_name:r,index:o,purpose:null==a?void 0:a.displayName}),l(null!=r?r:"")},css:(0,em.iv)(ImageCachedChip_templateObject()),children:[(0,eu.tZ)("img",{src:t,style:{background:"lightgray 50%",objectFit:"cover",aspectRatio:1,width:"100%",zIndex:-1}}),(0,eu.tZ)(eh.xu,{className:"overlay",position:"absolute",width:"100%",height:"100%",top:"0",left:"0",background:"linear-gradient(180deg, rgba(0, 0, 0, 0.00) 0%, #000 100%)",zIndex:0,opacity:0,css:(0,em.iv)(ImageCachedChip_templateObject1())}),(0,eu.tZ)(eh.Jd,{className:"overlay",position:"absolute",bottom:0,typo:"$140-14-med",color:"$color_text_white",opacity:0,margin:"20px",css:(0,em.iv)(ImageCachedChip_templateObject2()),children:n})]})};var e7=n(701),e9=n(70810);let useComponetEffect=e=>{let{chipList:t,selectedUnit:n,uuid:r,trackEvent:o}=e;(0,e_.useEffect)(()=>{if((null==t?void 0:t.length)&&(null==n?void 0:n.name)){let e=t.filter(e=>isAdChocoChip(e));r.current=(0,e9.Z)(),o("expose_cached_chip",{model_name:null==n?void 0:n.name.toUpperCase(),content:{...null==t?void 0:t.map(e=>e.content)},section_order:2,uuid:r.current,...e.length>0&&{is_ad:!0,_id:{...e.map(e=>e.adId)},...e[0].eventProperty}})}},[null==t?void 0:t.length,null==n?void 0:n.name])},handleClick=e=>{let{selectedUnit:t,isRedirecting:n,hoverStyles:r,uuid:o,trackEvent:i,setIsRedirecting:a,onMakeNewChat:l}=e;return{onClickNewChat:(e,c)=>async()=>{if(!(null==t?void 0:t._id)||n)return;if(performance.mark("startTask"),isAdChocoChip(e)){var d,s,u;let t=null!==(d=/\[🔗바로가기\]\(([^)]+)\)/.exec(null==e?void 0:e.answer))&&void 0!==d?d:[],n=null!==(s=/\[\[1\]\]\(([^)]+)\)/.exec(null==e?void 0:e.answer))&&void 0!==s?s:[],r=null!==(u=t[1])&&void 0!==u?u:n[1];if(r)try{await e7.default.get(r+"&position=home",{headers:{"Content-Type":"application/json"},withCredentials:!0})}catch(e){}}i("click_cached_chip",{section_order:2,model_name:null==t?void 0:t.name.toUpperCase(),index:c,command_chip_name:e.content,uuid:o.current,...isAdChocoChip(e)?{is_ad:!0,_id:e.adId,...e.eventProperty}:{color_name:r[c]}}),a(!0);let p=await l({unitId:null==t?void 0:t._id,input:e.content,isChocoChip:!0,adId:isAdChocoChip(e)?e.adId:void 0,inventory:isAdChocoChip(e)?"chip":void 0});(null==p?void 0:p.newChatCreated)||a(!1)}}},isAdChocoChip=e=>"advertise"===e.category;function ImageCachedChipList_templateObject(){let e=(0,ep._)(["\n        display: grid;\n        grid-template-columns: 1fr 1fr 1fr;  \n      "]);return ImageCachedChipList_templateObject=function(){return e},e}let ImageCachedChipList=()=>{let{data:e,isLoading:t,isValidating:n}=useChipList(e2.ChatModel.SD3_TURBO),{trackEvent:r}=(0,ev.Ke)(),o=(0,ef.T_)(),{selectedModel:i}=(0,eN.M2)();return((0,e_.useEffect)(()=>{(null==e?void 0:e.length)&&r("expose_cached_chip",{model_name:e2.ChatModel.SD3_TURBO.toUpperCase(),content:{...null==e?void 0:e.map(e=>e.content)},purpose:null==i?void 0:i.displayName})},[e]),t||n)?null:e&&!(e.length<1)?(0,eu.BX)(eh.gC,{pt:"30px",gap:"20px",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-16-semi",color:"$color_text_primary",children:o("chat.feature_home.contents_section.title.image")}),(0,eu.tZ)(eh.Ug,{gap:"15px",css:(0,em.iv)(ImageCachedChipList_templateObject()),children:e.map((e,t)=>{if(!isAdChocoChip(e))return(0,eu.tZ)(ImageCachedChip,{item:e,index:t},e.content)})})]}):void 0};var te=n(11286),tt=n.n(te);let tn=[{title:"feature_blog.meta.title",path:"/blog-generator",src:"https://fe-web-assets.wow.wrtn.ai/home/BlogHomeIcon.svg",textColor:"var(--color_text_accent_green)",backgroundColor:"var(--color_surface_accent_green)",iconBackgroundColor:"var(--color_surface_accent_bg_green)",tooltipMessage:"feature_blog.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 93px)"},event:{name:"click_blog_icon_btn"},availableLocale:["ko-KR","ja-JP"]},{title:"feature_assignment.meta.title",path:"/assignment",src:"https://fe-web-assets.wow.wrtn.ai/home/ReportHomeIcon.svg",textColor:"var(--color_text_accent_pink)",backgroundColor:"var(--color_surface_accent_pink)",iconBackgroundColor:"var(--color_surface_accent_bg_pink)",tooltipMessage:"feature_assignment.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 139px)"},event:{name:"click_assignment_icon_btn"},availableLocale:["ko-KR","ja-JP"]},{title:"feature_cover_letter.meta.title",path:"/cover-letter",src:"https://fe-web-assets.wow.wrtn.ai/home/CoverletterHomeIcon.svg",textColor:"var(--color_text_accent_violet)",backgroundColor:"var(--color_surface_accent_violet)",iconBackgroundColor:"var(--color_surface_accent_bg_violet)",tooltipMessage:"feature_cover_letter.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 142px)"},event:{name:"click_job_application_icon_btn"},availableLocale:["ko-KR","ja-JP"]},{title:"feature_ppt.meta.title",path:"/slide-generator",src:"https://fe-web-assets.wow.wrtn.ai/home/PPTHomeIcon.svg",textColor:"var(--color_text_accent_blue)",backgroundColor:"var(--color_surface_accent_blue)",iconBackgroundColor:"var(--color_surface_accent_bg_blue)",tooltipMessage:"feature_ppt.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 118px)"},event:{name:"click_ppt_generator_icon_btn"},availableLocale:["ko-KR","ja-JP"]},{title:"feature_ai_protection.meta.title",path:"/ai-protect",src:"https://fe-web-assets.wow.wrtn.ai/home/AiProtectHomeIcon.svg",textColor:"var(--color_text_accent_red)",backgroundColor:"var(--color_surface_accent_red)",iconBackgroundColor:"var(--color_surface_accent_bg_red)",tooltipMessage:"feature_ai_protection.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 162.5px)"},event:{name:"click_ai_protect_icon_btn"},availableLocale:["ko-KR","ja-JP"]},{title:"feature_summary.meta.title",path:"/summary",src:"https://fe-web-assets.wow.wrtn.ai/home/SummaryHomeIcon.svg",textColor:"#0A4134",textDarkColor:"#ECFFFB",backgroundColor:"#ECFFFB",backgroundDarkColor:"#0A4134",iconBackgroundColor:"#ECFFFB",iconBackgroundDarkColor:"#0A4134",tooltipMessage:"feature_summary.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 171.5px)"},event:{name:"click_summary_icon_btn"},availableLocale:["ko-KR"]},{title:"feature_resume_generator.meta.title",path:"/resume-generator",src:"https://fe-web-assets.wow.wrtn.ai/home/ResumeHomeIcon.svg",textColor:"#77660B",textDarkColor:"#FCF7BE",backgroundColor:"#FCF7BE",backgroundDarkColor:"#77660B",iconBackgroundColor:"#FFFDD8",iconBackgroundDarkColor:"#333010",tooltipMessage:"feature_resume_generator.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 135px)"},event:{name:"resume"},availableLocale:["ko-KR"]},{title:"feature_coding_task.meta.title",path:"/coding-task",src:"https://fe-web-assets.wow.wrtn.ai/home/CodingTaskHomeIcon.svg",textColor:"#0A4134",textDarkColor:"#FBF1FF",backgroundColor:"#FBF1FF",backgroundDarkColor:"#372456",iconBackgroundColor:"#FBF1FF",iconBackgroundDarkColor:"#352353",tooltipMessage:"feature_coding_task.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 130px)"},event:{name:"click_coding_assignment_icon_btn"},availableLocale:["ko-KR"]},{title:"feature_presentation_script_generator.meta.title",path:"/presentation-script-generator",src:"https://fe-web-assets.wow.wrtn.ai/icons/infograhpic/Presentation.svg",textColor:"#7B2E0C",textDarkColor:"#FFF2E3",backgroundColor:"#FFF2E3",backgroundDarkColor:"#40270B",iconBackgroundColor:"#FFF2E3",iconBackgroundDarkColor:"#40270B",tooltipMessage:"feature_presentation_script_generator.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 95px)"},event:{name:"click_coding_assignment_icon_btn"},availableLocale:["ko-KR"]},{title:"feature_scenario_generator.meta.title",path:"/video-scenario",src:"https://fe-web-assets.wow.wrtn.ai/home/ScenarioGeneratorIcon.svg",textColor:"#3F457A",textDarkColor:"#F0EFEB",backgroundColor:"#D7DFFF",backgroundDarkColor:"#3F457A",iconBackgroundColor:"#EDF1FF",iconBackgroundDarkColor:"#1F2146",tooltipMessage:"feature_scenario_generator.meta.tooltipMessage",tooltipPosition:{bottom:"calc(100% + 8px)",left:"calc(50% - 100px)"},event:{name:"click_video_scenario_icon_btn"},availableLocale:["ko-KR"]}];function MenuListItem_templateObject(){let e=(0,ep._)(["\n          cursor: pointer;\n\n          &:hover {\n            background-color: ",";\n\n            p {\n              color: "," !important;\n            }\n\n            .aiWorkHomeMenuImage {\n              background-color: ",";\n            }\n          }\n        "]);return MenuListItem_templateObject=function(){return e},e}function MenuListItem_templateObject1(){let e=(0,ep._)(["\n            background-color: ",";\n          "]);return MenuListItem_templateObject1=function(){return e},e}let MenuListItem=e=>{let{menu:t}=e,{push:n}=(0,ex.tv)(),{trackEvent:r}=(0,ev.Ke)(),{mode:o}=(0,eB.TC)(),i=(0,ef.T_)();return(0,eu.tZ)(eC.u,{content:i(t.tooltipMessage),position:t.tooltipPosition,children:(0,eu.BX)(eh.gC,{onClick:()=>{n(t.path),r(t.event.name)},gap:"8px",alignItems:"center",borderRadius:"12px",width:"104px",height:"104px",justifyContent:"center",css:e=>{var n;return(0,em.iv)(MenuListItem_templateObject(),"dark"===o&&t.backgroundDarkColor?t.backgroundDarkColor:t.backgroundColor,"dark"===o&&t.textDarkColor?t.textDarkColor:t.textColor,null===(n=e.colors)||void 0===n?void 0:n.$color_icon_white)},children:[(0,eu.tZ)(eh.xu,{width:"60px",height:"60px",borderRadius:"60px",className:"aiWorkHomeMenuImage",display:"flex",alignItems:"center",justifyContent:"center",css:(0,em.iv)(MenuListItem_templateObject1(),"dark"===o&&t.iconBackgroundDarkColor?t.iconBackgroundDarkColor:t.iconBackgroundColor),children:(0,eu.tZ)("img",{src:t.src,alt:i(t.title),width:"36px",height:"36px"})}),(0,eu.tZ)(eh.Jd,{typo:"$100-16-med",color:"$color_text_primary",children:i(t.title)})]},t.title)})},MenuList=()=>{let e=(0,ef.bU)(),t=tn.filter(t=>t.availableLocale.includes(e)),n=(0,eg.ac)("(max-width: 1024px)",!1),r=tt()(t,n?4:7);return(0,eu.tZ)(eh.gC,{gap:"10px",flexWrap:["wrap","wrap","wrap","wrap"],paddingX:["68px","68px","68px",0],justifyContent:"center",children:r.map((e,t)=>(0,eu.tZ)(eh.Ug,{gap:"10px",justifyContent:"center",children:e.map(e=>(0,eu.tZ)(MenuListItem,{menu:e},e.title))},t))})};function TipBoxItem_templateObject(){let e=(0,ep._)(["\n        cursor: pointer;\n        flex-shrink: 0;\n\n        border: 1px solid ",";\n\n        :hover {\n          background-color: ",";\n        }\n      "]);return TipBoxItem_templateObject=function(){return e},e}let TipBoxItem=e=>{let{item:t,eventProperties:n}=e,{changeInput:r}=(0,eN.Qc)(),{trackEvent:o}=(0,ev.Ke)(),i=(0,e_.useCallback)(()=>{o("click_tip_box",n),r(t.prompt)},[t,r,n,o]);return(0,e_.useEffect)(()=>{o("expose_tip_box",n)},[]),(0,eu.BX)(eh.Ug,{onClick:i,paddingX:"12px",borderRadius:"40px",height:"36px",alignItems:"center",backgroundColor:"$color_surface_tertiary",css:e=>{var t,n;return(0,em.iv)(TipBoxItem_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary,null===(n=e.colors)||void 0===n?void 0:n.$color_surface_secondary)},children:[(0,eu.tZ)(eh.Jd,{typo:"$100-16-med",color:"$color_text_primary",children:t.content}),(0,eu.tZ)(e$.JO,{as:eS.lA1,color:"$color_icon_primary",size:18})]})},getTipBox=async e=>await ek.Np.William.get("/api/v2/chip/tip-box?limit=8&model=".concat(e)),useGetTipBox=e=>(0,eI.dH)("/api/v2/chip/tip-box",()=>getTipBox(e)),TipBoxList=e=>{let{isProMode:t,selectedModel:n}=e,[r]=(0,e_.useState)(0),{data:o,mutate:i}=useGetTipBox(n.name);if((0,e_.useEffect)(()=>{i()},[t,i]),o)return(0,eu.tZ)(eh.Ug,{gap:"4px",overflow:"hidden",flexWrap:"wrap",height:"36px",justifyContent:"center",children:o.map((e,o)=>(0,eu.tZ)(TipBoxItem,{item:e,eventProperties:{purpose:n.displayName,is_pro_mode:t,index:o,title:e.content,input_content:e.prompt,set_order:r}},e.content))})};function Infographic_Write_extends(){return(Infographic_Write_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var Infographic_Write=function(e){return e_.createElement("svg",Infographic_Write_extends({xmlns:"http://www.w3.org/2000/svg",width:28,height:28,fill:"none"},e),s||(s=e_.createElement("g",{clipPath:"url(#Infographic_Write_svg__a)"},e_.createElement("path",{stroke:"#0A811E",strokeLinecap:"square",strokeMiterlimit:10,strokeWidth:.84,d:"M20.794 7.194 3.187 24.802"}),e_.createElement("path",{fill:"#4BC662",d:"M23.672 11.602a5.12 5.12 0 0 0 0-7.23 5.12 5.12 0 0 0-7.23 0l-2.055 2.054-.493 3.448-1.477-1.477-6.18 6.18-.363 5.45-.167 2.31 7.76-.53 4.652-4.65-1.457-1.458h2.914l4.095-4.095z"}),e_.createElement("path",{fill:"url(#Infographic_Write_svg__b)",d:"M23.672 11.602a5.12 5.12 0 0 0 0-7.23 5.12 5.12 0 0 0-7.23 0l-2.055 2.054-.493 3.448-1.477-1.477-6.18 6.18-.363 5.45-.167 2.31 7.76-.53 4.652-4.65-1.457-1.458h2.914l4.095-4.095z"}),e_.createElement("path",{stroke:"#0A811E",strokeLinecap:"square",strokeWidth:.84,d:"M6.927 24.802h14.145"}))),u||(u=e_.createElement("defs",null,e_.createElement("linearGradient",{id:"Infographic_Write_svg__b",x1:7.154,x2:14.153,y1:14.054,y2:21.054,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{offset:.171,stopColor:"#00AA1E",stopOpacity:0}),e_.createElement("stop",{offset:.441,stopColor:"#95E3A5",stopOpacity:.3}),e_.createElement("stop",{offset:.536,stopColor:"#00AA1E",stopOpacity:.7}),e_.createElement("stop",{offset:1,stopColor:"#00AA1E",stopOpacity:0})),e_.createElement("clipPath",{id:"Infographic_Write_svg__a"},e_.createElement("path",{fill:"#fff",d:"M0 0h28v28H0z"})))))};function TipBoxCardItem_templateObject(){let e=(0,ep._)(["\n        :hover {\n          background-color: ",";\n          border-color: ",";\n        }\n      "]);return TipBoxCardItem_templateObject=function(){return e},e}let TipBoxCardItem=e=>{let{item:t,eventProperties:n}=e,{changeInput:r}=(0,eN.Qc)(),{trackEvent:o}=(0,ev.Ke)(),i=(0,e_.useCallback)(()=>{o("click_tip_box",n),r(t.prompt)},[t,r,n,o]);return(0,e_.useEffect)(()=>{o("expose_tip_box",n)},[]),(0,eu.BX)(eh.gC,{style:{cursor:"pointer"},onClick:i,width:"212px",height:"180px",padding:"16px",borderRadius:"10px",border:"1px solid",borderColor:"$color_outline_tertiary",justifyContent:"space-between",position:"relative",css:e=>{var t,n;return(0,em.iv)(TipBoxCardItem_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_bg_elevated_secondary,null===(n=e.colors)||void 0===n?void 0:n.$color_outline_secondary)},children:[(0,eu.BX)(eh.gC,{gap:"8px",children:[(0,eu.tZ)(eh.xu,{width:"28px",height:"28px",children:(0,eu.tZ)(e$.JO,{as:Infographic_Write,size:28})}),(0,eu.tZ)(eh.Jd,{style:{whiteSpace:"pre-wrap"},typo:"$140-16-med",color:"$color_text_primary",children:t.content})]}),(0,eu.tZ)(eh.Ug,{justifyContent:"flex-end",children:(0,eu.tZ)(eh.xu,{display:"flex",width:"24px",height:"24px",borderRadius:"50%",bg:"$color_surface_tertiary",justifyContent:"center",alignItems:"center",children:(0,eu.tZ)(e$.JO,{as:eS.lA1,color:"$color_icon_primary",size:18})})})]})},TipBoxCardList=e=>{let{isProMode:t,selectedModel:n}=e,[r,o]=(0,e_.useState)(0),{trackEvent:i}=(0,ev.Ke)(),{data:a,mutate:l}=useGetTipBox(t?"pro_mode":"gpt4");if((0,e_.useEffect)(()=>{l()},[t,l]),a)return(0,eu.tZ)(CarouselContainer,{mt:"40px",gap:"12px",onClickScrollButton:e=>{"left"===e?o(e=>e-1):o(e=>e+1),i("click_next_btn",{purpose:n.displayName,direction:"left"===e?"previous":"next",set_order:r})},isCharacterCarousel:!1,renderContent:()=>(0,eu.tZ)(eh.Ug,{gap:"20px",children:a.map((e,o)=>(0,eu.tZ)(TipBoxCardItem,{item:e,eventProperties:{purpose:n.displayName,is_pro_mode:t,index:o,title:e.content,input_content:e.prompt,set_order:r}},e.content))})})},ProModeContentSection=e=>{let{selectedModel:t,isProMode:n}=e,r=(0,ef.bU)();return(0,eu.BX)(eh.gC,{alignItems:"center",children:[(0,eu.tZ)(eh.xu,{height:"11px"}),"ja-JP"!==r&&(0,eu.tZ)(TipBoxList,{selectedModel:t,isProMode:n}),(0,eu.tZ)(eh.xu,{height:"20px"}),(0,eu.tZ)(MenuList,{}),"ja-JP"===r&&(0,eu.tZ)(TipBoxCardList,{isProMode:n,selectedModel:t})]})};var tr=n(4229),to=n(72066);let GetRealTimeSearchRank=e=>{var t;let{children:n}=e,{trackEvent:r}=(0,ev.Ke)(),{user:o}=(0,eT.aF)(),{data:i,isLoading:a}=useGetTrend(),{collect:l}=(0,to.B)(),c=(0,e_.useMemo)(()=>{var e;return null!==(e=null==i?void 0:i.items.slice(0,10))&&void 0!==e?e:[]},[null==i?void 0:i.items]),d=null!==(t=null==i?void 0:i.updated_at)&&void 0!==t?t:"";return(0,e_.useEffect)(()=>{var e,t;a||(r("expose_search_trend",{query_list:i}),l("ExposeSearchTrend",{is_login:!!o,is_wrtn:null!=o&&null!==(e=o.email)&&void 0!==e&&!!e.includes("@wrtn.io"),purpose:"AI 검색",query_list:null!==(t=null==i?void 0:i.items.map(e=>e.keyword))&&void 0!==t?t:[]}))},[a,i,r,l]),n({rankingList:c,updatedAt:d,loading:a})};function ItemLabel_templateObject(){let e=(0,ep._)(["\n            text-overflow: ellipsis;\n            white-space: nowrap;\n            width: 240px;\n          "]);return ItemLabel_templateObject=function(){return e},e}let ItemLabel=e=>{var t;let{item:n}=e,r=n.keyword,o=null!==(t=null==n?void 0:n.fluctuation)&&void 0!==t?t:0,i=!n.is_new&&o&&0!==o;return(0,eu.BX)(eh.Ug,{justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,eu.tZ)(eh.xu,{display:"flex",alignItems:"center",children:(0,eu.tZ)(eh.Jd,{typo:"$160-15-med",color:"$color_text_primary",overflow:"hidden",css:(0,em.iv)(ItemLabel_templateObject()),children:r})}),(i||n.is_new)&&(0,eu.BX)(eh.xu,{width:"30px",display:"flex",alignItems:"center",justifyContent:"flex-end",children:[i&&(0,eu.BX)(eh.Ug,{gap:"1px",children:[(0,eu.tZ)(eh.Jd,{typo:"$110-12-semi",color:o>0?"$palette_main_inspire_red_900":"$palette_sub_blue_500",children:Math.abs(o)}),(0,eu.tZ)(e$.JO,{as:o>0?eS.wtG:eS.aEp,size:14,color:o>0?"$palette_main_inspire_red_900":"$palette_sub_blue_500"})]}),n.is_new&&(0,eu.tZ)(eh.Jd,{typo:"$110-12-semi",color:"$color_alert_warning",children:"NEW"})]})]})};var ti=n(6644),ta=n(32060);let RankingListUpdateAnimation=e=>{let{children:t,item:n}=e,[r,o]=(0,e_.useState)(),i={enter:{y:-30,opacity:0,position:"absolute"},center:e=>({y:0,opacity:1,position:"relative",transition:{duration:.5,delay:e}}),exit:e=>({y:30,opacity:0,position:"absolute",transition:{duration:.5,delay:e}})};return(0,e_.useEffect)(()=>{r||o(n)},[n,r]),(0,eu.tZ)(ti.M,{initial:!1,children:(0,eu.BX)(eh.gC,{overflow:"hidden",width:"100%",height:"30px",position:"relative",alignItems:"center",children:[(0,eu.tZ)(ta.E.div,{initial:!!r&&"center",animate:"exit",exit:"exit",custom:.75*n.rank,variants:i,style:{width:"100%",height:"30px",display:"flex",alignItems:"center"},onAnimationComplete:()=>{o(n)},children:t({item:r})},"previous-".concat(n.id)),(0,eu.tZ)(ta.E.div,{initial:!!r&&"enter",animate:"center",exit:"exit",custom:.75*n.rank,variants:i,style:{width:"100%",height:"30px",display:"flex",alignItems:"center"},children:t({item:n})},n.id)]})})};function RankingListItem_templateObject(){let e=(0,ep._)(["\n          cursor: pointer;\n\n          &:hover {\n            background-color: ",";\n          }\n        "]);return RankingListItem_templateObject=function(){return e},e}let RankingListItem=e=>{let{item:t,ranking:n,topNumber:r=3}=e,{user:o}=(0,eT.aF)(),[i,a]=(0,e_.useState)(!1),{trackEvent:l}=(0,ev.Ke)(),{collect:c}=(0,to.B)(),{selectedModel:d}=(0,eN.M2)(),{generateAndPushNormalChatRoom:s}=(0,eL.Tt)(),u=(0,e0.Zl)(eH._8),openNewChat=async()=>{var e;d&&(l("click_search_trend_query",{ranking:t.rank,query:t.question}),c("ClickSearchTrend",{is_login:!!o,is_wrtn:!!(null==o?void 0:null===(e=o.email)||void 0===e?void 0:e.includes("@wrtn.io")),ranking:t.rank,query:t.question}),a(!0),u(e=>({...e,isChocoChip:!0})),await s({selectedModel:d,generateMessage:t.question,trendId:t.id,callback:()=>{a(!1)},generation_type:"real_time_search"}))};return(0,eu.BX)(eu.HY,{children:[i&&(0,eu.tZ)(eC.fz,{isVisible:i}),(0,eu.tZ)(eh.xu,{width:"100%",borderRadius:"12px",padding:"4px 6px",margin:"-4px -6px",css:e=>{var t;return(0,em.iv)(RankingListItem_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_secondary)},onClick:openNewChat,children:(0,eu.tZ)(eh.Ug,{width:"100%",alignItems:"center",justifyContent:"space-between",overflow:"hidden",children:(0,eu.BX)(eh.Ug,{alignItems:"center",gap:"13px",width:"100%",children:[(0,eu.tZ)(eh.xu,{flexShrink:0,width:"30px",height:"30px",borderRadius:"9px",backgroundColor:"$color_bg_elevated_secondary",display:"flex",alignItems:"center",justifyContent:"center",children:(0,eu.tZ)(eh.Jd,{typo:"$160-15-med",color:n<=r?"$color_text_brand":"$color_text_quaternary",children:n})}),(0,eu.tZ)(RankingListUpdateAnimation,{item:t,children:e=>{let{item:t}=e;return t&&(0,eu.tZ)(ItemLabel,{item:t})}})]})})})]})},AdRankingList=e=>{let{rankingList:t}=e,{generateAndPushNormalChatRoom:n}=(0,eL.Tt)(),{selectedModel:r}=(0,eN.M2)(),o=(0,e0.Zl)(eH._8),handleAiSeacrh=async(e,t,i)=>{r&&(o(e=>({...e,isChocoChip:!0})),await n({selectedModel:r,generateMessage:e,adContext:t,adEvent:i}))};return(0,eu.BX)(eh.Ug,{width:"100%",gap:"23px",children:[(0,eu.BX)(eh.gC,{width:"50%",gap:"7px",children:[(0,eu.tZ)(eb.vf,{onClickAiSeacrh:handleAiSeacrh}),t.slice(0,4).map((e,t)=>(0,eu.tZ)(RankingListItem,{ranking:t+1,item:e,topNumber:2},t+1))]}),(0,eu.tZ)(eh.gC,{width:"50%",gap:"7px",children:t.slice(4,9).map((e,t)=>(0,eu.tZ)(RankingListItem,{ranking:t+1+4,item:e},t+1+4))})]})},RankingList=e=>{let{rankingList:t}=e;return(0,eu.BX)(eh.Ug,{width:"100%",gap:"23px",children:[(0,eu.tZ)(eh.gC,{width:"50%",gap:"7px",children:t.slice(0,5).map((e,t)=>(0,eu.tZ)(RankingListItem,{ranking:t+1,item:e},t+1))}),(0,eu.tZ)(eh.gC,{width:"50%",gap:"7px",children:t.slice(5,10).map((e,t)=>(0,eu.tZ)(RankingListItem,{ranking:t+1+5,item:e},t+1+5))})]})};function RealTimeSearchRanking_templateObject(){let e=(0,ep._)(["\n          border: 1px solid ",";\n        "]);return RealTimeSearchRanking_templateObject=function(){return e},e}let RealTimeSearchRanking=()=>{let e=(0,ef.T_)(),t=(0,ef.bU)(),{flag:n}=(0,eR.T6)("fe-web-pb-ai-search"),{data:r}=(0,eM.GE)(),o=n&&r;return(0,eu.BX)(eh.xu,{children:[(0,eu.tZ)(eh.xu,{height:"20px"}),(0,eu.tZ)(eh.gC,{width:"100%",height:"260px",backgroundColor:"$color_bg_screen",borderRadius:"16px",padding:"20px 30px 26px",css:e=>{var t;return(0,em.iv)(RealTimeSearchRanking_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary)},children:(0,eu.tZ)(GetRealTimeSearchRank,{children:n=>{let{rankingList:r,updatedAt:i}=n;return(0,eu.BX)(eh.gC,{gap:"10px",children:[(0,eu.BX)(eh.Ug,{justifyContent:"space-between",children:[(0,eu.BX)(eh.Ug,{gap:"4px",alignItems:"center",children:[(0,eu.tZ)(tr.fN,{size:14}),(0,eu.tZ)(eh.Jd,{typo:"$160-13-med",color:"$color_text_brand",children:e("chat.feature_home.home.realtime_trend")})]}),(0,eu.tZ)(eh.Jd,{typo:"$160-13-med",color:"$color_text_quaternary",children:i&&(0,eZ.WU)(new Date(i),"YYYY.MM.DD HH:mm",t)})]}),(0,eu.tZ)(eh.gC,{children:o?(0,eu.tZ)(AdRankingList,{rankingList:r}):(0,eu.tZ)(RankingList,{rankingList:r})})]})}})})]})};var tl=n(78591),tc=n(10434);function ChatHomeBannerSlide_templateObject(){let e=(0,ep._)(["\n        transition: transform 0.5s ease-out;\n        aspect-ratio: ",";\n      "]);return ChatHomeBannerSlide_templateObject=function(){return e},e}n(97893);let ChatHomeBannerSlide=e=>{let{chatBanner:t,realIndex:n,viewType:r}=e,{trackEvent:o}=(0,ev.Ke)(),{startTrack:i}=(0,ev.aY)(),{selectedUnit:a}=(0,eN.XV)(),{mode:l}=(0,eB.TC)(),c=(0,eg.ac)("(max-width: 540px)"),{isActive:d}=(0,tc.c6)(),s=(0,e_.useRef)((0,e9.Z)());return(0,e_.useEffect)(()=>{s.current=(0,e9.Z)()},[n]),(0,e_.useEffect)(()=>{d&&o("view_event",{section_order:0,index:n,type:"banner",bannerId:t._id,bannerTitle:t.title,uuid:s.current,view_type:r,...t.eventProperty&&{is_ad:!0,...t.eventProperty}})},[d]),(0,eu.tZ)(eh.xu,{as:"a",width:"100%",css:(0,em.iv)(ChatHomeBannerSlide_templateObject(),c?960/270:650/110),href:t.webDetail.link,target:"_blank",rel:"noopener",onClick:()=>{var e;let r={index:n,uuid:s.current,...t.eventProperty&&{is_ad:!0,...t.eventProperty}};o("click_event",{section_order:0,type:"banner",bannerId:t._id,bannerTitle:t.title,...r}),i({link:t.webDetail.link,type:"home_banner",model_name:null!==(e=null==a?void 0:a.name.toUpperCase())&&void 0!==e?e:"",...r})},children:(0,eu.tZ)("img",{src:c?t.appDetail["".concat(l,"ImageUrl")]:t.webDetail["".concat(l,"ImageUrl")],width:"100%",height:"auto"})})},PrevButton=e=>{let{onAutoPalyPaused:t}=e,n=(0,tc.oc)();return(0,eu.tZ)(eh.kC,{as:"button",size:10,alignItems:"center",onClick:e=>{t(),n.slidePrev()},children:(0,eu.tZ)(e$.JO,{as:eS._yY,color:"$color_icon_white",size:10})})},NextButton=e=>{let{onAutoPalyPaused:t}=e,n=(0,tc.oc)();return(0,eu.tZ)(eh.kC,{as:"button",size:10,alignItems:"center",onClick:()=>{t(),n.slideNext()},children:(0,eu.tZ)(e$.JO,{as:eS.GGG,color:"$color_icon_white",size:10})})};function ChatHomeBanner_templateObject(){let e=(0,ep._)(["\n        aspect-ratio: ",";\n      "]);return ChatHomeBanner_templateObject=function(){return e},e}function ChatHomeBanner_templateObject1(){let e=(0,ep._)(["\n              aspect-ratio: ",";\n            "]);return ChatHomeBanner_templateObject1=function(){return e},e}let ChatHomeBanner=()=>{let{data:e,isLoading:t}=(0,eI.dH)("/api/v2/chat-banners",()=>getChatBanners(),{fallbackData:[],revalidateOnFocus:!1}),n=(0,eg.ac)("(max-width: 540px)"),[r,o]=(0,e_.useState)(0),[i,a]=(0,e_.useState)(0),[l,c]=(0,e_.useState)("rolling"),d=(0,e_.useRef)(null),handleClickPaused=()=>{var e;d.current&&d.current.autoplay&&(null===(e=d.current.autoplay)||void 0===e?void 0:e.running)&&(d.current.autoplay.paused=!0,c("click"))};return 0===e.length?null:(0,eu.tZ)(eh.gC,{width:"100%",maxWidth:"740px",position:"relative",overflow:"hidden",margin:"auto",mt:"20px",css:(0,em.iv)(ChatHomeBanner_templateObject(),n?960/270:650/110),children:(0,eu.tZ)(eh.kC,{children:t||e&&0===e.length?(0,eu.tZ)(eh.xu,{width:"100%",css:(0,em.iv)(ChatHomeBanner_templateObject1(),n?960/270:650/110)}):(0,eu.BX)(tc.tq,{onSlideChange:e=>{var t,n,r,l;(null==e?void 0:e.touches.diff)!==0&&(null==e?void 0:e.touches.diff)!==i?(c("swipe"),a(null==e?void 0:e.touches.diff)):(null===(n=d.current)||void 0===n?void 0:null===(t=n.autoplay)||void 0===t?void 0:t.running)&&!(null===(l=d.current)||void 0===l?void 0:null===(r=l.autoplay)||void 0===r?void 0:r.paused)&&c("rolling"),o(null==e?void 0:e.realIndex)},autoplay:{delay:5e3,disableOnInteraction:!1},speed:500,modules:[tl.pt],loop:!0,onSwiper:e=>{d.current=e},children:[e.map(e=>(0,eu.tZ)(tc.o5,{children:(0,eu.tZ)(ChatHomeBannerSlide,{chatBanner:e,realIndex:r,viewType:l})},e._id)),e.length>1&&(0,eu.BX)(eh.Ug,{position:"absolute",bottom:"10px",right:"10px",bg:"rgba(13, 13, 12, 0.40)",borderRadius:"3px",p:"3px 6px",alignItems:"center",zIndex:3,children:[!eg.P8&&(0,eu.tZ)(PrevButton,{onAutoPalyPaused:()=>{handleClickPaused()}}),(0,eu.BX)(eh.Jd,{typo:"$100-10-semi",color:"$color_text_white",children:[r+1," / ",null==e?void 0:e.length]}),!eg.P8&&(0,eu.tZ)(NextButton,{onAutoPalyPaused:()=>{handleClickPaused()}})]})]})})})},ContentsSection=e=>{let{selectedModel:t,isProMode:n}=e,r=(0,ef.bU)(),{id:o}=(0,eF.QW)(),{id:i}=(0,eF.mp)(),{id:a}=(0,eF.Jv)(),{id:l}=(0,eF.mn)(),{id:c}=(0,eF.Ob)(),{id:d}=(0,eF.hw)(),{id:s}=(0,eF._n)();switch(null==t?void 0:t._id){case a:case c:return(0,eu.BX)(eu.HY,{children:["ja-JP"===r&&(0,eu.tZ)(ChatHomeBanner,{}),(0,eu.tZ)(RealTimeSearchRanking,{})]});case o:return(0,eu.tZ)(ImageCachedChipList,{});case i:case d:case l:case s:return(0,eu.tZ)(ProModeContentSection,{selectedModel:t,isProMode:n});default:return null}},TitleSection=e=>{var t;let{selectedModel:n,isDarkMode:r,pbPullMaxHeight:o}=e,{id:i}=(0,eF.mp)(),{id:a}=(0,eF.mn)(),{id:l}=(0,eF.hw)(),{id:c}=(0,eF._n)(),d=null!==(t=null==n?void 0:n.displayOptions.title)&&void 0!==t?t:"",s=(null==n?void 0:n._id)===i||(null==n?void 0:n._id)===a||(null==n?void 0:n._id)===l||(null==n?void 0:n._id)===c,u=(null==n?void 0:n._id)===a||(null==n?void 0:n._id)===c,p=(null==n?void 0:n._id)===i||(null==n?void 0:n._id)===l?"":null==n?void 0:n.displayOptions.subTitle;return(0,eu.BX)(eh.gC,{ref:o,textAlign:"center",minHeight:"23px",gap:"10px",children:[(0,eu.tZ)(eh.Jd,{color:"$color_text_primary",fontSize:"32px",fontWeight:"600",fontFamily:"Pretendard",children:d}),(0,eu.tZ)(eh.Ug,{height:"14px",justifyContent:"center",children:s&&(0,eu.tZ)(eh.Jd,{typo:"$100-14-semi",color:u?r?"#A47CD7":"#7108F7":"$color_text_brand",children:p})})]})},useSelectModelContainer=()=>{let{isProMode:e,selectedModel:t,selectModel:n,modelList:r}=(0,eN.M2)(),{flag:o}=(0,eR.T6)("fe-pb-banner-fix"),{flag:i}=(0,eR.T6)("fe-web-pb-banner-interaction-wipe"),{isValidating:a,data:l}=(0,eM.Fu)(),c=null==l?void 0:l.displayType,{isLoading:d}=useGetTrend(),s=a||d,u=o&&(null==t?void 0:t.name)==="wrtn_search"&&!!l&&"FIX"===c,changeModel=e=>{n(e)},p=(0,e_.useMemo)(()=>({isLoading:s,selectedModel:t,isProMode:e,modelList:null!=r?r:[],changeModel,isShowBannerFix:u,bannerInteractionWipe:i}),[t,e,r,changeModel,u,i]);return p},SelectModelWrapper=e=>{let{children:t}=e,n=useSelectModelContainer();return t(n)},SelectModelContainer=e=>{let{isDarkMode:t,pbPullMaxHeight:n}=e,r=(0,ef.bU)(),o=(0,e_.useCallback)(e=>{let{isProMode:o,selectedModel:i,changeModel:a,modelList:l,isShowBannerFix:c,bannerInteractionWipe:d}=e;return(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(eh.xu,{height:c||"ja-JP"===r?"18dvh":"32dvh"}),(0,eu.BX)(eh.gC,{width:"740px",children:[(0,eu.tZ)(TitleSection,{selectedModel:i,isDarkMode:t,pbPullMaxHeight:n}),(0,eu.tZ)(eh.xu,{height:"20px"}),(0,eu.tZ)(ChatTextAreaGroup,{changeModel:a,modelList:l,selectedModel:i,isDarkMode:t}),c&&(0,eu.tZ)(eb.yn,{}),d&&(0,eu.tZ)(eb.Q1,{}),(0,eu.tZ)(ContentsSection,{selectedModel:i,isProMode:o}),(0,eu.tZ)(IssueTalkFeatureFlagContainer,{children:e=>{let{opened:t}=e;return t?(0,eu.tZ)(IssueTalkList,{selectedModel:i}):null}})]})]})},[t]);return(0,eu.tZ)(SelectModelWrapper,{children:o})},SettingDefaultPageButton=()=>{let{trackEvent:e}=(0,ev.Ke)(),t=(0,ef.bU)();return"ko-KR"!==t?null:(0,eu.tZ)(eh.xu,{children:(0,eu.tZ)(eh.Wv,{size:"$small",hierarchy:"$tertiary",onClick:()=>{e("click_wrtn_startup_page_set_btn"),window.open("https://help.wrtn.ai/226e1966-140c-4d4d-8edd-e7acae574f01","_blank")},endContainer:(0,eu.tZ)(e$.JO,{as:eS.xMl,size:12,color:"$color_icon_secondary"}),children:(0,eu.tZ)(eh.Jd,{typo:"$100-13-med",color:"$color_text_secondary",children:"뤼튼을 시작 페이지로"})})})},ToOnboardingPageButton=()=>{let{trackEvent:e}=(0,ev.Ke)(),t=(0,ef.T_)();return(0,eu.tZ)(eh.xu,{children:(0,eu.tZ)(eh.Wv,{size:"$small",hierarchy:"$tertiary",onClick:()=>{e("click_wrtn_to_onboaring_page_btn"),window.open("https://cyber-shake-de5.notion.site/1128ac4ce90480c4a0c9d2917bcb8ed1?pvs=4","_blank")},endContainer:(0,eu.tZ)(e$.JO,{as:eS.xMl,size:12,color:"$color_icon_secondary"}),children:(0,eu.tZ)(eh.Jd,{typo:"$100-13-med",color:"$color_text_secondary",children:t("header.guide.title")})})})},OffboardingContent=e=>{let{retryOnboarding:t}=e,{trackEvent:n}=(0,ev.Ke)(),{setItem:r}=(0,eg._)("CLOSED_ONBOARDING_MODAL",!1);return(0,e_.useEffect)(()=>{n("expose_chathome_onboarding_page",{pageName:"202406_last_page"})},[]),(0,eu.BX)(eh.xu,{width:"620px",backgroundColor:"$palette_gray_gray_white",borderRadius:"12px",overflow:"hidden",children:[(0,eu.tZ)(eh.xu,{width:"100%",height:"378px",backgroundImage:"url('".concat("https://fe-web-assets.wow.wrtn.ai/homeV2-onboarding/offboardingBanner2.png","')"),backgroundSize:"100% auto",backgroundRepeat:"no-repeat"}),(0,eu.tZ)(eh.xu,{width:"100%",justifyContent:"center",display:"flex",children:(0,eu.BX)(eh.Ug,{gap:"16px",paddingY:"25px",children:[(0,eu.tZ)(eh.xu,{width:"120px",height:"52px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,eu.tZ)(eh.zx,{onClick:()=>{n("click_chathome_onboarding_review_btn"),t()},children:(0,eu.tZ)(eh.Jd,{typo:"$140-14-semi",color:"$color_text_tertiary",children:"다시보기"})})}),(0,eu.tZ)(eh.zx,{onClick:()=>{n("click_chathome_onboarding_done_btn"),r(!0)},children:(0,eu.tZ)(eh.xu,{width:"300px",height:"52px",backgroundColor:"$color_action_blue_primary",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,eu.tZ)(eh.Jd,{typo:"$140-14-semi",color:"$color_text_white",children:"뤼튼 시작하기"})})})]})})]})},td=["START","STEP1","STEP2","STEP3","STEP4","STEP5","STEP6","END"],OnboardingContentState=e=>{let{children:t}=e,[n,r]=(0,e_.useState)(0),o=(0,e_.useMemo)(()=>{let e=td.slice(1,-1).includes(td[n]);return e?"PROGRESS":td[n]},[n]);return t({step:o,nextStep:()=>{r(e=>e+1)},prevStep:()=>{r(e=>e-1)},resetStep:()=>{r(1)}})};var ts=n(64145);let ArrowButtonGroup=e=>{let{nextStep:t,prevStep:n}=e;return(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(eh.zx,{onClick:n,position:"absolute",top:"calc(50% - 20px)",left:"calc(-12px - 40px)",children:(0,eu.tZ)(eh.xu,{width:"40px",height:"40px",justifyContent:"center",alignItems:"center",display:"flex",backgroundColor:"$palette_gray_gray_white",borderRadius:"40px",children:(0,eu.tZ)(e$.JO,{size:24,as:eS.k9_,color:"$palette_gray_gray_black"})})}),(0,eu.tZ)(eh.zx,{onClick:t,position:"absolute",top:"calc(50% - 20px)",right:"calc(-12px - 40px)",children:(0,eu.tZ)(eh.xu,{width:"40px",height:"40px",justifyContent:"center",alignItems:"center",display:"flex",backgroundColor:"$palette_gray_gray_white",borderRadius:"40px",children:(0,eu.tZ)(e$.JO,{size:24,as:eS.xMl,color:"$palette_gray_gray_black"})})})]})},tu=[{lottieOption:{loop:!0,autoplay:!0},lottiePath:"https://fe-web-assets.wow.wrtn.ai/homeV2-onboarding/onboarding-step-1.json",title:"3가지 주요 기능",subTitle:"클릭 1번으로 검색, 이미지 제작, 과제와 업무를\n 해결할 수 있도록 도와줄게요"},{lottieOption:{loop:!0,autoplay:!0},lottiePath:"https://fe-web-assets.wow.wrtn.ai/homeV2-onboarding/onboarding-step-2.json",title:"AI 검색",subTitle:"검색어를 입력하면 비교, 분석은 물론\n 최신 소식까지 한 번에 정리해서 알려드려요"},{lottieOption:{loop:!0,autoplay:!0},lottiePath:"https://fe-web-assets.wow.wrtn.ai/homeV2-onboarding/onboarding-step-3.json",title:"AI 과제와 업무",subTitle:"과제, 업무 준비부터 제출까지 필요한 모든 것을 요청하세요\n AI 과제와 업무는 보다 길고 전문적으로 답변해드려요"},{lottieOption:{loop:!0,autoplay:!0},lottiePath:"https://fe-web-assets.wow.wrtn.ai/homeV2-onboarding/onboarding-step-4.json",title:"AI 과제와 업무 : Pro 모드",subTitle:"AI 과제와 업무의 Pro 모드는 더 빠르고 똑똑해서\n 이미지 분석을 요청해도 이해할 수 있어요"},{lottieOption:{loop:!0,autoplay:!0},lottiePath:"https://fe-web-assets.wow.wrtn.ai/homeV2-onboarding/onboarding-step-5.json",title:"AI 이미지",subTitle:"만들고 싶은 이미지를 설명해 보세요\n 요청에 알맞는 이미지를 빠르게 제작해 드려요"},{lottieOption:{loop:!0,autoplay:!0},lottiePath:"https://fe-web-assets.wow.wrtn.ai/homeV2-onboarding/onboarding-step-6.json",title:"캐릭터 챗",subTitle:"캐릭터 챗에서 다양한 캐릭터와\n 롤플레잉을 즐겨보세요"}],SkipOnboadingButton=()=>{let{setItem:e}=(0,eg._)("CLOSED_ONBOARDING_MODAL",!1),{trackEvent:t}=(0,ev.Ke)(),n=(0,ef.T_)();return(0,eu.tZ)(eh.zx,{onClick:()=>{e(!0),t("click_chathome_onboarding_skip_btn")},children:(0,eu.tZ)(eh.Jd,{typo:"$140-14-semi",color:"$color_text_tertiary",children:n("feature_home.onboarding.skip")})})};function OnboardingProgressContent_templateObject(){let e=(0,ep._)(["\n                white-space: pre-wrap;\n              "]);return OnboardingProgressContent_templateObject=function(){return e},e}let tp=["202406_purpose_list","202406_ai_search","202406_ai_work","202406_ai_work_pro_mode","202406_ai_image","202406_ai_character_chat"],OnboardingProgressContent=e=>{let{nextStep:t,prevStep:n}=e,{trackEvent:r}=(0,ev.Ke)(),[o,i]=(0,e_.useState)(0),[a,l]=(0,e_.useState)();return(0,e_.useEffect)(()=>{fetch(tu[o].lottiePath).then(e=>e.json()).then(e=>{l(e)})},[o]),(0,e_.useEffect)(()=>{r("expose_chathome_onboarding_page",{pageName:tp[o]})},[o]),(0,eu.BX)(eh.xu,{width:"620px",position:"relative",children:[(0,eu.BX)(eh.xu,{width:"100%",borderRadius:"12px",overflow:"hidden",backgroundColor:"$palette_gray_gray_white",children:[(0,eu.tZ)(eh.xu,{width:"100%",height:"300px",color:"$palette_gray_gray_white",children:a&&(0,eu.tZ)(ts.q,{options:{...tu[o].lottieOption,animationData:a}})}),(0,eu.tZ)(eh.xu,{height:"20px"}),(0,eu.BX)(eh.gC,{gap:"32px",alignItems:"center",children:[(0,eu.BX)(eh.gC,{gap:"8px",textAlign:"center",children:[(0,eu.tZ)(eh.Jd,{typo:"$140-18-semi",color:"$palette_gray_gray_black",children:tu[o].title}),(0,eu.tZ)(eh.Jd,{typo:"$140-16-med",color:"$color_text_secondary",css:(0,em.iv)(OnboardingProgressContent_templateObject()),children:tu[o].subTitle})]}),(0,eu.tZ)(eh.Ug,{gap:"12px",children:tu.map((e,t)=>(0,eu.tZ)(eh.xu,{width:"12px",height:"12px",borderRadius:"12px",backgroundColor:o===t?"$palette_main_inspire_red_900":"#C7C5BD"},t))})]}),(0,eu.tZ)(eh.xu,{height:"25px"})]}),(0,eu.tZ)(ArrowButtonGroup,{nextStep:()=>{r("click_chathome_onboarding_next_btn",{pageName:tp[o]}),i(e=>tu.length<=e?e:e+1),t()},prevStep:()=>{r("click_chathome_onboarding_back_btn",{pageName:tp[o]}),i(e=>0===e?e:e-1),n()}}),(0,eu.tZ)(eh.xu,{position:"absolute",bottom:"21px",left:"28px",children:(0,eu.tZ)(SkipOnboadingButton,{})})]})},OnboardingStartContent=e=>{let{startOnboarding:t}=e,{trackEvent:n}=(0,ev.Ke)(),r=(0,ef.T_)();return(0,e_.useEffect)(()=>{n("expose_chathome_onboarding_page",{pageName:"202406_start_page"})},[]),(0,eu.BX)(eh.xu,{width:"620px",borderRadius:"12px",overflow:"hidden",children:[(0,eu.tZ)(eh.xu,{width:"100%",height:"300px",backgroundImage:"url('".concat("https://fe-web-assets.wow.wrtn.ai/homeV2-onboarding/onboardingBanner.png","')"),backgroundSize:"100% auto",backgroundRepeat:"no-repeat"}),(0,eu.BX)(eh.gC,{paddingY:"20px",gap:"32px",alignItems:"center",backgroundColor:"$color_surface_white",children:[(0,eu.BX)(eh.gC,{gap:"8px",textAlign:"center",children:[(0,eu.tZ)(eh.Jd,{typo:"$140-18-semi",color:"$palette_gray_gray_black",children:r("feature_home.onboarding.title")}),(0,eu.tZ)(eh.Jd,{typo:"$140-16-med",color:"$color_text_secondary",children:r("feature_home.onboarding.sub_title")})]}),(0,eu.BX)(eh.Ug,{gap:"12px",children:[(0,eu.tZ)(eh.xu,{width:"120px",height:"52px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,eu.tZ)(SkipOnboadingButton,{})}),(0,eu.tZ)(eh.zx,{onClick:()=>{n("click_chathome_onboarding_start_btn"),t()},children:(0,eu.tZ)(eh.xu,{width:"300px",height:"52px",backgroundColor:"$color_action_blue_primary",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",children:(0,eu.tZ)(eh.Jd,{typo:"$140-14-semi",color:"$color_text_white",children:r("feature_home.onboarding.start")})})})]})]})]})},OnboardingModalContentRenderer=()=>(0,eu.tZ)(OnboardingContentState,{children:e=>{let{step:t,nextStep:n,prevStep:r,resetStep:o}=e;switch(t){case"START":return(0,eu.tZ)(OnboardingStartContent,{startOnboarding:n});case"PROGRESS":return(0,eu.tZ)(OnboardingProgressContent,{nextStep:n,prevStep:r});case"END":return(0,eu.tZ)(OffboardingContent,{retryOnboarding:o});default:return(0,eu.tZ)(eu.HY,{})}}}),OnboardingModal=()=>{let e=(0,ef.bU)(),{value:t}=(0,eg._)("CLOSED_ONBOARDING_MODAL",!1);return"ko-KR"!==e?null:(0,eu.tZ)(eC.CO,{opened:!t,closable:!1,renderContent:()=>(0,eu.tZ)(OnboardingModalContentRenderer,{})})};function ChatHomeV2_templateObject(){let e=(0,ep._)(["\n        transition: padding-top 0.2s ease;\n      "]);return ChatHomeV2_templateObject=function(){return e},e}function ChatHomeV2_templateObject1(){let e=(0,ep._)(["\n          transition: padding-top 0.2s ease;\n        "]);return ChatHomeV2_templateObject1=function(){return e},e}let ChatHomeV2=()=>{let{mode:e}=(0,eB.TC)(),t=(0,e_.useRef)(null),n=(0,e_.useRef)(null),r=(0,e_.useRef)(null),o=(0,ef.bU)(),{data:i}=(0,eM.Fu)(),a=null==i?void 0:i.displayType,{flag:l}=(0,eR.T6)("fe-pb-banner-interaction-pull"),{flag:c}=(0,eR.T6)("fe-pb-banner-interaction-pass");return(0,eu.BX)(eh.gC,{ref:t,width:"100%",minHeight:"100%",alignItems:"center",position:"relative",css:(0,em.iv)(ChatHomeV2_templateObject()),children:[(0,eu.tZ)(eh.xu,{ref:n,position:"fixed",marginTop:"24px",right:"24px",zIndex:1,css:(0,em.iv)(ChatHomeV2_templateObject1()),children:(0,eu.BX)(eh.Ug,{gap:"4px",children:[(0,eu.tZ)(AppInstallButton,{}),"ja-JP"===o?(0,eu.tZ)(ToOnboardingPageButton,{}):(0,eu.tZ)(SettingDefaultPageButton,{})]})}),c&&"PASS"===a&&(0,eu.tZ)(eb.S,{}),l&&"PULL"===a&&(0,eu.tZ)(eb.Hi,{pbPullHomeRef:t,pbPullHomeButtonRef:n,pbPullMaxHeight:r}),SelectModelContainer({isDarkMode:"dark"===e,pbPullMaxHeight:r}),(0,eu.tZ)(EventModal,{type:"event-modal"}),(0,eu.tZ)(OnboardingModal,{}),(0,eu.tZ)(eh.xu,{height:"60px"}),(0,eu.tZ)(EmptyChatController,{})]})};var t_=n(8800),tm=n(78617),th=n.n(tm);let CharacterAvatar=e=>{let{imgSrc:t,imgStyle:n,status:r,isSmall:o,inActive:i,...a}=e,l=(0,ef.T_)("character.feature_character_room.info.status"),c="https://d1k8apdmymvh8f.cloudfront.net/Wrtn/avatar_fallback.png";return eg.sk?null:(0,eu.BX)(eh.xu,{position:"relative",overflow:"hidden",...a,children:[(0,eu.tZ)("img",{src:t||c,onError:e=>{let t=e.target;t.src=c},alt:"thumbnail",style:{objectFit:"cover",borderRadius:"inherit",width:"100%",height:"100%",...n},loading:"lazy"}),(r&&"active"!==r||i)&&(0,eu.tZ)(eh.xu,{position:"absolute",top:"0",left:"0",borderRadius:a.borderRadius||"inherit",width:"100%",height:"100%",background:"linear-gradient(0deg, rgba(0, 0, 0, 0.50) 0%, rgba(0, 0, 0, 0.50) 100%)",display:"flex",alignItems:"center",justifyContent:"center",children:(0,eu.BX)(eh.gC,{gap:"4px",alignItems:"center",children:[!o&&(0,eu.tZ)(e$.JO,{as:"deleted"===r?eS.$yH:eS.uNt,color:"$color_icon_white",size:24}),(0,eu.BX)(eh.Jd,{typo:"$100-14-med",color:"$color_text_white",textAlign:"center",children:["blocked"===r&&l("blocked"),"deleted"===r&&l("deleted"),i&&l("private")]})]})})]})};function CharacterCard_templateObject(){let e=(0,ep._)(["\n        &:hover {\n          cursor: pointer;\n        }\n        transition: all 0.3s ease-in-out;\n      "]);return CharacterCard_templateObject=function(){return e},e}function CharacterCard_templateObject1(){let e=(0,ep._)(["\n          &:hover {\n            .character-description {\n              -webkit-line-clamp: 4;\n              word-break: break-all;\n            }\n\n            .overlay {\n              opacity: 1;\n            }\n          }\n        "]);return CharacterCard_templateObject1=function(){return e},e}function CharacterCard_templateObject2(){let e=(0,ep._)(["\n            transition: opacity 0.3s ease-out;\n          "]);return CharacterCard_templateObject2=function(){return e},e}function CharacterCard_templateObject3(){let e=(0,ep._)(["\n            overflow: hidden;\n            text-overflow: ellipsis;\n            display: -webkit-box;\n            -webkit-line-clamp: 1;\n            -webkit-box-orient: vertical;\n          "]);return CharacterCard_templateObject3=function(){return e},e}function _templateObject4(){let e=(0,ep._)(["\n            overflow: hidden;\n            text-overflow: ellipsis;\n            display: -webkit-box;\n            -webkit-line-clamp: 1;\n            -webkit-box-orient: vertical;\n          "]);return _templateObject4=function(){return e},e}let CharacterCard=e=>{var t,n;let{character:r,imageSize:o,onClick:i}=e;return(0,eu.BX)(eh.xu,{width:"130px",minWidth:"130px",height:"160px",overflow:"hidden",borderRadius:"10px",onClick:i,border:"1px solid",borderColor:"$color_outline_tertiary",css:(0,em.iv)(CharacterCard_templateObject()),position:"relative",children:[(0,eu.tZ)(CharacterAvatar,{imgSrc:r.profileImage&&((null===(t=r.profileImage)||void 0===t?void 0:t[o||"w200"])||(null===(n=r.profileImage)||void 0===n?void 0:n.w600)||r.profileImage.origin),width:"100%",height:"100%"}),(0,eu.BX)(eh.gC,{position:"absolute",bottom:"0px",width:"100%",height:"100%",justifyContent:"flex-end",pb:"14px",pl:"10px",pr:"6px",alignItems:"center",background:"linear-gradient(180deg,rgba(0, 0, 0, 0) 50%,rgba(0, 0, 0, 0.6) 100%)",css:(0,em.iv)(CharacterCard_templateObject1()),children:[(0,eu.tZ)(eh.xu,{className:"overlay",width:"100%",height:"100%",backgroundColor:"$color_bg_dimmed",position:"absolute",top:"0",left:"0",opacity:0,css:(0,em.iv)(CharacterCard_templateObject2())}),(0,eu.tZ)(eh.Jd,{zIndex:1,color:"$color_text_white",typo:"$ex_140-14-med",css:(0,em.iv)(CharacterCard_templateObject3()),children:r.name}),(0,eu.tZ)(eh.Jd,{zIndex:1,className:"character-description",fontSize:"12px",fontWeight:500,lineHeight:"140%",color:"$color_text_white",opacity:.8,css:(0,em.iv)(_templateObject4()),children:r.description})]})]})},getRecommendedCharacterList=e=>ek.Np.BE.get(e),getRandomCharacterList=()=>ek.Np.BE.get("/characters/random-subsets?limit=10"),useRecommendedCharacterList=()=>(0,eI.dH)("/characters?recommended=true&limit=10",getRecommendedCharacterList,{fallback:[],revalidateOnFocus:!1}),useRandomCharacterList=function(){let{disabled:e=!1}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return(0,eI.dH)(e?null:"/characters/random-subsets?limit=10",getRandomCharacterList,{fallback:[],revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1})},CharacterRandomListHeader=()=>{let e=(0,ef.T_)("home.character_random_list");return(0,eu.BX)(eh.Ug,{justifyContent:"space-between",px:["20px","20px","40px"],children:[(0,eu.tZ)(eh.Jd,{typo:"$100-16-semi",color:"$color_text_primary",children:e("random_ai_character")}),(0,eu.tZ)(ez(),{href:"/chat/character",children:(0,eu.BX)(eh.Ug,{gap:"2px",alignItems:"center",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_action_blue_primary",children:e("more")}),(0,eu.tZ)(e$.JO,{as:eS.xMl,color:"$color_action_blue_primary",size:20})]})})]})};function CreateCharacter_templateObject(){let e=(0,ep._)(["\n        &:hover {\n          cursor: pointer;\n          background-color: ",";\n        }\n      "]);return CreateCharacter_templateObject=function(){return e},e}let CreateCharacter=()=>{let e=(0,ef.T_)("home.character_random_list"),{handleGoToSSOLogin:t}=(0,eX.Ae)(),{push:n}=(0,eO.useRouter)(),{user:r}=(0,eT.aF)(),{trackEvent:o}=(0,ev.Ke)();return(0,e_.useEffect)(()=>{o("expose_main_page_character_builder_card",{section_order:4,index:1})},[]),(0,eu.BX)(eh.gC,{bg:"$color_surface_elevated",border:"1px solid",borderColor:"$color_outline_tertiary",gap:"24px",justifyContent:"end",width:"130px",minWidth:"130px",height:"160px",p:"32px 10px 14px 10px",borderRadius:"8px",alignItems:"center",css:e=>(0,em.iv)(CreateCharacter_templateObject(),(0,eh.JH)({theme:e,overlayColor:"$color_surface_hover",backgroundColor:"$color_surface_elevated"})),onClick:()=>{if(o("click_main_page_character_builder_card",{section_order:4,index:1}),!r)return t();n("/chat/character/builder?type=create")},children:[(0,eu.tZ)(eh.kC,{alignItems:"center",justifyContent:"center",children:(0,eu.tZ)(e$.JO,{as:eS.oDM,size:32,color:"$color_icon_tertiary"})}),(0,eu.BX)(eh.gC,{alignItems:"center",gap:"10px",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-14-semi",color:"$color_text_primary",children:e("create")}),(0,eu.tZ)(eh.gC,{alignItems:"center",lineHeight:"160%",fontSize:"12px",fontWeight:500,color:"$color_text_tertiary",textAlign:"center",children:e.rich("create_description",{br:()=>(0,eu.tZ)("br",{})})})]})]})},CharacterRandomList=()=>{let{moveRecentChat:e}=(0,eL.Jq)(),{data:t,isLoading:n}=useRandomCharacterList(),{trackEvent:r}=(0,ev.Ke)(),{user:o}=(0,eT.aF)();return(0,e_.useEffect)(()=>{var e,n;t&&r("view_character_card",{content:{...null==t?void 0:null===(e=t.characters)||void 0===e?void 0:e.map(e=>e._id)},name:{...null==t?void 0:null===(n=t.characters)||void 0===n?void 0:n.map(e=>e.name)}})},[t]),(0,eu.BX)(eh.gC,{width:"100%",gap:"14px",position:"relative",children:[(0,eu.tZ)(CharacterRandomListHeader,{}),(0,eu.tZ)(eh.Ug,{px:eg.P8?"0px":["20px","20px","40px"],children:(0,eu.tZ)(CarouselContainer,{px:eg.P8?["20px","20px","40px"]:"0px",gap:"12px",renderContent:()=>{var i;return(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(CreateCharacter,{}),n?[,,,].fill(null).map((e,t)=>(0,eu.tZ)(eC.Od,{width:"130px",height:"160px"},t)):null==t?void 0:null===(i=t.characters)||void 0===i?void 0:i.map((t,n)=>(0,eu.tZ)(CharacterCard,{character:t,index:n,sectionOrder:4,onClick:()=>{var i,a;r("click_character_card",{character_id:t._id,is_owner:t.creator.wrtnUid===(null==o?void 0:o._id),category:null===(a=t.categories)||void 0===a?void 0:null===(i=a[0])||void 0===i?void 0:i.name,index:n,section_order:4,name:t.name,character_name:t.name}),e(t._id,"c",{onMoveRecent:()=>{r("create_chat",{type:"character_card_click"})}})}},t._id))]})}})})]})},AppCharacterRandomListHeader=()=>{let e=(0,ef.T_)("home.character_random_list"),{postMessage:t}=(0,eg.sW)(),{user:n}=(0,eT.aF)();return(0,eu.BX)(eh.Ug,{justifyContent:"space-between",px:"20px",children:[(0,eu.tZ)(eh.Jd,{typo:"$140-18-semi",color:"$color_text_primary",children:e("random_ai_character")}),n&&(0,eu.tZ)(eh.zx,{onClick:()=>{t({type:"navigate",payload:{screen:"character_all",params:{},type:"push"}})},children:(0,eu.tZ)(e$.JO,{as:eS.xMl,size:24,color:"$color_action_blue_primary"})})]})},AppCharacterRandomList=()=>{let{postMessage:e}=(0,eg.sW)(),appCreateCharacterChat=(t,n)=>{e({type:"create-chat",payload:{mode:"character",params:{characterId:t,characterName:n}}})},{data:t,isLoading:n}=useRandomCharacterList(),{trackEvent:r}=(0,ev.Ke)(),{user:o}=(0,eT.aF)();return(0,e_.useEffect)(()=>{var e,n;t&&r("view_character_card",{content:{...null==t?void 0:null===(e=t.characters)||void 0===e?void 0:e.map(e=>e._id)},name:{...null==t?void 0:null===(n=t.characters)||void 0===n?void 0:n.map(e=>e.name)}})},[t]),(0,eu.BX)(eh.gC,{width:"100%",gap:"14px",position:"relative",children:[(0,eu.tZ)(AppCharacterRandomListHeader,{}),(0,eu.tZ)(CarouselContainer,{px:"20px",gap:"12px",renderContent:()=>{var e;return(0,eu.tZ)(eu.HY,{children:n?[,,,].fill(null).map((e,t)=>(0,eu.tZ)(eC.Od,{width:"130px",height:"160px"},t)):null==t?void 0:null===(e=t.characters)||void 0===e?void 0:e.map((e,t)=>(0,eu.tZ)(CharacterCard,{character:e,index:t,sectionOrder:4,onClick:()=>{var n,i;r("create_chat",{type:"character_card_click"}),r("click_character_card",{character_id:e._id,is_owner:e.creator.wrtnUid===(null==o?void 0:o._id),category:null===(i=e.categories)||void 0===i?void 0:null===(n=i[0])||void 0===n?void 0:n.name,index:t,section_order:4,name:e.name,character_name:e.name}),appCreateCharacterChat(e._id,e.name)},imageSize:"w600"},e._id))})}})]})};function CharacterRecommendListHeader_templateObject(){let e=(0,ep._)(["\n            &:hover {\n              cursor: pointer;\n              color: ",";\n\n              path {\n                fill: ",";\n              }\n            }\n          "]);return CharacterRecommendListHeader_templateObject=function(){return e},e}let CharacterRecommendListHeader=()=>{let e=(0,ef.T_)("home.character_recommned_list"),{trackEvent:t}=(0,ev.Ke)();return(0,eu.BX)(eh.Ug,{justifyContent:"space-between",px:["20px","20px","40px"],children:[(0,eu.tZ)(eh.Jd,{typo:"$100-16-semi",color:"$color_text_primary",children:e("recommend_ai_character")}),(0,eu.tZ)(ez(),{href:"/chat/character",onClick:()=>{t("click_more_btn",{sectionOrder:4,section_name:"캐릭터 AI"})},children:(0,eu.BX)(eh.Ug,{gap:"2px",alignItems:"center",color:"$color_action_blue_primary",css:e=>{var t,n;return(0,em.iv)(CharacterRecommendListHeader_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_action_blue_secondary,null===(n=e.colors)||void 0===n?void 0:n.$color_action_blue_secondary)},children:[(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",children:e("more")}),(0,eu.tZ)(e$.JO,{as:eS.xMl,color:"$color_action_blue_primary",size:20})]})})]})};function CharacterRecommendList_CreateCharacter_templateObject(){let e=(0,ep._)(["\n        &:hover {\n          cursor: pointer;\n          background-color: ",";\n          border-color: ",";\n        }\n      "]);return CharacterRecommendList_CreateCharacter_templateObject=function(){return e},e}let CreateCharacter_CreateCharacter=()=>{let e=(0,ef.T_)("home.character_recommned_list"),{handleGoToSSOLogin:t}=(0,eX.Ae)(),{push:n}=(0,eO.useRouter)(),{user:r}=(0,eT.aF)(),{trackEvent:o}=(0,ev.Ke)();return(0,e_.useEffect)(()=>{o("expose_main_page_character_builder_card",{section_order:4,index:1})},[]),(0,eu.BX)(eh.gC,{bg:"$color_surface_elevated",border:"1px solid",borderColor:"$color_outline_tertiary",gap:"24px",justifyContent:"end",width:"130px",minWidth:"130px",height:"160px",p:"32px 10px 14px 10px",borderRadius:"8px",alignItems:"center",css:e=>(0,em.iv)(CharacterRecommendList_CreateCharacter_templateObject(),(0,eh.JH)({theme:e,overlayColor:"$color_surface_hover",backgroundColor:"$color_surface_elevated"}),(0,eh.JH)({theme:e,overlayColor:"$color_surface_hover",backgroundColor:"$color_outline_tertiary"})),onClick:()=>{if(o("click_main_page_character_builder_card",{section_order:4,index:1}),!r)return t();n("/chat/character/builder?type=create")},children:[(0,eu.tZ)(eh.kC,{alignItems:"center",justifyContent:"center",children:(0,eu.tZ)(e$.JO,{as:eS.oDM,size:32,color:"$color_icon_tertiary"})}),(0,eu.BX)(eh.gC,{alignItems:"center",gap:"10px",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-14-semi",color:"$color_text_primary",children:e("create")}),(0,eu.tZ)(eh.gC,{alignItems:"center",lineHeight:"140%",fontSize:"12px",fontWeight:500,color:"$color_text_tertiary",textAlign:"center",children:e.rich("create_description",{br:()=>(0,eu.tZ)("br",{})})})]})]})},CharacterRecommendList=()=>{let{moveRecentChat:e}=(0,eL.Jq)(),{data:t,isLoading:n}=useRecommendedCharacterList(),{trackEvent:r}=(0,ev.Ke)(),{user:o}=(0,eT.aF)();return(0,e_.useEffect)(()=>{var e,n;t&&r("view_character_card",{content:{...null==t?void 0:null===(e=t.characters)||void 0===e?void 0:e.map(e=>e._id)},name:{...null==t?void 0:null===(n=t.characters)||void 0===n?void 0:n.map(e=>e.name)}})},[t]),(0,eu.BX)(eh.gC,{width:"100%",gap:"14px",position:"relative",children:[(0,eu.tZ)(CharacterRecommendListHeader,{}),(0,eu.tZ)(eh.Ug,{px:eg.P8?"0px":["20px","20px","40px"],children:(0,eu.tZ)(CarouselContainer,{px:eg.P8?["20px","20px","40px"]:"0px",gap:"12px",renderContent:()=>{var i,a;return(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(CreateCharacter_CreateCharacter,{}),n?[,,,].fill(null).map((e,t)=>(0,eu.tZ)(eC.Od,{width:"130px",height:"160px"},t)):null==t?void 0:null===(a=t.characters)||void 0===a?void 0:null===(i=a.slice(0,6))||void 0===i?void 0:i.map((t,n)=>(0,eu.tZ)(CharacterCard,{index:n,sectionOrder:4,character:t,onClick:()=>{var i,a;r("click_character_card",{character_id:t._id,is_owner:t.creator.wrtnUid===(null==o?void 0:o._id),category:null===(a=t.categories)||void 0===a?void 0:null===(i=a[0])||void 0===i?void 0:i.name,index:n,section_order:4,name:t.name,character_name:t.name}),e(t._id,"c",{onMoveRecent:()=>{r("create_chat",{type:"character_card_click"})}})}},t._id))]})}})})]})};var tg=n(43621),tv=n(6916),tf=n(28977),tx=n.n(tf);let getAdvertiseFloatingBanner=()=>ek.Np.BE.get("/advertise/floating-banner");function useGetAdvertiseFloatingBanner(){return(0,eI.dH)("get/adviertise/floatingbanner",async()=>{let e=await getAdvertiseFloatingBanner();return e[0]},{revalidateOnFocus:!1})}function ChatHomeRenderMedia(e){let{isShowWebm:t,imageUrl:n,videoUrl:r}=e,[o,i]=(0,e_.useState)(!0);return(0,eu.tZ)(eu.HY,{children:t&&o?(0,eu.tZ)(eh.xu,{pt:"12px",children:(0,eu.tZ)("video",{width:"135px",height:"135px",autoPlay:!0,muted:!0,playsInline:!0,preload:"auto",poster:n,disableRemotePlayback:!0,disablePictureInPicture:!0,onEnded:()=>{i(!1)},children:(0,eu.tZ)("source",{"data-src":null!=r?r:"",src:null!=r?r:"",type:"video/webm"})})}):(0,eu.tZ)(eE(),{src:null!=n?n:"",alt:"ad",width:135,height:135,style:{marginTop:"16px"}})})}function ChatHomeAdContent(e){let{onClose:t,onClickIsland:n}=e,r=e_.useRef(null),{data:o}=useGetAdvertiseFloatingBanner(),i=(0,eg.ac)("(max-width: 768px)"),a=!eg.P8&&(0,eg.i7)();return e_.useEffect(()=>{let e=r.current,t=document.getElementById("chat-content"),passScrollEvent=e=>{e.stopPropagation(),t&&(t.scrollTop+=e.deltaY)};return null==e||e.addEventListener("wheel",passScrollEvent),()=>{null==e||e.removeEventListener("wheel",passScrollEvent)}},[]),(0,eu.tZ)(eh.xu,{ref:r,position:"absolute",right:"0",p:"24px 12px",zIndex:3,css:(0,em.iv)({...i?{bottom:"0"}:{top:"40%"}}),children:(0,eu.BX)(eh.gC,{textAlign:"center",children:[(0,eu.BX)(eh.Ug,{position:"absolute",top:"0",right:"12px",gap:"2px",p:"2px 4px",height:"16px",justifyContent:"end",alignItems:"center",backgroundColor:"$color_bg_screen",border:"1px solid",borderColor:"$color_outline_tertiary",borderRadius:"3px",typo:"$100-10-semi",color:"$color_text_textfield_disabled",children:[(0,eu.tZ)(eh.xu,{children:"AD"}),(0,eu.tZ)(eh.xu,{children:"|"}),(0,eu.tZ)(eh.zx,{onClick:t,zIndex:2,height:"16px",width:"16px",position:"relative",css:(0,em.iv)({svg:{position:"absolute",transform:"translate(-50%, -50%)"}}),children:(0,eu.tZ)(e$.JO,{as:eS.Off,size:12,color:"$color_text_textfield_disabled"})})]}),(0,eu.BX)(eh.zx,{onClick:()=>{n(),window.open("".concat(null==o?void 0:o.link,"?inventory=floating_banner"),"_blank")},children:[(0,eu.tZ)(eh.xu,{mt:"12px",p:"4px 7px",mb:"-10px",backgroundColor:"#273646",justifyContent:"center",width:"120px",color:"#32E5D9",fontSize:"10px",fontWeight:700,borderRadius:"80px",children:null==o?void 0:o.content}),(0,eu.tZ)(ChatHomeRenderMedia,{isShowWebm:a,imageUrl:null==o?void 0:o.imageUrl,videoUrl:null==o?void 0:o.videoUrl}),(0,eu.tZ)(eh.xu,{color:"$color_text_disabled",fontSize:"8px",fontWeight:500,lineHeight:"120%",width:"140px",children:null==o?void 0:o.adGuidelineText})]})]})})}function ChatHomeIsland(){let{data:e,isLoading:t}=useGetAdvertiseFloatingBanner(),{selectedUnit:n}=(0,eN.XV)(),{trackEvent:r}=(0,ev.Ke)(),[o,i]=(0,e_.useState)(!!(0,tg.ej)(tg.Mv.AD_ISLAND)),a=(0,e9.Z)();return((0,e_.useEffect)(()=>{if(!o&&e){var t,i,l,c,d,s;r("expose_float_banner",{screen_name:"HomeScreen",model_name:null!==(c=null==n?void 0:n.name.toUpperCase())&&void 0!==c?c:"",id:e.adId,uuid:null!=a?a:"",request_id:null!==(d=null==e?void 0:null===(t=e.eventProperty)||void 0===t?void 0:t.request_id)&&void 0!==d?d:"",advertiser_id:null==e?void 0:null===(i=e.eventProperty)||void 0===i?void 0:i.advertiser_id,campaign_id:null!==(s=null==e?void 0:null===(l=e.eventProperty)||void 0===l?void 0:l.campaign_id)&&void 0!==s?s:""})}},[o,e]),o||t||!e)?null:(0,eu.tZ)(ChatHomeAdContent,{onClose:()=>{var t,o,l,c,d,s;(0,tg.d8)(tg.Mv.AD_ISLAND,"close",{sameSite:"lax",domain:tv.JP,path:"/",expires:tx()("2024-05-28").toDate()}),i(e=>!e),r("click_float_banner_exit_btn",{screen_name:"HomeScreen",model_name:null!==(c=null==n?void 0:n.name.toUpperCase())&&void 0!==c?c:"",id:null==e?void 0:e.adId,uuid:null!=a?a:"",request_id:null!==(d=null==e?void 0:null===(t=e.eventProperty)||void 0===t?void 0:t.request_id)&&void 0!==d?d:"",advertiser_id:null==e?void 0:null===(o=e.eventProperty)||void 0===o?void 0:o.advertiser_id,campaign_id:null!==(s=null==e?void 0:null===(l=e.eventProperty)||void 0===l?void 0:l.campaign_id)&&void 0!==s?s:""})},onClickIsland:()=>{var t,o,i,l,c,d;r("click_float_banner",{screen_name:"HomeScreen",model_name:null!==(l=null==n?void 0:n.name.toUpperCase())&&void 0!==l?l:"",id:null==e?void 0:e.adId,uuid:null!=a?a:"",request_id:null!==(c=null==e?void 0:null===(t=e.eventProperty)||void 0===t?void 0:t.request_id)&&void 0!==c?c:"",advertiser_id:null==e?void 0:null===(o=e.eventProperty)||void 0===o?void 0:o.advertiser_id,campaign_id:null!==(d=null==e?void 0:null===(i=e.eventProperty)||void 0===i?void 0:i.campaign_id)&&void 0!==d?d:""})}})}var tb=n(22601);function TextChocoChipListItem_templateObject(){let e=(0,ep._)(["\n        &:hover {\n          background-color: ",";\n          color: ",";\n          cursor: pointer;\n        }\n      "]);return TextChocoChipListItem_templateObject=function(){return e},e}let TextChocoChipListItem=e=>{let{content:t,hoverStyle:n,onClick:r}=e;return(0,eu.tZ)(eh.Ug,{justifyContent:"center",p:"6px 16px",border:"1px solid",borderColor:"$color_outline_secondary",color:"$color_text_primary",borderRadius:"22px",css:e=>{var t,r;return(0,em.iv)(TextChocoChipListItem_templateObject(),null===(t=e.colors)||void 0===t?void 0:t["".concat(n.background)],null===(r=e.colors)||void 0===r?void 0:r["".concat(n.color)])},onClick:r,lineHeight:"16px",fontSize:"13px",fontWeight:"500",height:"fit-content",children:t})};function AdTextChocoChipListItem_templateObject(){let e=(0,ep._)(["\n        &:hover {\n          .overlay {\n            opacity: 1;\n          }\n          cursor: pointer;\n        }\n      "]);return AdTextChocoChipListItem_templateObject=function(){return e},e}let AdTextChocoChipListItem=e=>{var t,n,r,o,i,a;let{chip:l,hoverStyle:c,onClick:d}=e,{mode:s}=(0,eB.TC)(),handleClick=()=>{d()};return l.designOption&&(null===(t=l.designOption)||void 0===t?void 0:t[s])?(0,eu.BX)(eh.Ug,{justifyContent:"center",alignItems:"center",p:"6px 16px",border:"1px solid",borderColor:null===(n=l.designOption[s])||void 0===n?void 0:n.strokeColor,backgroundColor:null===(r=l.designOption[s])||void 0===r?void 0:r.backgroundColor,color:null===(o=l.designOption[s])||void 0===o?void 0:o.contentTextColor,borderRadius:"22px",lineHeight:"16px",fontSize:"13px",fontWeight:"500",height:"fit-content",gap:"8px",position:"relative",css:e=>(0,em.iv)(AdTextChocoChipListItem_templateObject()),onClick:handleClick,children:[(0,eu.tZ)(eh.xu,{className:"overlay",width:"100%",height:"100%",position:"absolute",top:"0",left:"0",opacity:0,borderRadius:"22px",backgroundColor:"$color_surface_hover"}),l.content,(0,eu.tZ)(eh.kC,{justifyContent:"center",alignContent:"center",p:"3px 4px",borderRadius:"3px",backgroundColor:null===(i=l.designOption[s])||void 0===i?void 0:i.adBackgroundColor,minWidth:"fit-content",height:"fit-content",children:(0,eu.tZ)(eh.Jd,{typo:"$100-10-semi",color:null===(a=l.designOption[s])||void 0===a?void 0:a.adTextColor,children:"광고"})})]}):(0,eu.tZ)(TextChocoChipListItem,{content:l.content,hoverStyle:c,onClick:handleClick},l.content)},tC=[{background:"$color_surface_accent_yellow",color:"$color_text_accent_yellow"},{background:"$color_surface_accent_green",color:"$color_text_accent_green"},{background:"$color_surface_accent_blue",color:"$color_text_accent_blue"}],TextChocoChipList=()=>{let{selectedUnit:e,isRedirecting:t,setIsRedirecting:n}=(0,eN.XV)(),{data:r,isLoading:o,isValidating:i}=useChipList((null==e?void 0:e.name)||""),{onMakeNewChat:a}=(0,tb.M)(e),{trackEvent:l}=(0,ev.Ke)(),c=(0,e_.useRef)(null),{onClickNewChat:d}=handleClick({selectedUnit:e,isRedirecting:t,hoverStyles:tC,uuid:c,trackEvent:l,setIsRedirecting:n,onMakeNewChat:a});return useComponetEffect({chipList:r,selectedUnit:e,uuid:c,trackEvent:l}),(0,eu.tZ)(eh.Ug,{flexWrap:"wrap",justifyContent:"center",gap:"10px",maxWidth:"650px",minHeight:"70px",children:o||i?[,,,].fill(null).map((e,t)=>(0,eu.tZ)(eC.Od,{width:"240px",height:"30px",borderRadius:"40px"},t)):null==r?void 0:r.map((e,t)=>isAdChocoChip(e)?(0,eu.tZ)(AdTextChocoChipListItem,{chip:e,hoverStyle:tC[t%3],onClick:d(e,t)},e.content):(0,eu.tZ)(TextChocoChipListItem,{content:e.content,hoverStyle:tC[t%3],onClick:d(e,t)},e.content))})};function GPT4vChocoChipListItem_templateObject(){let e=(0,ep._)(["\n        &:hover {\n          cursor: pointer;\n        }\n      "]);return GPT4vChocoChipListItem_templateObject=function(){return e},e}let GPT4vChocoChipListItem=e=>{let{imgSrc:t,title:n}=e;return(0,eu.BX)(eh.Ug,{width:"305px",alignItems:"center",border:"1px solid",borderColor:"$color_outline_secondary",color:"$color_text_primary",borderRadius:"22px",maxWidth:"611px",minWidth:"300px",gap:"16px",css:(0,em.iv)(GPT4vChocoChipListItem_templateObject()),children:[(0,eu.tZ)(eh.xu,{width:"70px",minWidth:"70px",height:"70px",minHeight:"70px",borderTopLeftRadius:"22px",borderBottomLeftRadius:"22px",overflow:"hidden",position:"relative",children:(0,eu.tZ)("img",{src:t,alt:"thumbnail",style:{width:"100%",height:"100%"}})}),(0,eu.tZ)(eh.Jd,{typo:"$160-13-med",color:"$color_text_primary",px:"16px",children:n})]})},GPT4vChocoChipList=()=>{let{selectedUnit:e}=(0,eN.XV)(),{data:t}=useGPT4vChipList((null==e?void 0:e.displayName)||"");return(0,eu.tZ)(eh.Ug,{flexWrap:"wrap",justifyContent:"center",gap:"10px",maxWidth:"650px",children:null==t?void 0:t.slice(0,2).map((e,t)=>{let{images:n,title:r}=e;return(0,eu.tZ)(GPT4vChocoChipListItem,{title:r,imgSrc:n[0]})})})},ChocoChipList=()=>{let{selectedUnit:e}=(0,eN.XV)();return(null==e?void 0:e.displayName)==="GPT-4 Vision"?(0,eu.tZ)(GPT4vChocoChipList,{}):(0,eu.tZ)(TextChocoChipList,{})},AppChocoChipListHeader=()=>(0,eu.BX)(eh.Ug,{gap:"8px",children:[(0,eu.tZ)(e$.JO,{as:eS.MQJ,size:16,color:"$color_icon_tertiary"}),(0,eu.tZ)(eh.Jd,{typo:"$140-13-semi",color:"$color_text_tertiary",children:"こんな質問をすることができます"})]}),AppChocoChipListItem=e=>{let{content:t,colors:n,onClick:r}=e;return(0,eu.tZ)(eh.Ug,{justifyContent:"center",p:"6px 16px",border:"1px solid",borderColor:"$color_outline_secondary",borderRadius:"24px",backgroundColor:n.background,color:n.color,onClick:r,lineHeight:"16px",fontSize:"13px",fontWeight:"500",height:"fit-content",children:t})};var ty=n(42761);let tk=(0,e_.createContext)(null),ChocoChipABTestProvider=e=>{var t,n,r;let{children:o}=e,{user:i}=(0,eT.aF)(),{variant:a,loading:l}=(0,eR.i6)("fe-web-chatHome-chocoChip"),c=null!==(t=null==i?void 0:i.wrtnUid.at(-1))&&void 0!==t?t:"",d=!0;d=!a.enabled||null==i||!i.wrtnUid||null===(r=null===(n=a.payload)||void 0===n?void 0:n.value.includes(c))||void 0===r||r;let s=(0,e_.useMemo)(()=>({isVisibleGroup:d,loading:l}),[d,l]);return(0,eu.tZ)(tk.Provider,{value:s,children:o})},tw=(0,ty.TR)(tk,"[ChocoChipABTestProvider] cannot find context provider"),tZ=[{background:"$color_surface_accent_yellow",color:"$color_text_accent_yellow"},{background:"$color_surface_accent_blue",color:"$color_text_accent_blue"},{background:"$color_surface_accent_pink",color:"$color_text_accent_pink"}],AppChocoChipList=()=>{let{user:e}=(0,eT.aF)(),{data:t,isLoading:n}=useChipList("wrtn_search"),{trackEvent:r}=(0,ev.Ke)(),{postMessage:o}=(0,eg.sW)(),{loading:i,isVisibleGroup:a}=tw(),l=n||i,appCreateChat=(e,t)=>{r("click_cached_chip",{section_order:2,model_name:"WRTN_SEARCH",index:t,command_chip_name:e}),o({type:"create-chat",payload:{mode:"chat",params:{isChocoChip:!0,message:e}}})};return((0,e_.useEffect)(()=>{l||r("abtest_cached_chip",{is_visible:a})},[l,a]),(0,e_.useEffect)(()=>{(null==t?void 0:t.length)&&r("expose_cached_chip",{model_name:"WRTN_SEARCH",content:{...null==t?void 0:t.map(e=>e)},section_order:2})},[null==t?void 0:t.length]),e&&!l&&a)?(0,eu.BX)(eh.gC,{alignItems:"center",gap:"16px",px:"20px",pt:24,children:[(0,eu.tZ)(AppChocoChipListHeader,{}),(0,eu.tZ)(eh.Ug,{flexWrap:"wrap",justifyContent:"center",gap:"10px",maxWidth:"650px",minHeight:"70px",children:null==t?void 0:t.map((e,t)=>{let{content:n}=e;return(0,eu.tZ)(AppChocoChipListItem,{content:n,colors:tZ[t],onClick:()=>appCreateChat(n,t)},n)})})]}):(0,eu.tZ)(eh.xu,{height:0})};function PromptSuggestionListItem_templateObject(){let e=(0,ep._)(["\n        &:hover {\n          cursor: pointer;\n          background-color: ",";\n        }\n      "]);return PromptSuggestionListItem_templateObject=function(){return e},e}let PromptSuggestionListItem=e=>{var t;let{prompt:n,index:r}=e,o=(0,ef.T_)(),{setSelectedUnit:i,unitList:a,chatInputRef:l}=(0,eN.XV)(),c=(0,e0.Zl)(eH.dW),{trackEvent:d}=(0,ev.Ke)();return(0,eu.BX)(eh.Ug,{width:"100%",bg:"$color_surface_tertiary",p:"22px 16px",alignItems:"center",justifyContent:"space-between",borderRadius:"10px",css:e=>{var t;return(0,em.iv)(PromptSuggestionListItem_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_hover)},onClick:()=>{d("click_prompt_chip",{section_order:5,index:r,position:"chat",prompt_id:n._id,prompt_category_name:n.category.name,prompt_title:n.title});let e=a.find(e=>{var t;return e.name.toLowerCase()===(null===(t=n.recommendedModel)||void 0===t?void 0:t.toLowerCase())});e&&i(e),c(n.prompt);let t=l.current;if(t){let e=new IntersectionObserver(n=>{n.forEach(n=>{n.isIntersecting&&(t.focus(),e.disconnect())})},{root:null,threshold:1});e.observe(t),t.scrollIntoView({behavior:"smooth",block:"end"}),eq.Am.alert(o("common.alert.prompt_input"),"PROMPT_INPUT")}},children:[(0,eu.BX)(eh.Ug,{gap:"16px",alignItems:"center",children:[(0,eu.tZ)(eh.xu,{size:"48px",children:(0,eu.tZ)("img",{src:n.category.iconImageUrl,alt:n.category.name,style:{width:"100%",height:"100%",objectFit:"cover",borderRadius:"50%"}})}),(0,eu.BX)(eh.gC,{gap:"6px",children:[(0,eu.tZ)(eh.kC,{bg:"$color_surface_ivory",width:"fit-content",color:"$color_text_secondary",fontSize:"10px",fontWeight:600,p:"3px 6px",borderRadius:"3px",children:null===(t=n.tags)||void 0===t?void 0:t[0]}),(0,eu.tZ)(eh.Jd,{color:"$color_text_primary",typo:"$160-14-med",children:n.title})]})]}),(0,eu.tZ)(e$.JO,{as:eS.xMl,size:24,color:"$color_icon_tertiary"})]})};function PromptSuggestionListHeader_templateObject(){let e=(0,ep._)(["\n            &:hover {\n              cursor: pointer;\n              color: ",";\n\n              path {\n                fill: ",";\n              }\n            }\n          "]);return PromptSuggestionListHeader_templateObject=function(){return e},e}let PromptSuggestionListHeader=()=>{let e=(0,ef.T_)("home.prompt_suggestion_list"),t=(0,eO.useRouter)(),{trackEvent:n}=(0,ev.Ke)();return(0,eu.BX)(eh.Ug,{justifyContent:"space-between",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-16-semi",color:"$color_text_primary",children:e("title")}),t_.sO&&(0,eu.BX)(eh.Ug,{gap:"2px",alignItems:"center",onClick:()=>{n("click_more_btn",{section_name:"프롬프트 카드",sectionOrder:5}),t.push("/prompt")},color:"$color_action_blue_primary",css:e=>{var t,n;return(0,em.iv)(PromptSuggestionListHeader_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_action_blue_secondary,null===(n=e.colors)||void 0===n?void 0:n.$color_action_blue_secondary)},children:[(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",children:e("more")}),(0,eu.tZ)(e$.JO,{as:eS.xMl,size:20,color:"$color_action_blue_primary"})]})]})},getPromptTemplates=async e=>ek.Np.BE2.get("/prompt-templates?limit=6",e),useGetRecommendPromptList=()=>(0,eI.dH)("/prompt-templates",async()=>{let e=await getPromptTemplates({params:{recommended:!0}});return e.data.data},{errorRetryCount:0,fallbackData:{promptTemplates:[],totalCount:0}});function PromptSuggestionList_templateObject(){let e=(0,ep._)(["\n          @media (max-width: 652px) {\n            grid-template-columns: 1fr;\n          }\n        "]);return PromptSuggestionList_templateObject=function(){return e},e}let PromptSuggestionList=()=>{let{data:e,isLoading:t}=useGetRecommendPromptList(),{trackEvent:n}=(0,ev.Ke)();return(0,e_.useEffect)(()=>{e&&n("view_prompthub_card",{content:e.promptTemplates.map(e=>e._id),section_order:5})},[e]),(0,eu.BX)(eh.gC,{width:"100%",gap:"14px",px:["20px","20px","40px"],children:[(0,eu.tZ)(PromptSuggestionListHeader,{}),(0,eu.tZ)(eh.rj,{maxWidth:"767px",gridTemplateColumns:"repeat(2, 1fr)",rowGap:"12px",columnGap:"16px",css:(0,em.iv)(PromptSuggestionList_templateObject()),children:t?Array(6).fill(null).map((e,t)=>(0,eu.tZ)(eC.Od,{width:"100%",height:"92px",borderRadius:"10px"},t)):null==e?void 0:e.promptTemplates.map((e,t)=>(0,eu.tZ)(PromptSuggestionListItem,{prompt:e,index:t},e._id))})]})};function RecentUnitListItem_templateObject(){let e=(0,ep._)(["\n        cursor: pointer;\n\n        &:hover {\n          background-color: ",";\n        }\n      "]);return RecentUnitListItem_templateObject=function(){return e},e}let RecentUnitListItem=e=>{let{displayName:t,thumbnail:n,onClick:r}=e;return(0,eu.BX)(eh.Ug,{p:"6px 16px 6px 8px",gap:"6px",alignItems:"center",bg:"$color_surface_elevated",border:"1px solid",borderColor:"$color_outline_tertiary",borderRadius:"40px",css:e=>{var t;return(0,em.iv)(RecentUnitListItem_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_hover)},minWidth:"fit-content",onClick:r,children:[(0,eu.tZ)(CharacterAvatar,{width:"24px",height:"24px",imgSrc:n,borderRadius:"24px",imgStyle:{width:"calc(100% + 2px)",height:"calc(100% + 2px)",transform:"translate(-1px, -1px)"}}),(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_text_primary",children:t})]})};function RecentUnitListContainer_templateObject(){let e=(0,ep._)(["\n              cursor: pointer;\n\n              &:hover {\n                background-color: ",";\n              }\n            "]);return RecentUnitListContainer_templateObject=function(){return e},e}let RecentUnitListContainer=()=>{let e=(0,ef.T_)("home.recent_unit_list"),{chatList:t,isLoading:n}=(0,eA.c)(),{moveRecentChat:r}=(0,eL.Jq)(),{push:o}=(0,eO.useRouter)(),{trackEvent:i}=(0,ev.Ke)(),a=(0,ew.mN)(t.map(e=>{var t;return e.character?{displayName:e.character.name,thumbnail:(null===(t=e.character.profileImage)||void 0===t?void 0:t.origin)||"",_id:e.character._id,type:"c"}:e.tempUnit?{displayName:e.tempUnit.displayName,thumbnail:e.tempUnit.thumbnail,_id:e.tempUnit._id,type:"u"}:null}),"_id").filter(e=>!!e).slice(0,3),renderRecentUnitList=()=>0===a.length?(0,eu.tZ)(eh.kC,{height:"38px",alignItems:"center",children:(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_text_tertiary",children:e("empty")})}):(0,eu.BX)(eu.HY,{children:[a.map((e,t)=>(0,eu.tZ)(RecentUnitListItem,{...e,onClick:()=>{i("click_recent_model_chip",{name:e.displayName,index:t,section_order:3,feature_menu:"c"===e.type?"character":"chat"}),r(e._id,e.type,{onMoveRecent:()=>{i("create_chat",{type:"recent_chat_click",unit_id:e._id})}})}},e._id)),1===a.length&&(0,eu.BX)(eh.Ug,{p:"6px 12px 6px 16px",gap:"6px",alignItems:"center",bg:"$color_surface_tertiary",border:"1px solid",borderColor:"$color_outline_tertiary",borderRadius:"40px",css:e=>{var t;return(0,em.iv)(RecentUnitListContainer_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_tertiary_hover)},minWidth:"fit-content",onClick:()=>{o("/chat/character"),i("click_character_more_chip",{section_order:3})},children:[(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_text_tertiary",children:e("explore")}),(0,eu.tZ)(e$.JO,{as:eS.xMl,color:"$color_icon_tertiary",size:16})]})]});return(0,e_.useEffect)(()=>{a.length&&i("expose_recent_model_chip",{contents:{...a.map(e=>{let{displayName:t}=e;return t})},section_order:3})},[a]),(0,eu.BX)(eh.gC,{width:"100%",gap:"14px",children:[(0,eu.tZ)(eh.Jd,{color:"$color_text_primary",typo:"$100-16-semi",px:["20px","20px","40px"],children:e("recent_ai")}),(0,eu.tZ)(eh.Ug,{px:eg.P8?"0px":["20px","20px","40px"],children:(0,eu.tZ)(CarouselContainer,{px:eg.P8?["20px","20px","40px"]:"0px",gap:"12px",renderContent:()=>(0,eu.tZ)(eu.HY,{children:n?[,,,].fill(null).map((e,t)=>(0,eu.tZ)(eC.Od,{width:"96px",height:"38px",borderRadius:"40px"},t)):renderRecentUnitList()})})})]})},tI=th()(()=>n.e(7820).then(n.bind(n,97820)).then(e=>e.ChatInputContainer),{loadableGenerated:{webpack:()=>[97820]},ssr:!1}),ChatHome=()=>{let{mediaQueries:e}=(0,eB.TC)(),t=(0,eg.ac)(e.mobile),{user:n}=(0,eT.aF)();return(0,eu.tZ)(eN.c6,{children:(0,eu.BX)(eh.gC,{maxWidth:["807px","807px","847px"],width:"100%",height:"calc(100%".concat(t?" - ".concat(56,"px"):"",");"),alignItems:"center",children:[t&&(0,eu.tZ)(eh.xu,{width:"100%",height:60,minHeight:60,borderBottom:"1px solid",borderColor:"$color_divider_secondary"}),(0,eu.BX)(eh.gC,{py:"30px",width:"100%",children:[(0,eu.BX)(eh.gC,{alignItems:"center",px:["20px","20px","40px"],children:[(0,eu.tZ)(ChatHomeBanner,{}),(0,eu.BX)(eh.gC,{gap:"26px",width:"100%",alignItems:"center",children:[(0,eu.tZ)(eh.xu,{width:"100%",minHeight:"134px",children:(0,eu.tZ)(tI,{})}),(0,eu.tZ)(ChocoChipList,{})]})]}),(0,eu.tZ)(eh.xu,{height:86}),(0,eu.BX)(eh.gC,{width:"100%",gap:"48px",children:[n&&(0,eu.tZ)(RecentUnitListContainer,{}),t_.sO&&(0,eu.tZ)(CharacterRecommendList,{}),t_.vc&&(0,eu.tZ)(CharacterRandomList,{}),(0,eu.tZ)(PromptSuggestionList,{})]}),t_.sO&&(0,eu.tZ)(ChatHomeIsland,{})]})]})})},LegacyHome=()=>(0,eu.tZ)(ChatHome,{});function ChatPageLayoutV2_templateObject(){let e=(0,ep._)(["\n          flex-grow: 1;\n\n          &::-webkit-scrollbar {\n            display: none;\n          }\n\n          -ms-overflow-style: none;\n          scrollbar-width: none;\n        "]);return ChatPageLayoutV2_templateObject=function(){return e},e}let ChatPageLayoutV2=e=>{let{content:t,footer:n}=e;return(0,eu.tZ)(eh.gC,{width:"100%",height:"100%",justifyContent:"center",children:(0,eu.BX)(eh.gC,{id:"chat-content",width:"100%",height:"100dvh",overflowY:"scroll",css:(0,em.iv)(ChatPageLayoutV2_templateObject()),children:[(0,eu.tZ)(eh.xu,{width:"100%",height:"100%",zIndex:1,overflowY:"auto",overflowX:"hidden",children:t}),(0,eu.tZ)(eh.xu,{width:"100%",children:n})]})})};var tO=n(33321);let tS=(0,tv.dU)("NEXT_PUBLIC_OLD_APP_URL")+"/store",tB=(0,tv.dU)("NEXT_PUBLIC_STUDIO_URL")||"",t$=(0,tv.dU)("NEXT_PUBLIC_STUDIO_PRO")||"",useGetMenuList=()=>{let e=(0,ef.T_)("footer"),t=(0,ef.bU)(),{trackEvent:n}=(0,ev.Ke)(),r=(0,e_.useMemo)(()=>[{type:"store",name:e("store"),path:tS,isOuterLink:!0,action:()=>{window.open(tS,"_blank","noopener"),n("click_main_page_footer_btn",{btn_type:e("store")})}},{type:"studio",name:e("studio"),path:tB,isOuterLink:!0,action:()=>{window.open(tB,"_blank","noopener"),n("click_main_page_footer_btn",{btn_type:e("studio")})}},{type:"studioPro",name:e("studio_pro"),path:t$,action:()=>{window.open(t$,"_blank","noopener"),n("click_main_page_footer_btn",{btn_type:e("studio_pro")})},isOuterLink:!0},{type:"prompt",name:e("prompt"),path:"/prompt",action:()=>{n("click_main_page_footer_btn",{btn_type:e("prompt")})}}],[e,n]),o=r.filter(e=>{let{type:t}=e;return"prompt"===t}),i=t===t_.pS.ko?r:o;return{menuList:i}},DefaultFooter=()=>{let{defaultSSOLink:e}=(0,eX.Ae)(),t=(0,ef.T_)(),n=(0,ef.bU)(),{menuList:r}=useGetMenuList(),o=(0,eg.ac)("(max-width: 539px)"),i=o?eh.gC:eh.Ug;return(0,eu.tZ)(eh.gC,{justifyContent:"center",alignItems:"center",backgroundColor:"$color_bg_screen",children:(0,eu.BX)(i,{paddingY:"20px",gap:"28px",alignItems:"center",children:["ko-KR"===n&&(0,eu.tZ)(eh.Ug,{gap:"26px",alignItems:"center",children:r.map(e=>{let{name:t,type:n,isOuterLink:r,path:o,action:i}=e;return r?(0,eu.tZ)(eh.zx,{onClick:i,children:(0,eu.tZ)(eh.Jd,{typo:"$160-14-med",color:"$color_text_textfield_disabled",children:t})},n):(0,eu.tZ)(ez(),{href:o,children:(0,eu.tZ)(eh.Jd,{typo:"$160-14-med",color:"$color_text_textfield_disabled",children:t})},n)})}),"ko-KR"===n&&r.length>0&&!o&&(0,eu.tZ)(eh.gC,{width:"1px",height:"14px",backgroundColor:"$color_divider_secondary"}),(0,eu.BX)(eh.Ug,{gap:"26px",alignItems:"center",children:["ja-JP"===n&&(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(ez(),{href:"/about",target:"_blank",rel:"noopener noreferrer",children:(0,eu.tZ)(eh.Jd,{typo:"$160-14-med",color:"$color_text_textfield_disabled",children:t("header.guide.company")})}),(0,eu.tZ)(ez(),{href:"https://wrtn.notion.site/7f4ef7dfcd544c689bd6e040173ad8cc",target:"_blank",rel:"noopener noreferrer",children:(0,eu.tZ)(eh.Jd,{typo:"$160-14-med",color:"$color_text_textfield_disabled",children:t("header.guide.community")})})]}),(0,eu.tZ)(ez(),{href:"ko-KR"===n?"https://help.wrtn.ai":"ja-JP"===n?"https://docs.google.com/forms/d/e/1FAIpQLSczgUnpFrSKWMhINRBWfnCd4NYnoUupm9bUdXbK0YKdKYTrKQ/viewform":"",target:"_blank",rel:"noopener noreferrer",children:(0,eu.tZ)(eh.Jd,{typo:"$160-14-med",color:"$color_text_textfield_disabled",children:t("footer.cs")})}),"ja-JP"===n&&!o&&(0,eu.tZ)(eh.xu,{width:"1px",height:"14px",backgroundColor:"$color_divider_secondary"}),(0,eu.tZ)(ez(),{href:e("/policy/service"),target:"_blank",rel:"noopener noreferrer",children:(0,eu.tZ)(eh.Jd,{typo:"$160-14-med",color:"$color_text_textfield_disabled",children:t("footer.terms")})}),"ko-KR"===n&&(0,eu.tZ)(ez(),{href:e("/policy/privacy/location"),target:"_blank",rel:"noopener noreferrer",children:(0,eu.tZ)(eh.Jd,{typo:"$160-14-med",color:"$color_text_textfield_disabled",children:t("footer.location_policy")})}),(0,eu.tZ)(ez(),{href:e("/policy/privacy"),target:"_blank",rel:"noopener noreferrer",children:(0,eu.tZ)(eh.Jd,{typo:"$160-14-med",color:"$color_text_textfield_disabled",children:t("footer.privacy")})}),"ko-KR"===n&&(0,eu.tZ)(ez(),{href:e("/policy/youth"),target:"_blank",rel:"noopener noreferrer",children:(0,eu.tZ)(eh.Jd,{typo:"$160-14-med",color:"$color_text_textfield_disabled",children:t("footer.youth")})})]})]})})};var tM=n(40999);let ChatLayout=e=>{let{pathname:t}=(0,ex.tv)(),{mediaQueries:n}=(0,eB.TC)(),r=(0,eg.ac)(n.mobile);return(0,eu.tZ)(tM.C,{chatList:(0,eu.tZ)(tO.j,{}),content:(0,eu.tZ)(ChatPageLayoutV2,{content:e.children,footer:r||"/"!==t&&"/chat"!==t?void 0:(0,eu.tZ)(DefaultFooter,{})})})};n(66807),n(84002);var tR=n(75007),tj=n(74427);let ChatHomePage=()=>{let{trackEvent:e}=(0,ev.Ke)(),{mode:t}=(0,eB.TC)();return(0,e_.useEffect)(()=>{e("view_main_page",{model_name:e2.ChatModel.WRTN_SEARCH.toUpperCase(),mode:t})},[]),(0,eu.BX)(eh.gC,{children:[(0,eu.BX)(eh.xu,{display:["block","block","none","none"],children:[(0,eu.tZ)(tj.y,{displayMenu:!1}),(0,eu.tZ)(MobileGuideView,{})]}),(0,eu.tZ)(eh.xu,{display:["none","none","block","block"],children:(0,eu.tZ)(eN.Rm,{children:(0,eu.tZ)(tR.b,{children:(0,eu.tZ)(ChatHomeV2,{})})})})]})},tE=e_.createContext(null),ChatProvider=e=>{let{children:t,initialValue:n}=e,r=e_.useMemo(()=>!!n&&!!n.chat&&!!n.chatId,[n]),o=e_.useMemo(()=>{var e;let t=null==n?void 0:null===(e=n.chat)||void 0===e?void 0:e.messages;return t&&t.flatMap(e=>e).filter(e=>"user"===e.role).pop()||null},[n]),i=e_.useMemo(()=>{var e;let t=null==n?void 0:null===(e=n.chat)||void 0===e?void 0:e.messages;return t?t.length:0},[n]),a=e_.useMemo(()=>{var e,t;return{chat:null!==(e=null==n?void 0:n.chat)&&void 0!==e?e:null,chatId:null!==(t=null==n?void 0:n.chatId)&&void 0!==t?t:null,isChatInsideRoom:r,lastUserMessage:o,messageLength:i}},[n]);return(0,eu.tZ)(tE.Provider,{value:a,children:t})},tA=(0,ty.TR)(tE,"[ChatProvider] cannot find context provider");function ai_fast_search_extends(){return(ai_fast_search_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var ai_fast_search=function(e){return e_.createElement("svg",ai_fast_search_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),p||(p=e_.createElement("path",{fill:"#F72F08",d:"m6.018 13.031 2.935-10.57a.515.515 0 0 1 .497-.38h7.882c.376 0 .626.39.468.731l-3.678 7.145h3.501c.445 0 .681.525.385.858L8.851 22.109c-.35.394-.996.07-.89-.447l1.963-7.988-3.407.008a.515.515 0 0 1-.499-.65"})))};function ai_search_extends(){return(ai_search_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var ai_search=function(e){return e_.createElement("svg",ai_search_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),_||(_=e_.createElement("path",{fill:"#FFBDB1",d:"M12 23.992c6.63 0 12-5.37 12-11.999C24 5.365 18.623 0 12 0S0 5.37 0 11.999s5.37 11.999 12 11.999z"})),m||(m=e_.createElement("path",{fill:"#FF7963",d:"M12 20.995c4.967 0 8.997-4.029 8.997-8.996S16.967 3.003 12 3.003s-8.997 4.03-8.997 8.996 4.03 8.996 8.997 8.996"})),h||(h=e_.createElement("path",{fill:"#FF4825",d:"M12 17.993c3.312 0 6-2.689 6-6s-2.688-6-6-6-6 2.689-6 6 2.688 6 6 6"})),g||(g=e_.createElement("path",{fill:"#F72F08",d:"M12 15.002a3.003 3.003 0 1 0 0-6.006A3 3 0 0 0 8.997 12 3 3 0 0 0 12 15.002"})),v||(v=e_.createElement("path",{fill:"url(#ai_search_svg__a)",d:"M22.392 6C20.314 2.41 16.439 0 12 0v11.999z",opacity:.5})),f||(f=e_.createElement("defs",null,e_.createElement("linearGradient",{id:"ai_search_svg__a",x1:12.243,x2:17.103,y1:11.512,y2:3.151,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#fff"}),e_.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})))))};function ai_search_dark_extends(){return(ai_search_dark_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var ai_search_dark=function(e){return e_.createElement("svg",ai_search_dark_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),x||(x=e_.createElement("g",{clipPath:"url(#ai_search_dark_svg__a)"},e_.createElement("path",{fill:"#431A11",d:"M12 23.998c6.63 0 12-5.37 12-11.999S18.63 0 12 0 0 5.376 0 12.005s5.37 11.999 12 11.999z"}),e_.createElement("path",{fill:"#7C2614",d:"M12 21.001c4.967 0 8.997-4.03 8.997-8.996S16.967 3.009 12 3.009s-8.997 4.029-8.997 8.996 4.03 8.996 8.997 8.996"}),e_.createElement("path",{fill:"#B3331A",d:"M12 17.999c3.312 0 6-2.689 6-6s-2.688-6-6-6-6 2.689-6 6 2.688 6 6 6"}),e_.createElement("path",{fill:"#F95939",d:"M12 15.002a3.003 3.003 0 1 0 0-6.006A3 3 0 0 0 8.997 12 3 3 0 0 0 12 15.002"}),e_.createElement("path",{fill:"url(#ai_search_dark_svg__b)",d:"M22.392 6.005C20.314 2.421 16.439.006 12 .006v11.999z",opacity:.4}))),b||(b=e_.createElement("defs",null,e_.createElement("linearGradient",{id:"ai_search_dark_svg__b",x1:12.243,x2:17.103,y1:11.518,y2:3.157,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#320C04"}),e_.createElement("stop",{offset:1,stopColor:"#320C04",stopOpacity:0})),e_.createElement("clipPath",{id:"ai_search_dark_svg__a"},e_.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))};function gpt4o_extends(){return(gpt4o_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var gpt4o=function(e){return e_.createElement("svg",gpt4o_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),C||(C=e_.createElement("g",{clipPath:"url(#gpt4o_svg__a)"},e_.createElement("path",{fill:"#FFBDB1",d:"m24 18.092-13.41-7.74V0L24 7.74z"}),e_.createElement("path",{fill:"#FF7963",d:"m20.468 20.063-13.41-7.74V1.97l13.41 7.74z"}),e_.createElement("path",{fill:"#FF4825",d:"m16.936 22.033-13.41-7.74V3.941l13.41 7.74z"}),e_.createElement("path",{fill:"#F72F08",d:"M13.41 24.004 0 16.264V5.906l13.41 7.74v10.358"}),e_.createElement("path",{fill:"url(#gpt4o_svg__b)",d:"m3.585 14.293 9.825 5.669v-6.31L3.585 7.978z",opacity:.5}))),y||(y=e_.createElement("defs",null,e_.createElement("linearGradient",{id:"gpt4o_svg__b",x1:9.694,x2:7.967,y1:19.267,y2:11.616,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#fff"}),e_.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})),e_.createElement("clipPath",{id:"gpt4o_svg__a"},e_.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))};function gpt4o_dark_extends(){return(gpt4o_dark_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var gpt4o_dark=function(e){return e_.createElement("svg",gpt4o_dark_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),k||(k=e_.createElement("g",{clipPath:"url(#gpt4o_dark_svg__a)"},e_.createElement("path",{fill:"#431A11",d:"m24 18.092-13.41-7.74V0L24 7.74z"}),e_.createElement("path",{fill:"#7C2614",d:"m20.468 20.063-13.41-7.74V1.97l13.41 7.74z"}),e_.createElement("path",{fill:"#B3331A",d:"m16.936 22.033-13.41-7.74V3.941l13.41 7.74z"}),e_.createElement("path",{fill:"#F95939",d:"M13.41 24.004 0 16.264V5.912l13.41 7.74z"}),e_.createElement("path",{fill:"url(#gpt4o_dark_svg__b)",d:"m3.585 14.293 9.825 5.669v-6.31L3.585 7.978z",opacity:.4}))),w||(w=e_.createElement("defs",null,e_.createElement("linearGradient",{id:"gpt4o_dark_svg__b",x1:12.642,x2:7.07,y1:22.004,y2:11.327,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#320C04"}),e_.createElement("stop",{offset:1,stopColor:"#320C04",stopOpacity:0})),e_.createElement("clipPath",{id:"gpt4o_dark_svg__a"},e_.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))};function icon_pro_symbol_dark_extends(){return(icon_pro_symbol_dark_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var icon_pro_symbol_dark=function(e){return e_.createElement("svg",icon_pro_symbol_dark_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),Z||(Z=e_.createElement("g",{clipPath:"url(#icon_pro_symbol_dark_svg__a)"},e_.createElement("path",{fill:"#3F008F",d:"M21.27 2.731c-1.576-1.577-5.314-.525-9.262 2.309v13.914a30.4 30.4 0 0 0 3.754-3.2c5.12-5.12 7.583-10.948 5.509-13.023"}),e_.createElement("path",{fill:"#6C09EA",d:"M2.735 2.732C4.307 1.16 8.05 2.206 11.998 5.04v13.915a30.4 30.4 0 0 1-3.754-3.2C3.124 10.635.661 4.806 2.735 2.732"}),e_.createElement("path",{fill:"#7230C5",d:"M15.754 8.246c5.12 5.12 7.583 10.948 5.509 13.023-1.577 1.577-5.314.525-9.263-2.309V5.04a30.4 30.4 0 0 1 3.754 3.2z"}),e_.createElement("path",{fill:"url(#icon_pro_symbol_dark_svg__b)",d:"M18.962 12a30.4 30.4 0 0 0-3.2-3.754 30.4 30.4 0 0 0-3.754-3.2V18.96a30.4 30.4 0 0 0 3.754-3.2 30.4 30.4 0 0 0 3.2-3.754z",opacity:.5}),e_.createElement("path",{fill:"#A863FF",d:"M8.244 8.246C3.124 13.36.661 19.189 2.735 21.263c1.578 1.577 5.315.526 9.263-2.309V5.04a30.4 30.4 0 0 0-3.754 3.2z"}))),I||(I=e_.createElement("defs",null,e_.createElement("linearGradient",{id:"icon_pro_symbol_dark_svg__b",x1:15.482,x2:15.482,y1:20.537,y2:7.44,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",null),e_.createElement("stop",{offset:1,stopOpacity:0})),e_.createElement("clipPath",{id:"icon_pro_symbol_dark_svg__a"},e_.createElement("path",{fill:"#fff",d:"M2 2h20v20H2z"})))))};function icon_pro_symbol_light_extends(){return(icon_pro_symbol_light_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var icon_pro_symbol_light=function(e){return e_.createElement("svg",icon_pro_symbol_light_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),O||(O=e_.createElement("path",{fill:"#DDCCF3",d:"M21.27 2.731c-1.576-1.577-5.314-.525-9.262 2.309v13.914a30.4 30.4 0 0 0 3.754-3.2c5.12-5.12 7.583-10.948 5.509-13.023"})),S||(S=e_.createElement("path",{fill:"#CFA8FF",d:"M2.735 2.732C4.307 1.16 8.05 2.206 11.998 5.04v13.915a30.4 30.4 0 0 1-3.754-3.2C3.124 10.635.661 4.806 2.735 2.732"})),B||(B=e_.createElement("path",{fill:"#B880FF",d:"M15.754 8.246c5.12 5.12 7.583 10.948 5.509 13.023-1.577 1.577-5.314.525-9.263-2.309V5.04a30.4 30.4 0 0 1 3.754 3.2z"})),$||($=e_.createElement("path",{fill:"url(#icon_pro_symbol_light_svg__a)",d:"M18.962 12a30.4 30.4 0 0 0-3.2-3.754 30.4 30.4 0 0 0-3.754-3.2V18.96a30.4 30.4 0 0 0 3.754-3.2 30.4 30.4 0 0 0 3.2-3.754z",opacity:.5})),M||(M=e_.createElement("path",{fill:"#A863FF",d:"M8.244 8.246C3.124 13.36.661 19.189 2.735 21.263c1.578 1.577 5.315.526 9.263-2.309V5.04a30.4 30.4 0 0 0-3.754 3.2z"})),R||(R=e_.createElement("defs",null,e_.createElement("linearGradient",{id:"icon_pro_symbol_light_svg__a",x1:15.482,x2:15.482,y1:20.537,y2:7.44,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#fff"}),e_.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})))))};function icon_wrtn_flame_extends(){return(icon_wrtn_flame_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var icon_wrtn_flame=function(e){return e_.createElement("svg",icon_wrtn_flame_extends({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,fill:"none"},e),j||(j=e_.createElement("path",{fill:"url(#icon_wrtn_flame_svg__a)",d:"M14.992 7.758c-.11-.113-.307-.041-.312.113l-.001.014c-.03.643-.581 1.166-1.257 1.19A1.4 1.4 0 0 1 12.925 9c-.808-.323-.859-.987-.801-1.396 0 0 .02-.158.127-.448l.021-.056.014-.035c.052-.122.38-.965.153-2.189-.35-2.222-1.983-3.397-2.715-3.82-.137-.078-.308.028-.288.179.046.35.07.91-.102 1.486-.157.497-.523.965-.729 1.202-1.426 1.657-3.154 3.468-3.627 3.96-.102.108-.53.583-.984 1.394a6.14 6.14 0 0 0-.69 2.831c0 4.003 3.842 7.15 8.202 6.274 2.529-.508 4.528-2.382 5.094-4.786.53-2.251-.181-4.364-1.607-5.839"})),E||(E=e_.createElement("path",{fill:"url(#icon_wrtn_flame_svg__b)",d:"M10 16.819a2.917 2.917 0 1 0 0-5.833 2.917 2.917 0 0 0 0 5.833"})),A||(A=e_.createElement("defs",null,e_.createElement("linearGradient",{id:"icon_wrtn_flame_svg__a",x1:10.04,x2:10.04,y1:1.031,y2:18.531,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#F72F08"}),e_.createElement("stop",{offset:1,stopColor:"#FF5A13"})),e_.createElement("linearGradient",{id:"icon_wrtn_flame_svg__b",x1:10,x2:10,y1:16.819,y2:10.986,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#FE884D"}),e_.createElement("stop",{offset:1,stopColor:"#FF712E"})))))};function image_extends(){return(image_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var assets_image=function(e){return e_.createElement("svg",image_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),T||(T=e_.createElement("g",{clipPath:"url(#image_svg__a)"},e_.createElement("path",{fill:"#FFBDB1",d:"m2 10.002.006-4.003 3.463-2.002L22.8 14.005 22.795 18l-3.463 2.008z"}),e_.createElement("path",{fill:"#FF7963",d:"m22.8 10.002-.005-4.003-3.463-2.002L2 14.005 2.006 18l3.463 2.008z"}),e_.createElement("path",{fill:"#FF4825",d:"M8.931 1.996 12.401 0l3.462 1.996V22.01L12.4 24l-3.469-1.99z"}),e_.createElement("path",{fill:"#F72F08",d:"m12.4 8 3.463 2.002v4.002L12.4 16.006l-3.469-2.001V10z"}),e_.createElement("path",{fill:"url(#image_svg__b)",d:"M15.863 18.008 12.4 16.006l3.463-2.001z",opacity:.5}),e_.createElement("path",{fill:"url(#image_svg__c)",d:"M8.938 10.002 12.4 8 8.937 6z",opacity:.5}))),L||(L=e_.createElement("defs",null,e_.createElement("linearGradient",{id:"image_svg__b",x1:13.19,x2:15.916,y1:13.155,y2:18.524,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#fff"}),e_.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})),e_.createElement("linearGradient",{id:"image_svg__c",x1:11.61,x2:8.884,y1:5.149,y2:10.518,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#fff"}),e_.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})),e_.createElement("clipPath",{id:"image_svg__a"},e_.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))};function image_dark_extends(){return(image_dark_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var image_dark=function(e){return e_.createElement("svg",image_dark_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),F||(F=e_.createElement("g",{clipPath:"url(#image_dark_svg__a)"},e_.createElement("path",{fill:"#431A11",d:"m2 10.002.006-4.003 3.463-2.002L22.8 14.005 22.795 18l-3.463 2.002z"}),e_.createElement("path",{fill:"#7C2614",d:"m22.8 10.002-.005-4.003-3.463-2.002L2 14.005 2.006 18l3.463 2.002z"}),e_.createElement("path",{fill:"#B3331A",d:"M8.931 1.996 12.401 0l3.462 1.996V22.01L12.4 24l-3.469-1.99z"}),e_.createElement("path",{fill:"#F95939",d:"m12.4 8 3.463 2.002v3.997L12.4 16.006l-3.469-2.007V10z"}),e_.createElement("path",{fill:"url(#image_dark_svg__b)",d:"M15.863 18.008 12.4 16.006l3.463-2.007z",opacity:.4}),e_.createElement("path",{fill:"url(#image_dark_svg__c)",d:"M8.938 10.002 12.4 8 8.937 6z",opacity:.4}))),P||(P=e_.createElement("defs",null,e_.createElement("linearGradient",{id:"image_dark_svg__b",x1:13.19,x2:15.916,y1:13.155,y2:18.524,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#320C04"}),e_.createElement("stop",{offset:1,stopColor:"#320C04",stopOpacity:0})),e_.createElement("linearGradient",{id:"image_dark_svg__c",x1:11.61,x2:8.884,y1:5.149,y2:10.518,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#320C04"}),e_.createElement("stop",{offset:1,stopColor:"#320C04",stopOpacity:0})),e_.createElement("clipPath",{id:"image_dark_svg__a"},e_.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))};let ModelSymbol=e=>{let{model:t}=e,{mode:n}=(0,eB.TC)(),r="dark"===n,o=(0,e_.useMemo)(()=>{switch(t){case e2.ChatModel.WRTN_SEARCH:return r?ai_search_dark:ai_search;case e2.ChatModel.WRTN_FAST_SEARCH:return ai_fast_search;case e2.ChatModel.GPT4:case e2.ChatModel.GPT4_ASSIGNMENT:return r?gpt4o_dark:gpt4o;case e2.ChatModel.PRO_MODE:return r?icon_pro_symbol_dark:icon_pro_symbol_light;case e2.ChatModel.SD3_TURBO:return r?image_dark:assets_image;case"flame":return icon_wrtn_flame;default:return r?ai_search_dark:ai_search}},[r,t]);return(0,eu.tZ)(o,{})},ChatSkeleton=()=>{let{chat:e}=tA(),t=(0,ef.T_)();return(0,eu.BX)(eh.gC,{mt:"20px",pb:"38px",gap:"16px",width:"100%",children:[(0,eu.BX)(eh.gC,{gap:"28px",children:[(0,eu.tZ)(eC.Od,{width:"400px",maxWidth:"90vw",height:"29px",borderRadius:"8px"}),(0,eu.BX)(eh.Ug,{gap:"8px",alignItems:"center",children:[(null==e?void 0:e.model)&&(0,eu.tZ)(ModelSymbol,{model:e.model}),(0,eu.tZ)(eh.Jd,{typo:"$100-18-semi",color:"$color_text_primary",children:t("chat.feature_home.home.answer")})]})]}),(0,eu.BX)(eh.gC,{gap:"12px",children:[(0,eu.tZ)(eC.Od,{width:"100%",height:"24px",borderRadius:"8px"}),(0,eu.tZ)(eC.Od,{width:"626px",height:"24px",borderRadius:"8px"}),(0,eu.tZ)(eC.Od,{width:"461px",height:"24px",borderRadius:"8px"}),(0,eu.tZ)(eC.Od,{width:"302px",height:"24px",borderRadius:"8px"})]})]})};function EmptyLayout_templateObject(){let e=(0,ep._)(["\n            flex-shrink: 0;\n          "]);return EmptyLayout_templateObject=function(){return e},e}function EmptyLayout_templateObject1(){let e=(0,ep._)(["\n            &::-webkit-scrollbar {\n              display: none;\n            }\n\n            -ms-overflow-style: none;\n            scrollbar-width: none;\n          "]);return EmptyLayout_templateObject1=function(){return e},e}let EmptyLayout=e=>{let{leftSection:t,rightSection:n}=e;return(0,eu.tZ)(eh.xu,{paddingX:"40px",width:"100%",height:"100%",children:(0,eu.BX)(eh.Ug,{width:"100%",height:"100%",maxWidth:"1024px",margin:"0 auto",gap:"12px",children:[(0,eu.tZ)(eh.gC,{width:780,css:(0,em.iv)(EmptyLayout_templateObject()),children:t}),(0,eu.tZ)(eh.xu,{display:["none","none","flex","flex"],overflow:"auto",width:280,py:"24px",flexDirection:"row",flexShrink:0,css:(0,em.iv)(EmptyLayout_templateObject1()),children:n})]})})};function EmptyContent_templateObject(){let e=(0,ep._)(["\n            > svg {\n              transform: scale(6.8354);\n            }\n          "]);return EmptyContent_templateObject=function(){return e},e}let EmptyContent=e=>{let{model:t}=e;return(0,eu.tZ)(EmptyLayout,{leftSection:(0,eu.tZ)(eh.xu,{width:"100%",height:"calc(100dvh - 56px)",display:"flex",alignItems:"center",justifyContent:"center",opacity:.2,css:(0,em.iv)(EmptyContent_templateObject()),position:"fixed",bottom:0,left:0,children:(0,eu.tZ)(ModelSymbol,{model:t||"flame"})})})};var tT=n(68440),tL=n(26281);let useDisplayStreamMessage=e=>{let[t,n]=e_.useState(""),r=(0,eG.sJ)(eH.CU),o="streaming"===r&&e;return e_.useEffect(()=>{"ready"!==r&&"canceling"!==r&&n("")},[r]),e_.useEffect(()=>{if(!e)return;let t=tL.k0.subscribe(e=>{e.idle||n(e.content)});return()=>{t.unsubscribe()}},[e]),{streamMessage:t,isStreaming:o}};n(52533);var tF=n(7869);let tP=e_.createContext(null),MessageProvider=e=>{let{children:t,message:n,isLastMessage:r}=e,o=e_.useMemo(()=>({message:n,isLastMessage:r,role:n[0].role,uuid:(0,e9.Z)()}),[n,r]);return(0,eu.tZ)(tP.Provider,{value:o,children:t})},tU=(0,ty.TR)(tP,"[MessageProvider] cannot find context provider"),tD=e_.createContext(null),UnitProvider=e=>{let{children:t,initialValue:n}=e,{user:r}=(0,eT.aF)(),o=(null==n?void 0:n.character)?null==n?void 0:n.character:(null==n?void 0:n.unit)?null==n?void 0:n.unit:null,i=(null==o?void 0:o._id)||null,a=(null==o?void 0:o.enableOptions)||null,l=e_.useMemo(()=>{var e;return(null==n?void 0:null===(e=n.unit)||void 0===e?void 0:e.displayOptions)?"model":(null==n?void 0:n.unit)?"unit":(null==n?void 0:n.character)?"character":null},[n]),c=e_.useMemo(()=>{var e;return"unit"===l||"model"===l?null==o?void 0:o.name:null==n?void 0:null===(e=n.character)||void 0===e?void 0:e.model},[l,n]),d=e_.useMemo(()=>{if("character"===l){var e,t,i,a;if((null==n?void 0:null===(e=n.character)||void 0===e?void 0:e.status)==="blocked"||(null==n?void 0:null===(t=n.character)||void 0===t?void 0:t.status)==="deleted"||(null==n?void 0:null===(i=n.character)||void 0===i?void 0:i.visibility)==="private"&&(null==n?void 0:null===(a=n.character)||void 0===a?void 0:a.wrtnUid)!==(null==r?void 0:r.wrtnUid))return!0}return"unit"===l&&(null==o?void 0:o.webStatus)!=="released"},[l,null==o?void 0:o.webStatus,n,null==r?void 0:r.wrtnUid]),s=e_.useMemo(()=>{if("character"===l){var e,t,i,a;if((null==n?void 0:null===(e=n.character)||void 0===e?void 0:e.status)==="blocked")return"blocked";if((null==n?void 0:null===(t=n.character)||void 0===t?void 0:t.status)==="deleted")return"deleted";if((null==n?void 0:null===(i=n.character)||void 0===i?void 0:i.visibility)==="private"&&(null==n?void 0:null===(a=n.character)||void 0===a?void 0:a.wrtnUid)!==(null==r?void 0:r.wrtnUid))return"private"}return"unit"===l&&(null==o?void 0:o.webStatus)!=="released"?"notSupported":null},[l,n]),u=e_.useMemo(()=>"pro_mode"===c,[c]),p=e_.useMemo(()=>"sd3_turbo"===c,[c]),_=e_.useMemo(()=>"gpt4_assignment"===c,[c]),m=e_.useMemo(()=>{var e;return{unit:o,character:null!==(e=null==n?void 0:n.character)&&void 0!==e?e:null,unitId:i,unitType:l,enableOptions:a,model:c,isUnitDisabled:d,disableType:s,isProMode:u,isImageModel:p,isAssignmentModel:_}},[n]);return(0,eu.tZ)(tD.Provider,{value:m,children:t})},tX=(0,ty.TR)(tD,"[UnitProvider] cannot find context provider"),useCopyPureText=()=>({copyPureText:()=>{var e,t;let n=null===(t=window)||void 0===t?void 0:null===(e=t.getSelection())||void 0===e?void 0:e.toString();n&&(document.addEventListener("copy",function(e){var t;null==e||null===(t=e.clipboardData)||void 0===t||t.setData("text/plain",n),e.preventDefault()}),document.execCommand("copy"))}}),useCurrentText=e=>{let{isLastMessage:t}=tU(),{streamMessage:n,isStreaming:r}=useDisplayStreamMessage(t),o=r&&n&&n.length>0,i=e&&e.length>0;return o?n:i?e:!e&&n?n:""},getAdEventProperties=e=>{var t,n,r,o,i,a,l,c,d,s,u;return{ad_creative_id:null!==(t=null==e?void 0:e.adCreativeId)&&void 0!==t?t:"",ad_group_id:null!==(n=null==e?void 0:e.adGroupId)&&void 0!==n?n:"",ad_product_category:null!==(r=null==e?void 0:e.adProductCategory)&&void 0!==r?r:"SINGLE",ad_campaign_id:null!==(o=null==e?void 0:e.campaignId)&&void 0!==o?o:"",ad_product_code:null!==(i=null==e?void 0:e.campaignAdProductCode)&&void 0!==i?i:"",ad_product_type:null!==(a=null==e?void 0:e.adProductType)&&void 0!==a?a:"",package_ad_creative_id:null!==(l=null==e?void 0:e.packageAdCreativeId)&&void 0!==l?l:"",ad_uuid:null!==(c=null==e?void 0:e.adUid)&&void 0!==c?c:"",ad_request_id:null!==(d=null==e?void 0:e.adRequestId)&&void 0!==d?d:"",ad_creative_detail_id:null!==(s=null==e?void 0:e.adCreativeDetailId)&&void 0!==s?s:"",ad_inventory_code:null==e?void 0:e.adInventoryCode,ad_uid:null!==(u=null==e?void 0:e.adUid)&&void 0!==u?u:""}},tJ=["1","4","8","12","16","30"],DefaultStep=e=>{let{text:t,messageId:n}=e,r=(0,ef.T_)("chat.generate_step.default"),o=(0,eG.sJ)(eH.GY),{chatId:i}=tA(),{unitType:a,unit:l}=tX(),c=(0,eG.sJ)(eH.h5),d=(0,eG.sJ)(eH.UB),s=(0,eG.sJ)(eH._b),{trackEvent:u}=(0,ev.Ke)(),p=e_.useRef(0),{getModelByModelName:_}=(0,eF.pw)(),m={1:r("1"),4:r("4"),8:r("8"),12:r("12"),16:r("16"),30:r("30")},h={1:r("character"),4:r("character"),8:r("character"),12:r("character"),16:r("character"),30:r("character")},[g,v]=e_.useState("");return((0,eQ.Yz)(()=>{p.current+=1,tJ.includes(p.current.toString())&&v("unit"===a?m[p.current]:h[p.current])},1e3),e_.useEffect(()=>{if(g&&t.length<1){var e;u("expose_wait_phrase_generate",{message:g,chat_id:i,model_name:null==l?void 0:l.name.toUpperCase(),msg_id:n,fe_msg_id:o,purpose:(null==l?void 0:l.name)&&t_.sO?null===(e=_(l.name))||void 0===e?void 0:e.displayName:void 0,is_image_input:c.images.length>0||d.imageCount>0,is_file_input:c.fileCount>0||d.fileCount>0,is_link_input:c.linkCount>0||d.linkCount>0,assignment_id:s})}},[g]),""===g)?null:(0,eu.tZ)(eD.y,{currentWaitingText:g,showCursor:"character"===a})};function MessageContentRenderer_templateObject(){let e=(0,ep._)(["\n          word-break: break-all;\n        "]);return MessageContentRenderer_templateObject=function(){return e},e}let MessageContentRenderer=e=>{let{message:t,isAdWebview:n,brandAdInfo:r}=e,o=(0,ef.T_)(),{postMessage:i}=(0,eg.sW)(),{unit:a,character:l,unitType:c,isProMode:d,isAssignmentModel:s}=tX(),{chatId:u,chat:p}=tA(),_=useCurrentText(t.content),{isLastMessage:m,uuid:h}=tU(),{isStreaming:g}=useDisplayStreamMessage(m),{copyPureText:v}=useCopyPureText(),{trackEvent:f}=(0,ev.Ke)(),{startTrack:x}=(0,ev.aY)(),{getModelByModelName:b}=(0,eF.pw)(),C="unit"===c?null==a?void 0:a.name.toUpperCase():null==l?void 0:l.model.toUpperCase();return(0,eu.BX)(eu.HY,{children:[_.length<1&&(null==a?void 0:a.name)!=="wrtn_search"&&(null==a?void 0:a.name)!=="fast_ai_search"&&!d&&!s&&g&&(0,eu.tZ)(DefaultStep,{text:_,messageId:t._id}),_.length<1&&"assistant"===t.role&&(g||(null==p?void 0:p.status)==="streaming")&&s&&(0,eu.BX)(eh.gC,{gap:"8px",mt:"16px",children:[(0,eu.tZ)(eC.Od,{height:"24px",width:"100%"}),(0,eu.tZ)(eC.Od,{height:"24px",width:"80%"}),(0,eu.tZ)(eC.Od,{height:"24px",width:"60%"}),(0,eu.tZ)(eC.Od,{height:"24px",width:"40%"})]}),(0,eu.tZ)(eh.xu,{css:(0,em.iv)(MessageContentRenderer_templateObject()),onCopy:v,children:(0,eu.tZ)(tF.U,{isAdWebview:n,content:_,handleLinkEventFactory:e=>{let{url:o,index:a}=e;return()=>{var e,l;let d=null===(e=t.searchResult)||void 0===e?void 0:e.find(e=>(0,e2.isAdSearchResult)(e)),s={chat_id:null!=u?u:"",msg_id:t._id,model_name:null!=C?C:"",link:null!=o?o:"",uuid:null!=h?h:"",...d&&{is_ad:!0,_id:d.adId,...d.eventProperty}};if(n)f("click_webview_chat_url",{screen_name:"WebView",feature_name:"ad",advertiser_id:"sangsangin"}),i({type:"navigate",payload:{screen:"WebviewScreen",params:{url:o},type:"push"}});else{if(t.adCreativeId){let e=getAdEventProperties(r);f("track_chat_url",{feature_menu:"unit"===c?"chat":"character",index:a?Number(a):null,...s,event_type:"click",...e})}else f("track_chat_url",{feature_menu:"unit"===c?"chat":"character",index:a?Number(a):null,...s});x({type:"chat_link",purpose:t_.sO&&C?null===(l=b(C))||void 0===l?void 0:l.displayName:void 0,...s})}}},onClickCode:()=>(0,eq.wp)(o("common.alert.copy_code_success"))})})]})};var tz=n(98500),tN=n(35229),tH=n(90478);function ExportToPDFButton_templateObject(){let e=(0,ep._)(["\n          &:hover {\n            cursor: pointer;\n            background-color: ",";\n          }\n        "]);return ExportToPDFButton_templateObject=function(){return e},e}let ExportToPDFButton=e=>{let{messageRef:t,message:n}=e,r=(0,ef.T_)(),{trackEvent:o}=(0,ev.Ke)(),i=(0,eG.sJ)(eH._b),{chat:a}=tA(),l=(0,tH.useReactToPrint)({content:()=>{var e;return null!==(e=null==t?void 0:t.current)&&void 0!==e?e:null},pageStyle:"padding: 0 108px;"});return(0,eu.tZ)(eh.Ug,{alignItems:"center",children:(0,eu.BX)(eh.xu,{minWidth:"124px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"20px",border:"1px solid",backgroundColor:"$color_surface_ivory",borderColor:"$color_outline_tertiary",gap:"4px",css:e=>{var t;return(0,em.iv)(ExportToPDFButton_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_secondary_hover)},onClick:()=>{var e,t;l(),o("click_ai_writing_file_download_btn",{file_type:"pdf",assignmentId:i,feature_menu:"chat",msg_id:null==n?void 0:n._id,model_name:null==a?void 0:null===(e=a.modelInfo)||void 0===e?void 0:e.name.toUpperCase(),purpose:null==a?void 0:null===(t=a.modelInfo)||void 0===t?void 0:t.displayName})},children:[(0,eu.tZ)(e$.JO,{as:eS.WGO,size:18}),(0,eu.tZ)(eh.Jd,{typo:"$110-12-med",color:"$color_text_primary",children:r("feature_assignment.result.save_pdf")})]})})};function MessageCopy_templateObject(){let e=(0,ep._)(["\n            &:hover {\n              path {\n                fill: ",";\n              }\n            }\n          "]);return MessageCopy_templateObject=function(){return e},e}let MessageCopy=e=>{let{message:t}=e,n=(0,ef.T_)(),{trackEvent:r}=(0,ev.Ke)(),{unit:o,unitType:i}=tX(),{getModelByModelName:a}=(0,eF.pw)();return!t.content||t.image&&t.image.imageUrls.length>0?null:(0,eu.tZ)(eh.xu,{width:18,height:18,children:(0,eu.tZ)(eC.u,{position:{bottom:"calc(100% + 8px)",left:"-100%"},content:n("ui.user_message.dropdown_more.copy"),children:(0,eu.tZ)(eh.zx,{width:18,height:18,onClick:()=>{var e,l;r("click_copy_btn",{chat_id:t.chatId,feature_menu:"chat",model_name:null==o?void 0:o.name.toUpperCase(),msg_id:t._id,character_id:"character"===i?null==o?void 0:o._id:null,purpose:null===(e=a(t.model))||void 0===e?void 0:e.displayName});let c="";if(t.content){let e=t.content.replace(/\[\[(.+?)\]\]\((.+?)\)/g,"[$1]");c=e}if(null===(l=t.searchResult)||void 0===l?void 0:l.length){let e=t.searchResult.map((e,t)=>{let{siteName:n,title:r,externalLink:o}=e;return r||n||o?"[".concat(t+1,"]").concat(n?" ".concat(n):"").concat(r?" - ".concat(r):"").concat(o?" (".concat(o,")"):""):null}).filter(Boolean).join("\n");c="".concat(c," \n\n").concat(n("chat.feature_chat_room.message_copy.search_link"),"\n").concat(e)}if(c){let e=t_.sO?"https://agent.wrtn.ai/5xb91l":"https://wrtn.jp";c="".concat(c," \n\n").concat(n("chat.feature_chat_room.message_copy.landing")," > ").concat(e),window.navigator.clipboard.writeText(c),(0,eq.wp)(n("common.alert.copy_message_success"))}},css:e=>{var t,n;return(0,em.iv)(MessageCopy_templateObject(),null!==(n=null===(t=e.colors)||void 0===t?void 0:t.$color_icon_brand)&&void 0!==n?n:"#f72f08")},children:(0,eu.tZ)(e$.JO,{as:eS.Tgi,color:"$color_icon_tertiary",size:18})})})})};function ModelGuideAction_templateObject(){let e=(0,ep._)(["\n          border: 1px solid ",";\n          text-align: left;\n        "]);return ModelGuideAction_templateObject=function(){return e},e}let ModelGuideAction=e=>{var t;let{openGuide:n,toggleDisliked:r,currentUserMessage:o,message:i,messageIndex:a}=e,l=(0,ef.T_)("chat.chat_room.message_evaluation_banner"),{id:c}=(0,eF.mn)(),{id:d}=(0,eF.mp)(),{id:s}=(0,eF.Jv)(),{id:u}=(0,eF.QW)(),{chat:p,chatId:_}=tA(),m=(null==p?void 0:p.model)===e2.ChatModel.WRTN_SEARCH,h=(null==p?void 0:p.model)===e2.ChatModel.GPT4,{data:g}=(0,e4.u7)(),v=(0,eG.Zl)(eH.gE),f=null==g?void 0:g.find(e=>e._id===(m?d:s)),x=t_.sO&&h&&(null===(t=o.content)||void 0===t?void 0:t.includes("그려줘")),{getModelByModelName:b}=(0,eF.pw)(),{onMakeNewChat:C}=(0,tb.M)(f),{trackEvent:y}=(0,ev.Ke)(),k=(0,e_.useMemo)(()=>x?l.rich("modal_guide_action.description.ai_image",{strong:e=>(0,eu.tZ)(eh.Jd,{typo:"$100-14-bold",color:"$color_action_blue_primary",as:"span",children:e})}):m?l.rich("modal_guide_action.description.pro_mode",{strong:e=>(0,eu.tZ)(eh.Jd,{typo:"$100-14-bold",color:"$color_action_blue_primary",as:"span",children:e})}):l.rich("modal_guide_action.description.ai_search",{strong:e=>(0,eu.tZ)(eh.Jd,{typo:"$100-14-bold",color:"$color_action_blue_primary",as:"span",children:e})}),[x,m,l]),guideAction=async()=>{var e,t,n;if(!p)return;let l=x?u:m?c:s;v(!0),y("click_unlike_banner_final_action_btn",{chatId:_,msg_id:i._id,chat_index:a,model_name:null==p?void 0:null===(e=p.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"recommend_model",recommend_chip_name:null,btn_name:m?t_.sO?"요약, 첨삭, 소설쓰기는 ".concat(t_.sO?"AI 과제와 업무":"GPT-4","로 실행해보기"):"要約、添削、小説ならGPT-4で試す":t_.sO?"다양한 자료 검색은 AI 검색으로 실행해보기":"より様々な参考資料の検索は、AI検索で試す",feedback_message:null,unlike_banner_abtest_group:"unlike_banner_B",purpose:(null==p?void 0:p.model)&&t_.sO?null===(t=b(p.model))||void 0===t?void 0:t.displayName:void 0}),y("create_chat",{type:"unlike_banner_recommendation_click",unit_id:l}),await C({unitId:l,input:null!==(n=null==o?void 0:o.content)&&void 0!==n?n:"",isChocoChip:!1,from:"chatRoom"},e=>{e&&r(),v(!1)})};return(0,eu.BX)(eh.Ug,{padding:"16px 16px 16px 20px",justifyContent:"space-between",flexWrap:"wrap",gap:"16px",children:[(0,eu.BX)(eh.Ug,{alignItems:"center",gap:"16px",flexWrap:"wrap",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_text_primary",children:l("modal_guide_action.title")}),"PRO_MODE"!==i.model&&(0,eu.tZ)(eh.zx,{onClick:guideAction,textAlign:"left",children:(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_action_blue_primary",children:(0,eu.BX)(eh.Ug,{gap:"4px",alignItems:"center",children:[(0,eu.tZ)(eh.Jd,{children:k}),(0,eu.tZ)(e$.JO,{as:eS.$Qe,color:"$color_action_blue_primary",size:16})]})})})]}),(0,eu.tZ)(eh.zx,{height:32,onClick:()=>{var e;n(),y("click_unlike_banner_recommend_more_btn",{chat_id:_,msg_id:i._id,chat_index:a,model_name:null==p?void 0:null===(e=p.model)||void 0===e?void 0:e.toUpperCase(),unlike_banner_abtest_group:"unlike_banner_B"})},flexShrink:0,backgroundColor:"$color_surface_ivory",borderRadius:"40px",css:e=>{var t;return(0,em.iv)(ModelGuideAction_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary)},children:(0,eu.BX)(eh.Ug,{gap:"4px",alignItems:"center",padding:"6px 8px 6px 14px",borderRadius:"40px",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_text_primary",children:l("modal_guide_action.description.another")}),(0,eu.tZ)(e$.JO,{as:eS.GGG,color:"$color_icon_quaternary",size:16})]})})]})};function Chip_templateObject(){let e=(0,ep._)(["\n        border: 1px solid ",";\n        text-align: left;\n      "]);return Chip_templateObject=function(){return e},e}let Chip=e=>{let{item:t,onClick:n,messageIndex:r,message:o,textDisabled:i}=e,{chat:a,chatId:l}=tA(),{trackEvent:c}=(0,ev.Ke)();return(0,eu.tZ)(eh.zx,{padding:"6px 16px",borderRadius:"40px",backgroundColor:"$color_surface_ivory",css:e=>{var t;return(0,em.iv)(Chip_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary)},onClick:()=>{var e;null==n||n(),c("click_unlike_banner_recommend_chip",{chatId:l,msg_id:o._id,chat_index:r,model_name:null==a?void 0:null===(e=a.model)||void 0===e?void 0:e.toUpperCase(),recommend_chip_name:t.value,unlike_banner_abtest_group:"unlike_banner_B"})},children:(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:i?"$color_text_secondary":"$color_text_primary",children:t.value})},t.key)};function GuideChipLayout_templateObject(){let e=(0,ep._)(["\n          border: 1px solid ",";\n          text-align: left;\n        "]);return GuideChipLayout_templateObject=function(){return e},e}let GuideChipLayout=e=>{let{title:t,renderContent:n}=e;return(0,eu.BX)(eh.gC,{gap:"16px",alignItems:"flex-start",children:[(0,eu.tZ)(eh.zx,{padding:"6px 16px",borderRadius:"40px",backgroundColor:"$color_surface_ivory",flexShrink:0,css:e=>{var t;return(0,em.iv)(GuideChipLayout_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary)},children:(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_text_primary",children:t})}),(0,eu.tZ)(eh.xu,{paddingBottom:"4px",width:"100%",children:n})]})},tG=e_.createContext(null),tW=e_.createContext(null),ChatInputProvider=e=>{let{children:t}=e,{user:n}=(0,eT.aF)(),{value:r,removeItem:o}=(0,eg._)(eY.et.chatInput),[i,a]=e_.useState(r||""),l=(0,eG.Zl)(eH.Bh),c=e_.useCallback(()=>{a("")},[]),d=e_.useMemo(()=>({setInput:a,clearInput:c}),[]),s=e_.useMemo(()=>({input:i}),[i]);return e_.useEffect(()=>{r&&""!==r&&(a(String(r)),o())},[]),e_.useEffect(()=>{n||""===i||l(i)},[n,i]),(0,eu.tZ)(tG.Provider,{value:s,children:(0,eu.tZ)(tW.Provider,{value:d,children:t})})},tK=(0,ty.TR)(tW,"[UpdateChatInputContextProvider] cannot find context provider"),tV=(0,ty.TR)(tG,"[ChatInputContextProvider] cannot find context provider"),tY=(0,e_.createContext)(null),ChatEvaluationABTestProvider=e=>{let{children:t}=e,n=(0,eR.c1)("fe-message-user-comment"),r=(0,e_.useCallback)(()=>n,[n]),o=(0,e_.useMemo)(()=>({getVariant:r}),[r]);return(0,eu.tZ)(tY.Provider,{value:o,children:t})};(0,ty.TR)(tY,"[ChatEvaluationABTestProvider] cannot find context provider");let ChatRoomLinkState=e=>{let{children:t}=e,{flag:n}=(0,eR.T6)("fe-web-chat-link"),{input:r}=tV(),{isProMode:o}=tX(),{chatId:i}=tA(),a=(0,eG.Zl)(eH.u3),{linkCount:l}=(0,eG.sJ)(eH.h5),{data:c}=(0,eK.$I)(i),d=((null==c?void 0:c.filter(e=>"LinkReferenceItem"===e.kind))||[]).length+l>=2,{updateAttachmentsWithLinks:s}=(0,eK.nB)({linkLimitExceeded:d}),u=(0,e_.useCallback)(()=>{if(!n||!o)return;let e=(0,eK.NH)(r).map(e=>(0,eK.R1)(e));a(t=>{let{newAttachments:n,isUpdated:r}=s(t,e);return r?n:t})},[r,a,s]);return(0,e_.useEffect)(()=>{u()},[r,u]),t};var tq=n(28488);n(46804),n(85001);var tQ=n(36326),t0=n(1972);let useGenerateEventsLogger=e=>{let{enableOptions:t}=tX(),{user:n}=(0,eT.aF)(),{trackEvent:r}=(0,ev.Ke)(),{measurePerformances:o}=(0,eL.DD)(),{sendAirbridgeEvent:i}=(0,tQ.lM)(),{getModelByModelName:a}=(0,eF.pw)(),l=(0,eG.sJ)(eH.h5),c=(0,eG.sJ)(eH.UB),d=(0,eG.sJ)(eH.Aq),s=(0,eG.sJ)(eH.gn),[u,p]=(0,eG.FV)(eH.GY),_=(0,e_.useCallback)(i=>{var u,_,m,h;let{params:g,messageId:v}=i,f=(0,e9.Z)();p(f);let x=eg.jU&&sessionStorage.getItem("user-generate-action"),b={chat_id:e,model_name:(null!==(_=null==g?void 0:g.model)&&void 0!==_?_:e2.ChatModel.GPT4).toUpperCase(),re_generate:!!(null==g?void 0:g.reroll),is_login:!!n},C={generate_position:"chat",feature_menu:(null==g?void 0:g.model)===e2.ChatModel.SD3_TURBO?"image":"chat",method:"enter"===x?"enter":"button",is_image_input:l.images.length>0||c.imageCount>0,is_file_input:l.fileCount>0||c.fileCount>0,is_link_input:l.linkCount>0||c.linkCount>0,is_with_ai_search:!!(null==g?void 0:g.proModeParentId),is_fast_ai_search_toggle:d,chathome_fast_ai_search_abtest_group:s,generate_model:(0,e2.isImageGenerateInput)(null!==(m=null==g?void 0:g.content)&&void 0!==m?m:"")&&(null==t?void 0:t.draw)?"SD3_TURBO":void 0,purpose:null===(u=a(null!==(h=null==g?void 0:g.model)&&void 0!==h?h:e2.ChatModel.GPT4))||void 0===u?void 0:u.displayName,msg_id:v,fe_msg_id:f,...b,...null==g?void 0:g.customEventProperties},y=o();(0,t0.K)("info","[ChatSocket] generateStart",{...b,...y&&{...y}}),r("click_generate_btn",C,()=>sessionStorage.setItem("user-generate-action",""))},[e,r,a,null==t?void 0:t.draw]),m=(0,e_.useCallback)(t=>{var o,i,p;let{params:_,startedAt:m,openedAt:h,messageId:g}=t,v={chat_id:e,msg_id:g,model_name:(null!==(i=null==_?void 0:_.model)&&void 0!==i?i:e2.ChatModel.GPT4).toUpperCase(),re_generate:!!(null==_?void 0:_.reroll),open_time:h&&m?(null==h?void 0:h.getTime())-(null==m?void 0:m.getTime()):-1,is_login:!!n},f={generate_position:"chat",is_image_input:l.images.length>0||c.imageCount>0,is_file_input:l.fileCount>0||c.fileCount>0,is_link_input:l.linkCount>0||c.linkCount>0,purpose:null===(o=a(null!==(p=null==_?void 0:_.model)&&void 0!==p?p:e2.ChatModel.GPT4))||void 0===o?void 0:o.displayName,is_command_chip:!!(null==_?void 0:_.commandChipType),is_with_ai_search:!!(null==_?void 0:_.proModeParentId),is_fast_ai_search_toggle:d,chathome_fast_ai_search_abtest_group:s,fe_msg_id:u,...v,...null==_?void 0:_.customEventProperties};(0,t0.K)("info","[ChatSocket] generateOpen",v),r("generate_open",f)},[e,r,a,u]),h=(0,e_.useCallback)((t,o)=>{var p,_,m,h,g,v,f,x,b,C,y,k,w;let{params:Z,startedAt:I,openedAt:O,messageId:S}=t,B={chat_id:e,msg_id:null!=S?S:"",model_name:(null!==(v=null==Z?void 0:Z.model)&&void 0!==v?v:e2.ChatModel.GPT4).toUpperCase(),re_generate:!!(null==Z?void 0:Z.reroll),generate_time:I?new Date().getTime()-(null==I?void 0:I.getTime()):-1,streaming_time:O?new Date().getTime()-(null==O?void 0:O.getTime()):-1,is_login:!!n},$={feature_menu:(null==Z?void 0:Z.model)===e2.ChatModel.SD3_TURBO?"image":"chat",generate_position:"chat",generate_character:o.content.length,link_number:null!==(f=null===(p=o.searchResult)||void 0===p?void 0:p.length)&&void 0!==f?f:0,chatroom_model_name:null==Z?void 0:Z.model.toUpperCase(),purpose:null===(_=a(null!==(x=null==Z?void 0:Z.model)&&void 0!==x?x:e2.ChatModel.GPT4))||void 0===_?void 0:_.displayName,image_number:null!==(b=null===(h=o.image)||void 0===h?void 0:null===(m=h.imageUrls)||void 0===m?void 0:m.length)&&void 0!==b?b:0,image_urls:null!==(C=null===(g=o.image)||void 0===g?void 0:g.imageUrls.map(e=>e.url))&&void 0!==C?C:[],is_image_input:l.images.length>0||c.imageCount>0,is_file_input:l.fileCount>0||c.fileCount>0,is_link_input:l.linkCount>0||c.linkCount>0,is_recommend_link:!!o.searchResult&&o.searchResult.length>0,is_command_chip:!!(null==Z?void 0:Z.commandChipType),command_chip_type:null!==(y=null==Z?void 0:Z.commandChipType)&&void 0!==y?y:"",is_with_ai_search:!!(null==Z?void 0:Z.proModeParentId),is_fast_ai_search_toggle:d,chathome_fast_ai_search_abtest_group:s,assignment_id:null==Z?void 0:Z.assignmentId,fe_msg_id:u,...B,...null==Z?void 0:Z.customEventProperties};(0,t0.K)("info","[ChatSocket] generateDone",B),r("generate_done",$),i("generate_done",{action:(0,tQ.CG)(null!==(k=null==Z?void 0:Z.model)&&void 0!==k?k:e2.ChatModel.GPT4),customAttributes:{chat_id:o.chatId,model_name:(0,tQ.Ih)(null!==(w=null==Z?void 0:Z.model)&&void 0!==w?w:e2.ChatModel.GPT4),generate_character:o.content.length||0,created_at:(0,eZ.pE)(),is_login:!!n}})},[e,r,a,i]),g=(0,e_.useCallback)((t,o)=>{var i,p,_,m,h,g;let{messageId:v,params:f,startedAt:x}=t,b={chat_id:e,msg_id:null!=v?v:"",model_name:(null!==(_=null==f?void 0:f.model)&&void 0!==_?_:e2.ChatModel.GPT4).toUpperCase(),re_generate:!!(null==f?void 0:f.reroll),generate_time:x?new Date().getTime()-(null==x?void 0:x.getTime()):-1,status_code:o.status,service_code:null!==(m=null===(i=o.serviceCode)||void 0===i?void 0:i.toString())&&void 0!==m?m:"000000",error_info:o.message,is_login:!!n},C={feature_menu:(null==f?void 0:f.model)===e2.ChatModel.SD3_TURBO?"image":"chat",generate_position:"chat",is_with_ai_search:!!(null==f?void 0:f.proModeParentId),is_fast_ai_search_toggle:d,chathome_fast_ai_search_abtest_group:s,is_image_input:l.images.length>0||c.imageCount>0,is_file_input:l.fileCount>0||c.fileCount>0,is_link_input:l.linkCount>0||c.linkCount>0,purpose:null===(p=a(null!==(h=null==f?void 0:f.model)&&void 0!==h?h:e2.ChatModel.GPT4))||void 0===p?void 0:p.displayName,is_command_chip:!!(null==f?void 0:f.commandChipType),is_recommend_link:!1,log_level:o.logLevel,...b,...null==f?void 0:f.customEventProperties,assignment_id:null==f?void 0:f.assignmentId,fe_msg_id:u};(0,t0.K)(null!==(g=o.logLevel)&&void 0!==g?g:"error","[ChatSocket] generateFail",b),r("generate_fail",C)},[e,r,a]),v=(0,e_.useCallback)(t=>{var n,o,l,c;let{params:d,messageId:s,startedAt:p}=t,_={chat_id:e,msg_id:null!=s?s:"",model_name:(null!==(o=null==d?void 0:d.model)&&void 0!==o?o:e2.ChatModel.GPT4).toUpperCase(),re_generate:!!(null==d?void 0:d.reroll),wait_time:p?new Date().getTime()-(null==p?void 0:p.getTime()):-1,streaming_time_after_open:t.openedAt?new Date().getTime()-t.openedAt.getTime():void 0},m={feature_menu:(null==d?void 0:d.model)===e2.ChatModel.SD3_TURBO?"image":"chat",purpose:null===(n=a(null!==(l=null==d?void 0:d.model)&&void 0!==l?l:e2.ChatModel.GPT4))||void 0===n?void 0:n.displayName,..._,...null==d?void 0:d.customEventProperties,fe_msg_id:u};(0,t0.K)("info","[ChatSocket] stopGenerate",_),r("stop_generate",m),i("generate_stop",{customAttributes:{chat_id:e,created_at:(0,eZ.pE)(),model_name:(0,tQ.Ih)(null!==(c=null==d?void 0:d.model)&&void 0!==c?c:e2.ChatModel.GPT4)}})},[e,r,a,i]),f=(0,e_.useCallback)(e=>{var t;let{params:n}=e;i("click_re_generate",{customAttributes:{chat_id:null==n?void 0:n.chatId,created_at:(0,eZ.pE)(),model_name:(0,tQ.Ih)(null!==(t=null==n?void 0:n.model)&&void 0!==t?t:e2.ChatModel.GPT4)}})},[i]);return{logGenerateStart:_,logGenerateOpen:m,logGenerateDone:h,logGenerateFail:g,logGenerateStop:v,logRegenerate:f}},useChatSocketEventEmitters=e=>{let{chatId:t,generateContext:n}=e,{logGenerateStart:r,logGenerateStop:o,logRegenerate:i}=useGenerateEventsLogger(t),a=(0,e_.useCallback)((e,t)=>{e.emit("enterChat",t)},[]),l=(0,e_.useCallback)((e,t)=>{e.emit("leaveChat",t)},[]),c=(0,e_.useCallback)((e,t)=>{e.emit("startChat",t),t.reroll&&i(n),r(n)},[r]),d=(0,e_.useCallback)((e,t)=>{e.emit("abortChat",t),o(n)},[]),s=(0,e_.useMemo)(()=>({enterChat:a,leaveChat:l,startChat:c,abortChat:d}),[a,l,c,d]);return s},getChat=e=>ek.Np.William.get("/chat-room/".concat(e)),getNonLoginChat=async e=>ek.Np.William.get("/guest-chat/".concat(e),{headers:{"x-wrtn-id":(0,tg.ej)(tg.Mv.__W_ID)}}),chatSwrKey=e=>"/chat/".concat(e),nonLoginChatSwrKey=e=>"/guest-chat/".concat(e),useChatRoom=e=>{let{user:t,isLoading:n}=(0,eT.aF)(),api=async()=>e?t?await getChat(e):getNonLoginChat(e):null,r=!e||n?null:t?chatSwrKey(e):nonLoginChatSwrKey(e),{data:o,error:i,mutate:a}=(0,eI.dH)(r,api,{revalidateOnFocus:!0,revalidateOnReconnect:!0,dedupingInterval:1e3});return(0,e_.useEffect)(()=>{n||o||i||a()},[n,o,i,a]),{data:o,error:i,mutate:a,isLoading:!o&&!i}},putGenerateUpScaledImageDownload=async e=>{let{targetUrl:t,imageId:n,email:r}=e;return ek.Np.William.put((0,ey.stringifyQueryParams)("/image/".concat(n,"/upscale"),{platform:(0,eg.Xf)(),user:r}),{targetUrl:t})},evaluateMessage=e=>ek.Np.BE.put("/message/".concat(e.messageId),e.data),evaluateImage=e=>ek.Np.BE.put("/image/".concat(e.imageId,"/url"),e.data),getAssignmentOutline=e=>ek.Np.William.get("/write-assignment/".concat(e)),getAssignmentNotificationStatus=e=>ek.Np.William.get("/write-assignment/chat/".concat(e)),postAssignmentNotification=e=>ek.Np.William.post("/write-assignment/chat/".concat(e,"/alarm")),useGetAssignmentOutline=e=>(0,eI.dH)(e&&"/write-assignment/".concat(e),e?()=>getAssignmentOutline(e):null,{revalidateOnFocus:!1}),useGetAssignmentNotificationStatus=e=>(0,eI.dH)("/write-assignment/chat/".concat(e,"/alarm"),()=>getAssignmentNotificationStatus(e),{revalidateOnFocus:!1}),usePostAssignmentNotification=e=>(0,eI._5)("/write-assignment/chat/".concat(e,"/alarm"),()=>postAssignmentNotification(e)),useChatSocketEventListeners=e=>{let{socket:t,chatId:n,onError:r,generateContext:o,setGenerateContext:i}=e,a=(0,e_.useRef)(""),l=(0,e_.useRef)([]),c=(0,e_.useRef)([]),{replace:d}=(0,ex.tv)(),{logGenerateOpen:s,logGenerateFail:u,logGenerateDone:p}=useGenerateEventsLogger(n),{mutate:_}=useChatRoom(n),{refetch:m}=(0,eA.c)(),h=(0,e0.Zl)(eH.CU),g=(0,e0.Zl)(eH.BF),v=(0,e_.useCallback)(()=>{a.current="",l.current=[],c.current=[],i({startedAt:null,openedAt:null,params:null,messageId:null}),h("ready")},[h,i]),f=(0,e_.useCallback)(()=>{g(!0)},[g]),x=(0,e_.useCallback)(e=>{l.current=[...l.current,e],tL.Gz.next(l.current)},[]),b=(0,e_.useCallback)(e=>{c.current=e.ads,tL.ai.next({ads:c.current})},[]),C=(0,e_.useCallback)(e=>{"chunk"in e&&"string"==typeof e.chunk&&(a.current||(i({openedAt:new Date}),s(o)),a.current=e.chunk,tL.k0.next({content:a.current,idle:!1}))},[i,s]),y=(0,e_.useCallback)(e=>{"assistant"===e.message.role&&e.message._id&&i({messageId:e.message._id})},[i]),k=(0,e_.useCallback)(e=>{var n;t&&(404===e.status?d("/"):eq.Am.alert(e.message),_(),u(o,e),o.params&&(null==r||r(null===(n=o.params)||void 0===n?void 0:n.content)),v())},[t,_,u,r,v]),w=(0,e_.useCallback)(async e=>{var t;(null===(t=e.message)||void 0===t?void 0:t.status)!=="cancel"&&p(o,e.message),v(),await Promise.all([_(),m()])},[v,n,p]),Z=(0,e_.useCallback)(()=>{t&&(t.disconnect(),t.connect(),n&&t.emit("enterChat",{chatId:n,clientHeaders:{"x-wrtn-id":(0,tg.ej)(tg.Mv.__W_ID),"wrtn-locale":"ja-JP"}}))},[t,n]);return(0,e_.useMemo)(()=>({connectChat:f,generateStep:x,ad:b,data:C,message:y,generationError:k,end:w,disconnectServer:Z}),[f,x,b,C,y,k,w,Z])},t1="NEW_USER_MESSAGE_ID",t2="NEW_ASSISTANT_MESSAGE_ID",createAssistantMessageTemplate=e=>{let{reroll:t=!1,content:n="",isTemp:r=!1,chipList:o=[],uuid:i="",id:a,chatId:l,isGenerateImage:c}=e;return{__v:0,_id:a||t2,content:n,createdAt:"",disliked:!1,liked:!1,role:"assistant",updatedAt:"",type:"Message",toolId:"",loading:!t,model:"",isTemp:r,dynamicChips:o,uuid:i,chatId:l,image:c?{imageUrls:[],_id:"SKELETON"}:void 0}},createUserMessageTemplate=e=>{let{content:t="",isTemp:n=!1,images:r,id:o}=e;return{__v:0,content:t,createdAt:"",disliked:!1,liked:!1,role:"user",updatedAt:"",messagedAt:"",_id:t1+o,type:"Message",toolId:"",loading:!0,model:"",isTemp:n,images:r,dynamicChips:[],searchResult:[]}},useMessageMutation=e=>{let{mutate:t}=useChatRoom(e);return{refetch:t,addMessage:e=>t(t=>{if(t)return{...t,messages:[...t.messages,e]}},{revalidate:!1,populateCache:!0}),updateMessage:e=>{t(t=>{if(t)return{...t,messages:t.messages.map(t=>Array.isArray(t)?t.map(t=>t._id===e._id?{...t,...e}:t):t._id===e._id?{...t,...e}:t)}},{revalidate:!1,populateCache:!0})},removeMessages:e=>t(t=>{if(!t)throw Error;return{...t,messages:t.messages.filter(t=>{if(Array.isArray(t)){let n=t.filter(t=>!e.includes(t._id));return 0!==n.length&&n}return!e.includes(t._id)})}},{revalidate:!1,populateCache:!0}),prependMessage:e=>t(t=>{if(!t)throw Error;let n=t.messages.pop();return n?{...t,messages:[...t.messages,Array.isArray(n)?[e,...n]:[e,n]]}:t},{revalidate:!1,populateCache:!0})}},useLoadingMessage=e=>{let{addMessage:t,updateMessage:n,prependMessage:r,removeMessages:o}=useMessageMutation(e);return{addLoadingMessage:n=>{let{input:o,reroll:i,images:a,isGenerateImage:l}=n,c=createAssistantMessageTemplate({reroll:i,chatId:e||void 0,isGenerateImage:l});i?r(c):(t(createUserMessageTemplate({content:o,images:a})),t([c]))},updateAssistantLoadingMessage:e=>{let{isGenerateImage:t}=e;n({_id:t2,image:t?{imageUrls:[],_id:"SKELETON"}:void 0})},clearLoadingMessage:()=>{o([t1,t2])}}},useImageGenerate=()=>({isImageGenerateInput:e=>t_.sO&&e.includes("그려줘"),isImageGenerateModel:e=>"sdxl"===e||"sdxl_jp"===e||"dalle3"===e}),useChatSocket=e=>{let{chatId:t,socket:n,onError:r}=e,o=(0,e_.useRef)({startedAt:null,openedAt:null,params:null,messageId:null}),i=(0,e_.useCallback)(e=>{o.current=Object.assign(o.current,e)},[]),a={socket:n,chatId:t,onError:r,generateContext:o.current,setGenerateContext:i},l=(0,e_.useRef)(null),c=(0,e_.useRef)(!1),d=useChatSocketEventListeners(a),s=useChatSocketEventEmitters(a),u=(0,e0.Zl)(eH.CU),[p]=(0,e0.FV)(eH.BF),{addLoadingMessage:_}=useLoadingMessage(t),{isImageGenerateInput:m,isImageGenerateModel:h}=useImageGenerate(),{enableOptions:g}=tX();(0,e_.useEffect)(()=>{n&&p&&l.current&&(s.startChat(n,l.current),l.current=null)},[n,p,s]),(0,e_.useEffect)(()=>{if(!n)return;c.current&&n.removeAllListeners();let e=Object.entries(d);for(let[t,r]of e)n.on(t,r);c.current=!0},[n,t,d]);let v=(0,e_.useCallback)(async e=>{var t;if(!n)return;u("streaming");let r=new Date;if(o.current.startedAt=r,o.current.params=e,_({input:e.content,reroll:null!==(t=e.reroll)&&void 0!==t&&t,images:(null==g?void 0:g.image)?e.images:[],isGenerateImage:h(e.model)||m(e.content)&&(null==g?void 0:g.draw)&&"sd3_turbo"!==e.model}),!p){l.current=e;return}e.adContext||(e.adContext={adCreativeId:null,packageAdCreativeId:null,inventoryCodes:["CHAT_BRAND","CHAT_REFERENCE"]}),s.startChat(n,e)},[n,s,p,_,u,g,m,h]),f=(0,e_.useCallback)(()=>{n&&(u("ready"),s.abortChat(n,{chatId:t}))},[n,t,s,u]);return{generate:v,stop:f}},useModelABTest=()=>{let{variant:e}=(0,eR.i6)("fe-web-fastSearch-fastInternal");return{getVariantName:t=>{if(t===e2.ChatModel.WRTN_FAST_SEARCH)return{fast_ai_search:"B",fast_internal:e.name}}}},UnitModal=e=>{let{closeModal:t}=e,n=(0,ef.T_)("chat.feature_chat_room.unit_modal"),{user:r}=(0,eT.aF)(),{handleOpenLoginDialog:o}=(0,eY.tF)(),{unit:i,isUnitDisabled:a}=tX(),{mode:l,mediaQueries:c}=(0,eB.TC)(),d=(0,eg.ac)(c.mobile);return i?(0,eu.BX)(eh.gC,{width:"600px",maxWidth:"95vw",boxShadow:"dark"===l?"none":"0px 2px 4px 0px rgba(59, 63, 78, 0.03), 2px 4px 10px 0px rgba(79, 68, 195, 0.10);",borderRadius:"12px",border:"dark"===l?"1px solid":"none",borderColor:"$color_outline_secondary",backgroundColor:"$color_surface_elevated",maxHeight:"90vh",overflowY:"auto",zIndex:15,onClick:e=>e.stopPropagation(),children:[(0,eu.BX)(eh.Ug,{px:"24px",py:"20px",borderBottom:"1px solid",borderColor:"$color_divider_secondary",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-20-semi",color:"$color_text_primary",children:n("title")}),(0,eu.tZ)(eh.LZ,{}),(0,eu.tZ)(e$.JO,{as:eS.S5X,onClick:t,size:24,color:"$palette_gray_gray_600",style:{cursor:"pointer"}})]}),(0,eu.BX)(eh.gC,{padding:"24px",gap:"16px",backgroundColor:"$color_bg_screen",children:[(0,eu.BX)(eh.kC,{flexDirection:["column","column","row","row"],gap:"20px",children:[(0,eu.BX)(eh.Ug,{gap:["16px","16px","20px","20px"],alignItems:["center","center","flex-start","flex-start"],style:{flex:1},children:[(0,eu.tZ)("img",{style:{width:"100px",height:"100px"},src:i.thumbnail}),(0,eu.BX)(eh.gC,{gap:"8px",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-20-semi",color:"$color_text_primary",children:i.displayName}),(0,eu.tZ)(eh.Jd,{typo:"$100-15-med",color:"$color_text_secondary",children:i.provider})]})]}),(0,eu.tZ)(ez(),{href:"/chat/u/".concat(i._id,"?type=u"),onClick:e=>{!a&&r||(e.preventDefault(),r||o())},"aria-disabled":a,style:{height:"fit-content"},shallow:!0,children:(0,eu.tZ)(eh.Wv,{size:"$medium",hierarchy:"$primary",startContainer:(0,eu.tZ)(e$.JO,{as:eS.FNd,color:"$color_icon_ivory",size:16}),disabled:a,full:d,children:n("new_chat")})})]}),(0,eu.tZ)(eh.xu,{width:"100%",height:"1px",backgroundColor:"$color_divider_secondary"}),(0,eu.tZ)(eh.Jd,{typo:"$160-14-semi",color:"$color_text_secondary",children:i.cardDescription})]})]}):null},t4=e_.createContext(null),LoadingProvider=e=>{let{children:t}=e,[n,r]=e_.useState(!1),[o,i]=e_.useState(!1);return(0,eu.BX)(eu.HY,{children:[(0,eu.BX)(t4.Provider,{value:{setLoadingOverlay:r,setOpenUnitModal:i},children:[t,(0,eu.tZ)(eC.CO,{opened:o,onClose:()=>i(!1),renderContent:()=>(0,eu.tZ)(UnitModal,{closeModal:()=>i(!1)})})]}),n&&(0,eu.tZ)(eC.fz,{isVisible:n})]})},t3=(0,ty.TR)(t4,"[UpdateLoadingContext] cannot find context provider"),useGenerateChat=(e,t)=>{let[n]=(0,eG.FV)(eH.CU),r=(0,eG.Zl)(eH.y),[o,i]=(0,eG.FV)(eH.u3),a=(0,eG.Zl)(eH.Bb),l=(0,ef.bU)(),c=(0,eO.useRouter)(),d=(0,ef.T_)(),{user:s}=(0,eT.aF)(),{tokenize:u}={tokenize:e=>e.length},{trackEvent:p}=(0,ev.Ke)(),{unit:_,unitId:m,unitType:h,enableOptions:g}=tX(),{chatId:v,isChatInsideRoom:f}=tA(),{setLoadingOverlay:x}=t3(),b=e_.useRef(!1),{generate:C,stop:y}=useChatSocket({chatId:null!=v?v:"",socket:e,onError:t}),{handleOpenLoginDialog:k,handleOpenAnonymousDialog:w}=(0,eL.Zr)(),{createChatMutation:Z}=(0,eA.h)(),{getVariantName:I}=useModelABTest(),startGenerate=async e=>{var y;if("ready"!==n)return;b.current=!0;let O=v||"",S=e.model;if("ko-KR"===l&&"gpt4t"===S&&(S=e2.ChatModel.GPT4),(0,e2.getMaxTokenConstraints)(e.message,e.model)<=u(e.message)){eq.Am.alert(d("chat.use_generate_chat.max_token_error")),t&&t(e.message),p("expose_max_token_fail_modal",{message:e.message,chat_id:v,model_name:e.model.toUpperCase()});return}if(!f&&!0!==e.ignoreRoom){if(!m||!h)return;if("character"===h&&!s&&!(null==_?void 0:_.allowAnonymous)){k();return}let t=w();if(!t)return;x(!0);let n=await Z(m);if(n){O=n._id,c.replace("/chat/u/".concat(m,"/c/").concat(O),void 0,{shallow:!0}),b.current=!1,r({shouldRestart:!0,params:e});return}x(!1)}let B=await (0,eg.Ch)(),$=I(e.model),M={...e,model:S,images:(null==g?void 0:g.image)?e.images:[],referenceIds:e.referenceIds,assignmentId:e.assignmentId,content:e.message,chatId:null!=v?v:"",email:null!==(y=null==s?void 0:s.email)&&void 0!==y?y:"",platform:(0,eg.Xf)()||"web",williamRequestId:(0,e9.Z)(),clientHeaders:{"x-wrtn-id":(0,tg.ej)(tg.Mv.__W_ID),"wrtn-locale":l,"x-test-id":(0,tg.ej)(tg.Mv.X_TEST_ID)||"","wrtn-test-ab-model":$||"",...B}};a(o),i([]),C(M)};return{startGenerate,stopGenerate:y,generateStatus:n,generating:"ready"!==n,canStopGenerate:"streaming"===n}},t6=e_.createContext(null),GenerateProvider=e=>{let{children:t}=e,{setInput:n}=tK(),{socket:r}=(0,tq.i)(),{generating:o,startGenerate:i,stopGenerate:a,canStopGenerate:l,generateStatus:c}=useGenerateChat(r,n),d=e_.useMemo(()=>({generating:o,startGenerate:i,stopGenerate:a,canStopGenerate:l,generateStatus:c}),[o,i,a,l]);return(0,eu.tZ)(t6.Provider,{value:d,children:t})},t8=(0,ty.TR)(t6,"[GenerateProvider] cannot find context provider"),ChatRoomProvider=e=>{let{chat:t,children:n,unit:r,character:o,chatId:i}=e;return(0,eu.tZ)(UnitProvider,{initialValue:{unit:r,character:o},children:(0,eu.tZ)(ChatProvider,{initialValue:{chat:t,chatId:i},children:(0,eu.tZ)(ChatInputProvider,{children:(0,eu.tZ)(ChatRoomLinkState,{children:(0,eu.tZ)(LoadingProvider,{children:(0,eu.tZ)(GenerateProvider,{children:n})})})})})})},t5=e_.createContext(null),t7=e_.createContext(null),ChatMessageStatusProvider=e=>{let{children:t}=e,[n,r]=e_.useState(void 0),o=e_.useCallback(e=>{r(e)},[]),i=e_.useMemo(()=>({status:n}),[n]),a=e_.useMemo(()=>({changeStatus:o}),[o]);return(0,eu.tZ)(t5.Provider,{value:i,children:(0,eu.tZ)(t7.Provider,{value:a,children:t})})},t9=(0,ty.TR)(t7,"[UpdateChatInputContextProvider] cannot find context provider"),ne=(0,ty.TR)(t5,"[ChatInputContextProvider] cannot find context provider"),GuideChipContentForShortContext=e=>{let{onClick:t,messageIndex:n,message:r}=e,{startGenerate:o}=t8(),{lastUserMessage:i,chat:a,chatId:l}=tA(),{trackEvent:c}=(0,ev.Ke)(),d=(0,ef.T_)("chat.chat_room.model_guide_menu.short"),{getModelByModelName:s}=(0,eF.pw)(),u=d("title"),p=d("action");return(0,eu.tZ)(GuideChipLayout,{title:u,renderContent:(0,eu.BX)(eh.Ug,{gap:"10px",flexWrap:"wrap",alignItems:"center",children:[(0,eu.tZ)(eh.Jd,{typo:"$ex_140-14-med",color:"$color_text_primary",children:d("description")}),(0,eu.tZ)(eh.zx,{onClick:()=>{var e,_,m,h;if(!(null==a?void 0:a.model))return;let g="\n ".concat(d("supportMessage")),v="".concat((null!==(m=null==i?void 0:i.content)&&void 0!==m?m:"").replace(g,"")).concat(g);null==t||t(),o({message:v,model:null!==(h=null==a?void 0:a.model)&&void 0!==h?h:"",mode:e2.ChatMode.CHAT,reroll:!1,commandChipType:"",images:[]}),c("click_unlike_banner_final_action_btn",{chatId:l,msg_id:r._id,chat_index:n,model_name:null==a?void 0:null===(e=a.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"improve_current_prompt",recommend_chip_name:u,btn_name:p,feedback_message:null,unlike_banner_abtest_group:"unlike_banner_B",purpose:(null==a?void 0:a.model)&&t_.sO?null===(_=s(a.model))||void 0===_?void 0:_.displayName:void 0})},children:(0,eu.BX)(eh.Ug,{gap:"4px",alignItems:"center",children:[(0,eu.tZ)(eh.Jd,{typo:"$ex_140-14-med",color:"$color_action_blue_primary",children:p}),(0,eu.tZ)(eh.xu,{flexShrink:0,display:"flex",alignItems:"center",children:(0,eu.tZ)(e$.JO,{as:eS.$Qe,color:"$color_action_blue_primary",size:16})})]})})]})})},GuideChipForBrokenContext=e=>{let{onClick:t,messageIndex:n,message:r}=e,{startGenerate:o}=t8(),{chat:i,chatId:a}=tA(),{trackEvent:l}=(0,ev.Ke)(),c=(0,ef.T_)("chat.chat_room.model_guide_menu.broken_context"),d=c("title"),s=c("action"),u=c("description"),{getModelByModelName:p}=(0,eF.pw)();return(0,eu.tZ)(GuideChipLayout,{title:d,renderContent:(0,eu.BX)(eh.Ug,{gap:"10px",flexWrap:"wrap",alignItems:"center",children:[(0,eu.tZ)(eh.Jd,{typo:"$ex_140-14-med",color:"$color_text_primary",children:u}),(0,eu.tZ)(eh.zx,{onClick:()=>{var e,u,_;if(!(null==i?void 0:i.model))return;let m=c("supportMessage");null==t||t(),o({message:m,model:null!==(_=null==i?void 0:i.model)&&void 0!==_?_:"",mode:e2.ChatMode.CHAT,reroll:!1,commandChipType:"",images:[]}),l("click_unlike_banner_final_action_btn",{chatId:a,msg_id:r._id,chat_index:n,model_name:null==i?void 0:null===(e=i.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"improve_current_prompt",recommend_chip_name:d,btn_name:s,feedback_message:null,unlike_banner_abtest_group:"unlike_banner_B",purpose:t_.sO?null===(u=p(i.model))||void 0===u?void 0:u.displayName:void 0})},children:(0,eu.BX)(eh.Ug,{gap:"4px",alignItems:"center",children:[(0,eu.tZ)(eh.Jd,{typo:"$ex_140-14-med",color:"$color_action_blue_primary",children:s}),(0,eu.tZ)(eh.xu,{flexShrink:0,display:"flex",alignItems:"center",children:(0,eu.tZ)(e$.JO,{as:eS.$Qe,color:"$color_action_blue_primary",size:16})})]})})]})})};function GuideChipForFeedback_templateObject(){let e=(0,ep._)(["\n                color: ",";\n                resize: none;\n                outline: none;\n\n                border-radius: 5px;\n                border: 1px solid ",";\n\n                &::placeholder {\n                  color: ",";\n                }\n              "]);return GuideChipForFeedback_templateObject=function(){return e},e}let GuideChipForFeedback=e=>{let{onClick:t,messageIndex:n,message:r,type:o}=e,{trackEvent:i}=(0,ev.Ke)(),{chat:a,chatId:l}=tA(),[c,d]=(0,e_.useState)(""),s=(0,eg.ac)("(min-width: 1218px)"),u=(0,eG.Zl)(eH.yI),p=(0,ef.T_)("chat.chat_room.model_guide_menu.".concat(o)),_=p("title"),m=p("description"),h=p("placeholder"),g=p("action"),v=p("toast_message"),{getModelByModelName:f}=(0,eF.pw)(),onKeyDown=e=>{s&&"Enter"===e.key&&e.preventDefault()},changeFeedbackMessage=e=>{d(e.target.value.trim())};return(0,eu.tZ)(GuideChipLayout,{title:_,renderContent:(0,eu.BX)(eh.gC,{gap:"16px",width:"100%",children:[(0,eu.tZ)(eh.Jd,{typo:"$ex_140-14-med",color:"$color_text_primary",children:m}),(0,eu.BX)(eh.xu,{width:"100%",gap:"8px",display:"flex",flexDirection:s?"row":"column",children:[(0,eu.tZ)(eh.gx,{width:"100%",height:["60px","60px","60px","40px"],padding:"6px 16px",typo:"$160-16-med",placeholder:h,backgroundColor:"$color_surface_ivory",onKeyDown:e=>onKeyDown(e),onChange:e=>changeFeedbackMessage(e),css:e=>{var t,n,r;return(0,em.iv)(GuideChipForFeedback_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_text_primary,null===(n=e.colors)||void 0===n?void 0:n.$color_outline_secondary,null===(r=e.colors)||void 0===r?void 0:r.$color_text_textfield_disabled)}}),(0,eu.tZ)(eh.xu,{flexShrink:0,children:(0,eu.tZ)(eh.Wv,{size:"$medium",hierarchy:"$primary",onClick:()=>{var e,o;eq.Am.alert(v),a&&i("click_unlike_banner_final_action_btn",{chatId:l,msg_id:r._id,chat_index:n,model_name:null==a?void 0:null===(e=a.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"leave_feedback",recommend_chip_name:_,btn_name:g,feedback_message:c,unlike_banner_abtest_group:"unlike_banner_B",purpose:(null==a?void 0:a.model)&&t_.sO?null===(o=f(a.model))||void 0===o?void 0:o.displayName:void 0},()=>{null==t||t(),u(-1)})},disabled:!c,full:!0,children:(0,eu.tZ)(eh.Jd,{typo:"$100-16-semi",color:"$color_text_ivory",children:g})})})]})]})})},GuideChipForEtc=e=>(0,eu.tZ)(GuideChipForFeedback,{type:"etc",...e}),GuideChipForHallucination=e=>{let{onClick:t,messageIndex:n,message:r}=e,{chat:o,chatId:i,lastUserMessage:a}=tA(),l=(null==o?void 0:o.model)===e2.ChatModel.WRTN_SEARCH,{id:c}=(0,eF.Jv)(),d=(0,eG.Zl)(eH.gE),{data:s}=(0,e4.u7)(),u=null==s?void 0:s.find(e=>e._id===c),{onMakeNewChat:p}=(0,tb.M)(u),_=(0,ef.T_)("chat.chat_room.model_guide_menu.hallucination"),m=(0,eG.Zl)(eH.yI),{getModelByModelName:h}=(0,eF.pw)(),{trackEvent:g}=(0,ev.Ke)(),v=_("title"),f=_("action.link"),x=_("action.model"),b=_("description.link"),C=_("description.model"),openNewChat=async()=>{var e,l;o&&(d(!0),null==t||t(),g("click_unlike_banner_final_action_btn",{chatId:i,msg_id:r._id,chat_index:n,model_name:null==o?void 0:null===(e=o.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"recommend_model",recommend_chip_name:v,btn_name:x,feedback_message:null,unlike_banner_abtest_group:"unlike_banner_B"}),g("create_chat",{type:"unlike_banner_recommendation_click",unit_id:c}),await p({unitId:c,input:null!==(l=null==a?void 0:a.content)&&void 0!==l?l:"",isChocoChip:!1,from:"chatRoom"},()=>{d(!1)}))};return(0,eu.tZ)(GuideChipLayout,{title:v,renderContent:(0,eu.BX)(eh.gC,{gap:"12px",children:[!l&&(0,eu.BX)(eh.Ug,{gap:"10px",flexWrap:"wrap",alignItems:"center",children:[(0,eu.tZ)(eh.Jd,{typo:"$ex_140-14-med",color:"$color_text_primary",children:C}),(0,eu.tZ)(eh.zx,{onClick:openNewChat,children:(0,eu.BX)(eh.Ug,{gap:"4px",alignItems:"center",children:[(0,eu.tZ)(eh.Jd,{typo:"$ex_140-14-med",color:"$color_action_blue_primary",children:x}),(0,eu.tZ)(eh.xu,{flexShrink:0,display:"flex",alignItems:"center",children:(0,eu.tZ)(e$.JO,{as:eS.$Qe,color:"$color_action_blue_primary",size:16})})]})})]}),(0,eu.BX)(eh.Ug,{gap:"10px",flexWrap:"wrap",alignItems:"center",children:[(0,eu.tZ)(eh.Jd,{typo:"$ex_140-14-med",color:"$color_text_primary",children:b}),(0,eu.tZ)(eh.zx,{onClick:()=>{var e,a;if(!o)return;m(-1),null==t||t();let l=t_.sO?"https://help.wrtn.ai/6b9d0922-b39e-4c3f-800a-90a1a7b85b32":"https://wrtn.notion.site/42692e8fe9ff4cb69ad31f00dc37bf22";g("click_unlike_banner_final_action_btn",{chatId:i,msg_id:r._id,chat_index:n,model_name:null==o?void 0:null===(e=o.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"external_link",recommend_chip_name:v,btn_name:f,feedback_message:null,unlike_banner_abtest_group:"unlike_banner_B",purpose:(null==o?void 0:o.model)&&t_.sO?null===(a=h(o.model))||void 0===a?void 0:a.displayName:void 0}),window.open(l,"_blank")},children:(0,eu.BX)(eh.Ug,{gap:"4px",alignItems:"center",children:[(0,eu.tZ)(eh.Jd,{typo:"$ex_140-14-med",color:"$color_action_blue_primary",children:f}),(0,eu.tZ)(eh.xu,{flexShrink:0,display:"flex",alignItems:"center",children:(0,eu.tZ)(e$.JO,{as:eS.KB8,color:"$color_action_blue_primary",size:16})})]})})]})]})})},GuideChipForKnowHow=e=>{let{onClick:t,messageIndex:n,message:r}=e,o=(0,ef.T_)("chat.chat_room.model_guide_menu.know_how"),i=o("title"),a=o("action"),l=o("description"),{chat:c,chatId:d}=tA(),{trackEvent:s}=(0,ev.Ke)(),u=(0,eG.Zl)(eH.yI),{getModelByModelName:p}=(0,eF.pw)();return(0,eu.tZ)(GuideChipLayout,{title:i,renderContent:(0,eu.BX)(eh.Ug,{gap:"10px",flexWrap:"wrap",alignItems:"center",children:[(0,eu.tZ)(eh.Jd,{typo:"$ex_140-14-med",color:"$color_text_primary",children:l}),(0,eu.tZ)(eh.zx,{onClick:()=>{var e,o;if(!c)return;u(-1),null==t||t();let l=t_.sO?"https://help.wrtn.ai/":"https://cyber-shake-de5.notion.site/1128ac4ce90480c4a0c9d2917bcb8ed1?pvs=4";s("click_unlike_banner_final_action_btn",{chatId:d,msg_id:r._id,chat_index:n,model_name:null==c?void 0:null===(e=c.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"external_link",recommend_chip_name:i,btn_name:a,feedback_message:null,unlike_banner_abtest_group:"unlike_banner_B",purpose:(null==c?void 0:c.model)&&t_.sO?null===(o=p(c.model))||void 0===o?void 0:o.displayName:void 0}),window.open(l,"_blank")},children:(0,eu.BX)(eh.Ug,{gap:"4px",alignItems:"center",children:[(0,eu.tZ)(eh.Jd,{typo:"$ex_140-14-med",color:"$color_action_blue_primary",children:a}),(0,eu.tZ)(eh.xu,{flexShrink:0,display:"flex",alignItems:"center",children:(0,eu.tZ)(e$.JO,{as:eS.KB8,color:"$color_action_blue_primary",size:16})})]})})]})})},nt="65d591e80c06023ae70af73a",nn="65d592f0b18cdb6b8aa92373",GuideChipForLineWriting=e=>{let{onClick:t,messageIndex:n,message:r}=e,{chat:o,chatId:i,lastUserMessage:a}=tA(),l=(null==o?void 0:o.model)===e2.ChatModel.WRTN_SEARCH,{data:c}=(0,e4.u7)(),d=null==c?void 0:c.find(e=>e._id===(l?nt:nn)),{onMakeNewChat:s}=(0,tb.M)(d),{startGenerate:u}=t8(),{trackEvent:p}=(0,ev.Ke)(),_=(0,eG.Zl)(eH.gE),m=(0,ef.T_)("chat.chat_room.model_guide_menu.line_writing"),{getModelByModelName:h}=(0,eF.pw)(),g=m("title"),v=m(l?"action.gpt4_new_chat":"action.line_writing"),f=m(l?"description.gpt4":"description.line_writing"),x=m("supportMessage"),b=(0,e_.useMemo)(()=>{var e;let t="\n ".concat(x);return"".concat((null!==(e=null==a?void 0:a.content)&&void 0!==e?e:"").replace(t,"")).concat(t)},[l,null==a?void 0:a.content]),openNewChat=async()=>{var e,a;if(!(null==o?void 0:o.model))return;let c=l?nt:nn;null==t||t(),_(!0),p("create_chat",{type:"unlike_banner_recommendation_click",unit_id:c}),await s({unitId:c,input:b,isChocoChip:!1,from:"chatRoom"},()=>{_(!1)}),p("click_unlike_banner_final_action_btn",{chatId:i,msg_id:r._id,chat_index:n,model_name:null==o?void 0:null===(e=o.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"recommend_model",recommend_chip_name:g,btn_name:v,feedback_message:null,unlike_banner_abtest_group:"unlike_banner_B",purpose:(null==o?void 0:o.model)&&t_.sO?null===(a=h(o.model))||void 0===a?void 0:a.displayName:void 0})};return(0,eu.tZ)(GuideChipLayout,{title:g,renderContent:(0,eu.BX)(eh.Ug,{gap:"10px",flexWrap:"wrap",alignItems:"center",children:[(0,eu.tZ)(eh.Jd,{typo:"$ex_140-14-med",color:"$color_text_primary",children:f}),(0,eu.tZ)(eh.zx,{onClick:l?openNewChat:()=>{var e,a,l;(null==o?void 0:o.model)&&(null==t||t(),u({message:b,model:null!==(l=null==o?void 0:o.model)&&void 0!==l?l:"",mode:e2.ChatMode.CHAT,reroll:!1,commandChipType:"",images:[]}),p("click_unlike_banner_final_action_btn",{chatId:i,msg_id:r._id,chat_index:n,model_name:null==o?void 0:null===(e=o.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"improve_current_prompt",recommend_chip_name:g,btn_name:v,feedback_message:null,unlike_banner_abtest_group:"unlike_banner_B",purpose:(null==o?void 0:o.model)&&t_.sO?null===(a=h(o.model))||void 0===a?void 0:a.displayName:void 0}))},children:(0,eu.BX)(eh.Ug,{gap:"4px",alignItems:"center",children:[(0,eu.tZ)(eh.Jd,{typo:"$ex_140-14-med",color:"$color_action_blue_primary",children:v}),(0,eu.tZ)(eh.xu,{flexShrink:0,display:"flex",alignItems:"center",children:(0,eu.tZ)(e$.JO,{as:eS.$Qe,color:"$color_action_blue_primary",size:16})})]})})]})})},nr="66309fe4fa99736573f691be",GuideChipForNoImage=e=>{let{onClick:t,messageIndex:n,message:r}=e,{chat:o,chatId:i,lastUserMessage:a}=tA(),l=(0,eG.Zl)(eH.gE),{data:c}=(0,e4.u7)(),d=null==c?void 0:c.find(e=>e._id===nr),{onMakeNewChat:s}=(0,tb.M)(d),u=(0,ef.T_)("chat.chat_room.model_guide_menu.no_image"),{getModelByModelName:p}=(0,eF.pw)(),_=u("title"),m=u("action"),h=u("description"),{trackEvent:g}=(0,ev.Ke)(),v=(0,e_.useMemo)(()=>{var e;let t=" ".concat("그려줘");return"".concat((null!==(e=null==a?void 0:a.content)&&void 0!==e?e:"").replace(t,"")).concat(t)},[null==a?void 0:a.content]),openNewChat=async()=>{var e,a;o&&(l(!0),null==t||t(),g("click_unlike_banner_final_action_btn",{chatId:i,msg_id:r._id,chat_index:n,model_name:null==o?void 0:null===(e=o.model)||void 0===e?void 0:e.toUpperCase(),btn_type:"recommend_model",recommend_chip_name:_,btn_name:m,feedback_message:null,unlike_banner_abtest_group:"unlike_banner_B",purpose:(null==o?void 0:o.model)&&t_.sO?null===(a=p(o.model))||void 0===a?void 0:a.displayName:void 0}),g("create_chat",{type:"unlike_banner_recommendation_click",unit_id:"65d591810c06023ae70af738"}),await s({unitId:nr,input:v,isChocoChip:!1,from:"chatRoom"},()=>{l(!1)}))};return(0,eu.tZ)(GuideChipLayout,{title:_,renderContent:(0,eu.BX)(eh.Ug,{gap:"10px",flexWrap:"wrap",alignItems:"center",children:[(0,eu.tZ)(eh.Jd,{typo:"$ex_140-14-med",color:"$color_text_primary",children:h}),(0,eu.tZ)(eh.zx,{onClick:openNewChat,children:(0,eu.BX)(eh.Ug,{gap:"4px",alignItems:"center",children:[(0,eu.tZ)(eh.Jd,{typo:"$ex_140-14-med",color:"$color_action_blue_primary",children:m}),(0,eu.tZ)(eh.xu,{flexShrink:0,display:"flex",alignItems:"center",children:(0,eu.tZ)(e$.JO,{as:eS.$Qe,color:"$color_action_blue_primary",size:16})})]})})]})})},GuideChipForReport=e=>(0,eu.tZ)(GuideChipForFeedback,{type:"report",...e}),ChipContentRenderer=e=>{let{type:t,onClick:n,message:r,messageIndex:o}=e;switch(t){case"short":return(0,eu.tZ)(GuideChipContentForShortContext,{message:r,messageIndex:o,onClick:n});case"brokenContext":return(0,eu.tZ)(GuideChipForBrokenContext,{message:r,messageIndex:o,onClick:n});case"lineWriting":return(0,eu.tZ)(GuideChipForLineWriting,{message:r,messageIndex:o,onClick:n});case"hallucination":return(0,eu.tZ)(GuideChipForHallucination,{message:r,messageIndex:o,onClick:n});case"noImage":return(0,eu.tZ)(GuideChipForNoImage,{message:r,messageIndex:o,onClick:n});case"knowHow":return(0,eu.tZ)(GuideChipForKnowHow,{message:r,messageIndex:o,onClick:n});case"etc":return(0,eu.tZ)(GuideChipForEtc,{message:r,messageIndex:o,onClick:n});case"report":return(0,eu.tZ)(GuideChipForReport,{message:r,messageIndex:o,onClick:n});default:return null}},ModalGuideMenuBackButton=e=>{let{onClick:t,message:n,messageIndex:r}=e,{chat:o,chatId:i}=tA(),{trackEvent:a}=(0,ev.Ke)();return(0,eu.tZ)(eh.zx,{onClick:()=>{var e;o&&(a("click_unlike_banner_recommend_back_btn",{chatId:i,msg_id:n._id,chat_index:r,model_name:null==o?void 0:null===(e=o.model)||void 0===e?void 0:e.toUpperCase(),unlike_banner_abtest_group:"unlike_banner_B"}),null==t||t())},paddingY:"4px",children:(0,eu.tZ)(e$.JO,{as:eS.Frx,size:20,color:"$color_icon_tertiary"})})},ModelGuideMenu=e=>{let{closeGuide:t,toggleDisliked:n,message:r,messageIndex:o}=e,i=(0,eG.Zl)(eH.yI),{chat:a,chatId:l}=tA(),c=(null==a?void 0:a.model)!==e2.ChatModel.WRTN_SEARCH,[d,s]=(0,e_.useState)(),u=(0,ef.T_)("chat.chat_room.model_guide_menu"),{trackEvent:p}=(0,ev.Ke)(),_=[{key:"short",value:u("short.title")},{key:"brokenContext",value:u("broken_context.title")},{key:"lineWriting",value:u("line_writing.title")},{key:"hallucination",value:u("hallucination.title")},{key:"noImage",value:u("no_image.title")},{key:"knowHow",value:u("know_how.title")},{key:"etc",value:u("etc.title")},{key:"report",value:u("report.title")}],m=t_.vc||c?["noImage"]:[],h=_.filter(e=>{let{key:t}=e;return!m.includes(t)}),selectChip=e=>{s(e.key)},g=(0,e_.useCallback)(()=>{if(!d){t();return}s(void 0)},[a,l,t,r._id,o,d,p]);return(0,eu.BX)(eh.Ug,{gap:"16px",padding:"16px 20px 16px 16px",children:[(0,eu.tZ)(eh.xu,{width:"20px",children:(0,eu.tZ)(ModalGuideMenuBackButton,{message:r,messageIndex:o,onClick:g})}),(0,eu.tZ)(eh.xu,{width:"100%",children:d?(0,eu.tZ)(ChipContentRenderer,{type:null!=d?d:"",messageIndex:o,message:r,onClick:()=>{n(),i(-1)}}):(0,eu.tZ)(eh.Ug,{gap:"8px",flexWrap:"wrap",children:h.map(e=>(0,eu.tZ)(Chip,{item:e,onClick:()=>selectChip(e),message:r,messageIndex:o,textDisabled:"etc"===e.key||"report"===e.key},e.key))})})]})},useMessages=(e,t)=>{let{unitType:n,character:r}=tX(),o=e_.useMemo(()=>{let o=[];e&&(o=e.messages);let i=0===o.length,a="character"===n&&i;return a&&r&&t&&(o=[createAssistantMessageTemplate({content:r.initialMessages[0]})]),o},[e,n,r,t]),i=!e&&"unit"===n&&0===o.length;return{messages:o,isUnitEmpty:i}},MessageEvaluationBanner=e=>{var t;let{messageListItemIndex:n,toggleDisliked:r,message:o,messageIndex:i}=e,{chat:a,chatId:l}=tA(),[c,d]=(0,e_.useState)(!1),{messages:s}=useMessages(a,!1),{trackEvent:u}=(0,ev.Ke)(),p=null===(t=s.flat())||void 0===t?void 0:t[n-1],{getModelByModelName:_}=(0,eF.pw)();return(0,e_.useEffect)(()=>{if("NEW_ASSISTANT_MESSAGE_ID"!==o._id){var e,t;u("view_unlike_banner",{chat_id:l,msg_id:o._id,chat_index:i,model_name:null==a?void 0:null===(e=a.model)||void 0===e?void 0:e.toUpperCase(),unlike_banner_abtest_group:"unlike_banner_B",purpose:(null==a?void 0:a.model)&&t_.sO?null===(t=_(a.model))||void 0===t?void 0:t.displayName:void 0})}},[]),(0,eu.tZ)(eh.xu,{width:"100%",backgroundColor:"$color_surface_tertiary",borderRadius:"10px",children:c?(0,eu.tZ)(ModelGuideMenu,{closeGuide:()=>{d(!1)},toggleDisliked:r,message:o,messageIndex:i}):(0,eu.tZ)(ModelGuideAction,{openGuide:()=>{d(!0)},toggleDisliked:r,message:o,messageIndex:i,currentUserMessage:p})})},MessageEvaluationStateContainer=e=>{let{children:t,defaultEvaluation:n}=e,[r,o]=(0,e_.useState)(n),{liked:i,disliked:a}=r;return t({evaluation:r,toggleLiked:()=>{if(a&&!i){o({liked:!0,disliked:!1});return}o(e=>({...e,liked:!e.liked}))},toggleDisliked:()=>{if(!a&&i){o({liked:!1,disliked:!0});return}o(e=>({...e,disliked:!e.disliked}))},toggleSaved:()=>{o(e=>({...e,saved:!e.saved}))}})};function useMessageEvaluation(e){let t=(0,ef.T_)(),{mutate:n}=useChatRoom(e),{unitType:r,unitId:o}=tX(),{trackEvent:i}=(0,ev.Ke)(),{getModelByModelName:a}=(0,eF.pw)(),l=e_.useRef(!1),mutateMessage=(e,t)=>{n(n=>{if(!n)throw Error;return{...n,messages:n.messages.map(n=>Array.isArray(n)?n.map(n=>n._id===e._id?{...n,...t}:n):{...n,...t})}},{revalidate:!1,populateCache:!0})},logEvalEvent=(t,n,l)=>{var c,d;let s=t.toolInfo;"liked"===l&&i("click_like_btn",{chat_id:e,chat_index:n,feature_menu:s?"tool":"chat",model_name:String(t.model).toUpperCase(),onoff:!t.liked,position:"chat",msg_id:t._id,character_id:"character"===r?o:null,purpose:null===(c=a(t.model))||void 0===c?void 0:c.displayName}),"disliked"===l&&i("click_unlike_btn",{chat_id:e,chat_index:n,feature_menu:s?"tool":"chat",model_name:String(t.model).toUpperCase(),onoff:!t.disliked,position:"chat",msg_id:t._id,character_id:"character"===r?o:null,purpose:null===(d=a(t.model))||void 0===d?void 0:d.displayName})},toggleLike=async(e,t,n)=>{try{if(l.current)return;l.current=!0;let t={liked:e.liked,disliked:e.disliked};!e.liked&&e.disliked?Object.assign(t,{liked:!0,disliked:!1,dislikeReason:[]}):Object.assign(t,{liked:!e.liked}),mutateMessage(e,t),await evaluateMessage({messageId:e._id,data:t})}finally{n||logEvalEvent(e,t,"liked"),l.current=!1}},toggleDislike=async(e,t,n)=>{try{if(l.current)return;l.current=!0;let t={liked:e.liked,disliked:e.disliked};!e.disliked&&e.liked?Object.assign(t,{liked:!1,disliked:!0}):Object.assign(t,{disliked:!e.disliked}),t.disliked||Object.assign(t,{dislikeReason:[]}),mutateMessage(e,t),await evaluateMessage({messageId:e._id,data:t})}finally{n||logEvalEvent(e,t,"disliked"),l.current=!1}},toggleSave=async(e,t,n)=>{try{if(l.current)return;l.current=!0;let t={liked:e.liked,disliked:e.disliked,saved:!e.saved};mutateMessage(e,t),await evaluateMessage({messageId:e._id,data:t})}finally{n||logEvalEvent(e,t,"saved"),l.current=!1}},putDislikeReason=async(e,n,r)=>{try{if(l.current)return;l.current=!0;let r={liked:e.liked,disliked:e.disliked,dislikeReason:n};mutateMessage(e,r),await evaluateMessage({messageId:e._id,data:r}),(0,eq.wp)(t("common.alert.message_evaluation"),"MESSAGE_EVALUATION")}finally{logEvalEvent(e,r,"disliked"),l.current=!1}};return{toggleLike,toggleDislike,toggleSave,loggingDetailOpen:(t,n)=>{let r=t.toolInfo;i("click_unlike_more_btn",{chat_id:e,chat_index:n,feature_menu:r?"tool":"chat",model_name:String(t.model).toUpperCase()})},putDislikeReason}}function MessageEvaluationTypeABookmark_templateObject(){let e=(0,ep._)(["\n          &:hover {\n            cursor: pointer;\n            background-color: ",";\n          }\n        "]);return MessageEvaluationTypeABookmark_templateObject=function(){return e},e}let MessageEvaluationTypeABookmark=e=>{let{message:t,messageIndex:n,evaluation:r,toggleSaved:o}=e,{user:i}=(0,eT.aF)(),{chatId:a}=tA(),{role:l,isLastMessage:c}=tU(),{trackEvent:d}=(0,ev.Ke)(),s=(0,ef.T_)(),u=(0,eG.sJ)(eH.CU),{toggleSave:p}=useMessageEvaluation(a||"");return!i||"assistant"!==l||c&&("generating"===u||"streaming"===u)?null:(r.saved=!!t.saved,(0,eu.tZ)(eh.Ug,{alignItems:"center",children:(0,eu.BX)(eh.xu,{minWidth:"86px",height:"30px",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"20px",p:"12px 12px",border:"1px solid",backgroundColor:"$color_surface_ivory",borderColor:"$color_outline_tertiary",gap:"4px",css:e=>{var t;return(0,em.iv)(MessageEvaluationTypeABookmark_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_secondary_hover)},onClick:()=>{o();let e=r.saved?s("chat.feature_bookmark.message.save_cancel"):s("chat.feature_bookmark.message.save_success");(0,eq.wp)(e),p(t,n),d("click_save_btn",{purpose:t.model,is_pro_mode:"PRO_MODE"===t.model,chat_id:a,msg_id:t._id,last_status:r.saved,content_type:"chat"})},children:[(0,eu.tZ)(e$.JO,{as:r.saved?e$.O_:e$.t_,color:r.saved?"$color_icon_secondary":"$color_icon_tertiary",size:16}),(0,eu.tZ)(eh.Jd,{typo:"$100-12-med",margin:"0 0 0 1.5px",color:"$color_text_primary",children:r.saved?s("chat.feature_bookmark.is_saved"):s("chat.feature_bookmark.need_save")})]})}))};function MessageFeedback_templateObject(){let e=(0,ep._)(["\n              border: 1px solid ",";\n              border-radius: 24px;\n              background-color: ",";\n              padding: 8px 12px;\n\n              &:hover {\n                background-color: ",";\n              }\n            "]);return MessageFeedback_templateObject=function(){return e},e}let MessageFeedback=e=>{let{message:t,messageIndex:n,messageListItemIndex:r,evaluation:o}=e,{user:i}=(0,eT.aF)(),{chatId:a,chat:l}=tA(),{role:c,isLastMessage:d}=tU(),[s,u]=(0,eG.FV)(eH.yI),{trackEvent:p}=(0,ev.Ke)(),_=(0,ef.T_)("chat.chat_room.model_guide_menu"),m=(0,eG.sJ)(eH.CU);return!i||"assistant"!==c||d&&("generating"===m||"streaming"===m)||t.image&&t.image.imageUrls.length>0?null:(0,eu.tZ)(eh.Ug,{alignItems:"center",children:s!==r&&(0,eu.tZ)(eh.zx,{onClick:()=>{var e;l&&(p("click_dislike_btn",{chatId:a,msg_id:t._id,chat_index:n,model_name:null==l?void 0:null===(e=l.model)||void 0===e?void 0:e.toUpperCase(),feature_menu:"chat",position:"chat",image_urls:null,unlike_banner_abtest_group:"unlike_banner_B"}),u(r))},children:(0,eu.BX)(eh.Ug,{alignItems:"center",gap:"4px",css:e=>{var t,n,r;return(0,em.iv)(MessageFeedback_templateObject(),null==e?void 0:null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary,null==e?void 0:null===(n=e.colors)||void 0===n?void 0:n.$color_surface_ivory,null===(r=e.colors)||void 0===r?void 0:r.$color_surface_hover)},children:[(0,eu.tZ)(e$.JO,{as:o.disliked?eS.xR:eS.Bnh,color:o.disliked?"$color_icon_secondary":"$color_icon_quaternary",size:16}),(0,eu.tZ)(eh.Jd,{typo:"$110-12-med",color:"$color_text_secondary",children:_("dis_like")})]})})})};function MessageReroll_templateObject(){let e=(0,ep._)(["\n            &:hover {\n              path {\n                fill: ",";\n              }\n            }\n          "]);return MessageReroll_templateObject=function(){return e},e}let MessageReroll=e=>{let{message:t}=e,n=(0,ef.T_)("chat.feature_chat_room.message_static_chip_selector"),{user:r}=(0,eT.aF)(),o=(0,eG.sJ)(eH.h5),i=(0,eG.sJ)(eH._b),{startGenerate:a,generating:l}=t8(),{model:c,enableOptions:d}=tX(),{lastUserMessage:s}=tA(),onReroll=async()=>{var e,t;s&&await a({message:null!==(t=null==s?void 0:s.content)&&void 0!==t?t:"",model:c,mode:e2.ChatMode.CHAT,reroll:!0,commandChipType:"",images:o.images,referenceIds:o.referenceIds,assignmentId:i||(null==s?void 0:null===(e=s.meta)||void 0===e?void 0:e.assignmentId)})},u=t.searchResult&&t.searchResult.some(e=>(null==e?void 0:e.type)==="file"||(null==e?void 0:e.type)==="link");return r&&!l&&(null==d?void 0:d.reroll)&&void 0===t.cachedChip&&!u?(0,eu.tZ)(eh.xu,{width:16,height:16,children:(0,eu.tZ)(eC.u,{position:{bottom:"calc(100% + 8px)",left:"-100%"},content:n("regenerate"),children:(0,eu.tZ)(eh.zx,{width:16,height:16,onClick:onReroll,css:e=>{var t,n;return(0,em.iv)(MessageReroll_templateObject(),null!==(n=null===(t=e.colors)||void 0===t?void 0:t.$color_icon_brand)&&void 0!==n?n:"#f72f08")},children:(0,eu.tZ)(e$.JO,{as:eS.sXW,color:"$color_icon_tertiary",size:16})})})}):null},useMessageType=()=>{let{message:e}=tU(),{unitType:t}=tX(),n=e[0].role,r=e_.useMemo(()=>"user"===n?"user":"assistant"===n&&"character"===t?"character":"assistant",[n,t]);return r},Collapse=e=>{let{opener:t,collapseBody:n}=e,r=e_.useRef(null),[o,i]=e_.useState(!1),closeCollapse=()=>i(!1),toggleCollapse=()=>i(e=>!e);return(0,ty.O8)(r,"click",()=>closeCollapse()),(0,eu.BX)(eh.xu,{position:"relative",ref:r,children:[t({toggleCollapse,collapse:o}),o&&n({toggleCollapse,collapse:o,closeCollapse})]})};function StaticChipSelector_templateObject(){let e=(0,ep._)(["\n                &:hover {\n                  path {\n                    fill: ",";\n                  }\n                }\n              "]);return StaticChipSelector_templateObject=function(){return e},e}function StaticChipSelector_templateObject1(){let e=(0,ep._)(["\n                  cursor: pointer;\n\n                  &:hover {\n                    background-color: ",";\n\n                    p {\n                      color: ",";\n                    }\n                  }\n                "]);return StaticChipSelector_templateObject1=function(){return e},e}function StaticChipSelector_templateObject2(){let e=(0,ep._)(["\n                    white-space: nowrap;\n                  "]);return StaticChipSelector_templateObject2=function(){return e},e}let no=["summary","longer","prettier"],ni={summary:eS.aR5,longer:eS.f4Z,prettier:eS.rOX},na={summary:"summarizing",longer:"elaborating",prettier:"formatting"},nl={summary:"chips.summary",longer:"chips.longer",prettier:"chips.prettier"},StaticChipSelector=e=>{let{message:t,isMessageIncludeImage:n}=e,r=(0,ef.T_)("chat.feature_chat_room.message_static_chip_selector"),{user:o}=(0,eT.aF)(),{trackEvent:i}=(0,ev.Ke)(),{startGenerate:a,generating:l}=t8(),{model:c,enableOptions:d}=tX(),onGenerateStaticChip=async e=>{i("click_static_chips_option",{type:na[e],msg_id:t._id}),await a({message:r(nl[e]),model:c,mode:e2.ChatMode.CHAT,reroll:!1,commandChipType:"static_chip",images:[],staticChip:e,referenceMessageId:t._id})};return!o||l||n||!(null==d?void 0:d.staticChip)||t.error?null:(0,eu.tZ)(Collapse,{opener:e=>{let{toggleCollapse:t}=e;return(0,eu.tZ)(eh.xu,{width:18,height:18,children:(0,eu.tZ)(eC.u,{position:{bottom:"calc(100% + 8px)",left:"-100%"},content:r("title"),children:(0,eu.tZ)(eh.zx,{width:18,height:18,onClick:t,css:e=>{var t,n;return(0,em.iv)(StaticChipSelector_templateObject(),null!==(n=null===(t=e.colors)||void 0===t?void 0:t.$color_icon_brand)&&void 0!==n?n:"#f72f08")},children:(0,eu.tZ)(e$.JO,{as:eS.tNo,color:"$color_icon_tertiary",size:18})})})})},collapseBody:e=>{let{closeCollapse:t}=e;return(0,eu.tZ)(eh.gC,{minWidth:"92px",zIndex:30,position:"absolute",overflow:"hidden",top:"30px",left:"0",border:"1px solid",borderColor:"$color_outline_secondary",borderRadius:"8px",backgroundColor:"$color_surface_ivory",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.05), 0px 2px 4px -2px rgba(0, 0, 0, 0.10);",children:no.flatMap((e,n)=>{let o=(0,eu.BX)(eh.zx,{display:"flex",alignItems:"center",px:14,py:10,gap:"10px",backgroundColor:"$color_surface_ivory",css:e=>{var t,n;return(0,em.iv)(StaticChipSelector_templateObject1(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_hover,null===(n=e.colors)||void 0===n?void 0:n.$color_text_primary)},onClick:()=>{onGenerateStaticChip(e),t&&t()},children:[(0,eu.tZ)(e$.JO,{as:ni[e],size:16,color:"$color_icon_secondary"}),(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_text_secondary",css:(0,em.iv)(StaticChipSelector_templateObject2()),children:r(nl[e])})]},e);return 0!==n?[(0,eu.tZ)(eh.xu,{height:"1px",bg:"$color_divider_primary",width:"100%"},"".concat(n,"-divider")),o]:[o]})})}})},MessageFooter=e=>{var t;let{message:n,messageIndex:r,messageListItemIndex:o,messageRef:i}=e,{role:a,isLastMessage:l}=tU(),{chatId:c,chat:d}=tA(),{id:s}=(0,eF.q)(),{toggleDislike:u}=useMessageEvaluation(c||""),p=(0,eG.sJ)(eH.gE),_=(0,eG.sJ)(eH.yI),m=useCurrentText(n.content),h=(null==d?void 0:null===(t=d.modelInfo)||void 0===t?void 0:t._id)===s,g=(0,eG.sJ)(eH.CU),v=useMessageType(),f=n.image&&n.image.imageUrls.length>0||!1,x=_===o,[b,C]=(0,e_.useState)("");return((0,e_.useEffect)(()=>{let e=(0,tN.kV)(m);C(e)},[m]),"assistant"!==a||"character"===v||("generating"===g||"streaming"===g)&&l||!n.content)?null:(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(eh.xu,{display:["none","none","flex","flex"],height:"32px"}),(0,eu.tZ)(eC.fz,{isVisible:p}),(0,eu.tZ)(MessageEvaluationStateContainer,{defaultEvaluation:{liked:n.liked,disliked:n.disliked,saved:!!n.saved},children:e=>{let{evaluation:t,toggleDisliked:a,toggleSaved:c}=e;return(0,eu.BX)(eh.gC,{gap:"12px",children:[(0,eu.BX)(eh.Ug,{width:"100%",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"8px",children:[(0,eu.BX)(eh.Ug,{gap:"8px",alignItems:"center",height:"16px",children:[l&&(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(MessageReroll,{message:n}),(0,eu.tZ)(StaticChipSelector,{message:n,isMessageIncludeImage:f})]}),(0,eu.tZ)(MessageCopy,{message:n,messageIndex:r})]}),(0,eu.BX)(eh.Ug,{gap:"8px",justifyContent:"flex-end",children:[!h&&(0,eu.tZ)(MessageFeedback,{message:n,messageIndex:r,messageListItemIndex:o,evaluation:t}),!h&&(0,eu.tZ)(MessageEvaluationTypeABookmark,{message:n,messageIndex:r,evaluation:t,toggleSaved:c}),h&&(0,eu.tZ)(ExportToPDFButton,{messageRef:i,message:n})]})]}),(0,eu.BX)(eh.gC,{gap:"8px",children:[!f&&x&&!h&&(0,eu.tZ)(MessageEvaluationBanner,{messageListItemIndex:o,message:n,messageIndex:r,toggleDisliked:()=>{t.disliked||(u(n,r,!0),a())}}),!f&&b.length>0&&(0,eu.tZ)(tz.P,{willProtectMessage:b,backgroundColor:h?"$color_surface_tertiary":"transparent"})]})]})}})]})};function MessageButton_templateObject(){let e=(0,ep._)(["\n        cursor: pointer;\n        &:hover {\n          background-color: ",";\n        }\n      "]);return MessageButton_templateObject=function(){return e},e}let MessageButton=e=>{let{onClick:t,active:n,children:r,...o}=e;return(0,eu.tZ)(eh.zx,{display:"flex",alignItems:"center",backgroundColor:n?"$color_surface_hover":"transparent",border:"none",borderRadius:"3px",onClick:t,css:e=>{var t;return(0,em.iv)(MessageButton_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_hover)},...o,children:r})};function MessageHeaderRerollSelectorCollapseBody_templateObject(){let e=(0,ep._)(["\n            cursor: pointer;\n\n            &:hover {\n              background-color: ",";\n            }\n          "]);return MessageHeaderRerollSelectorCollapseBody_templateObject=function(){return e},e}let MessageHeaderRerollSelectorCollapseBody=e=>{let{closeCollapse:t,message:n,messageIndex:r,toggleIndex:o}=e,i=(0,ef.T_)("chat.feature_chat_room.reroll_selector"),{trackEvent:a}=(0,ev.Ke)();return(0,e_.useEffect)(()=>{a("view_respond_compare",{total_numbers:n.length})},[]),(0,eu.tZ)(eh.gC,{reverse:!0,zIndex:1,position:"absolute",top:"20px",right:"0",width:300,py:"8px",border:"1px solid",borderColor:"$color_outline_secondary",borderRadius:"8px",backgroundColor:"$color_surface_ivory",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.05), 0px 2px 4px -2px rgba(0, 0, 0, 0.10);",children:n.map((e,l)=>(0,eu.BX)(eh.zx,{overflow:"hidden",px:16,py:12,onClick:()=>{o(l),t&&t(),a("click_respond_compare",{index:l,total_numbers:n.length})},backgroundColor:"transparent",css:e=>{var t;return(0,em.iv)(MessageHeaderRerollSelectorCollapseBody_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_hover)},children:[(0,eu.BX)(eh.Jd,{textAlign:"left",typo:"$100-14-med",color:r===l?"$color_text_brand":"$color_text_secondary",marginBottom:"8px",children:[i("result")," ",n.length-l]}),(0,eu.tZ)(eh.Jd,{display:"-webkit-box",maxHeight:"40px",textAlign:"left",typo:"$ex_140-14-med",color:"$color_text_primary",overflow:"hidden",style:{lineClamp:2,WebkitLineClamp:2,textOverflow:"ellipsis",WebkitBoxOrient:"vertical"},children:e.content})]},e._id))})},MessageHeaderRerollSelector=e=>{let{role:t,messageIndex:n,message:r,toggleIndex:o}=e,i=(0,ef.T_)("chat.feature_chat_room.reroll_selector"),{trackEvent:a}=(0,ev.Ke)(),l=r.length;return 1===l||"assistant"!==t?null:(0,eu.tZ)(Collapse,{opener:e=>{let{toggleCollapse:t,collapse:o}=e;return(0,eu.BX)(MessageButton,{onClick:()=>{a("click_respond_compare_btn",{msgId:r[n]._id,total_numbers:r.length,type:o?"close":"open"}),t()},active:o,paddingLeft:"4px",gap:"4px",children:[(0,eu.BX)(eh.Jd,{typo:"$100-14-med",color:"$color_text_secondary",children:[i("compare_results")," (",l-n,"/",l,")"]}),(0,eu.tZ)(e$.JO,{as:eS.jt3,size:20,color:"$color_icon_secondary",style:{transform:o?"rotate(0deg)":"rotate(180deg)",transition:"all 0.4 ease-in-out"}})]})},collapseBody:e=>{let{closeCollapse:t}=e;return(0,eu.tZ)(MessageHeaderRerollSelectorCollapseBody,{closeCollapse:()=>null==t?void 0:t(),message:r,messageIndex:n,toggleIndex:o})}})},MessageRerollSelector=e=>{let{message:t,children:n}=e,r=(0,e_.useRef)(null),[o,i]=e_.useState(0),{changeStatus:a}=t9(),l=t.length,c=t[o];(0,e_.useEffect)(()=>{a(t[o].error)},[t,o]);let toggleIndex=e=>{e<0||e>=l||e===o||i(e)},d=e_.useCallback(()=>(0,eu.tZ)(MessageHeaderRerollSelector,{role:t[0].role,messageIndex:o,message:t,toggleIndex:toggleIndex}),[t,o]);return n({currentMessage:c,messageIndex:o,headerSelector:d,messageRef:r})},MessageAdButton=e=>{let{message:t}=e;if(t.adCreativeId)return(0,eu.tZ)(eh.xu,{marginBottom:"0px",children:(0,eu.tZ)(eh.xu,{width:"30px",height:"16px",bg:"$color_bg_screen",borderRadius:"3px",border:"1px solid",borderColor:"$color_outline_tertiary",alignItems:"center",justifyContent:"center",display:"flex",children:(0,eu.tZ)(eh.Jd,{typo:"$100-10-semi",color:"$color_text_textfield_disabled",children:"AD"})})})},MessageResponseTitle=e=>{let{message:t}=e,{role:n}=tU(),{model:r}=tX(),o=(0,ef.T_)();return"assistant"!==n?null:(0,eu.BX)(eh.Ug,{gap:"8px",alignItems:"center",children:[(0,eu.tZ)(ModelSymbol,{model:r}),(0,eu.tZ)(eh.Jd,{typo:"$100-18-semi",color:"$color_text_primary",children:o("chat.feature_home.home.answer")}),(0,eu.tZ)(MessageAdButton,{message:t})]})};function AdButton_templateObject(){let e=(0,ep._)(["\n        cursor: pointer;\n        background-color: rgba(\n          255,\n          255,\n          255,\n          ","\n        );\n      "]);return AdButton_templateObject=function(){return e},e}let AdButton=e=>{let{type:t="A",onCollapse:n}=e;return(0,eu.BX)(eh.xu,{height:"16px",maxWidth:"46px",borderRadius:"2px",border:"1px solid",borderColor:"$color_outline_tertiary",display:"flex",alignItems:"center",justifyContent:"center",css:e=>(0,em.iv)(AdButton_templateObject(),"dark"===e.mode?.1:.3),children:["A"===t&&(0,eu.tZ)(eh.Jd,{fontSize:9,fontWeight:600,color:"$palette_gray_gray_500",padding:"0 4px 0 6px",children:"AD"}),"B"===t&&(0,eu.BX)(eh.Ug,{justifyContent:"center",alignItems:"center",padding:"0 4px 0 7px",onClick:()=>{null==n||n()},children:[(0,eu.tZ)(eh.Jd,{fontSize:9,fontWeight:600,color:"$palette_gray_gray_500",paddingRight:"2px",unselectable:"on",children:"AD"}),(0,eu.tZ)(eh.Jd,{fontSize:9,fontWeight:600,color:"$palette_gray_gray_500",unselectable:"on",children:"ㅣ"}),(0,eu.tZ)(e$.JO,{as:eS.S5X,size:11,color:"$palette_gray_gray_500"})]})]})},BrandTitle=e=>{let{brand:t,onClick:n}=e;return(0,eu.BX)(eh.Ug,{gap:"6px",alignItems:"center",children:[(0,eu.tZ)(eh.xu,{width:"16px",height:"16px",borderRadius:"50%",overflow:"hidden",children:(0,eu.tZ)("img",{src:t.logo,alt:t.brandName,width:"100%",height:"100%"})}),(0,eu.tZ)(eh.Jd,{typo:"$100-12-semi",color:"$color_text_primary",children:t.brandName}),t.website&&(0,eu.tZ)(eh.Jd,{onClick:()=>{n(()=>({click_type:"brand_title",index:1,url:t.website})),window.open(t.website,"_blank")},typo:"$100-12-med",color:"$color_action_blue_primary",style:{cursor:"pointer"},children:"홈페이지"})]})},InfoArea=e=>{let{brandAdInfo:t,benefitList:n,onAdEventClick:r}=e,handleClick=(e,t)=>{r(()=>({click_type:e,url:t,index:0})),window.open(t,"_blank")};return(0,eu.BX)(eh.gC,{width:"100%",height:"100%",children:[(0,eu.tZ)(eh.gC,{border:"1px solid transparent",borderBottomColor:"$color_divider_secondary",paddingBottom:"16px",children:(0,eu.BX)(eh.xu,{display:"inline-block",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-18-bold",color:"$color_text_primary",children:t.title}),(0,eu.tZ)(eh.Jd,{typo:"$100-14-semi",color:"$palette_gray_gray_500",marginTop:"14px",children:t.subTitle}),(0,eu.tZ)(eh.zx,{height:"32px",minWidth:"128px",display:"inline-flex",backgroundColor:"#0793F7",borderRadius:"10px",padding:"8px 10px 8px 10px",marginTop:"16px",alignItems:"center",justifyContent:"center",onClick:()=>{handleClick("brand_cta",t.cta.url)},children:(0,eu.BX)(eh.Ug,{alignItems:"center",gap:"5px",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-16-semi",color:"#FFFFFF",children:t.cta.title}),(0,eu.tZ)(e$.JO,{as:eS.xMl,width:16,height:16,color:"#F7FAFC"})]})})]})}),(0,eu.tZ)(eh.gC,{marginTop:"16px",gap:"14px",children:n.map((e,t)=>e.title&&e.description&&("link"!==e.type||e.url)?(0,eu.BX)(eh.Ug,{children:[(0,eu.tZ)(eh.Jd,{width:"60px",typo:"$100-14-semi",color:"$color_text_tertiary",children:e.title}),"text"===e.type?(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_text_primary",children:e.description}):"link"===e.type?(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_action_blue_primary",style:{cursor:"pointer"},onClick:()=>{e.url&&handleClick("brand_content",e.url)},children:e.description}):null]},t):null)})]})},nc=85/180,MediaImageType=e=>{let{imageUrl:t,link:n,onAdEventClick:r}=e;return(0,eu.tZ)(eh.xu,{width:"100%",height:t?"100%":"0px",borderRadius:"5px",paddingBottom:t?"0":"".concat(100*nc,"%"),backgroundImage:"url(https://fe-web-assets.wow.wrtn.ai/shared/MediaChecker.png)",backgroundSize:"cover",backgroundRepeat:"no-repeat",backgroundPosition:"center",overflow:"hidden",position:"relative",onClick:()=>{r(()=>({click_type:"image",url:n})),window.open(n,"_blank")},style:{cursor:"pointer"},children:t&&(0,eu.tZ)("img",{src:t,width:"100%",height:"100%",style:{objectFit:"cover",display:"block"}})})},MediaArea=e=>{let{mediaAreaInfo:t,onAdEventClick:n,isMobile:r}=e;return(0,eu.BX)(eh.gC,{width:"100%",height:"100%",minWidth:r?"100%":"367px",minHeight:r?"100%":"273px",gap:"10px",children:[(0,eu.tZ)(MediaImageType,{imageUrl:t.contents.imageForLarge,link:t.contents.linkForLarge,onAdEventClick:e=>n(()=>({...e(),index:0}))}),(0,eu.BX)(eh.Ug,{justifyContent:"space-between",gap:"8px",children:[(0,eu.tZ)(MediaImageType,{imageUrl:t.contents.imageForSmall01,link:t.contents.linkForSmall01,onAdEventClick:e=>n(()=>({...e(),index:1}))}),(0,eu.tZ)(MediaImageType,{imageUrl:t.contents.imageForSmall02,link:t.contents.linkForSmall02,onAdEventClick:e=>n(()=>({...e(),index:2}))})]})]})};function ToggleArrowButton_templateObject(){let e=(0,ep._)(["\n        transform: rotate(","deg);\n        transition: transform 0.3s;\n        cursor: pointer;\n      "]);return ToggleArrowButton_templateObject=function(){return e},e}let ToggleArrowButton=e=>{let{onShelvedAd:t}=e,[n,r]=(0,e_.useState)(!1);return(0,eu.tZ)(eh.xu,{display:"flex",alignItems:"center",justifyContent:"center",width:"16px",height:"16px",onClick:()=>{r(!n),null==t||t()},css:(0,em.iv)(ToggleArrowButton_templateObject(),n?180:0),children:(0,eu.tZ)(e$.JO,{as:eS.I4Y,size:16,color:"$color_icon_secondary"})})},getAdsCreative=e=>ek.Np.PB.get("api/v1/chat/ad-creatives/".concat(e,"?platform=PC"));function useAdsCreative(e){let{data:t,error:n,isLoading:r}=(0,eI.dH)(e?"api/v1/chat/ad-creatives/".concat(e):null,()=>e?getAdsCreative(e):null,{shouldRetryOnError:!1}),o=null==t?void 0:t.data;return e?{adCreative:null==o?void 0:o.creative,adData:o,isLoading:r,isError:n}:{adCreative:null,adData:null,isLoading:!1,isError:null}}function GenerationStepBrandBanner_templateObject(){let e=(0,ep._)(["\n          height: ",";\n          transition: height 0.3s ease-in-out;\n        "]);return GenerationStepBrandBanner_templateObject=function(){return e},e}function GenerationStepBrandBanner_templateObject1(){let e=(0,ep._)(["\n              max-height: ",";\n              opacity: ",";\n              overflow: hidden;\n              transition: max-height 0.3s ease-in-out, opacity 0.3s ease-in-out;\n            "]);return GenerationStepBrandBanner_templateObject1=function(){return e},e}let GenerationStepBrandBanner=e=>{var t,n,r,o,i,a,l,c,d,s,u,p,_,m,h,g,v,f,x,b,C,y,k,w,Z;let{onCollapse:I,adCreativeId:O,setAdInfo:S,message:B,onBrandAdInfo:$}=e,{handleEvent:M}=(0,e1.m)(),{adCreative:R,adData:j}=useAdsCreative(O),[E,A]=(0,e_.useState)(!1),[T,L]=(0,e_.useState)(!1),F=(0,eg.ac)("(max-width: 1109px)"),P=!!B.adCreativeId,U={adEventName:"expose_ad_brand",adEventBody:{...getAdEventProperties(j),event_type:"expose",msg_id:null!==(t=B._id)&&void 0!==t?t:"",chat_id:null!==(n=B.chatId)&&void 0!==n?n:""}},D={brandName:null!==(r=null==R?void 0:R.brandName)&&void 0!==r?r:"",website:null!==(o=null==R?void 0:R.brandHomepageLink)&&void 0!==o?o:"",logo:null!==(i=null==R?void 0:R.logoImage)&&void 0!==i?i:""},X={type:"Type01",contents:{imageForLarge:null!==(a=null==R?void 0:R.mainImage)&&void 0!==a?a:"",linkForLarge:null!==(l=null==R?void 0:R.mainImageLink)&&void 0!==l?l:"",imageForSmall01:null!==(c=null==R?void 0:R.subImage1)&&void 0!==c?c:"",linkForSmall01:null!==(d=null==R?void 0:R.subImage1Link)&&void 0!==d?d:"",imageForSmall02:null!==(s=null==R?void 0:R.subImage2)&&void 0!==s?s:"",linkForSmall02:null!==(u=null==R?void 0:R.subImage2Link)&&void 0!==u?u:""}},J={title:null!==(p=null==R?void 0:R.mainText)&&void 0!==p?p:"",subTitle:null!==(_=null==R?void 0:R.subText)&&void 0!==_?_:"",cta:{title:null!==(m=null==R?void 0:R.ctaText)&&void 0!==m?m:"",url:null!==(h=null==R?void 0:R.ctaLink)&&void 0!==h?h:""}},z=[{title:null!==(g=null==R?void 0:R.summary1name)&&void 0!==g?g:"",description:null!==(v=null==R?void 0:R.summary1content)&&void 0!==v?v:"",type:"text"},{title:null!==(f=null==R?void 0:R.summary2name)&&void 0!==f?f:"",description:null!==(x=null==R?void 0:R.summary2content)&&void 0!==x?x:"",type:"text"},{title:null!==(b=null==R?void 0:R.summary3name)&&void 0!==b?b:"",description:null!==(C=null==R?void 0:R.summary3content)&&void 0!==C?C:"",type:"text"},{title:null!==(y=null==R?void 0:R.summary4name)&&void 0!==y?y:"",description:null!==(k=null==R?void 0:R.summary4content)&&void 0!==k?k:"",type:"text"},{title:"사이트",description:null!==(w=null==R?void 0:R.homepageUrl)&&void 0!==w?w:"홈페이지 바로가기",type:"link",url:null!==(Z=null==R?void 0:R.homepageLink)&&void 0!==Z?Z:""}];(0,e_.useEffect)(()=>{j&&S(j)},[j]);let handleAdEventClick=e=>{var t,n;let r={...getAdEventProperties(j),event_type:"click",msg_id:null!==(t=B._id)&&void 0!==t?t:"",chat_id:null!==(n=B.chatId)&&void 0!==n?n:"",...e()};M("click_ad_brand",r)};return(0,e_.useEffect)(()=>{B._id&&U.adEventBody.ad_uuid&&!E&&(M(U.adEventName,{...U.adEventBody}),A(!0),$(j))},[U,B._id]),(0,eu.tZ)(eh.gC,{width:"100%",minHeight:"40px",maxHeight:"100%",children:(0,eu.tZ)(eh.xu,{maxWidth:"780px",backgroundColor:"$color_surface_ivory",border:"1px solid",borderColor:"$color_outline_tertiary",borderRadius:"8px",overflow:"hidden",padding:"12px 16px 12px 16px",css:(0,em.iv)(GenerationStepBrandBanner_templateObject(),T?"40px":"100%"),children:(0,eu.BX)(eh.gC,{gap:"12px",children:[(0,eu.BX)(eh.Ug,{justifyContent:"space-between",children:[(0,eu.tZ)(BrandTitle,{brand:D,onClick:handleAdEventClick}),(0,eu.BX)(eh.Ug,{gap:"8px",alignItems:"center",children:[(0,eu.tZ)(AdButton,{type:P?"A":"B",onCollapse:()=>{null==I||I()}}),!P&&(0,eu.tZ)(ToggleArrowButton,{onShelvedAd:()=>{L(!T)}})]})]}),(0,eu.tZ)(eh.xu,{css:(0,em.iv)(GenerationStepBrandBanner_templateObject1(),T?"0":"100%",T?"0":"1"),children:F?(0,eu.BX)(eh.gC,{justifyContent:"space-between",alignItems:"center",gap:"12px",children:[(0,eu.tZ)(MediaArea,{mediaAreaInfo:X,onAdEventClick:handleAdEventClick,isMobile:F}),(0,eu.tZ)(InfoArea,{brandAdInfo:J,benefitList:z,onAdEventClick:handleAdEventClick})]}):(0,eu.BX)(eh.Ug,{justifyContent:"space-between",alignItems:"flex-start",gap:"12px",children:[(0,eu.tZ)(MediaArea,{mediaAreaInfo:X,onAdEventClick:handleAdEventClick,isMobile:F}),(0,eu.tZ)(InfoArea,{brandAdInfo:J,benefitList:z,onAdEventClick:handleAdEventClick})]})})]})})})},SelectForm=e=>{let{title:t,isSelected:n,onClick:r}=e;return(0,eu.tZ)(eh.zx,{maxWidth:"362px",minWidth:"300px",width:"100%",height:"47px",border:"1px solid",borderColor:n?"$color_outline_primary":"$color_outline_tertiary",backgroundColor:n?"$color_surface_secondary":"$color_surface_ivory",borderRadius:"5px",onClick:()=>{null==r||r()},children:(0,eu.tZ)(eh.Jd,{typo:"$100-15-med",color:"$color_text_primary",children:t})})};function GenerationStepBrandBannerRedeem_templateObject(){let e=(0,ep._)(["\n            flex-grow: 1;\n            overflow-y: auto;\n          "]);return GenerationStepBrandBannerRedeem_templateObject=function(){return e},e}let GenerationStepBrandBannerRedeem=e=>{var t,n,r,o;let{onCollapse:i,adInfo:a,message:l}=e,[c,d]=(0,e_.useState)(null),[s,u]=(0,e_.useState)(""),{handleEvent:p}=(0,e1.m)(),_={adEventName:"expose_ad_block_modal",adEventBody:{...getAdEventProperties(a),event_type:"expose",msg_id:null!==(t=l._id)&&void 0!==t?t:"",chat_id:null!==(n=l.chatId)&&void 0!==n?n:""}},m={adEventName:"click_ad_block_modal",adEventBody:{...getAdEventProperties(a),event_type:"click",msg_id:null!==(r=l._id)&&void 0!==r?r:"",chat_id:null!==(o=l.chatId)&&void 0!==o?o:"",feedback:null!=c?c:"",feedback_detail:null!=s?s:""}},handleCollapse=()=>{i()},handleReasonSelect=e=>{d(e===c?null:e),"기타"!==e&&u("")},handleOtherReasonChange=e=>{u(e)};return(0,e_.useEffect)(()=>{p(_.adEventName,{..._.adEventBody})},[]),(0,eu.tZ)(eh.gC,{width:"100%",minHeight:"40px",children:(0,eu.BX)(eh.xu,{maxWidth:"780px",maxHeight:"391px",backgroundColor:"$color_surface_ivory",border:"1px solid",borderColor:"$color_outline_tertiary",borderRadius:"8px",padding:"24px 20px 12px 20px",children:[(0,eu.BX)(eh.gC,{maxWidth:"740px",height:"50px",gap:"8px",children:[(0,eu.BX)(eh.Ug,{justifyContent:"space-between",children:[(0,eu.tZ)(eh.Jd,{typo:"$140-16-semi",color:"$color_text_primary",children:"이 광고를 그만 보려는 이유가 무엇인가요?"}),(0,eu.tZ)(eh.zx,{onClick:handleCollapse,children:(0,eu.tZ)(e$.JO,{as:eS.S5X,size:18,color:"$palette_gray_gray_400"})})]}),(0,eu.tZ)(eh.Jd,{typo:"$140-14-med",color:"$color_text_secondary",children:"더 도움이 되는 정보를 제공해 드릴게요."})]}),(0,eu.BX)(eh.gC,{gap:"16px",maxWidth:"740px",marginTop:"16px",css:(0,em.iv)(GenerationStepBrandBannerRedeem_templateObject()),children:[(0,eu.BX)(eh.Ug,{justifyContent:"space-between",gap:"12px",children:[(0,eu.tZ)(SelectForm,{title:"관심이 없는 광고예요",isSelected:"관심이 없는 광고예요"===c,onClick:()=>handleReasonSelect("관심이 없는 광고예요")}),(0,eu.tZ)(SelectForm,{title:"답변 내용에 방해가 돼요",isSelected:"답변 내용에 방해가 돼요"===c,onClick:()=>handleReasonSelect("답변 내용에 방해가 돼요")})]}),(0,eu.BX)(eh.Ug,{justifyContent:"space-between",gap:"12px",children:[(0,eu.tZ)(SelectForm,{title:"광고가 너무 자주 표시돼요",isSelected:"광고가 너무 자주 표시돼요"===c,onClick:()=>handleReasonSelect("광고가 너무 자주 표시돼요")}),(0,eu.tZ)(SelectForm,{title:"부적절한 광고예요",isSelected:"부적절한 광고예요"===c,onClick:()=>handleReasonSelect("부적절한 광고예요")})]}),(0,eu.BX)(eh.Ug,{justifyContent:"space-between",gap:"12px",children:[(0,eu.tZ)(SelectForm,{title:"이 광고를 이미 확인했어요",isSelected:"이 광고를 이미 확인했어요"===c,onClick:()=>handleReasonSelect("이 광고를 이미 확인했어요")}),(0,eu.tZ)(SelectForm,{title:"기타",isSelected:"기타"===c,onClick:()=>handleReasonSelect("기타")})]}),"기타"===c&&(0,eu.tZ)(eh.II,{value:s,onChange:e=>null==handleOtherReasonChange?void 0:handleOtherReasonChange(e.target.value),width:"100%",height:"46px",border:"1px solid",borderColor:"$color_outline_secondary",backgroundColor:"$color_surface_ivory",borderRadius:"5px",marginBottom:"4px",placeholder:"이유를 알려주세요",padding:"11px 16px",typo:"$160-15-med",color:"$color_text_primary"})]}),(0,eu.tZ)(eh.gC,{marginTop:"8px",children:(0,eu.BX)(eh.Ug,{justifyContent:"flex-end",gap:"9px",children:[(0,eu.tZ)(eh.Wv,{size:"$medium",hierarchy:"$secondary",onClick:handleCollapse,children:(0,eu.tZ)(eh.Jd,{margin:"0px 13px",children:"취소"})}),(0,eu.tZ)(eh.Wv,{size:"$medium",hierarchy:"$primary",disabled:!c,onClick:()=>{c&&("기타"!==c||s)&&(p(m.adEventName,{...m.adEventBody}),null==i||i(),(0,eq.wp)("이 광고는 더이상 노출되지 않아요. \n 더 유용한 광고로 찾아뵙겠습니다."))},children:(0,eu.tZ)(eh.Jd,{margin:"0px 13px",children:"제출"})})]})})]})})},useBrandAdStep=()=>{let[e,t]=e_.useState(null);return e_.useEffect(()=>{let e=tL.ai.subscribe(e=>{t(e)});return()=>{e.unsubscribe()}},[]),{adStep:e}},GenerationStepBrandBannerLayout=e=>{var t;let{message:n,setViewBrandAd:r,isLastMessage:o,onBrandAdInfo:i}=e,[a,l]=(0,e_.useState)(!1),[c,d]=(0,e_.useState)(null),{adStep:s}=useBrandAdStep();if("assistant"!==n.role)return null;r(!1);let handleCollapse=()=>{l(!a)},u=null==s?void 0:s.ads,p=null==u?void 0:u.find(e=>"CHAT_BRAND"===e.inventoryCode),_=null==n?void 0:null===(t=n.ads)||void 0===t?void 0:t.find(e=>"CHAT_BRAND"===e.inventoryCode);return((!o&&(null==p?void 0:p.adRequestId)!==(null==_?void 0:_.adRequestId)||!p&&o&&(null==_?void 0:_.adRequestId))&&(p=_),p)?(r(!0),(0,eu.tZ)(eu.HY,{children:a?(0,eu.tZ)(GenerationStepBrandBannerRedeem,{onCollapse:handleCollapse,adInfo:c,message:n}):(0,eu.tZ)(GenerationStepBrandBanner,{onCollapse:handleCollapse,adCreativeId:p.adCreativeId,setAdInfo:e=>{d(e)},message:n,onBrandAdInfo:e=>i(e)})})):null},RelatedLinkAdCard=e=>{let{card:t}=e;return(0,eu.tZ)(eh.xu,{width:"100%",height:"118px",borderRadius:"10px",padding:"24px 13px 9px 13px",onClick:()=>{window.open(t.link,"_blank")},backgroundImage:"url(".concat(t.image,")"),backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",style:{cursor:"pointer"}})},RelatedLinkAd=e=>{var t,n;let{message:r}=e,o=null===(t=r.ads)||void 0===t?void 0:t.find(e=>"CHAT_BRAND"===e.inventoryCode),{adCreative:i,isLoading:a}=useAdsCreative(null!==(n=null==o?void 0:o.adCreativeId)&&void 0!==n?n:""),l=(0,e_.useMemo)(()=>i?[1,2,3].map(e=>{var t,n;return{image:null!==(t=i["brandCardImage".concat(e)])&&void 0!==t?t:null,link:null!==(n=i["brandCardImage".concat(e,"Link")])&&void 0!==n?n:null}}).filter(e=>null!==e.image&&null!==e.link):[],[i]);return!o||a||0===l.length?null:(0,eu.BX)(eh.gC,{width:"228px",height:"100%",gap:"8px",children:[(0,eu.BX)(eh.Ug,{alignItems:"center",gap:"4px",children:[(0,eu.tZ)(e$.JO,{as:eS.iKx,size:20}),(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_text_primary",children:"연관 링크"})]}),l.map((e,t)=>(0,eu.tZ)(RelatedLinkAdCard,{card:e},t))]})};function ReferenceCardAd_templateObject(){let e=(0,ep._)(['\n        cursor: pointer;\n        &::before {\n          content: "";\n          position: absolute;\n          top: 0;\n          left: 0;\n          right: 0;\n          bottom: 0;\n          border-radius: 12px;\n          background-color: rgba(0, 0, 0, 0.5);\n        }\n      ']);return ReferenceCardAd_templateObject=function(){return e},e}function ReferenceCardAd_templateObject1(){let e=(0,ep._)(["\n              overflow: hidden;\n              text-overflow: ellipsis;\n              display: -webkit-box;\n              -webkit-line-clamp: 1;\n              -webkit-box-orient: vertical;\n              line-height: 160%;\n            "]);return ReferenceCardAd_templateObject1=function(){return e},e}function ReferenceCardAd_templateObject2(){let e=(0,ep._)(['\n          display: flex;\n          justify-content: center;\n          align-items: center;\n          color: inherit;\n          & > * {\n            position: relative;\n            z-index: 1;\n          }\n          &::before {\n            content: "";\n            position: absolute;\n            top: 0;\n            left: 0;\n            right: 0;\n            bottom: 0;\n            border-radius: 4px;\n            background-color: rgba(255, 255, 255, 0.1);\n            z-index: 0;\n          }\n        ']);return ReferenceCardAd_templateObject2=function(){return e},e}let ReferenceCardAd=e=>{var t,n;let{message:r,referenceAd:o,onExposed:i,onSetAdData:a,isLastMessage:l}=e,{handleEvent:c}=(0,e1.m)(),[d,s]=(0,e_.useState)(!1),[u,p]=(0,e_.useState)(!1),_=o;l&&(o||!r.ads)||(_=null===(t=r.ads)||void 0===t?void 0:t.find(e=>"CHAT_REFERENCE"===e.inventoryCode));let{adCreative:m,adData:h}=useAdsCreative(null!==(n=null==_?void 0:_.adCreativeId)&&void 0!==n?n:"");(0,e_.useEffect)(()=>{if(r._id&&(null==h?void 0:h.adUid)&&!u){var e,t;c("expose_ad_chat_card",{...getAdEventProperties(h),event_type:"expose",msg_id:null!==(e=r._id)&&void 0!==e?e:"",chat_id:null!==(t=r.chatId)&&void 0!==t?t:""}),p(!0),a(h)}},[null==h?void 0:h.adUid,r._id]);let g=!!r.adCreativeId,handleExposed=()=>{i(!0),s(!0)};return m&&!d&&_?(0,eu.BX)(eh.xu,{width:"228px",height:"99px",borderRadius:"12px",padding:"16px",position:"relative",backgroundImage:"url(".concat(null==m?void 0:m.backgroundImage,")"),backgroundSize:"cover",backgroundPosition:"center",onClick:()=>{if(null==m?void 0:m.link){var e,t;window.open(m.link,"_blank"),c("click_ad_chat_card",{...getAdEventProperties(h),event_type:"click",msg_id:null!==(e=r._id)&&void 0!==e?e:"",chat_id:null!==(t=r.chatId)&&void 0!==t?t:"",click_type:"chat_card"})}},css:(0,em.iv)(ReferenceCardAd_templateObject()),children:[(0,eu.BX)(eh.gC,{maxWidth:"196px",gap:"10px",position:"relative",zIndex:"1",children:[(0,eu.BX)(eh.Ug,{width:"100%",justifyContent:"flex-start",alignItems:"center",gap:"6px",children:[(0,eu.tZ)(eh.xu,{width:"16px",height:"16px",borderRadius:"50%",overflow:"hidden",children:(0,eu.tZ)("img",{src:null==m?void 0:m.logo,width:"100%",height:"100%"})}),(0,eu.tZ)(eh.Jd,{typo:"$100-12-med",color:"$color_text_white",css:(0,em.iv)(ReferenceCardAd_templateObject1()),children:null==m?void 0:m.brandName})]}),(0,eu.tZ)(eh.Jd,{typo:"$100-14-semi",color:"$color_text_white",children:null==m?void 0:m.mainText}),(0,eu.tZ)(eh.Jd,{typo:"$100-12-reg",color:"$color_text_white",children:null==m?void 0:m.subText})]}),(0,eu.tZ)(eh.zx,{position:"absolute",minWidth:"19px",height:"14px",right:"8px",top:"8px",borderRadius:"4px",backgroundColor:"rgba(255, 255, 255, 0.4)",zIndex:"1",css:(0,em.iv)(ReferenceCardAd_templateObject2()),children:g?(0,eu.tZ)(eh.Jd,{fontSize:"9px",color:"#61605A",children:"AD"}):(0,eu.BX)(eh.Ug,{justifyContent:"center",alignItems:"center",padding:"0 4px 0 7px",onClick:e=>{e.stopPropagation(),handleExposed()},children:[(0,eu.tZ)(eh.Jd,{fontSize:9,fontWeight:600,color:"#61605A",paddingRight:"2px",unselectable:"on",children:"AD"}),(0,eu.tZ)(eh.Jd,{fontSize:9,fontWeight:600,color:"#61605A",unselectable:"on",children:"ㅣ"}),(0,eu.tZ)(e$.JO,{as:eS.S5X,size:11,color:"#61605A"})]})})]}):null},SelectForm_SelectForm=e=>{let{title:t,isSelected:n,onClick:r}=e;return(0,eu.tZ)(eh.zx,{maxWidth:"362px",minWidth:"228px",width:"100%",height:"47px",border:"1px solid",borderColor:n?"$color_outline_primary":"$color_outline_tertiary",backgroundColor:n?"$color_surface_secondary":"$color_surface_ivory",borderRadius:"5px",onClick:()=>{null==r||r()},children:(0,eu.tZ)(eh.Jd,{typo:"$100-15-med",color:"$color_text_primary",children:t})})},ReferenceCardAdRedeem=e=>{var t,n,r,o;let{adInfo:i,message:a,onCollapse:l}=e,{handleEvent:c}=(0,e1.m)(),[d,s]=(0,e_.useState)(null),[u,p]=(0,e_.useState)(""),_={adEventName:"expose_ad_block_modal",adEventBody:{...getAdEventProperties(i),event_type:"expose",msg_id:null!==(t=a._id)&&void 0!==t?t:"",chat_id:null!==(n=a.chatId)&&void 0!==n?n:""}},m={adEventName:"click_ad_block_modal",adEventBody:{...getAdEventProperties(i),event_type:"click",msg_id:null!==(r=a._id)&&void 0!==r?r:"",chat_id:null!==(o=a.chatId)&&void 0!==o?o:"",feedback:null!=d?d:"",feedback_detail:null!=u?u:""}},handleReasonSelect=e=>{s(e===d?null:e),"기타"!==e&&p("")},handleOtherReasonChange=e=>{p(e)};return(0,e_.useEffect)(()=>{c(_.adEventName,{..._.adEventBody})},[]),(0,eu.BX)(eh.xu,{width:"228px",maxHeight:"600px",children:[(0,eu.BX)(eh.gC,{maxWidth:"740px",width:"100%",gap:"8px",marginBottom:"28px",children:[(0,eu.tZ)(eh.Jd,{typo:"$140-16-semi",color:"$color_text_primary",children:"이 광고를 그만 보려는 이유가 무엇인가요?"}),(0,eu.tZ)(eh.Jd,{typo:"$140-14-med",color:"$color_text_secondary",children:"더 도움이 되는 정보를 제공해 드릴게요."})]}),(0,eu.BX)(eh.gC,{justifyContent:"space-between",gap:"12px",marginBottom:"16px",children:[(0,eu.tZ)(SelectForm_SelectForm,{title:"관심이 없는 광고예요",isSelected:"관심이 없는 광고예요"===d,onClick:()=>handleReasonSelect("관심이 없는 광고예요")}),(0,eu.tZ)(SelectForm_SelectForm,{title:"답변 내용에 방해가 돼요",isSelected:"답변 내용에 방해가 돼요"===d,onClick:()=>handleReasonSelect("답변 내용에 방해가 돼요")}),(0,eu.tZ)(SelectForm_SelectForm,{title:"광고가 너무 자주 표시돼요",isSelected:"광고가 너무 자주 표시돼요"===d,onClick:()=>handleReasonSelect("광고가 너무 자주 표시돼요")}),(0,eu.tZ)(SelectForm_SelectForm,{title:"부적절한 광고예요",isSelected:"부적절한 광고예요"===d,onClick:()=>handleReasonSelect("부적절한 광고예요")}),(0,eu.tZ)(SelectForm_SelectForm,{title:"이 광고를 이미 확인했어요",isSelected:"이 광고를 이미 확인했어요"===d,onClick:()=>handleReasonSelect("이 광고를 이미 확인했어요")}),(0,eu.tZ)(SelectForm_SelectForm,{title:"기타",isSelected:"기타"===d,onClick:()=>handleReasonSelect("기타")}),"기타"===d&&(0,eu.tZ)(eh.II,{value:u,onChange:e=>null==handleOtherReasonChange?void 0:handleOtherReasonChange(e.target.value),width:"100%",height:"46px",border:"1px solid",borderColor:"$color_outline_secondary",backgroundColor:"$color_surface_ivory",borderRadius:"5px",marginBottom:"4px",placeholder:"이유를 알려주세요",padding:"11px 16px",typo:"$160-15-med",color:"$color_text_primary"})]}),(0,eu.tZ)(eh.gC,{marginTop:"24px",children:(0,eu.BX)(eh.Ug,{justifyContent:"center",gap:"9px",children:[(0,eu.tZ)(eh.Wv,{size:"$medium",hierarchy:"$secondary",onClick:()=>{l()},children:(0,eu.tZ)(eh.Jd,{margin:"0px 13px",children:"취소"})}),(0,eu.tZ)(eh.Wv,{size:"$medium",hierarchy:"$primary",disabled:!d,onClick:()=>{d&&("기타"!==d||u)&&(c(m.adEventName,{...m.adEventBody}),l(),(0,eq.wp)("이 광고는 더이상 노출되지 않아요. \n 더 유용한 광고로 찾아뵙겠습니다."))},children:(0,eu.tZ)(eh.Jd,{margin:"0px 13px",children:"제출"})})]})})]})},ReferenceCardAdLayout=e=>{let{message:t,referenceAd:n,setIsExposedBlockAd:r,onSetAdCreative:o,isLastMessage:i}=e,[a,l]=(0,e_.useState)(!1),[c,d]=(0,e_.useState)(null);return a?(0,eu.tZ)(ReferenceCardAdRedeem,{adInfo:c,message:t,onCollapse:()=>{l(!1),r(!1)}}):(0,eu.tZ)(ReferenceCardAd,{referenceAd:n,message:t,onExposed:()=>{l(!0),r(!0)},onSetAdData:e=>{var t;d(e),o(null!==(t=null==e?void 0:e.adCreativeId)&&void 0!==t?t:"")},isLastMessage:i})},useDisplayGenerateStep=()=>{var e,t,n,r,o;let[i,a]=e_.useState([]),l=(0,eG.sJ)(eH.CU),c="generating"===l,d=i.length>0?null===(e=i.at(-1))||void 0===e?void 0:e.stepName:"",s=i.length>0?null===(t=i[i.length-1])||void 0===t?void 0:t.clientAction:"",u=null===(n=i.filter(e=>"searchResult"in e&&e.searchResult&&e.searchResult.length>0)[0])||void 0===n?void 0:n.searchResult,p=null===(r=i.filter(e=>"imageReferenceResults"in e&&e.imageReferenceResults.length>0)[0])||void 0===r?void 0:r.imageReferenceResults,_=null===(o=i.filter(e=>"videoReferenceResults"in e&&e.videoReferenceResults.length>0)[0])||void 0===o?void 0:o.videoReferenceResults;return e_.useEffect(()=>{"ready"!==l&&"canceling"!==l&&a([])},[l]),e_.useEffect(()=>{let e=tL.Gz.subscribe(e=>{a(e)});return()=>{e.unsubscribe()}},[]),{generateStep:i,isGenerating:c,currentStepName:d,currentClientAction:s,currentSearchResult:u,currentImageReferenceResults:p,currentVideoReferenceResults:_}},nd=[{display:"Skeleton 1"},{display:"Skeleton 2"}],useSearchResultList=e=>{let{currentMessage:t}=e,{currentStepName:n,currentClientAction:r,currentSearchResult:o}=useDisplayGenerateStep(),i=(null==t?void 0:t.searchResult)||void 0,[a,l]=e_.useMemo(()=>i?[i,"history"]:o?[o,"current"]:"browsing_server_planner_result_citation"===n&&"show_skeleton"===r?[nd,"skeleton"]:[[],"empty"],[i,o,r,n]),c=e_.useMemo(()=>a.length>4,[a.length]);return{searchResultList:a,resultType:l,enableCollapse:c}},useExposeEvent=e=>{let{currentMessage:t,isAdWebview:n}=e,{trackEvent:r}=(0,ev.Ke)(),{searchParams:o}=(0,ex.je)(),{uuid:i,isLastMessage:a}=tU(),{generating:l}=t8(),c=(0,eG.sJ)(eH.GY),{searchResultList:d,resultType:s}=useSearchResultList({currentMessage:t}),{model:u,enableOptions:p}=tX(),_=null==p?void 0:p.searchLink;(0,e_.useEffect)(()=>{let e="history"===s&&(!_||void 0!==t.cachedChip),p="current"===s&&_;if("NEW_ASSISTANT_MESSAGE_ID"!==t._id&&d.length&&a&&!l&&(e||p)){let e=d.find(e=>(0,e2.isAdSearchResult)(e)),a=o.get("inventory");n||r("expose_chat_recommend_link",{content:{...d.map(e=>e.title)},thumbnail:{...d.map(e=>!!e.thumbnail)},platform:{...d.map(e=>e.siteName)},model_name:u.toUpperCase(),msg_id:t._id,fe_msg_id:c,uuid:i,inventory_position:"key"===a?"key-in":"chip"===a?"cached_chip":null,...e&&{is_ad:!0,_id:e.adId,...e.eventProperty}})}},[d,s,l])};function SearchResultCard_templateObject(){let e=(0,ep._)(["\n  display: -webkit-box;\n  max-height: 40px;\n  line-height: 140%;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n  word-break: break-word;\n"]);return SearchResultCard_templateObject=function(){return e},e}function SearchResultCard_templateObject1(){let e=(0,ep._)(["\n          flex-shrink: 0;\n          z-index: 1;\n          cursor: ",";\n\n          &:hover {\n            background-color: ",";\n          }\n        "]);return SearchResultCard_templateObject1=function(){return e},e}let ns=(0,em.iv)(SearchResultCard_templateObject()),SearchResultCard=e=>{let{searchResult:t,isSkeleton:n,index:r,onClick:o}=e,[i,a]=(0,e_.useState)(!1);return((0,e_.useEffect)(()=>{i||a(n)},[n,i]),i)?(0,eu.tZ)(eC.Od,{width:"228px",minHeight:"142px",borderRadius:"8px"}):(0,eu.tZ)(eh.gC,{width:"100%",minHeight:60,padding:16,gap:"10px",borderRadius:8,backgroundColor:"$color_surface_tertiary",css:e=>{var n;return(0,em.iv)(SearchResultCard_templateObject1(),(null==t?void 0:t.externalLink)?"pointer":"default",null===(n=e.colors)||void 0===n?void 0:n.$color_surface_tertiary_hover)},onClick:e=>{e.stopPropagation(),(null==t?void 0:t.externalLink)&&(null==o||o(),window.navigator.userAgent.toLowerCase().includes("iphone")||window.navigator.userAgent.toLowerCase().includes("android")?t.externalLink&&window.location.assign(t.externalLink):window.open(t.externalLink,"_blank","noopener noreferrer"))},children:(0,eu.BX)(eh.xu,{display:"flex",flexDirection:"column",gap:"10px",children:[(0,eu.BX)(eh.Ug,{gap:"6px",alignItems:"center",children:[(null==t?void 0:t.favicon)&&(0,eu.tZ)("img",{style:{width:"16px",height:"16px",borderRadius:"16px"},src:t.favicon,alt:"favicon"}),!(null==t?void 0:t.favicon)&&((null==t?void 0:t.type)?(0,eu.tZ)(eh.kC,{width:"16px",height:"16px",backgroundColor:(null==t?void 0:t.type)==="file"?"$color_outline_accent_red":"$color_surface_elevated",borderRadius:"100%",alignItems:"center",justifyContent:"center",children:(0,eu.tZ)(e$.JO,{as:(null==t?void 0:t.type)==="file"?eS.qTh:eS.kr2,size:10,color:(null==t?void 0:t.type)==="file"?"$color_icon_ivory":"$color_text_accent_bg_blue"})}):(0,eu.tZ)(eh.xu,{width:"16px",height:"16px",borderRadius:"16px",backgroundColor:"$color_surface_secondary",display:"flex",justifyContent:"center",alignItems:"center",children:(0,eu.tZ)(eh.Jd,{typo:"$100-12-semi",color:"$color_action_blue_primary",children:r+1})})),(0,eu.tZ)(eh.Jd,{typo:"$100-12-med",color:"$color_text_tertiary",style:{flex:1,lineHeight:"normal",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.siteName})]}),(0,eu.tZ)(eh.Jd,{typo:"$140-14-med",color:"$color_text_primary",css:ns,children:t.title}),(0,eu.tZ)(eh.Jd,{typo:"$140-12-reg",color:"$color_text_secondary",css:ns,children:t.snippet}),t.page&&(0,eu.BX)(eh.Jd,{typo:"$140-12-reg",color:"$color_text_tertiary",css:ns,children:[t.page,"페이지"]})]})})},SearchResultCollapseController=e=>{let{enableCollapse:t,currentMessageId:n,messageIndex:r,reGenerate:o,children:i}=e,[a,l]=e_.useState(t),{trackEvent:c}=(0,ev.Ke)(),{chatId:d}=tA();return e_.useEffect(()=>{t&&l(!0)},[t]),i({collapse:a,openCollapse:()=>{c("click_chat_recommend_link_more_btn",{chat_id:d,msg_id:n,msg_index:r,re_generate:o,type:"open"}),l(!1)},closeCollapse:()=>{c("click_chat_recommend_link_more_btn",{chat_id:d,msg_id:n,msg_index:r,re_generate:o,type:"close"}),l(!0)}})};function MessageSearchResultListV2_templateObject(){let e=(0,ep._)(["\n                      cursor: pointer;\n                      flex-shrink: 0;\n\n                      &:hover {\n                        background-color: ",";\n                      }\n                    "]);return MessageSearchResultListV2_templateObject=function(){return e},e}let MessageSearchResultListV2=e=>{var t,n;let{currentMessage:r,messageIndex:o,messageListItemIndex:i,messageLength:a,isAdWebview:l,isLastMessage:c}=e,{mediaQueries:d}=(0,eB.TC)(),s=(0,eg.ac)(d.mobile),{searchParams:u}=(0,ex.je)(),p=u.get("input_kb"),_=(0,ef.T_)("chat.feature_chat_room.message_search_result_list"),{trackEvent:m}=(0,ev.Ke)(),{startTrack:h}=(0,ev.aY)(),{uuid:g}=tU(),{searchResultList:v,resultType:f,enableCollapse:x}=useSearchResultList({currentMessage:r}),{unitId:b}=tX(),{id:C}=(0,eF.Jv)(),{id:y}=(0,eF.mp)(),{id:k}=(0,eF.Ob)(),{adStep:w}=useBrandAdStep(),Z=null==w?void 0:w.ads,I=null==Z?void 0:Z.find(e=>"CHAT_REFERENCE"===e.inventoryCode),O=null===(t=r.ads)||void 0===t?void 0:t.find(e=>"CHAT_REFERENCE"===e.inventoryCode),S=C===b,B=y===b,$=k===b,M=null===(n=r.error)||void 0===n?void 0:n.message,R=!!M||x;useExposeEvent({currentMessage:r,isAdWebview:l});let{enableOptions:j}=tX(),E=null==j?void 0:j.searchLink,[A,T]=(0,e_.useState)(!p),[L,F]=(0,e_.useState)(4),[P,U]=(0,e_.useState)(!1),[D,X]=(0,e_.useState)(null),{getModelByModelName:J}=(0,eF.pw)(),z=t_.sO;(0,e_.useEffect)(()=>{D?F(3):F(4)},[D]);let handleSetAdCreative=e=>{X(e)},handleClickSearchResult=(e,t)=>()=>{var n,i,a,l,c;let d={chat_id:null!==(a=r.chatId)&&void 0!==a?a:"",model_name:null!==(l=r.model.toUpperCase())&&void 0!==l?l:"",index:t,link:null!==(c=e.externalLink)&&void 0!==c?c:"",msg_id:r._id,type:E?"reference":"relation",uuid:null!=g?g:""};m("click_chat_recommend_link",{display:e.display,has_thumbnail:!!e.thumbnail,link_type:"external",msg_index:o,position:"chat",purpose:z?null===(n=J(r.model))||void 0===n?void 0:n.displayName:void 0,...d}),h({purpose:z?null===(i=J(r.model))||void 0===i?void 0:i.displayName:void 0,...d})},N=!(null==O?void 0:O.adRequestId)&&(!I||!c),H=0===v.length||"empty"===f;return N&&(H||B||$)?(0,eu.tZ)(eh.xu,{width:["100%","100%",228,228],height:"100%",className:"empty-".concat(i)}):(0,eu.tZ)(SearchResultCollapseController,{enableCollapse:R,currentMessageId:null==r?void 0:r._id,messageIndex:o,reGenerate:a-1===o,children:e=>{let{collapse:t,openCollapse:n,closeCollapse:o}=e;return(0,eu.BX)(eh.gC,{style:{flex:1},gap:"8px",width:"100%",children:[(0,eu.BX)(eh.Ug,{gap:"4px",alignItems:"center",width:"100%",justifyContent:"space-between",pr:"20px",children:[(0,eu.BX)(eh.Ug,{alignItems:"center",gap:"4px",children:[(0,eu.tZ)(e$.JO,{as:S?eS.iKx:eS.tId,size:20}),(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_text_primary",children:S?_("title.ai_search"):_("title.ai_work")})]}),s&&(0,eu.tZ)(e$.JO,{as:eS.I4Y,color:"$color_icon_tertiary",size:24,onClick:()=>T(!A),style:{cursor:"pointer",transform:A?"rotate(0deg)":"rotate(-180deg)",transition:"transform 0.3s"}})]}),(0,eu.BX)(eh.xu,{width:["100%","100%",228,228],display:"flex",height:"100%",gap:"8px",overflow:["hidden","hidden","auto","auto"],paddingBottom:A?[24,24,0,0]:0,maxHeight:[A?"100dvh":0,A?"100dvh":0,"100dvh","100dvh"],flexWrap:"wrap",children:[(0,eu.tZ)(ReferenceCardAdLayout,{referenceAd:I,message:r,setIsExposedBlockAd:U,onSetAdCreative:handleSetAdCreative,isLastMessage:null!=c&&c}),!$&&!P&&!B&&($?[]:M&&t&&!s?v.slice(0,1):!M&&R&&t&&!s?v.slice(0,L):v).map((e,t)=>(0,eu.tZ)(eh.xu,{display:"flex",flexBasis:["calc(50% - 8px)","calc(33.333% - 8px)","100%","100%"],width:"100%",children:(0,eu.tZ)(SearchResultCard,{searchResult:e,isSkeleton:"skeleton"===f,index:t,onClick:handleClickSearchResult(e,t)})},"".concat(e.title,"-").concat(t))),!$&&!P&&R&&(0,eu.tZ)(eh.xu,{width:"100%",display:["none","none","flex","flex"],justifyContent:"center",children:(0,eu.BX)(eh.Ug,{onClick:t?n:o,gap:"2px",bg:"$color_surface_tertiary",paddingX:"16px",paddingY:"12px",borderRadius:"20px",alignItems:"center",css:e=>{var t;return(0,em.iv)(MessageSearchResultListV2_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_tertiary_hover)},children:[(0,eu.tZ)(eh.Jd,{typo:"$100-12-med",color:"$color_text_secondary",children:t?_("reference.more"):_("reference.collapse")}),(0,eu.tZ)(e$.JO,{as:t?eS.aEp:eS.wtG,size:12,color:"$color_icon_secondary"})]})})]})]})}})},MessageSideBar=e=>{let{message:t,currentMessage:n,messageIndex:r,messageListItemIndex:o,isAdWebview:i,isLastMessage:a}=e,{mediaQueries:l}=(0,eB.TC)(),[c,d]=(0,e_.useState)(0),s=(0,eg.ac)(l.mobile);return(useExposeEvent({currentMessage:n,isAdWebview:i}),(0,e_.useLayoutEffect)(()=>{var e,t;let n=null!==(t=null===(e=document.querySelector(".empty-".concat(o-1)))||void 0===e?void 0:e.clientHeight)&&void 0!==t?t:0;d(n)},[s,o]),"assistant"!==n.role)?(0,eu.tZ)(eh.xu,{width:["100%","100%",228,228],height:"100%",className:"empty-".concat(o)}):(0,eu.tZ)(eh.xu,{backgroundColor:["$color_bg_elevated_secondary","$color_bg_elevated_secondary","$color_bg_screen","$color_bg_screen"],zIndex:1,children:(0,eu.BX)(eh.gC,{position:"sticky",top:0,left:0,gap:"16px",mt:[0,0,-c,-c],pt:["20px","20px","16px","16px"],pb:["0px","0px","16px","16px"],backgroundColor:"$color_bg_screen",children:[(0,eu.tZ)(RelatedLinkAd,{message:n}),(0,eu.tZ)(MessageSearchResultListV2,{messageIndex:r,messageLength:t.length,currentMessage:n,messageListItemIndex:o,isLastMessage:a})]})})};function DynamicChipListItem_templateObject(){let e=(0,ep._)(["\n          &:hover {\n            & p {\n              color: ",";\n            }\n          }\n        "]);return DynamicChipListItem_templateObject=function(){return e},e}let DynamicChipListItem=e=>{let{title:t,onClick:n,divider:r}=e,o=t.match(/[\u0600-\u06FF]/g),i=o&&o.length>=10;return(0,eu.BX)(eD.NU,{children:[(0,eu.tZ)(eh.zx,{onClick:n,width:"100%",paddingY:"8px",css:e=>{var t;return(0,em.iv)(DynamicChipListItem_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_text_brand)},children:(0,eu.BX)(eh.Ug,{dir:i?"rtl":"ltr",width:"100%",alignItems:"center",justifyContent:"space-between",children:[(0,eu.tZ)(eh.Jd,{typo:"$ex_140-14-med",color:"$color_text_primary",textAlign:i?"right":"left",children:t}),(0,eu.tZ)(e$.JO,{as:eS.FNd,size:20})]})}),r]},t)};function DynamicChipList_templateObject(){let e=(0,ep._)(["\n                    width: 100%;\n                    height: 1px;\n                    border-bottom: 1px solid\n                      ",";\n                    opacity: 0.5;\n                  "]);return DynamicChipList_templateObject=function(){return e},e}let DynamicChipList=e=>{let{message:t}=e,n=(0,ef.T_)("chat.feature_chat_room.dynamic_chip"),{trackEvent:r}=(0,ev.Ke)(),{searchParams:o}=(0,ex.je)(),i=o.get("inventory"),a=(0,eG.sJ)(eH.GY),{generating:l,startGenerate:c}=t8(),{model:d,enableOptions:s,isUnitDisabled:u}=tX(),{chatId:p}=tA(),_=(0,e_.useRef)(null),{getModelByModelName:m}=(0,eF.pw)(),h=(0,e_.useMemo)(()=>{if(t.length)return t[0]},[t]),g=(0,e_.useMemo)(()=>{var e;return null!==(e=null==h?void 0:h.dynamicChips)&&void 0!==e?e:[]},[h]),trackHandleClickChipEvent=(e,t)=>{var n,o;let i={chatId:p,model_name:d.toUpperCase(),index:t,uuid:null!==(o=_.current)&&void 0!==o?o:""};r("click_command_chip",{command_chip_name:e.content,first_chip_type:"text",purpose:t_.sO?null===(n=m(d))||void 0===n?void 0:n.displayName:void 0,...i})},handleClickChip=(e,t)=>{c({message:e.content,model:d,mode:e2.ChatMode.CHAT,reroll:!1,commandChipType:"dynamic_chip",images:[]}),trackHandleClickChipEvent(e,t)};return((0,e_.useEffect)(()=>{var e,n,o;(null===(e=t[0])||void 0===e?void 0:e._id)!=="NEW_ASSISTANT_MESSAGE_ID"&&t.length&&g.length&&(_.current=(0,e9.Z)(),r("expose_command_chip",{chat_id:p,msg_id:null===(n=t[0])||void 0===n?void 0:n._id,fe_msg_id:a,content:{...g.map(e=>e.content)},model_name:d.toUpperCase(),uuid:_.current,inventory_position:"key"===i?"key-in":"chip"===i?"cached_chip":null,purpose:t_.sO?null===(o=m(d))||void 0===o?void 0:o.displayName:void 0}))},[l,g]),!l&&(null==s?void 0:s.dynamicChip)&&!u&&g.length)?(0,eu.BX)(eh.gC,{py:20,width:"100%",gap:"12px",children:[(0,eu.tZ)(eh.Ug,{alignItems:"center",gap:"4px",children:(0,eu.tZ)(eh.Jd,{typo:"$100-12-med",color:"$color_text_tertiary",children:n("description")})}),(0,eu.tZ)(eD.WY,{children:g.map((e,t)=>(0,eu.tZ)(DynamicChipListItem,{onClick:()=>handleClickChip(e,t),title:e.content,divider:t<(null==g?void 0:g.length)-1?(0,eu.tZ)(eh.xu,{css:e=>{var t;return(0,em.iv)(DynamicChipList_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary)}}):void 0},e.content))})]}):null};var WarningMessage=e=>(0,eu.BX)("svg",{xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",...e,children:[(0,eu.tZ)("path",{fill:"#FA0",fillRule:"evenodd",d:"M8.583 1.728a.667.667 0 0 0-1.169 0L1.208 13.012a.667.667 0 0 0 .585.987h12.411a.667.667 0 0 0 .584-.988L8.583 1.729Z",clipRule:"evenodd"}),(0,eu.tZ)("g",{fill:"#0D0D0C",children:(0,eu.tZ)("path",{d:"M7.414 6.291h1.333v3.333H7.414V6.291ZM8.08 11.624a.667.667 0 1 0 0-1.333.667.667 0 0 0 0 1.333Z"})})]});let MessageErrorRenderer=e=>{let{message:t}=e,{user:n}=(0,eT.aF)(),r=(0,ef.T_)(),o=(0,e0.sJ)(eH.h5),i=(0,e0.sJ)(eH._b),{model:a,enableOptions:l}=tX(),{lastUserMessage:c}=tA(),{isLastMessage:d}=tU(),{startGenerate:s,generating:u}=t8(),regenerate=async()=>{var e,t;c&&await s({message:null!==(t=null==c?void 0:c.content)&&void 0!==t?t:"",model:a,mode:e2.ChatMode.CHAT,reroll:!0,commandChipType:"",images:o.images,referenceIds:o.referenceIds,assignmentId:i||(null==c?void 0:null===(e=c.meta)||void 0===e?void 0:e.assignmentId)})};if(!t.error)return null;let p="error"===t.error.type&&(null==l?void 0:l.reroll)&&n;return p?(0,eu.BX)(eh.Ug,{p:"12px",width:"100%",border:"1px solid",borderColor:"$color_outline_tertiary",borderRadius:"8px",justifyContent:"space-between",children:[(0,eu.BX)(eh.Ug,{gap:"8px",alignItems:"center",children:[(0,eu.tZ)(eh.xu,{display:"flex",width:"24px",height:"24px",borderRadius:"50%",backgroundColor:"$palette_gray_gray_50",p:"4px",children:(0,eu.tZ)(WarningMessage,{})}),(0,eu.tZ)(eh.Jd,{typo:"$140-13-med",color:"$color_text_primary",children:r("feature_assignment.result.error.label")})]}),!u&&d&&(0,eu.BX)(eh.zx,{display:"flex",px:"16px",py:"12px",backgroundColor:"$color_surface_brand",flexDirection:"row",alignItems:"center",gap:"6px",borderRadius:"8px",onClick:regenerate,children:[(0,eu.tZ)(e$.JO,{as:eS.AFx,color:"$color_icon_white",size:14}),(0,eu.tZ)(eh.Jd,{typo:"$100-14-bold",color:"$color_text_white",children:r("feature_assignment.result.error.button")})]})]}):(0,eu.BX)(eh.Ug,{gap:"8px",alignItems:"center",children:["warning"===t.error.type&&(0,eu.tZ)(e$.JO,{as:eS.aq6,color:"$color_icon_quaternary",size:24}),(0,eu.tZ)(eh.Jd,{typo:"$100-16-med",color:"$color_text_tertiary",children:t.error.message})]})};function MessageImage_templateObject(){let e=(0,ep._)(["\n        aspect-ratio: ",";\n\n        &:hover {\n          cursor: pointer;\n\n          > div {\n            display: flex;\n          }\n        }\n      "]);return MessageImage_templateObject=function(){return e},e}let MessageImage=e=>{let{url:t,onClick:n,border:r,aspectRatio:o,children:i}=e;return(0,eu.tZ)(eh.xu,{padding:"8px",borderRadius:"8px",backgroundImage:"url(".concat(t,")"),backgroundSize:"cover",border:r?"1px solid":void 0,borderColor:"$color_outline_secondary",backgroundPosition:"center",width:"100%",display:"flex",alignItems:"flex-end",justifyContent:"flex-end",css:(0,em.iv)(MessageImage_templateObject(),o?"".concat(o):t_.vc?"4 / 3":"1"),onClick:n,children:i})};function MessageImageFooter_templateObject(){let e=(0,ep._)(["\n        display: ",";\n      "]);return MessageImageFooter_templateObject=function(){return e},e}function MessageImageFooter_templateObject1(){let e=(0,ep._)(["\n          background: rgba(0, 0, 0, 0.4);\n        "]);return MessageImageFooter_templateObject1=function(){return e},e}function MessageImageFooter_templateObject2(){let e=(0,ep._)(["\n          background: rgba(0, 0, 0, 0.4);\n        "]);return MessageImageFooter_templateObject2=function(){return e},e}function MessageImageFooter_templateObject3(){let e=(0,ep._)(["\n              background: rgba(0, 0, 0, 0.4);\n            "]);return MessageImageFooter_templateObject3=function(){return e},e}function MessageImageFooter_templateObject4(){let e=(0,ep._)(["\n                  &:hover {\n                    background-color: ",";\n                  }\n                "]);return MessageImageFooter_templateObject4=function(){return e},e}function _templateObject5(){let e=(0,ep._)(["\n                  &:hover {\n                    background-color: ",";\n                  }\n                "]);return _templateObject5=function(){return e},e}let MessageImageFooter=e=>{let{image:t,isVisible:n,toggleImageLike:r,toggleImageDislike:o,downloadUpScaledImage:i,eventProps:a}=e,l=(0,ef.T_)(),[c,d]=e_.useState(!1),s=n?"36px":"24px",{trackEvent:u}=(0,ev.Ke)(),onClickDownload=e=>{e.stopPropagation(),u("img_download_done",{...a,is_upscale:!1,image_urls:t.url}),window.open(t.url,"_blank","noopener,noreferrer")},onClickDownloadUpScaled=(e,t)=>{e.stopPropagation(),i(t,d)};return(0,eu.BX)(eh.Ug,{css:(0,em.iv)(MessageImageFooter_templateObject(),n?"flex":"none"),gap:"6px",zIndex:1,children:[(0,eu.tZ)(eh.zx,{width:s,height:s,display:"flex",justifyContent:"center",alignItems:"center",css:(0,em.iv)(MessageImageFooter_templateObject1()),borderRadius:"4px",onClick:e=>{e.stopPropagation(),r(),eq.Am.alert(l("common.alert.message_evaluation"),"MESSAGE_EVALUATION")},children:(0,eu.tZ)(e$.JO,{as:t.liked?eS.RYq:eS.EG6,color:"$color_icon_white",size:18})}),(0,eu.tZ)(eh.zx,{width:s,height:s,display:"flex",justifyContent:"center",alignItems:"center",css:(0,em.iv)(MessageImageFooter_templateObject2()),borderRadius:"4px",onClick:e=>{e.stopPropagation(),o(),eq.Am.alert(l("common.alert.message_evaluation"),"MESSAGE_EVALUATION")},children:(0,eu.tZ)(e$.JO,{as:t.disliked?eS.xR:eS.Bnh,color:"$color_icon_white",size:18})}),(0,eu.tZ)(eC.Lt,{x:"right",renderOpener:e=>{let{open:t}=e;return(0,eu.tZ)(eh.zx,{width:s,height:s,display:"flex",justifyContent:"center",alignItems:"center",css:(0,em.iv)(MessageImageFooter_templateObject3()),borderRadius:"4px",onClick:e=>{e.stopPropagation(),u("click_img_download_btn",a),t()},children:(0,eu.tZ)(e$.JO,{as:eS.WGO,color:"$color_icon_white",size:18})})},renderContent:e=>{let{close:t}=e;return(0,eu.BX)(eh.gC,{minWidth:"144px",backgroundColor:"$color_surface_ivory",border:"1px solid",borderColor:"$color_outline_secondary",borderRadius:"8px",overflow:"hidden",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.05), 0px 2px 4px -2px rgba(0, 0, 0, 0.10);",children:[(0,eu.BX)(eh.zx,{display:"flex",alignItems:"center",gap:"10px",px:"14px",py:"10px",css:e=>{var t;return(0,em.iv)(MessageImageFooter_templateObject4(),null==e?void 0:null===(t=e.colors)||void 0===t?void 0:t.$color_surface_hover)},onClick:e=>{onClickDownload(e),t()},children:[(0,eu.tZ)(e$.JO,{as:eS.WGO,color:"$color_icon_secondary",size:16}),(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_text_secondary",children:l("ui.download.download_button")})]}),(0,eu.BX)(eh.zx,{display:"flex",alignItems:"center",gap:"10px",px:"14px",py:"10px",css:e=>{var t;return(0,em.iv)(_templateObject5(),null==e?void 0:null===(t=e.colors)||void 0===t?void 0:t.$color_surface_hover)},onClick:e=>onClickDownloadUpScaled(e,t),children:[c?(0,eu.tZ)(eD.$j,{}):(0,eu.tZ)(e$.JO,{as:eS.dps,color:"$color_icon_secondary",size:16}),(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_text_secondary",children:l("ui.download.download_upscale_button")})]})]})}})]})},MessageImageModal=e=>{let{imageUrlList:t,imageLinks:n,aspectRatioList:r,selectedImageIndex:o,closeModal:i,messageImageFooter:a,onClickPrevious:l,onClickNext:c,onClickExit:d,modalHeader:s}=e,[u,p]=e_.useState(o),{trackEvent:_}=(0,ev.Ke)();return(0,eu.BX)(eh.xu,{width:"600px",maxWidth:"80.1587302%",maxHeight:"80.0404585%",height:"auto",children:[s,(0,eu.tZ)(MessageImage,{url:t[u],aspectRatio:null==r?void 0:r.at(u),onClick:n?()=>{_("click_img_url_btn",{type:"ai_search_img",url:null==n?void 0:n[u]}),window.open(null==n?void 0:n[u],"_blank","noopener,noreferrer")}:void 0,children:null==a?void 0:a(u)}),(0,eu.tZ)(eh.xu,{width:"100%",position:"fixed",bottom:28,left:0,right:0,children:(0,eu.tZ)(eh.Ug,{width:"100%",gap:"16px",justifyContent:"center",alignItems:"center",children:t.map((e,n)=>(0,eu.tZ)(eh.zx,{onClick:()=>p(n),children:(0,eu.tZ)(eh.xu,{width:12,height:12,borderRadius:"50%",backgroundColor:e===t[u]?"$color_icon_brand":"$color_icon_disabled"})},e))})}),(0,eu.tZ)(eh.zx,{onClick:()=>{u>0&&(p(u-1),null==l||l(u-1))},position:"fixed",left:20,top:"calc(50% - 48px)",style:{cursor:u===t.length-1?"not-allowed":"pointer"},children:(0,eu.tZ)(e$.JO,{as:eS.k9_,size:48,color:"$color_text_white",opacity:0===u?.3:1,style:{cursor:0===u?"not-allowed":"pointer"}})}),(0,eu.tZ)(eh.zx,{onClick:()=>{u<t.length-1&&(p(u+1),null==c||c(u+1))},position:"fixed",right:20,top:"calc(50% - 48px)",style:{cursor:u===t.length-1?"not-allowed":"pointer"},children:(0,eu.tZ)(e$.JO,{as:eS.xMl,size:48,color:"$color_text_white",opacity:u===t.length-1?.3:1})}),!s&&(0,eu.tZ)(eh.zx,{position:"fixed",top:"20px",right:"20px",onClick:()=>{null==d||d(u),i()},children:(0,eu.tZ)(e$.JO,{as:eS.S5X,size:29,color:"$color_icon_white"})})]})},useUpScaledDownloadImage=()=>{let{user:e}=(0,eT.aF)(),{sendAirbridgeEvent:t}=(0,tQ.lM)(),{trackEvent:n}=(0,ev.Ke)(),r=e_.useCallback(async(r,o,i,a,l,c,d)=>{if(!r.image)return;let s=r.image._id,u=r.image.imageUrls[o];try{a(!0);let r=await putGenerateUpScaledImageDownload({targetUrl:u.url,imageId:s,email:(null==e?void 0:e.email)||""}),i=document.createElement("a");i.href=r,i.setAttribute("download","true"),document.body.appendChild(i),i.click(),document.body.removeChild(i),n("img_download_done",{index:o,image_urls:u.url,is_upscale:!0,position:l,msg_id:c,chat_id:d}),t("download_image")}catch(e){console.error(e)}finally{a(!1),i()}},[e]);return{downloadUpScaledImage:r}};function MessageImageGallery_templateObject(){let e=(0,ep._)(["\n                  display: flex;\n                  width: 50%;\n                "]);return MessageImageGallery_templateObject=function(){return e},e}function MessageImageGallery_templateObject1(){let e=(0,ep._)(["\n                  display: grid;\n                  grid-template-columns: 1fr 1fr;\n                  grid-template-rows: 1fr;\n                  grid-gap: 16px;\n                  width: 100%;\n                "]);return MessageImageGallery_templateObject1=function(){return e},e}function MessageImageGallery_templateObject2(){let e=(0,ep._)(["\n            ","\n          "]);return MessageImageGallery_templateObject2=function(){return e},e}let MessageImageGallery=e=>{var t;let{message:n}=e,{chatId:r}=tA(),{isProMode:o}=tX(),{role:i}=n,{trackEvent:a}=(0,ev.Ke)(),[l,c]=e_.useState(0),{currentClientAction:d}=useDisplayGenerateStep(),{updateAssistantLoadingMessage:s}=useLoadingMessage(r),u=e_.useMemo(()=>"assistant"===i&&n.image||null,[n,i]),p=u?u.imageUrls:[],{toggleImageLike:_,toggleImageDislike:m}=function(e){let{mutate:t}=useChatRoom(e),n=e_.useRef(!1),{trackEvent:r}=(0,ev.Ke)(),mutateMessage=(e,n,r)=>{t(t=>{if(!t)throw Error;return{...t,messages:t.messages.map(t=>Array.isArray(t)?t.map(t=>t._id===e._id&&t.image?{...t,image:{...t.image,imageUrls:t.image.imageUrls.map((e,t)=>t===n?{...e,...r}:e)}}:t):t.image?{...t,image:{...t.image,imageUrls:t.image.imageUrls.map((e,t)=>t===n?{...e,...r}:e)}}:t)}},{revalidate:!1,populateCache:!0})},logImageEvalEvent=(e,t,n)=>{if(!e.image)return;let o=e.image.imageUrls[t];"liked"===n&&r("click_like_btn",{chat_id:e._id,chat_index:0,feature_menu:"image",model_name:String(e.model).toUpperCase(),onoff:!o.liked,image_urls:o.url,image_id:e.image._id,position:"chat"}),"disliked"===n&&r("click_unlike_btn",{chat_id:e._id,chat_index:0,feature_menu:"image",model_name:String(e.model).toUpperCase(),onoff:!o.disliked,position:"chat",image_urls:o.url,image_id:e.image._id,msg_id:e._id})},toggleImageLike=async(e,t)=>{try{if(n.current||(n.current=!0,!e.image))return;let r=e.image._id,o={liked:e.image.imageUrls[t].liked,disliked:e.image.imageUrls[t].disliked};!o.liked&&o.disliked?Object.assign(o,{liked:!0,disliked:!1}):Object.assign(o,{liked:!o.liked}),mutateMessage(e,t,o),await evaluateImage({imageId:r,data:{index:t,...o}})}finally{n.current=!1,logImageEvalEvent(e,t,"liked")}},toggleImageDislike=async(e,t)=>{try{if(n.current||(n.current=!0,!e.image))return;let r=e.image._id,o={liked:e.image.imageUrls[t].liked,disliked:e.image.imageUrls[t].disliked};!o.disliked&&o.liked?Object.assign(o,{liked:!1,disliked:!0}):Object.assign(o,{disliked:!o.disliked}),mutateMessage(e,t,o),await evaluateImage({imageId:r,data:{index:t,...o}})}finally{n.current=!1,logImageEvalEvent(e,t,"disliked")}};return{toggleImageLike,toggleImageDislike}}(r||""),{downloadUpScaledImage:h}=useUpScaledDownloadImage(),g=e_.useMemo(()=>{var e;return"user"===i?n.images||[]:(null===(e=n.image)||void 0===e?void 0:e.imageUrls.map(e=>e.url))||[]},[n.images,null===(t=n.image)||void 0===t?void 0:t.imageUrls,i]),v=n.image&&"SKELETON"===n.image._id,f=1===g.length,onClickMoveImage=(e,t)=>{a("click_next_result_btn",{type:o?"pro_mode_img":"ai_image_img",current_index:t,direction:e})},onClickExit=e=>{a("click_detailed_view_exit_btn",{type:o?"pro_mode_img":"ai_image_img",current_index:e})};return((0,e_.useEffect)(()=>{"show_image_skeleton"===d&&s({isGenerateImage:!0})},[d,s]),0!==g.length||v)?(0,eu.tZ)(eC.CO,{zIndex:9,renderOpener:e=>{let{openModal:t}=e;return(0,eu.BX)(eh.xu,{css:(0,em.iv)(MessageImageGallery_templateObject2(),f?(0,em.iv)(MessageImageGallery_templateObject()):(0,em.iv)(MessageImageGallery_templateObject1())),children:[v?t_.vc?(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(eC.Od,{borderRadius:"8px",aspectRatio:"4 / 3"}),(0,eu.tZ)(eC.Od,{borderRadius:"8px",aspectRatio:"4 / 3"}),(0,eu.tZ)(eC.Od,{borderRadius:"8px",aspectRatio:"4 / 3"}),(0,eu.tZ)(eC.Od,{borderRadius:"8px",aspectRatio:"4 / 3"})]}):(0,eu.tZ)(eu.HY,{children:(0,eu.tZ)(eC.Od,{borderRadius:"8px",aspectRatio:"1"})}):null,g.map((e,o)=>(0,eu.tZ)(MessageImage,{url:e,onClick:()=>{c(o),a("expose_img_expand",{index:o,image_urls:e,msg_id:n._id,chat_id:r||""}),t()},children:"assistant"===i&&p.length>0&&(0,eu.tZ)(MessageImageFooter,{image:p[o],toggleImageLike:()=>_(n,o),toggleImageDislike:()=>m(n,o),eventProps:{index:o,position:"chat",msg_id:n._id,chat_id:r||""},downloadUpScaledImage:(e,t)=>h(n,o,e,t,"chat",n._id,r||"")})},e))]})},renderContent:e=>{let{closeModal:t}=e;return(0,eu.tZ)(eh.xu,{display:"flex",justifyContent:"center",children:(0,eu.tZ)(MessageImageModal,{imageUrlList:g,selectedImageIndex:l,closeModal:t,onClickPrevious:e=>onClickMoveImage("previous",e),onClickNext:e=>onClickMoveImage("next",e),onClickExit:e=>onClickExit(e),messageImageFooter:e=>"assistant"===i&&p.length>0?(0,eu.tZ)(MessageImageFooter,{image:p[e],isVisible:!0,toggleImageLike:()=>_(n,e),toggleImageDislike:()=>m(n,e),eventProps:{index:e,position:"expand",msg_id:n._id,chat_id:r||""},downloadUpScaledImage:(t,o)=>h(n,e,t,o,"expand",n._id,r||"")}):null})})}}):null},MessageAttachmentGallery=e=>{var t,n;let{message:r}=e,{data:o}=(0,eK.$I)(null==r?void 0:r.chatId),i=(0,eG.sJ)(eH.Bb),{totalCount:a}=(0,eG.sJ)(eH.h5),l=(0,eG.sJ)(eH.CU),{getModelByModelName:c}=(0,eF.pw)(),{unit:d,isProMode:s}=tX(),u={model_name:null==d?void 0:d.name.toUpperCase(),uploadPosition:"home",purpose:null===(t=c(r.model))||void 0===t?void 0:t.displayName,is_pro_mode:s,current_box_number:a},p=!o&&"streaming"===l,_=(0,e_.useMemo)(()=>(null==o?void 0:o.filter(e=>{var t,n;return(null===(t=r.referenceIds)||void 0===t?void 0:t.includes(e._id))||e.url&&(null===(n=r.images)||void 0===n?void 0:n.includes(e.url))}))||[],[o,r.referenceIds,r.images]),m=(0,e_.useMemo)(()=>p?null==i?void 0:i.some(e=>"file"===e.type||"link"===e.type):null==_?void 0:_.some(e=>"FileReferenceItem"===e.kind||"LinkReferenceItem"===e.kind),[_,i,p]),h=(0,e_.useMemo)(()=>p?i:formatReferenceData(_),[_,i,p]);return"assistant"===r.role||(null===(n=r.meta)||void 0===n?void 0:n.assignmentId)?null:m?(0,eu.tZ)(ChatAttachmentList,{references:h,eventProperties:u}):(0,eu.tZ)(MessageImageGallery,{message:r})},formatReferenceData=e=>e.map(e=>"FileReferenceItem"===e.kind?{_id:e._id,type:"file",status:"success",title:e.title,extension:e.extension,url:e.fileUrl}:"LinkReferenceItem"===e.kind?{_id:e._id,type:"link",status:"success",url:e.url,title:e.title,favicon:e.favicon}:"ImageReferenceItem"===e.kind?{_id:e._id,type:"image",status:"success",url:e.url}:void 0),getImageWidth=e=>0===e?"calc(50% - 8px)":1===e||2===e?"calc(25%  - 8px)":"calc((100% / 6) - 8px)",getImageHeight=e=>e<3?192:120;function ImageListSkeleton_templateObject(){let e=(0,ep._)(["\n        row-gap: 10px;\n        column-gap: 8px;\n      "]);return ImageListSkeleton_templateObject=function(){return e},e}let ImageListSkeleton=()=>(0,eu.tZ)(eh.gC,{gap:"10px",children:(0,eu.tZ)(eh.xu,{flexWrap:"wrap",display:"flex",flexDirection:"row",css:(0,em.iv)(ImageListSkeleton_templateObject()),children:Array.from({length:9}).map((e,t)=>(0,eu.BX)(eh.gC,{gap:"8px",width:getImageWidth(t),children:[(0,eu.tZ)(eC.Od,{width:"100%",height:"".concat(getImageHeight(t),"px"),borderRadius:"4px"}),(0,eu.tZ)(eC.Od,{width:"56px",height:"20px",borderRadius:"4px"}),(0,eu.tZ)(eC.Od,{width:"100%",height:"12px",borderRadius:"4px"})]},t))})});var nu=n(54701);function ImageShowMorePopupController_templateObject(){let e=(0,ep._)(["\n                    &:hover {\n                      background-color: ",";\n                    }\n                  "]);return ImageShowMorePopupController_templateObject=function(){return e},e}function ImageShowMorePopupController_templateObject1(){let e=(0,ep._)(["\n                    &:hover {\n                      background-color: ",";\n                    }\n                  "]);return ImageShowMorePopupController_templateObject1=function(){return e},e}function ImageShowMorePopupController_templateObject2(){let e=(0,ep._)(["\n              &:hover {\n                background-color: ",";\n              }\n            "]);return ImageShowMorePopupController_templateObject2=function(){return e},e}let ImageShowMorePopupController=e=>{var t,n;let{defaultImageList:r,renderContent:o}=e,{trackEvent:i}=(0,ev.Ke)(),a=(0,eg.ac)("(min-width: 1280px)"),l=(0,e_.useRef)(null),c=(0,ef.T_)(),{opened:d,changeOpened:s}=(0,nu.X)(),u=(0,eG.rb)(eH.QC),[p,_]=(0,e_.useState)(),onClickMoveImage=(e,t)=>{i("click_next_result_btn",{type:"ai_search_img",current_index:t,direction:e})},scrollToTop=()=>{var e;null==l||null===(e=l.current)||void 0===e||e.scrollTo({top:0,behavior:"smooth"})},m=r.findIndex(e=>e.related_content_id===p),h=(0,e_.useMemo)(()=>{let e=r.find(e=>e.related_content_id===p),t=r.filter(e=>e.related_content_id!==p);return e?[e,...t]:t},[r,p]),g=!(null===(t=r[m-1])||void 0===t?void 0:t.related_content_id),v=!(null===(n=r[m+1])||void 0===n?void 0:n.related_content_id);return(0,e_.useEffect)(()=>{_(r[0].related_content_id),scrollToTop()},[r]),(0,eu.BX)(eh.gC,{height:"100%",children:[(0,eu.BX)(eh.Ug,{justifyContent:"space-between",alignItems:"center",padding:"16px 20px 8px 20px",children:[(0,eu.BX)(eh.Ug,{gap:"4px",alignItems:"center",children:[(0,eu.tZ)(e$.JO,{as:eS._zb,size:16}),(0,eu.tZ)(eh.Jd,{typo:"$100-14-semi",color:"$color_text_primary",children:c("chat.feature_chat_room.section.image")})]}),(0,eu.BX)(eh.Ug,{gap:"8px",children:[(0,eu.tZ)(eh.zx,{width:20,height:20,borderRadius:"4px",onClick:()=>{var e;let t=null===(e=r[m-1])||void 0===e?void 0:e.related_content_id;t&&(scrollToTop(),onClickMoveImage("previous",m-1),_(t))},css:g?void 0:e=>{var t;return(0,em.iv)(ImageShowMorePopupController_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_secondary_hover)},children:(0,eu.tZ)(e$.JO,{as:eS.k9_,size:20,color:g?"$color_icon_disabled":"$color_icon_primary"})}),(0,eu.tZ)(eh.zx,{width:20,height:20,borderRadius:"4px",onClick:()=>{var e;let t=null===(e=r[m+1])||void 0===e?void 0:e.related_content_id;t&&(scrollToTop(),onClickMoveImage("next",m+1),_(t))},css:v?void 0:e=>{var t;return(0,em.iv)(ImageShowMorePopupController_templateObject1(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_secondary_hover)},children:(0,eu.tZ)(e$.JO,{as:eS.xMl,size:20,color:v?"$color_icon_disabled":"$color_icon_primary"})}),(0,eu.tZ)(eh.zx,{width:20,height:20,borderRadius:"4px",onClick:()=>{i("click_detailed_view_exit_btn",{type:"ai_search_img",current_index:m},()=>{!d&&a&&s(!0),u()})},css:e=>{var t;return(0,em.iv)(ImageShowMorePopupController_templateObject2(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_secondary_hover)},children:(0,eu.tZ)(e$.JO,{as:eS.S5X,size:20,color:"$color_icon_primary"})})]})]}),o({imageList:h,selectImage:e=>{var t;let{id:n}=e;_(n),scrollToTop(),i("click_detailed_img_search_result",{index:m,url:null===(t=h[m])||void 0===t?void 0:t.link})},renderContentRef:l})]})};function ImageShowMorePopupLayout_templateObject(){let e=(0,ep._)(["\n              border: 1px solid ",";\n              box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.05);\n            "]);return ImageShowMorePopupLayout_templateObject=function(){return e},e}function ImageShowMorePopupLayout_templateObject1(){let e=(0,ep._)(["\n            border: 1px solid ",";\n            box-shadow: 0px 0px 10px 0px rgba(0, 0, 0, 0.05);\n          "]);return ImageShowMorePopupLayout_templateObject1=function(){return e},e}let ImageShowMorePopupLayout=e=>{let{children:t}=e,{opened:n,changeOpened:r}=(0,nu.X)(),o=(0,eg.ac)("(min-width: 1280px)"),i=(0,eG.rb)(eH.QC);return(0,e_.useEffect)(()=>{n||r(!1)},[n,r]),o?(0,eu.tZ)(eh.xu,{position:"absolute",left:"calc(100% + 16px)",children:(0,eu.BX)(eh.Ug,{children:[(0,eu.tZ)(eh.xu,{css:e=>{var t;return(0,em.iv)(ImageShowMorePopupLayout_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary)},position:"fixed",top:"calc(56px + 8px)",width:"19.7916667%",maxWidth:"380px",minWidth:"328px",bottom:"8px",borderRadius:"16px",backgroundColor:"$color_bg_screen",zIndex:9,children:t}),(0,eu.tZ)(eh.xu,{width:16})]})}):(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(eC.YM,{opened:!0,zIndex:9,onClick:i}),(0,eu.tZ)(eh.xu,{position:"fixed",backgroundColor:"$color_bg_screen",borderRadius:"16px",css:e=>{var t;return(0,em.iv)(ImageShowMorePopupLayout_templateObject1(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary)},width:328,top:0,right:0,bottom:0,zIndex:9,children:t})]})};function MessageImageListItem_templateObject(){let e=(0,ep._)(["\n        cursor: pointer;\n\n        &:hover {\n          .itemTitle {\n            text-decoration: underline;\n          }\n\n          .itemImage {\n            box-shadow: 0px 4px 10px 0px rgba(0, 0, 0, 0.1);\n          }\n        }\n      "]);return MessageImageListItem_templateObject=function(){return e},e}function MessageImageListItem_templateObject1(){let e=(0,ep._)(["\n            display: -webkit-box;\n            max-height: 12px;\n            line-height: 100%;\n            -webkit-line-clamp: 1;\n            -webkit-box-orient: vertical;\n            overflow: hidden;\n            word-break: break-word;\n          "]);return MessageImageListItem_templateObject1=function(){return e},e}let MessageImageListItem=e=>{var t;let{item:n,width:r,height:o,renderFaviconItem:i,renderTitle:a,...l}=e;return(0,eu.BX)(eh.gC,{gap:"8px",width:r,css:(0,em.iv)(MessageImageListItem_templateObject()),...l,children:[(0,eu.tZ)("img",{height:o,style:{display:"block",objectFit:"cover",cursor:"pointer",width:"100%",borderRadius:"12px"},src:n.thumbnail,className:"itemImage"}),i?i({favicon:null==n?void 0:n.favicon,source:null==n?void 0:n.source}):(0,eu.BX)(eh.Ug,{gap:"4px",children:[(null==n?void 0:n.favicon)&&(0,eu.tZ)("img",{style:{width:10,height:10,borderRadius:"50%"},src:n.favicon,alt:"".concat(n.source,"-favicon")}),(0,eu.tZ)(eh.Jd,{typo:"$100-12-reg",color:"$color_text_secondary",children:n.source})]}),a?a({title:null!==(t=null==n?void 0:n.title)&&void 0!==t?t:""}):(0,eu.tZ)(eh.Jd,{className:"itemTitle",typo:"$100-12-med",color:"$color_text_primary",css:(0,em.iv)(MessageImageListItem_templateObject1()),children:n.title})]},n.related_content_id)};function ImageShowMorePopup_templateObject(){let e=(0,ep._)(["\n                border-bottom: 1px solid\n                  ",";\n              "]);return ImageShowMorePopup_templateObject=function(){return e},e}function ImageShowMorePopup_templateObject1(){let e=(0,ep._)(["\n                    display: -webkit-box;\n                    max-height: 44px;\n                    line-height: 140%;\n                    -webkit-line-clamp: 2;\n                    -webkit-box-orient: vertical;\n                    overflow: hidden;\n                    word-break: break-word;\n                  "]);return ImageShowMorePopup_templateObject1=function(){return e},e}let ImageShowMorePopup=e=>{let{trackEvent:t}=(0,ev.Ke)(),{imageList:n}=e,openMainImageLink=e=>{(null==e?void 0:e.link)&&(t("click_img_url_btn",{type:"ai_search_img",url:null==e?void 0:e.link}),window.open(null==e?void 0:e.link,"_blank"))};return(0,eu.tZ)(ImageShowMorePopupLayout,{children:(0,eu.tZ)(ImageShowMorePopupController,{defaultImageList:n,renderContent:e=>{let{imageList:t,selectImage:n,renderContentRef:r}=e;return(0,eu.BX)(eh.gC,{height:"100%",overflowY:"auto",ref:r,children:[(0,eu.tZ)(MessageImageListItem,{width:"100%",paddingX:"12px",paddingTop:"4px",paddingBottom:"20px",item:t[0],css:e=>{var t;return(0,em.iv)(ImageShowMorePopup_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary)},onClick:()=>{openMainImageLink(t[0])},renderFaviconItem:e=>{var n;let{favicon:r,source:o}=e;return(0,eu.BX)(eh.Ug,{width:"fit-content",gap:"4px",borderRadius:"30px",backgroundColor:"$color_surface_tertiary",padding:"6px 8px",children:[(null===(n=t[0])||void 0===n?void 0:n.favicon)&&(0,eu.tZ)("img",{style:{width:10,height:10,borderRadius:"50%"},src:r,alt:"".concat(o,"-favicon")}),(0,eu.tZ)(eh.Jd,{typo:"$100-12-reg",color:"$color_text_secondary",children:o})]})},renderTitle:e=>{let{title:t}=e;return(0,eu.tZ)(eh.Jd,{className:"itemTitle",typo:"$100-16-semi",color:"$color_text_primary",css:(0,em.iv)(ImageShowMorePopup_templateObject1()),children:t})}}),(0,eu.tZ)(eh.xu,{display:"flex",paddingX:"8px",paddingTop:"8px",paddingBottom:"16px",flexWrap:"wrap",children:t.slice(1,t.length).map(e=>(0,eu.tZ)(MessageImageListItem,{width:"50%",height:"102px",paddingX:"4px",paddingY:"8px",item:e,onClick:()=>{var t;n({id:null!==(t=e.related_content_id)&&void 0!==t?t:""})}},e.related_content_id))})]})}})})};function MessageImageList_templateObject(){let e=(0,ep._)(["\n          row-gap: 10px;\n          column-gap: 8px;\n        "]);return MessageImageList_templateObject=function(){return e},e}let MessageImageList=e=>{let{messageId:t,chatId:n,imageReferences:r=[]}=e,{opened:o,changeOpened:i}=(0,nu.X)(),a=(0,eg.ac)("(min-width: 1280px)"),[l,c]=(0,e_.useState)(),[d,s]=(0,eG.FV)(eH.QC),u=(0,eG.rb)(eH.QC),{trackEvent:p}=(0,ev.Ke)(),_=(0,e_.useMemo)(()=>({msg_id:t,chat_id:n}),[t,n]),trackHoverSearchResult=e=>{let{index:t,url:n}=e;p("hover_img_search_result",{index:t,url:n,..._})},trackClickImageSearchResult=e=>{let{index:t,url:n}=e;p("click_img_search_result",{index:t,url:n,..._})},m=(0,e_.useMemo)(()=>r&&r.length>0?r.slice(0,9):[],[r]),h=(0,e_.useMemo)(()=>{let e=m.findIndex(e=>e.related_content_id===l),t=r[e],n=r.slice(9,r.length).filter(e=>e.related_content_id!==l);return t?[t,...n]:n},[m,r,l]);(0,e_.useEffect)(()=>{!a&&d.messageId&&i(!1),o&&a&&u()},[d,a,o,u,i]);let g="NEW_ASSISTANT_MESSAGE_ID"===d.messageId||d.messageId===t&&h.length;return(0,e_.useEffect)(()=>{if(!r||0===r.length||"NEW_ASSISTANT_MESSAGE_ID"===t)return;let e=r.slice(0,9);p("expose_img_search_result",{urls:e.map(e=>e.link),..._})},[r,t]),(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(eh.xu,{flexWrap:"wrap",display:"flex",flexDirection:"row",css:(0,em.iv)(MessageImageList_templateObject()),children:m.map((e,n)=>(0,eu.tZ)(MessageImageListItem,{onMouseOver:()=>{trackHoverSearchResult({index:n,url:null==e?void 0:e.link})},onClick:()=>{trackClickImageSearchResult({index:n,url:null==e?void 0:e.link}),c(e.related_content_id),s({messageId:t}),i(!1)},item:e,width:getImageWidth(n),height:getImageHeight(n)},e.related_content_id))}),g?(0,eu.tZ)(ImageShowMorePopup,{imageList:h}):null]})};function MessageImageSearchResult_templateObject(){let e=(0,ep._)(["\n            cursor: pointer;\n          "]);return MessageImageSearchResult_templateObject=function(){return e},e}function MessageImageSearchResult_templateObject1(){let e=(0,ep._)(["\n              transform: rotate(","deg);\n              transition: transform 0.3s;\n            "]);return MessageImageSearchResult_templateObject1=function(){return e},e}let MessageImageSearchResult=e=>{var t;let{message:n,viewBrandAd:r}=e,{isLastMessage:o}=tU(),{currentStepName:i,currentClientAction:a,currentImageReferenceResults:l}=useDisplayGenerateStep(),{trackEvent:c}=(0,ev.Ke)(),d=(0,ef.T_)(),{isStreaming:s}=useDisplayStreamMessage(!0),u=(0,eG.rb)(eH.QC),{value:p,setItem:_}=(0,eg._)("collapse_history_".concat(n.chatId),{}),[m,h]=e_.useState(!1),[g,v]=e_.useState(null===(t=p[n._id])||void 0===t?void 0:t.image),f=(0,e_.useMemo)(()=>({msg_id:n._id,chat_id:n.chatId}),[n]),x=(0,e_.useMemo)(()=>n.imageReferenceResults?n.imageReferenceResults:l||[],[n.imageReferenceResults,l]);if((0,e_.useEffect)(()=>{p&&p[n._id]&&v(p[n._id].image)},[]),(0,e_.useEffect)(()=>{g||u()},[g,u]),(0,e_.useEffect)(()=>{if(r&&v(!0),!s||"browsing_server_search_image_search_tool_result"===i&&!(null==x?void 0:x.length)||x&&x.length>0){h(!1);return}m||"browsing_server_search_query"!==i||"show_skeleton"!==a||h(!0)},[m,i,a,x,s,o,r]),x&&0!==x.length||m)return(0,eu.tZ)(eh.gC,{width:"100%",border:"1px solid",borderColor:"$color_outline_tertiary",borderRadius:"8px",gap:"10px",padding:"12px 16px",children:(0,eu.BX)(eD.mQ,{children:[(0,eu.BX)(eh.Ug,{justifyContent:"space-between",alignItems:"center",css:(0,em.iv)(MessageImageSearchResult_templateObject()),onClick:()=>{c("click_img_search_result_show_btn",{type:g?"open":"close",...f});let e={...p,[n._id]:{...p[n._id],image:!g}};_(e),v(e=>!e)},children:[(0,eu.BX)(eh.Ug,{width:"100%",gap:"6px",alignItems:"center",children:[(0,eu.tZ)(e$.JO,{as:eS._zb,color:"$color_icon_brand",size:16}),(0,eu.tZ)(eh.Jd,{typo:"$100-12-med",color:"$color_text_primary",children:d("chat.feature_chat_room.section.image")})]}),(0,eu.tZ)(eh.xu,{display:"flex",alignItems:"center",justifyContent:"center",width:"16px",height:"16px",css:(0,em.iv)(MessageImageSearchResult_templateObject1(),g?180:0),children:(0,eu.tZ)(e$.JO,{as:eS.I4Y,size:16,color:"$color_icon_secondary"})})]}),g?null:m?(0,eu.tZ)(ImageListSkeleton,{}):(0,eu.tZ)(MessageImageList,{messageId:n._id,chatId:n.chatId,imageReferences:x})]})})};function AssignmentTopicChip_templateObject(){let e=(0,ep._)(["\n            cursor: pointer;\n          "]);return AssignmentTopicChip_templateObject=function(){return e},e}function AssignmentTopicChip_templateObject1(){let e=(0,ep._)(["\n                    white-space: pre-wrap;\n                  "]);return AssignmentTopicChip_templateObject1=function(){return e},e}let AssignmentTopicChip=e=>{let{message:t,assignmentId:n,eventProperties:r}=e,{trackEvent:o}=(0,ev.Ke)();return(0,eu.tZ)(eC.CO,{renderOpener:e=>{let{openModal:i}=e;return(0,eu.tZ)(eh.Ug,{onMouseEnter:()=>o("hover_wait_phrase_generate",r),padding:"4px 6px",backgroundColor:"$color_surface_accent_bg_blue",borderRadius:"12px",gap:"4px",onClick:()=>{i(),o("expose_ai_writing_assignment_info",{assignment_id:n})},css:(0,em.iv)(AssignmentTopicChip_templateObject()),children:(0,eu.tZ)(eh.Jd,{typo:"$100-12-reg",color:"$color_action_blue_primary",children:t})},t)},renderContent:e=>{let{closeModal:t}=e;return(0,eu.tZ)(eh.xu,{children:(0,eu.tZ)(AssignmentOutlineModal,{assignmentId:n,closeModal:t})})}})},AssignmentOutlineModal=e=>{let{assignmentId:t,closeModal:n}=e,{trackEvent:r}=(0,ev.Ke)(),{data:o}=useGetAssignmentOutline(t),i=(0,ef.T_)("chat.feature_chat_room");return(0,eu.BX)(eh.gC,{backgroundColor:"$color_bg_screen",width:"508px",boxShadow:"0px 0px 10px 0px rgba(0, 0, 0, 0.05)",border:"1px solid",borderRadius:"20px",borderColor:"$color_outline_tertiary",children:[(0,eu.BX)(eh.Ug,{padding:"24px",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid",borderColor:"$color_outline_tertiary",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-20-bold",color:"$color_text_primary",children:i("assignment.chip")}),(0,eu.tZ)(eh.zx,{onClick:n,children:(0,eu.tZ)(e$.JO,{as:eS.S5X,size:20,color:"$color_icon_primary"})})]}),(0,eu.BX)(eh.gC,{alignItems:"flex-end",padding:"24px",gap:"32px",children:[(0,eu.tZ)(eh.gC,{width:"100%",gap:"20px",minHeight:"30vh",maxHeight:"50vh",overflowY:"auto",children:null==o?void 0:o.map(e=>(0,eu.BX)(eh.gC,{gap:"12px",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-16-semi",color:"$color_text_primary",children:e.label}),(0,eu.tZ)(eh.xu,{backgroundColor:"$color_surface_tertiary",borderRadius:"5px",padding:"11px 16px",children:(0,eu.tZ)(eh.Jd,{typo:"$160-16-med",color:"$color_text_secondary",css:(0,em.iv)(AssignmentTopicChip_templateObject1()),children:e.content})})]},e._id))}),(0,eu.tZ)(eh.xu,{width:"108px",children:(0,eu.tZ)(eh.Wv,{hierarchy:"$primary",size:"$large_01",onClick:n,full:!0,children:i("assignment.confirm")})})]})]})},ReferenceTagChip=e=>{let{message:t,icon:n,iconVisible:r}=e;return(0,eu.BX)(eh.Ug,{padding:"4px 6px",backgroundColor:"$color_surface_tertiary",borderRadius:"12px",gap:"4px",children:[n?(0,eu.tZ)("img",{style:{width:10,height:10,borderRadius:"50%"},src:n,alt:t}):!!r&&(0,eu.tZ)(eh.kC,{width:"10px",height:"10px",backgroundColor:"$color_outline_accent_red",borderRadius:"100%",alignItems:"center",justifyContent:"center",children:(0,eu.tZ)(e$.JO,{as:eS.qTh,size:8,color:"$color_icon_ivory"})}),(0,eu.tZ)(eh.Jd,{typo:"$100-12-reg",color:"$color_text_secondary",children:t})]},t)};function SearchResultInfoChip_templateObject(){let e=(0,ep._)(["\n        cursor: pointer;\n      "]);return SearchResultInfoChip_templateObject=function(){return e},e}function SearchResultInfoChip_templateObject1(){let e=(0,ep._)(["\n              cursor: ",";\n            "]);return SearchResultInfoChip_templateObject1=function(){return e},e}function SearchResultInfoChip_templateObject2(){let e=(0,ep._)(["\n              cursor: pointer;\n            "]);return SearchResultInfoChip_templateObject2=function(){return e},e}function SearchResultInfoChip_templateObject3(){let e=(0,ep._)(["\n                border: 1px solid ",";\n              "]);return SearchResultInfoChip_templateObject3=function(){return e},e}function SearchResultInfoChip_templateObject4(){let e=(0,ep._)(["\n                  display: -webkit-box;\n                  max-height: 40px;\n                  line-height: 140%;\n                  -webkit-line-clamp: 2;\n                  -webkit-box-orient: vertical;\n                  overflow: hidden;\n                  word-break: break-word;\n                "]);return SearchResultInfoChip_templateObject4=function(){return e},e}let SearchResultInfoChip=e=>{var t,n,r;let{item:o,messageIndex:i,message:a,index:l}=e,[c,d]=(0,e_.useState)(!1),{trackEvent:s}=(0,ev.Ke)(),{getModelByModelName:u}=(0,eF.pw)(),p=a.searchResult,_=null==p?void 0:null===(t=p[l])||void 0===t?void 0:t.siteName,m=null==p?void 0:null===(n=p[l])||void 0===n?void 0:n.title,h=null==p?void 0:null===(r=p[l])||void 0===r?void 0:r.snippet,onClickAdditionalInfo=(e,t)=>{var n;s("click_chat_recommend_link",{chat_id:a.chatId,model_name:a.model.toUpperCase(),index:t,link:e.link,msg_id:a._id,type:"wait_phrase",position:"chat",messageIndex:i,purpose:null===(n=u(a.model))||void 0===n?void 0:n.displayName}),e.link&&(window.navigator.userAgent.toLowerCase().includes("iphone")||window.navigator.userAgent.toLowerCase().includes("android")?window.location.assign(e.link):window.open(e.link,"_blank","noopener noreferrer"))},onHoverAdditionalInfo=e=>{let t={url:e.link};s("hover_wait_phrase_generate",t)};return(0,eu.tZ)(eh.xu,{onMouseOver:()=>{o.link&&(onHoverAdditionalInfo(o),d(!0))},onClick:()=>onClickAdditionalInfo(o,l),onMouseLeave:()=>d(!1),css:(0,em.iv)(SearchResultInfoChip_templateObject()),children:(0,eu.tZ)(eC.Lt,{open:c,x:"left",padding:0,renderOpener:()=>(0,eu.BX)(eh.Ug,{css:(0,em.iv)(SearchResultInfoChip_templateObject1(),o.link?"pointer":"default"),padding:"4px 6px",overflow:"hidden",backgroundColor:c?"$color_surface_tertiary_hover":"$color_surface_tertiary",borderRadius:"12px",gap:"4px",children:[o.icon&&(0,eu.tZ)("img",{style:{width:10,height:10,borderRadius:"50%"},src:o.icon,alt:o.content}),(0,eu.tZ)(eh.Jd,{typo:"$100-12-reg",color:"$color_text_secondary",children:o.content})]}),renderContent:()=>(0,eu.BX)(eh.xu,{css:(0,em.iv)(SearchResultInfoChip_templateObject2()),children:[(0,eu.tZ)(eh.xu,{height:"7px"}),(0,eu.BX)(eh.gC,{padding:"12px 16px",width:"228px",backgroundColor:"$color_bg_screen",borderRadius:"8px",css:e=>{var t;return(0,em.iv)(SearchResultInfoChip_templateObject3(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary)},children:[(0,eu.BX)(eh.Ug,{gap:"6px",alignItems:"center",children:[o.icon&&(0,eu.tZ)("img",{style:{width:16,height:16,borderRadius:"50%"},src:o.icon,alt:o.content}),(0,eu.tZ)(eh.Jd,{typo:"$100-12-med",color:"$color_text_secondary",children:_})]}),(0,eu.tZ)(eh.xu,{height:"6px"}),(0,eu.tZ)(eh.Jd,{typo:"$140-12-med",color:"$color_text_primary",children:m}),(0,eu.tZ)(eh.xu,{height:"4px"}),(0,eu.tZ)(eh.Jd,{typo:"$140-12-reg",color:"$color_text_secondary",css:(0,em.iv)(SearchResultInfoChip_templateObject4()),children:h})]})]})})})};var np=JSON.parse('{"v":"4.8.0","meta":{"g":"LottieFiles AE 3.5.7","a":"","k":"","d":"","tc":""},"fr":30,"ip":0,"op":40,"w":700,"h":700,"nm":"Circle 2","ddd":1,"assets":[],"layers":[{"ddd":1,"ind":2,"ty":4,"nm":"Shape Layer 1","sr":1,"ks":{"o":{"a":0,"k":100,"ix":11},"rx":{"a":0,"k":0,"ix":8},"ry":{"a":1,"k":[{"i":{"x":[0],"y":[1]},"o":{"x":[1],"y":[0]},"t":0,"s":[0]},{"i":{"x":[0.833],"y":[1]},"o":{"x":[0.333],"y":[0]},"t":30,"s":[720]},{"t":39,"s":[720]}],"ix":9,"x":"var $bm_rt;\\n$bm_rt = loopOutDuration(\'cycle\', 0);"},"rz":{"a":0,"k":0,"ix":10},"or":{"a":0,"k":[0,0,0],"ix":7},"p":{"a":0,"k":[350,350,0],"ix":2},"a":{"a":0,"k":[0,0,0],"ix":1},"s":{"a":0,"k":[100,100,100],"ix":6}},"ao":0,"shapes":[{"ty":"gr","it":[{"d":1,"ty":"el","s":{"a":0,"k":[500,500],"ix":2},"p":{"a":0,"k":[0,0],"ix":3},"nm":"Ellipse Path 1","mn":"ADBE Vector Shape - Ellipse","hd":false},{"ty":"fl","c":{"a":0,"k":[1,0.282348632813,0.145111083984,1],"ix":4},"o":{"a":0,"k":100,"ix":5},"r":1,"bm":0,"nm":"Fill 1","mn":"ADBE Vector Graphic - Fill","hd":false},{"ty":"tr","p":{"a":0,"k":[0,0],"ix":2},"a":{"a":0,"k":[0,0],"ix":1},"s":{"a":0,"k":[100,100],"ix":3},"r":{"a":0,"k":0,"ix":6},"o":{"a":0,"k":100,"ix":7},"sk":{"a":0,"k":0,"ix":4},"sa":{"a":0,"k":0,"ix":5},"nm":"Transform"}],"nm":"Ellipse 1","np":3,"cix":2,"bm":0,"ix":1,"mn":"ADBE Vector Group","hd":false}],"ip":0,"op":40,"st":0,"bm":0}],"markers":[]}');function MessageStepRender_templateObject(){let e=(0,ep._)(["\n            cursor: pointer;\n          "]);return MessageStepRender_templateObject=function(){return e},e}function MessageStepRender_templateObject1(){let e=(0,ep._)(["\n              transform: rotate(","deg);\n              transition: transform 0.3s;\n            "]);return MessageStepRender_templateObject1=function(){return e},e}let MessageStepRender=e=>{let{message:t,messageIndex:n}=e,{trackEvent:r}=(0,ev.Ke)(),{generating:o}=t8(),{enableOptions:i,unit:a,isProMode:l}=tX(),{role:c,isLastMessage:d}=tU(),{chatId:s}=tA(),u=(0,eG.sJ)(eH.GY),p=(0,ef.T_)(),_=(0,eG.sJ)(eH.h5),m=(0,eG.sJ)(eH.UB),h=(0,eG.sJ)(eH._b),{generateStep:g}=useDisplayGenerateStep(),{streamMessage:v,isStreaming:f}=useDisplayStreamMessage(d),x=useCurrentText(t.content),b=e_.useMemo(()=>t.generateStep||[],[t.generateStep]),[C,y]=e_.useState(!0),k=v.length>0,{getModelByModelName:w}=(0,eF.pw)(),Z=e_.useMemo(()=>b.length>0?b.filter(e=>e.message):d&&g.length>0?g.filter(e=>e.message):[],[g,b,d]);e_.useEffect(()=>{if(!o&&d&&g.length>0){var e,n;r("expose_wait_phrase_generate",{message:g[g.length-1].message,step:g[g.length-1].stepName,chat_id:s,msg_id:t._id,fe_msg_id:u,model_name:null==a?void 0:a.name.toUpperCase(),purpose:(null==a?void 0:a.name)&&t_.sO?null===(e=w(a.name))||void 0===e?void 0:e.displayName:void 0,refined_querys:g[g.length-1].query,url_list:null===(n=g[g.length-1].searchResult)||void 0===n?void 0:n.map(e=>null==e?void 0:e.externalLink),is_image_input:_.images.length>0||m.imageCount>0,is_file_input:_.fileCount>0||m.fileCount>0,is_link_input:_.linkCount>0||m.linkCount>0,assignment_id:h})}},[g,o]);let I=g.length>0;e_.useEffect(()=>{d&&I&&(k?y(!0):y(!1))},[I,d,k]);let{markSearchProcessShown:O}=(0,eL.DD)();return((0,e_.useEffect)(()=>{let e=x.length<1&&(null==Z?void 0:Z.length)<=1;e&&O()},[x,Z,O]),"assistant"===c&&(null==i?void 0:i.searchLink)&&(null==Z?void 0:Z.length))?(0,eu.tZ)(eh.gC,{width:"100%",border:"1px solid",borderColor:"$color_outline_tertiary",borderRadius:"8px",gap:"10px",padding:"12px 16px",children:(0,eu.BX)(eD.mQ,{children:[(0,eu.BX)(eh.Ug,{justifyContent:"space-between",alignItems:"center",css:(0,em.iv)(MessageStepRender_templateObject()),onClick:()=>{r("click_wrtnsearch_step_more",{type:C?"open":"close"}),y(e=>!e)},children:[(0,eu.BX)(eh.Ug,{width:"100%",gap:"6px",alignItems:"center",children:[(0,eu.tZ)(e$.JO,{as:l?eS.Y0Y:eS.lMR,color:"$color_icon_brand",size:16}),(0,eu.tZ)(eh.Jd,{typo:"$100-12-med",color:"$color_text_primary",children:p(l?"chat.generate_step.pro_mode.title":"chat.generate_step.ai_search.title")})]}),(0,eu.tZ)(eh.xu,{display:"flex",alignItems:"center",justifyContent:"center",width:"16px",height:"16px",css:(0,em.iv)(MessageStepRender_templateObject1(),C?180:0),children:(0,eu.tZ)(e$.JO,{as:eS.I4Y,size:16,color:"$color_icon_secondary"})})]}),!C&&Z.map((e,r)=>{if(!e.message)return null;let o=r===Z.length-1,i=x.length>0||!f,l=function(e){var t;let n=null==e?void 0:e.tags;if(!n||n.length<1)return[];let r=null===(t=n[0])||void 0===t?void 0:t.type;switch(r){case"query":return n.filter(e=>"query"===e.type).map(e=>{var t;return{icon:null,content:null!==(t=e.text)&&void 0!==t?t:"",link:null}});case"site":return n.filter(e=>"site"===e.type).map(e=>{var t,n,r;return{icon:null!==(t=e.favicon)&&void 0!==t?t:null,content:null!==(n=e.siteName)&&void 0!==n?n:"",link:null!==(r=e.externalLink)&&void 0!==r?r:""}});default:return[]}}(e),c=function(e){var t,n;if(!e.tags||(null===(t=e.tags)||void 0===t?void 0:t.length)===0)return null;let r=null===(n=e.tags)||void 0===n?void 0:n.map(e=>(null==e?void 0:e.type)==="file"?{type:"file",content:null==e?void 0:e.fileName}:(null==e?void 0:e.type)==="site"?{type:"link",content:null==e?void 0:e.siteName,icon:null==e?void 0:e.favicon}:(null==e?void 0:e.type)==="topic"?{type:"topic",content:null==e?void 0:e.topic,iconVisible:!1}:(null==e?void 0:e.type)==="text"?{type:"text",content:null==e?void 0:e.text,iconVisible:!1}:void 0);return(null==r?void 0:r.length)>0?r:null}(e);return(0,eu.BX)(eh.gC,{gap:"10px",children:[(0,eu.BX)(eh.Ug,{gap:"8px",alignItems:"center",children:[!o||i?(0,eu.tZ)("img",{src:e.icon,alt:e.message,style:{width:12,height:12}}):(0,eu.tZ)(ts.q,{style:{display:"flex",width:12,height:12,margin:0},options:{animationData:np}}),(0,eu.tZ)(eh.Jd,{typo:"$100-12-reg",color:"$color_text_tertiary",children:e.message})]}),l&&l.length>0&&(0,eu.tZ)(eh.Ug,{ml:"20px",flexWrap:"wrap",gap:"8px",children:l.map((e,r)=>(0,eu.tZ)(SearchResultInfoChip,{item:e,index:r,messageIndex:n,message:t},r))}),0===l.length&&c&&c.length>0&&(0,eu.tZ)(eh.Ug,{ml:"20px",flexWrap:"wrap",gap:"8px",children:c.map(e=>{var n,r;return"topic"===e.type?(0,eu.tZ)(AssignmentTopicChip,{message:e.content,assignmentId:(null==t?void 0:null===(n=t.meta)||void 0===n?void 0:n.assignmentId)||h,eventProperties:{chat_id:s,model_name:null==a?void 0:a.name.toUpperCase(),purpose:(null==a?void 0:a.name)&&t_.sO?null===(r=w(a.name))||void 0===r?void 0:r.displayName:void 0,assignment_id:h,content:e.content}},e.content):(0,eu.tZ)(ReferenceTagChip,{message:e.content,icon:e.icon,iconVisible:e.iconVisible},e.content)})})]},"".concat(t._id,"-").concat(e.message))})]})}):null};function VideoListItem_templateObject(){let e=(0,ep._)(["\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n"]);return VideoListItem_templateObject=function(){return e},e}function VideoListItem_templateObject1(){let e=(0,ep._)(["\n            width: calc(33.3% - 6.67px);\n            cursor: pointer;\n          "]);return VideoListItem_templateObject1=function(){return e},e}let n_=(0,em.iv)(VideoListItem_templateObject()),VideoListItem=e=>{var t;let{videoReferences:n,commonProperties:r,index:o}=e,{trackEvent:i}=(0,ev.Ke)(),a=null===(t=n.link)||void 0===t?void 0:t.split("v=")[1],l="https://www.youtube.com/embed/".concat(a,"?origin=").concat(window.location.origin,"&cc_load_policy=1"),RenderVideoIframe=e=>(0,eu.tZ)("iframe",{style:{borderRadius:4,aspectRatio:1.77777778},width:"100%",src:"".concat(l,"&autoplay=").concat((null==e?void 0:e.autoplay)?1:0)});return(0,eu.tZ)(eC.CO,{renderOpener:e=>{var t,a,l,c,d,s;let{openModal:u}=e;return(0,eu.BX)(eh.xu,{position:"relative",css:(0,em.iv)(VideoListItem_templateObject1()),children:[(0,eu.BX)(eh.gC,{paddingBottom:"8px",width:"100%",gap:"8px",children:[RenderVideoIframe(),(0,eu.BX)(eh.gC,{gap:"8px",children:[(0,eu.tZ)(eh.Jd,{typo:"$140-14-semi",color:"$color_text_primary",css:n_,children:n.title}),(null==n?void 0:n.rich_snippet)&&(0,eu.tZ)(eh.Jd,{typo:"$100-12-med",color:"$color_text_tertiary",css:n_,children:"".concat(null===(l=n.rich_snippet)||void 0===l?void 0:null===(a=l.top)||void 0===a?void 0:null===(t=a.extensions)||void 0===t?void 0:t.at(1)," \xb7 ").concat(null===(s=n.rich_snippet)||void 0===s?void 0:null===(d=s.top)||void 0===d?void 0:null===(c=d.extensions)||void 0===c?void 0:c.at(2))})]})]}),(0,eu.tZ)(eh.xu,{position:"absolute",left:0,right:0,top:0,bottom:0,onMouseOver:()=>i("hover_video_search_result",{index:o,url:n.link,...r}),onClick:()=>{u(),i("click_video_search_result",{index:o,url:n.link,...r})}})]})},renderContent:e=>{let{closeModal:t}=e;return(0,eu.BX)(eh.xu,{width:"100%",maxWidth:"84.6560847%",children:[(0,eu.tZ)(eh.zx,{onClick:()=>{t(),i("click_detailed_view_exit_btn",{type:"ai_search_video",current_index:o,url:n.link})},position:"fixed",top:20,right:20,children:(0,eu.tZ)(e$.JO,{as:eS.S5X,size:48,color:"$color_text_white"})}),RenderVideoIframe({autoplay:!0})]})}})},VideoListItemSkeleton=()=>(0,eu.tZ)(eh.Ug,{gap:"10px",width:"100%",children:Array.from({length:3}).map((e,t)=>(0,eu.BX)(eh.gC,{gap:"12px",width:"33%",children:[(0,eu.tZ)(eC.Od,{width:"100%",aspectRatio:"256/144",borderRadius:"12px"}),(0,eu.BX)(eh.gC,{style:{flex:1},gap:"8px",children:[(0,eu.tZ)(eC.Od,{width:"100%",height:"20px",borderRadius:"12px"}),(0,eu.tZ)(eC.Od,{width:"59.06%",height:"12px",borderRadius:"12px"})]})]},t))});function MessageVideoList_templateObject(){let e=(0,ep._)(["\n            cursor: pointer;\n          "]);return MessageVideoList_templateObject=function(){return e},e}function MessageVideoList_templateObject1(){let e=(0,ep._)(["\n              transform: rotate(","deg);\n              transition: transform 0.3s;\n            "]);return MessageVideoList_templateObject1=function(){return e},e}let MessageVideoList=e=>{var t;let{message:n,collapse:r=!0}=e,{chat:o}=tA(),{isLastMessage:i}=tU(),{currentStepName:a,currentClientAction:l,currentVideoReferenceResults:c}=useDisplayGenerateStep(),{trackEvent:d}=(0,ev.Ke)(),s=(0,ef.T_)(),{isStreaming:u}=useDisplayStreamMessage(!0),p=(null==o?void 0:o.model)===e2.ChatModel.WRTN_FAST_SEARCH,{value:_,setItem:m}=(0,eg._)("collapse_history_".concat(n.chatId),{}),[h,g]=e_.useState(!1),[v,f]=e_.useState(r||(null===(t=_[n._id])||void 0===t?void 0:t.video)),x=(0,e_.useMemo)(()=>({msg_id:n._id,chat_id:n.chatId}),[n]),b=(0,e_.useMemo)(()=>n.videoReferenceResults?n.videoReferenceResults:c||[],[n.videoReferenceResults,c]);return((0,e_.useEffect)(()=>{_&&_[n._id]&&f(_[n._id].video)},[]),(0,e_.useEffect)(()=>{b&&0!==b.length&&"NEW_ASSISTANT_MESSAGE_ID"!==n._id&&!v&&d("expose_video_search_result",{urls:b.map(e=>e.link),...x})},[null==n?void 0:n._id,v,b]),(0,e_.useEffect)(()=>{if(i){if(!u||"browsing_server_search_video_search_tool_result"===a&&!(null==b?void 0:b.length)||b&&b.length>0){g(!1);return}h||"browsing_server_search_query"!==a||"show_skeleton"!==l||g(!0)}},[i,h,a,l,b,u,p]),p)?null:b&&0!==b.length||h?(0,eu.tZ)(eh.gC,{width:"100%",border:"1px solid",borderColor:"$color_outline_tertiary",borderRadius:"8px",gap:"10px",padding:"12px 16px",children:(0,eu.BX)(eD.mQ,{children:[(0,eu.BX)(eh.Ug,{justifyContent:"space-between",alignItems:"center",css:(0,em.iv)(MessageVideoList_templateObject()),onClick:()=>{d("click_video_search_result_show_btn",{type:v?"open":"close",...x});let e={..._,[n._id]:{..._[n._id],video:!v}};m(e),f(e=>!e)},children:[(0,eu.BX)(eh.Ug,{width:"100%",gap:"6px",alignItems:"center",children:[(0,eu.tZ)(e$.JO,{as:eS.XX8,color:"$color_icon_brand",size:16}),(0,eu.tZ)(eh.Jd,{typo:"$100-12-med",color:"$color_text_primary",children:s("chat.feature_chat_room.section.video")})]}),(0,eu.tZ)(eh.xu,{display:"flex",alignItems:"center",justifyContent:"center",width:"16px",height:"16px",css:(0,em.iv)(MessageVideoList_templateObject1(),v?180:0),children:(0,eu.tZ)(e$.JO,{as:eS.I4Y,size:16,color:"$color_icon_secondary"})})]}),v?null:h?(0,eu.tZ)(VideoListItemSkeleton,{}):(0,eu.tZ)(eh.gC,{gap:"10px",children:(0,eu.tZ)(eh.Ug,{gap:"10px",flexWrap:"wrap",children:b&&b.length>0&&b.map((e,t)=>(0,eu.tZ)(VideoListItem,{videoReferences:e,index:t,commonProperties:x},t))})})]})}):void 0},nm=e_.memo(e=>{let{message:t,isLastMessage:n,messageListItemIndex:r,isAdWebview:o}=e,{model:i}=tX(),a=[e2.ChatModel.WRTN_SEARCH,e2.ChatModel.GPT4,e2.ChatModel.GPT4_ASSIGNMENT,e2.ChatModel.PRO_MODE,e2.ChatModel.WRTN_FAST_SEARCH].includes(i),{id:l}=(0,eF.Ob)(),{id:c}=(0,eF.zU)(),[d,s]=(0,e_.useState)(!1),[u,p]=(0,e_.useState)(null),_=c===l;return(0,eu.tZ)(MessageProvider,{message:t,isLastMessage:n,children:(0,eu.tZ)(MessageRerollSelector,{message:t,children:e=>{let{currentMessage:i,messageIndex:l,headerSelector:c,messageRef:m}=e;return(0,eu.BX)(eh.xu,{children:[(0,eu.BX)(eh.kC,{flexDirection:["column","column","row","row"],maxWidth:["1660px","1660px","1580px"],justifyContent:_?"center":"flex-start",gap:["0","0","16px","16px"],children:[(0,eu.BX)(eh.xu,{display:"flex",flexDirection:"column",width:"100%",maxWidth:[688,688,688,780],paddingY:16,gap:"8px",borderRadius:"5px",position:"relative",bg:"transparent",flexShrink:1,zIndex:2,children:[(0,eu.BX)(eh.gC,{gap:"12px",children:[(0,eu.BX)(eh.Ug,{gap:"8px",alignItems:"center",children:[(0,eu.tZ)(MessageResponseTitle,{message:i}),(0,eu.tZ)(eh.LZ,{}),c()]}),(0,eu.BX)(eh.gC,{gap:"8px",children:[(0,eu.tZ)(MessageStepRender,{message:i,messageIndex:l}),!_&&"assistant"===i.role&&(0,eu.tZ)(MessageVideoList,{message:i}),!_&&"assistant"===i.role&&(0,eu.tZ)(MessageImageSearchResult,{message:i,viewBrandAd:d})]}),(0,eu.tZ)(MessageAttachmentGallery,{message:i}),(0,eu.tZ)(GenerationStepBrandBannerLayout,{message:i,messageListItemIndex:r,isLastMessage:n,setViewBrandAd:e=>{s(e)},onBrandAdInfo:e=>{p(e)}}),(0,eu.tZ)(tT.f,{target:"assistant"===i.role&&a?m:void 0,children:(0,eu.tZ)(eh.xu,{ref:m,id:"chat-room-message-".concat(r),children:(0,eu.tZ)(MessageContentRenderer,{message:i,isAdWebview:o,brandAdInfo:u})})}),(0,eu.tZ)(MessageErrorRenderer,{message:i}),!_&&"assistant"===i.role&&(0,eu.tZ)(MessageImageGallery,{message:i}),(0,eu.tZ)(MessageFooter,{message:i,messageIndex:l,messageListItemIndex:r,messageRef:m})]}),"assistant"===i.role&&n&&(0,eu.tZ)(eh.xu,{width:"100%",height:"1px",opacity:"0.5",backgroundColor:"$color_outline_tertiary",marginY:"4px"}),"assistant"===i.role&&n&&(0,eu.tZ)(DynamicChipList,{message:t})]}),(0,eu.tZ)(eh.xu,{display:["none","none","flex","flex"],children:(0,eu.tZ)(MessageSideBar,{message:t,messageIndex:l,messageLength:t.length,currentMessage:i,messageListItemIndex:r,isLastMessage:n})})]}),"assistant"===i.role&&!n&&(0,eu.tZ)(eh.xu,{width:"100%",height:"1px",opacity:"0.5",backgroundColor:"$color_outline_tertiary",marginY:"40px"})]})}})})}),MessageListRenderer=e=>{let{messages:t,isAdWebview:n}=e;return(0,eu.BX)(eh.xu,{className:"chatMessageList",children:[(0,eu.tZ)(eh.xu,{height:"8px"}),t.flatMap((e,r)=>{let o=0===r,i=r===t.length-1,a=Array.isArray(e)?e:[e];return(0,eu.tZ)(nm,{message:a,isFirstMessage:o,isLastMessage:i,messageListItemIndex:r,isAdWebview:n},"message-".concat(a[0]._id,"-").concat(r))})]})},ChatMessageList=e=>{let{chat:t,chatId:n,isLoading:r,isAdWebview:o}=e,i=(0,eG.sJ)(eH._8),a=(0,eG.sJ)(eH.y),l=!a.shouldRestart&&i.input.length<1&&r,{messages:c}=useMessages(t,!n||a.shouldRestart||i.input.length>0),d=0===c.length;return(0,eu.tZ)(eh.xu,{flex:1,position:"relative",children:l?(0,eu.tZ)(EmptyLayout,{leftSection:(0,eu.tZ)(ChatSkeleton,{})}):d?(0,eu.tZ)(EmptyContent,{}):(0,eu.tZ)(eh.xu,{paddingX:[20,40,40,40],children:(0,eu.tZ)(eh.xu,{maxWidth:"1024px",width:"100%",margin:"0 auto",children:(0,eu.tZ)(MessageListRenderer,{messages:c,isAdWebview:o})})})})};var nh=n(62380),ng=n(5558),nv=n(68538);function AssignmentNotification_AppInstallModal_templateObject(){let e=(0,ep._)(["\n                    font-size: 8px;\n                  "]);return AssignmentNotification_AppInstallModal_templateObject=function(){return e},e}let AppInstallModal_AppInstallModal=e=>{let{closeModal:t}=e,n=(0,ef.T_)(),r=(0,ef.bU)();return(0,eu.BX)(eh.xu,{position:"relative",padding:"20px 20px 43px 20px",width:440,height:428,borderRadius:12,backgroundColor:"#fff",children:[(0,eu.BX)(eh.gC,{width:"100%",height:"100%",alignItems:"center",justifyContent:"top",gap:"16px",children:[(0,eu.tZ)(eh.xu,{height:"12px"}),(0,eu.tZ)(eh.Jd,{typo:"$100-24-bold",color:"#1A1918",children:n("feature_mobile_install.sub_title1")}),(0,eu.tZ)(eh.Jd,{typo:"$100-24-bold",color:"#F72F08",children:n("feature_mobile_install.sub_title2")}),(0,eu.tZ)(eh.xu,{width:301,height:105,borderRadius:12,marginTop:"5px",marginBottom:"5px",backgroundColor:"#F7F7F5",children:(0,eu.BX)(eh.Ug,{alignItems:"flex-start",justifyContent:"left",marginLeft:18,marginTop:22,children:[(0,eu.tZ)(e$.tD,{width:61,height:61}),(0,eu.BX)(eh.gC,{alignItems:"flex-start",marginLeft:16,gap:"6px",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-18-semi",color:"#1A1918",children:n("feature_mobile_install.cta_title")}),(0,eu.BX)(eh.Ug,{alignItems:"flex-end",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-12-semi",color:"#85837D",marginTop:10,children:n("feature_mobile_install.cta_word")}),(0,eu.tZ)(eh.Jd,{color:"#A8A69D",marginLeft:"4px",css:(0,em.iv)(AssignmentNotification_AppInstallModal_templateObject()),children:n("feature_mobile_install.cta_word2")})]}),(0,eu.tZ)(e$.A3,{})]})]})}),(0,eu.tZ)(eE(),{src:"ko-KR"===r?"https://d1k8apdmymvh8f.cloudfront.net/wrtn/wrtn_app_install_qr.png":"https://d1k8apdmymvh8f.cloudfront.net/wrtn/jt4lfh16_qr_code.png",alt:"WRTN App Installer QR",width:92,height:92}),(0,eu.tZ)(eh.Jd,{typo:"$100-14-semi",color:"#A8A69D",marginTop:"5px",children:n("feature_mobile_install.sub_title3")})]}),(0,eu.tZ)(eh.zx,{position:"absolute",top:"20px",right:"20px",width:"20px",height:"20px",onClick:t,children:(0,eu.tZ)(e$.JO,{as:eS.S5X,size:20,color:"$color_text_tertiary"})})]})},VerifyNeededModal=e=>{let{step:t,setStep:n,onClick:r}=e,{trackEvent:o}=(0,ev.Ke)();return(0,e_.useEffect)(()=>{"verifyNeeded"===t&&o("expose_ai_writing_authorize_modal")},[t]),(0,eu.tZ)(eC.cV,{width:444,opened:"verifyNeeded"===t,title:(0,eu.BX)(eh.gC,{mt:"20px",mb:"26px",children:[(0,eu.tZ)(eE(),{alt:"본인 인증",width:240,height:206,unoptimized:!0,src:"https://wrtn-fe-web-asset.s3.ap-northeast-2.amazonaws.com/assignment/auth.png"}),(0,eu.tZ)("br",{}),"과제 완료 알림을 받기 위해",(0,eu.tZ)("br",{}),"최초 1회 본인인증이 필요해요"]}),content:"인증을 완료한 후 돌아와서 확인 버튼을 눌러주세요",onClose:()=>{n(null)},confirm:{text:"인증 바로가기",onClick:()=>{o("click_ai_writing_authorize_btn"),r()}}})},VerifyConfirmModal=e=>{let{step:t,setStep:n,onClick:r}=e,{trackEvent:o}=(0,ev.Ke)();return(0,e_.useEffect)(()=>{"verifyConfirm"===t&&o("expose_ai_writing_authorize_confirm_modal")},[t]),(0,eu.tZ)(eC.cV,{width:444,opened:"verifyConfirm"===t,title:(0,eu.BX)(eh.gC,{mt:"20px",mb:"26px",gap:"40px",children:[(0,eu.tZ)(eE(),{alt:"본인 인증",width:240,height:206,unoptimized:!0,src:"https://wrtn-fe-web-asset.s3.ap-northeast-2.amazonaws.com/assignment/auth.png"}),"본인인증을 완료했다면",(0,eu.tZ)("br",{}),"인증 완료 버튼을 눌러주세요"]}),onClose:()=>{n(null)},confirm:{text:"인증 완료",onClick:()=>{o("click_ai_writing_authorize_confirm_btn"),r()}}})},VerifyFailedModal=e=>{let{step:t,setStep:n}=e,{trackEvent:r}=(0,ev.Ke)();return(0,e_.useEffect)(()=>{"verifyFailed"===t&&r("expose_ai_writing_authorize_fail_modal")},[t]),(0,eu.tZ)(eC.cV,{width:444,opened:"verifyFailed"===t,title:(0,eu.BX)(eh.gC,{mt:"20px",mb:"26px",gap:"40px",children:[(0,eu.tZ)(eE(),{alt:"인증 실패",width:240,height:206,unoptimized:!0,src:"https://wrtn-fe-web-asset.s3.ap-northeast-2.amazonaws.com/assignment/error.png"}),"본인인증에 실패했어요",(0,eu.tZ)("br",{}),"인증을 다시 진행해 주세요"]}),onClose:()=>{n(null)},cancel:{text:"이전으로",onClick:()=>{r("click_ai_writing_authorize_fail_btn"),n("verifyNeeded")}}})},VerifySucceededModal=e=>{let{step:t,passStepIncluded:n}=e,{trackEvent:r}=(0,ev.Ke)();return(0,e_.useEffect)(()=>{"registerSucceeded"===t&&(n?r("expose_ai_writing_authorize_done_modal"):r("expose_ai_writing_kakaotalk_noti_ready_modal"))},[t,n]),(0,eu.tZ)(eC.cV,{width:380,opened:"registerSucceeded"===t,title:(0,eu.BX)(eh.gC,{mt:"20px",gap:"24px",justifyContent:"center",alignItems:"center",children:[(0,eu.tZ)(e$.JO,{as:eS.mkl,size:24,color:"#2CAA00"}),n?"본인인증이 완료되었어요!":"곧 과제 완료 알림이 도착해요"]}),content:"요청 주신 과제 작성이 완료되는 대로\n바로 알림을 보내드릴게요",confirm:{onClick:e=>e(),text:"확인"},onClose:()=>{}})},nf=(0,tv.dU)("NEXT_PUBLIC_SSO_URL"),nx=(0,tv.dU)("NEXT_PUBLIC_BASE_URL"),VerificationButtonAndModalContainer=e=>{let{registered:t,chatId:n}=e,{trackEvent:r}=(0,ev.Ke)(),o=(0,ef.T_)(),{user:i,mutate:a}=(0,eT.aF)(),{trigger:l}=usePostAssignmentNotification(n||""),{trigger:c}=(0,nv.Hr)(),d=!!(null==i?void 0:i.passClientId)&&!!(null==i?void 0:i.phoneNumber),[s,u]=(0,e_.useState)(null),[p,_]=(0,e_.useState)(!1),m=(0,eG.sJ)(eH._b),[h,g]=(0,e_.useState)(!1),v=(0,ef.bU)(),registerNotification=async()=>{await l(),u("registerSucceeded")},handleClickRegisterButton=async()=>{if(!t){r("click_ai_writing_kakaotalk_noti_request_btn",{assignment_id:m});try{"ko-KR"===v?d?(await registerNotification(),await a()):u("verifyNeeded"):g(!0)}catch(e){(0,eq.wp)(o("feature_assignment.alarm.alert.error"))}}},handleClickVerificationButton=async()=>{window.open("".concat(nf,"/pass/webview?redirect_uri=").concat(nx),"_blank","width=420,height=500,left=200,top=200"),u("verifyConfirm")},handleClickVerificationConfirmButton=async()=>{try{let e=await c();if(!e)throw Error("postCheckPassRegistered Failed");await registerNotification(),_(!0)}catch(e){u("verifyFailed")}};return(0,eu.BX)(eu.HY,{children:[(0,eu.BX)(eh.zx,{display:"flex",width:"max-content",alignItems:"center",gap:"4px",backgroundColor:t?"$color_bg_screen":"ko-KR"===v?"#FFDA00":"$color_surface_brand",padding:"8px 12px",borderRadius:"16px",typo:"$100-14-med",color:"$palette_gray_gray_black",border:"1px solid",borderColor:"$color_outline_tertiary",onClick:handleClickRegisterButton,children:["ko-KR"===v&&(0,eu.tZ)(e$.JO,{as:eS.eCc,size:16,color:"$palette_gray_gray_black"}),t?o("feature_assignment.alarm.done"):o("feature_assignment.alarm.yet"),(0,eu.tZ)(e$.JO,{as:t?eS.nmC:eS.lA1,size:16,color:"$palette_gray_gray_black"})]}),(0,eu.tZ)(VerifyNeededModal,{step:s,setStep:u,onClick:handleClickVerificationButton}),(0,eu.tZ)(VerifyConfirmModal,{step:s,setStep:u,onClick:handleClickVerificationConfirmButton}),(0,eu.tZ)(VerifyFailedModal,{step:s,setStep:u}),(0,eu.tZ)(VerifySucceededModal,{step:s,passStepIncluded:p}),(0,eu.tZ)(eC.CO,{opened:h,onClose:()=>g(!1),renderContent:e=>{let{closeModal:t}=e;return(0,eu.tZ)(AppInstallModal_AppInstallModal,{closeModal:t})}})]})},AssignmentNotificationContainer=e=>{let{chatId:t}=e,{data:n}=useGetAssignmentNotificationStatus(t||""),r=(0,ef.T_)();return(0,eu.tZ)(eh.gC,{backgroundColor:"$color_surface_tertiary",borderRadius:"16px",padding:"20px",gap:"16px",alignItems:"center",children:(0,eu.BX)(eh.gC,{gap:"10px",alignItems:"center",textAlign:"center",children:[(0,eu.BX)(eh.Ug,{gap:"8px",alignItems:"center",children:[(0,eu.tZ)(e$.JO,{as:eS.pkD,size:20,color:"$color_icon_brand"}),(0,eu.tZ)(eh.Jd,{typo:"$100-18-bold",color:"$color_text_primary",children:r("feature_assignment.alarm.title")})]}),(0,eu.tZ)(eh.Jd,{typo:"$160-16-med",color:"$color_text_primary",children:r("feature_assignment.alarm.sub_title")}),(0,eu.tZ)(VerificationButtonAndModalContainer,{registered:!!n,chatId:t})]})})};function AppDownloadModal_templateObject(){let e=(0,ep._)(["\n        aspect-ratio: 450 / 540;\n      "]);return AppDownloadModal_templateObject=function(){return e},e}function AppDownloadModal_templateObject1(){let e=(0,ep._)(["\n          cursor: pointer;\n        "]);return AppDownloadModal_templateObject1=function(){return e},e}let AppDownloadModal=e=>{let{closeModal:t}=e,{trackEvent:n}=(0,ev.Ke)(),{character:r}=tX(),{chatId:o}=tA(),{user:i}=(0,eT.aF)(),handleCloseAppInstallEvent=()=>{var e,t;n("exit_app_install_recommend_modal",{characterName:null==r?void 0:r.name,category:null==r?void 0:null===(t=r.categories)||void 0===t?void 0:null===(e=t[0])||void 0===e?void 0:e.name,chatId:o,characterId:null==r?void 0:r._id,is_owner:(null==r?void 0:r.creator.wrtnUid)===(null==i?void 0:i._id),featureMenu:"character"})};return(0,eu.BX)(eh.xu,{borderRadius:"16px",width:"100%",maxWidth:"450px",position:"relative",pt:"60px",px:"40px",mx:"10px",css:(0,em.iv)(AppDownloadModal_templateObject()),onClick:e=>e.stopPropagation(),children:[(0,eu.tZ)("img",{src:"https://cdn-image.wrtn.ai/Banner/ai-character-modal-img-kr%402x.png",style:{width:"100%",borderRadius:"16px",position:"absolute",top:0,left:0,zIndex:-1}}),(0,eu.tZ)(eh.xu,{position:"absolute",right:"20px",top:"20px",onClick:()=>{handleCloseAppInstallEvent(),t()},css:(0,em.iv)(AppDownloadModal_templateObject1()),children:(0,eu.tZ)(e$.JO,{as:eS.S5X,size:24,color:"$color_icon_white"})})]})},AppDownloadButton=()=>{let{trackEvent:e}=(0,ev.Ke)(),{character:t}=tX(),{chatId:n}=tA(),{user:r}=(0,eT.aF)(),handleClickAppInstallEvent=()=>{var o,i;e("click_app_install_recommend",{characterName:null==t?void 0:t.name,category:null==t?void 0:null===(i=t.categories)||void 0===i?void 0:null===(o=i[0])||void 0===o?void 0:o.name,chatId:n,characterId:null==t?void 0:t._id,is_owner:(null==t?void 0:t.creator.wrtnUid)===(null==r?void 0:r._id),featureMenu:"character"})};return(0,eu.tZ)(eu.HY,{children:eg.P8?(0,eu.tZ)(eh.Wv,{hierarchy:"$primary",size:"$x_small",onClick:()=>{handleClickAppInstallEvent(),window.open("https://agent.wrtn.ai/@wrtn/wrtn?ad_creative=install_UI&ad_group=aicharacter_user&campaign=aicharacter_app_recommend&og_tag_id=53971433&routing_short_id=xodx9p&tracking_template_id=8eda79859bf92dee1188b2c61a98ff4c&ad_type=click","_blank")},children:"뤼튼 앱 설치"}):(0,eu.tZ)(eC.CO,{renderContent:e=>{let{closeModal:t}=e;return(0,eu.tZ)(AppDownloadModal,{closeModal:t})},renderOpener:e=>{let{openModal:t}=e;return(0,eu.tZ)(eh.Wv,{hierarchy:"$primary",size:"$x_small",onClick:()=>{handleClickAppInstallEvent(),t()},children:"뤼튼 앱 설치"})}})})},BannerLayout=e=>{let{onClose:t,children:n}=e;return(0,eu.BX)(eh.gC,{padding:"24px",pb:"20px",gap:"12px",width:"100%",position:"relative",backgroundColor:"$color_surface_tertiary",borderRadius:"5px",alignItems:"center",children:[(0,eu.tZ)(eh.zx,{position:"absolute",top:"0",right:"0",padding:"8px",onClick:t,children:(0,eu.tZ)(e$.JO,{as:eS.S5X,size:16,color:"$color_icon_tertiary"})}),n]})};function AppDownloadBanner_templateObject(){let e=(0,ep._)(["\n            // show blank space between two words\n            white-space: pre;\n          "]);return AppDownloadBanner_templateObject=function(){return e},e}let AppDownloadBanner=()=>{let{trackEvent:e}=(0,ev.Ke)(),{unitType:t,character:n}=tX(),{chatId:r}=tA(),{user:o}=(0,eT.aF)(),{onCloseBanner:i,showBanner:a}=(0,eg.SK)("app_download_banner",eg.jU&&t_.sO&&"character"===t);e_.useEffect(()=>{if(a){var t,i;e("view_app_install_recommend",{characterName:null==n?void 0:n.name,category:null==n?void 0:null===(i=n.categories)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.name,chatId:r,characterId:null==n?void 0:n._id,is_owner:(null==n?void 0:n.creator.wrtnUid)===(null==o?void 0:o._id),featureMenu:"character"})}},[]);let handleCloseAppInstallEvent=()=>{var t,i;e("exit_app_install_recommend",{characterName:null==n?void 0:n.name,category:null==n?void 0:null===(i=n.categories)||void 0===i?void 0:null===(t=i[0])||void 0===t?void 0:t.name,chatId:r,characterId:null==n?void 0:n._id,is_owner:(null==n?void 0:n.creator.wrtnUid)===(null==o?void 0:o._id),featureMenu:"character"})};return a?(0,eu.BX)(BannerLayout,{onClose:()=>{handleCloseAppInstallEvent(),i()},children:[(0,eu.BX)(eh.Ug,{width:"100%",flexWrap:"wrap",justifyContent:"center",children:[(0,eu.BX)(eh.Jd,{typo:"$ex-140-14-semi",color:"$color_text_primary",css:(0,em.iv)(AppDownloadBanner_templateObject()),children:["모바일 앱에서 새로운"," "]}),(0,eu.tZ)(eh.Jd,{typo:"$ex-140-14-semi",color:"$color_text_primary",children:"캐릭터를 먼저 만나보세요"})]}),(0,eu.tZ)(AppDownloadButton,{})]}):null},NewCharacterModelBanner=()=>{let{unitType:e}=tX(),{showBanner:t,onCloseBanner:n}=(0,eg.SK)("new_character_model",eg.jU&&t_.sO&&"character"===e),{trackEvent:r}=(0,ev.Ke)();return(e_.useEffect(()=>{t&&r("view_character_notice")},[]),t)?(0,eu.tZ)(BannerLayout,{onClose:()=>{n()},children:(0,eu.BX)(eh.gC,{gap:"8px",alignItems:"center",children:[(0,eu.tZ)(eh.Jd,{typo:"$140-16-semi",color:"$color_text_primary",textAlign:"center",children:"캐릭터의 기억력이 더욱 좋아졌어요"}),(0,eu.BX)("a",{href:"https://www.notion.so/wrtn/AI-02a0f5d1de514b78902d589e96c3002c?pvs=4",onClick:()=>{r("click_character_notice_detail")},target:"_blank",rel:"noopener noreferrer",style:{display:"flex",flexDirection:"row",alignItems:"center",gap:"4px"},children:[(0,eu.tZ)(eh.Jd,{typo:"$100-14-semi",color:"$color_action_blue_primary",children:"자세히 보기"}),(0,eu.tZ)(e$.JO,{as:eS.xMl,color:"$color_action_blue_primary",size:15})]})]})}):null};function BannerList_templateObject(){let e=(0,ep._)(["\n              position: absolute;\n              top: 0;\n              transform: translateY(-100%);\n            "]);return BannerList_templateObject=function(){return e},e}function BannerList_templateObject1(){let e=(0,ep._)([""]);return BannerList_templateObject1=function(){return e},e}let nb=[{key:"app_download_banner",condition:!0},{key:"new_character_model",condition:!1,locale:"ko-KR",unitType:"character"}],BannerList=e=>{let{position:t}=e,n=(0,ef.bU)(),{value:r}=(0,eg._)("banner_info",{}),o="input"===t;return(0,eu.tZ)(eh.xu,{display:o?["flex","flex","none"]:"flex",flexDirection:"column",width:o?["calc(100% - 40px)","calc(100% - 40px)","100%"]:"100%",gap:"12px",css:o?(0,em.iv)(BannerList_templateObject()):(0,em.iv)(BannerList_templateObject1()),children:nb.map(e=>!1===e.condition||e.locale&&e.locale!==n||!1===r[e.key]?null:"app_download_banner"===e.key?(0,eu.tZ)(AppDownloadBanner,{},e.key):"new_character_model"===e.key?(0,eu.tZ)(NewCharacterModelBanner,{},e.key):null)})},ChatInput=e=>{var t;let{observedDiv:n}=e,r=e_.useRef(null),[o,i]=e_.useState(!1),a=(0,eG.Zl)(eH.yI),l=(0,eG.Zl)(eH.dW),c=(0,eG.Zl)(eH.u3),d=(0,eG.sJ)(eH.h5),s=(0,ef.T_)("chat.chat_input"),{trackEvent:u}=(0,ev.Ke)(),{chatId:p,chat:_,messageLength:m}=tA(),{input:h}=tV(),{setInput:g}=tK(),{status:v}=ne(),{getModelByModelName:f}=(0,eF.pw)(),x=(0,eG.sJ)(eH.h5),{data:b}=(0,eK.$I)(p);(0,ty.O8)(r,"click",()=>i(!1));let{searchParams:C}=(0,ex.je)(),y=null!==(t=C.get("input_kb"))&&void 0!==t?t:"",{unit:k,unitType:w,character:Z,enableOptions:I,model:O,isUnitDisabled:S,disableType:B,isProMode:$,isImageModel:M,isAssignmentModel:R}=tX(),{isChatInsideRoom:j}=tA(),E=O===e2.ChatModel.GPT4,{generating:A,startGenerate:T,stopGenerate:L,canStopGenerate:F,generateStatus:P}=t8(),U=S||R&&m<=2&&!!v&&"error"===v.type,D=S&&"notSupported"===B,X=e_.useMemo(()=>{if(S)return"사용할 수 없는 채팅방입니다";if("unit"===w){if(O===e2.ChatModel.WRTN_SEARCH)return"궁금한 것을 무엇이든 검색하세요";if(O===e2.ChatModel.SD3_TURBO)return"만들고 싶은 이미지를 상세하게 설명해 보세요";if(O===e2.ChatModel.GPT4||$)return"해결할 과제를 설명해 주세요"}return"character"===w&&Z?s("placeholder.character",{characterWithJosa:t_.sO?"".concat(Z.name,"에게"):Z.name}):s("placeholder.default")},[Z,S,s,w,O,$]),onGenerate=async()=>{(0!==h.trim().length||0!==y.trim().length)&&(g(""),l(""),await T({message:y||h,model:O,mode:e2.ChatMode.CHAT,reroll:!1,commandChipType:"",images:x.images,referenceIds:x.referenceIds}))},onStopGenerate=()=>{L()},J=!!h&&!U&&d.success,z=U||"before_streaming"===P||"generating"===P||!d.success,N=!!I&&!(t_.sO&&O===e2.ChatModel.GPT4)&&I.draw,H={model_name:null==O?void 0:O.toUpperCase(),uploadPosition:"chat_room",chat_id:p,is_pro_mode:$,purpose:null==k?void 0:k.displayName,current_box_number:d.totalCount||0};return(0,e_.useEffect)(()=>{j&&y&&onGenerate()},[j]),(0,e_.useEffect)(()=>{$||c([])},[$,c]),(0,eu.tZ)(eh.xu,{width:"100%",position:"absolute",bottom:"0",left:"0",pl:["6px","25px","25px","25px"],pr:["6px","40px","40px","40px"],zIndex:3,children:(0,eu.BX)(eh.Ug,{width:"100%",maxWidth:"1024px",margin:"0 auto",zIndex:2,gap:["40px","40px","16px","16px"],ref:n,justifyContent:"space-between",children:[(0,eu.BX)(eh.xu,{position:"relative",paddingTop:16,paddingBottom:32,maxWidth:[688,688,688,780],width:"100%",children:[("streaming"===P||(null==_?void 0:_.status)==="streaming")&&m<=2&&R?(0,eu.tZ)(AssignmentNotificationContainer,{chatId:p}):(null==_?void 0:_._id)&&(0,eu.BX)(eV.aA,{isActive:h.length>0||o,isDisabled:U,onFocus:()=>i(!0),maxWidth:1280,attachmentList:(null==I?void 0:I.image)&&(0,eu.tZ)(AttachmentList,{eventProperties:H,setInput:g}),children:[(0,eu.BX)(eh.kC,{flexDirection:$?"row":"column-reverse",width:"100%",alignItems:$?"flex-end":"flex-start",gap:$?"4px":"8px",children:[!S&&(0,eu.tZ)(eV.Z,{isDisabled:S||A,drawable:N,promptHub:!!I&&I.promptHub,code:!!I&&I.code,file:!!I&&I.file,iconGroupEventProperties:{purpose:null==k?void 0:k.displayName,is_pro_mode:$},fileEventProperties:{...H,method:"upload_btn_click",current_box_number:d.totalCount||0,index:d.totalCount},setInputText:g,chatRoomFileLimitExceeded:b&&b.length>=3,onError:eq.wp}),(0,eu.tZ)(eh.kC,{paddingRight:E?"0":"36px",width:"100%",children:(0,eu.tZ)(eV.kb,{value:h,onChange:e=>{g(e.target.value),l(e.target.value)},ref:r,onKeyPress:e=>{A||S||!d.success||("Enter"!==e.key||e.shiftKey||e.preventDefault(),e.metaKey||e.shiftKey||"Enter"!==e.key||!(h.trim().length>0)||(e.preventDefault(),e.stopPropagation(),sessionStorage.setItem("user-generate-action","enter"),onGenerate(),a(-1)))},placeholder:X,disabled:U,onClick:()=>{var e;return u("click_chat_input_btn",{model_name:O.toUpperCase(),chat_id:p,feature_menu:Z?"character":"chat",character_id:null==Z?void 0:Z._id,purpose:t_.sO?null===(e=f(O))||void 0===e?void 0:e.displayName:void 0})},linkHighlight:$})})]}),(0,eu.tZ)(eV.c7,{isActive:J,animateOnHover:!M,onClick:()=>{F?onStopGenerate():(onGenerate(),a(-1))},isDisabled:z,canStopGenerate:F,bottom:"19px",icon:(0,eu.tZ)(e$.JO,{as:F?eS.xyj:M?eS.w6e:O.includes("search")?eS.hsj:eS.lA1,color:J||z?"$color_icon_white":"$color_surface_tertiary",size:20})})]}),("blocked"===B||"deleted"===B||"private"===B||D)&&(0,eu.BX)(eh.Ug,{position:"absolute",top:"-48px",right:"0",left:"0",margin:"0 auto",gap:"8px",alignItems:"center",px:"16px",backgroundColor:"$color_surface_accent_bg_red",borderRadius:"8px",height:"48px",minWidth:["calc(100% - 40px)","calc(100% - 40px)","100%","100%"],width:"fit-content",children:[(0,eu.tZ)(e$.JO,{as:eS.$bG,size:24,color:"$color_text_accent_red"}),(0,eu.BX)(eh.Jd,{typo:"$ex_140-15-semi",color:"$color_text_accent_red",children:["deleted"===B&&s("status.deleted"),"blocked"===B&&s("status.blocked"),"private"===B&&s("status.private"),"notSupported"===B&&s("status.notSupport")]})]}),(0,eu.tZ)(BannerList,{position:"input"})]}),(0,eu.tZ)(eh.xu,{display:["none","none","flex","flex"],width:"228px",flexShrink:0})]})})};function NewChatButton_templateObject(){let e=(0,ep._)(["\n        cursor: pointer;\n      "]);return NewChatButton_templateObject=function(){return e},e}let NewChatButton=()=>{let{unit:e}=tX(),{chatId:t}=tA(),n=(0,eO.useRouter)(),{trackEvent:r}=(0,ev.Ke)(),o=(0,ef.T_)();return(0,eu.tZ)(eh.xu,{flexShrink:0,minWidth:84,css:(0,em.iv)(NewChatButton_templateObject()),children:(0,eu.tZ)(eh.Wv,{hierarchy:"$outline_secondary",size:"$small",onClick:()=>{r("click_new_chat_btn",{chatId:t,purpose:null==e?void 0:e.displayName,model_name:null==e?void 0:e.name.toUpperCase()}),n.push("/")},startContainer:(0,eu.tZ)(e$.JO,{as:eS.FNd,size:16,color:"$color_action_blue_primary"}),children:(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_text_primary",children:o("chat.chat_room.new_chat")})})})},ChatRoomHeader=e=>{let{topic:t,isLoading:n}=e,r=(0,ef.T_)(),o=(0,eg.ac)("(max-width: 1023px)");return(0,eu.tZ)(tj.m,{renderLeft:()=>(0,eu.BX)(eh.Ug,{gap:"10px",alignItems:"center",children:[o&&(0,eu.tZ)(eh.xu,{marginRight:10,minWidth:24}),(0,eu.tZ)(NewChatButton,{})]}),title:n?(0,eu.tZ)(eC.Od,{width:"32%",height:"26px",maxWidth:"400px",borderRadius:"8px"}):(0,eu.tZ)(eh.Jd,{as:"h2",typo:"$160-16-semi",color:"$color_text_primary",textAlign:"center",width:[220,220,400,400],overflow:["hidden","hidden","inherit","inherit"],display:["none","block","block","block"],style:{whiteSpace:"nowrap",textOverflow:"ellipsis"},children:t&&t.trim().length>0?t.slice(0,45):r("chat.chat_room.new_chat")})})},ChatRoomListener=e=>{var t;let{chat:n}=e,r=(0,ex.tv)(),o=(null===(t=r.query)||void 0===t?void 0:t.from)==="chatHome",{trackEvent:i}=(0,ev.Ke)(),[a,l]=(0,eG.FV)(eH.y),c=(0,eG.Zl)(eH._8),d=(0,eG.rb)(eH._8),{images:s,referenceIds:u}=(0,eG.sJ)(eH.h5),p=(0,eG.sJ)(eH._b),_=(0,eG.sJ)(eH._8),{input:m,isChocoChip:h,adId:g,trendId:v,adContext:f}=_,{model:x}=tX(),{isChatInsideRoom:b,chatId:C}=tA(),{setLoadingOverlay:y}=t3(),{generateStatus:k,startGenerate:w,stopGenerate:Z}=t8(),generateFromQuery=()=>{let e=r.query,t=e.q1;t&&(c({input:t,isChocoChip:!1}),null==e||delete e.q1,r.replace({query:{...e}},{},{shallow:!0}),w({message:t,mode:e2.ChatMode.CHAT,model:e2.ChatModel.WRTN_SEARCH,reroll:!1,commandChipType:"",isChocoChip:!1,images:[],ignoreRoom:!0}))};return(0,e_.useEffect)(()=>{generateFromQuery()},[]),(0,e_.useEffect)(()=>{if(C&&!m&&o){let e=r.query;null==e||delete e.from,r.replace({query:{...e}},{},{shallow:!0}),i("not_working_start_chat_after_create_chat")}},[]),e_.useEffect(()=>{(null==_||!_.chatId||(null==_?void 0:_.chatId)===C)&&m&&m.trim().length>0&&n&&(w({message:m,model:x,mode:e2.ChatMode.CHAT,reroll:!1,commandChipType:h?"first_chip_general":"",isChocoChip:h,images:s,referenceIds:u,adId:g,trendId:v,assignmentId:p,adContext:f}),d())},[_,n,m,w,x,h,s,u,d,C,p,f]),e_.useEffect(()=>{(null==_||!_.chatId||(null==_?void 0:_.chatId)===C)&&a.shouldRestart&&a.params&&b&&n&&(y(!1),setTimeout(()=>{a.params&&w(a.params),l({shouldRestart:!1,params:null})},10))},[a,n,b,null==_?void 0:_.chatId,C]),(0,e_.useEffect)(()=>{let stopGenerateIfNotReady=()=>{"ready"!==k&&Z()};return r.events.on("routeChangeStart",stopGenerateIfNotReady),()=>{r.events.off("routeChangeStart",stopGenerateIfNotReady)}},[r.events,Z,k]),null},ChatSocketContainer=e=>{let{chatId:t,children:n}=e,r=(0,e0.Zl)(eH.BF),o=(0,e_.useRef)(null),{socket:i}=(0,tq.i)(),a=(0,e_.useCallback)((e,t)=>{e.connected||e.connect(),e.emit("enterChat",{chatId:t,clientHeaders:{"x-wrtn-id":(0,tg.ej)(tg.Mv.__W_ID),"wrtn-locale":"ja-JP"}})},[]);return(0,e_.useEffect)(()=>{if(!i||!t)return;let handleFocus=()=>a(i,t);return window.addEventListener("focus",handleFocus),o.current&&(r(!1),i.emit("leaveChat",{chatId:o.current})),i.connected||i.connect(),i.emit("enterChat",{chatId:t,clientHeaders:{"x-wrtn-id":(0,tg.ej)(tg.Mv.__W_ID),"wrtn-locale":"ja-JP"}}),o.current=t,()=>{r(!1),window.removeEventListener("focus",handleFocus),i.removeAllListeners()}},[t,i,r,a]),(0,eu.tZ)(eu.HY,{children:n})};function ChatScrollButton_templateObject(){let e=(0,ep._)(["\n            transition: top 0.2s ease-in-out, opacity 0.2s ease-in-out;\n\n            &:hover {\n              cursor: ",";\n              background-color: ",";\n              background-color: ",";\n            }\n          "]);return ChatScrollButton_templateObject=function(){return e},e}let ChatScrollButton=e=>{let{bottom:t,loading:n}=e,[r]=(0,ng.e7)(),o=(0,ng.qJ)(),{isUnitDisabled:i}=tX(),a=i||n||r;return(0,eu.tZ)(eh.xu,{position:"absolute",bottom:t,left:"calc(50% - 14px - 114px)",zIndex:3,children:(0,eu.tZ)(eD.xE,{isShow:!r,children:(0,eu.tZ)(eh.xu,{width:"28px",height:"28px",borderRadius:"50%",display:"flex",justifyContent:"center",alignItems:"center",border:"1px solid",borderColor:"$color_outline_secondary",backgroundColor:"$color_surface_tertiary",boxShadow:"0px 1px 2px 0px rgba(0, 0, 0, 0.05), 0px 2px 4px -2px rgba(0, 0, 0, 0.10);",onClick:a?void 0:()=>{o()},css:e=>{var t;return(0,em.iv)(ChatScrollButton_templateObject(),a?"default":"pointer",null===(t=e.colors)||void 0===t?void 0:t.$color_surface_hover,(0,eh.JH)({theme:e,backgroundColor:"$color_surface_tertiary",overlayColor:"$color_surface_hover"}))},children:(0,eu.tZ)(e$.JO,{as:eS.aEp,size:16,color:"$color_icon_secondary"})})})})},InputResizeObserver=e=>{let{children:t}=e,{height:n,observedDiv:r}=(0,eg.yU)();return t({height:n,observedDiv:r})},ChatRoom=e=>{let{unit:t,character:n}=e,{getChatIdFromPath:r}=(0,eL.dt)(),o=(0,eG.Zl)(eH.yI),i=r(),{data:a,isLoading:l}=useChatRoom(i),{markLandChatRoom:c}=(0,eL.DD)(),d=(0,eG.Zl)(eH._b);return(0,e_.useEffect)(()=>(c(),()=>{o(1)}),[]),(0,e_.useEffect)(()=>{var e,t,n,r;(null==a?void 0:a.messages)&&Array.isArray(null==a?void 0:a.messages)&&(null==a?void 0:a.messages.length)>0&&(null==a?void 0:null===(t=a.messages[0])||void 0===t?void 0:null===(e=t.meta)||void 0===e?void 0:e.assignmentId)&&d(null==a?void 0:null===(r=a.messages[0])||void 0===r?void 0:null===(n=r.meta)||void 0===n?void 0:n.assignmentId)},[null==a?void 0:a.messages]),(0,eu.tZ)(ChatSocketContainer,{chatId:i,children:(0,eu.tZ)(ChatEvaluationABTestProvider,{children:(0,eu.tZ)(ChatRoomProvider,{unit:t,character:n,chatId:i,chat:a,children:(0,eu.BX)(ChatMessageStatusProvider,{children:[(0,eu.tZ)(ChatRoomHeader,{topic:null==a?void 0:a.topic,isLoading:l}),(0,eu.tZ)(nh.x,{}),(0,eu.tZ)(eh.gC,{height:"calc(100vh - ".concat(56+nh.w,"px)"),overflow:"hidden",position:"relative",children:(0,eu.BX)(ng.ZP,{className:"scroll-container",scrollViewClassName:"scroll-view",followButtonClassName:"follow-button",initialScrollBehavior:"auto",mode:"bottom",children:[(0,eu.tZ)(ChatMessageList,{chat:a,chatId:i,isLoading:l},"".concat(i,"_").concat(l)),(0,eu.tZ)(InputResizeObserver,{children:e=>{let{height:t,observedDiv:n}=e;return(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(ChatScrollButton,{bottom:t,loading:l}),(0,eu.tZ)(eh.xu,{minHeight:200,height:t,maxWidth:"1660px"}),(0,eu.tZ)(ChatInput,{observedDiv:n})]})}}),(0,eu.tZ)(ChatRoomListener,{chat:a})]})})]})})})})},nC={_id:"664c4ecf7b06b76f1a75182a",userId:"6487d9e8958ad287eb8dd353",isDeleted:!1,version:"1.2.0",shareChatIds:[],messagedAt:"2024-05-21T07:35:47.667Z",createdAt:"2024-05-21T07:35:43.354Z",updatedAt:"2024-05-21T07:35:48.021Z",__v:0,topic:"엔비디아 주식을 무료로 받는 방법?",messages:[{_id:"664c4ed362249af066428cdf",chatId:"664c4ecf7b06b76f1a75182a",role:"user",content:"엔비디아 주식을 무료로 받는 방법?",meta:{},model:"WRTN_SEARCH",pluginName:"search",liked:!1,disliked:!1,dynamicChipList:[],dynamicChips:[],searchResult:[],images:[],__t:"PluginInput",createdAt:"2024-05-21T07:35:47.644Z",updatedAt:"2024-05-21T07:35:47.644Z",__v:0},[{_id:"664c4ed362249af066428ce1",userId:"6487d9e8958ad287eb8dd353",chatId:"664c4ecf7b06b76f1a75182a",role:"assistant",type:"PluginOutput",content:"사용자님! 주식에 관심이 있으시군요 \uD83D\uDCC8\n그렇다면 절대 놓치지 말아야 할 혜자로운 이벤트 소식이 있어요.\nㅤ\n상상인증권에서 MTS(모바일 트레이딩 시스템) 오픈 기념으로, 무료로 주식을 당첨받을 수 있는 랜덤박스 이벤트를 진행한대요 \uD83D\uDC40 \n사용자님께 알려드리고 싶어서 이벤트 정보를 요약해왔어요.\nㅤ\n### 『상상인증권 New MTS 오픈 기념 이벤트』 [[1]](https://ad-tracker-api.dev.wrtn.club/1ku-5Q?inventory=cached_chip)\nㅤ\n#### \uD83D\uDC49 이벤트 내용\n1. **21일간 매일** 주식 랜덤 박스를 열 수 있어요.\uD83C\uDF81\n\n2. **최대 10주까지** 무료로 당첨될 수 있어요!\n\n3. 주식에 당첨되지 않아도 추첨을 통해 엔비디아 10주를 받을 수 있어요.\nㅤ\n#### \uD83D\uDC49 이벤트 기간\n2024년 5월 7일(화) ~ 2024년 5월 27일(월)\nㅤ\n#### \uD83D\uDC49 대상\n- 참여 제한 없이 기존 가입자, 신규 가입자 모두 해당\n- 휴대폰 번호 기준 1일 1회 총 21회 참여 가능\n\nㅤ\n#### \uD83D\uDC49 참여방법\n1. 랜덤 박스 이벤트 페이지 내 '랜덤 박스' 열기 클릭\n2. 주식 증정 받을 이름과 휴대폰번호 입력\n3. 주식 당첨 후 상상인증권 NEW MTS 계좌 개설 시 이벤트 종료 후 6월 7일 일괄 지급\n\nㅤ\n###### 이벤트 유의사항\n###### - 참여 대상 : 만 19세 이상 대한민국 국민 누구나 가능합니다. * 기존, 신규고객 모두 / 마케팅 동의 및 이벤트 신청 필수\n###### - 주식은 해외주식 약정 신청을 하셔야 정상 지급됩니다.\n###### - 주식 당첨 후 2024년 05월 31일까지 계좌를 개설하지 않을 시 당첨이 취소됩니다. * 휴대폰 번호당 1일 1회 참여 가능, 당첨 기회 1번\n###### - 당첨된 해외주식은 수량에 상관 없이 당사 계좌로만 입고 가능합니다.\n###### - 본 이벤트 경품 지급은 타인 계좌 대리 수령이 불가능합니다.\n###### - 본 이벤트는 당사 사정 또는 금융당국의 지도 및 권고에 따라 변경되거나 조기 종료될 수 있습니다.\n###### - 본 이벤트 경품은 6월 7일 일괄 지급 예정이며, 당사 사정에 따라 변경될 수 있습니다.\n###### - 본 이벤트 경품 수령에 따른 제세공과금은 당사가 부담합니다.\n\nㅤ\n###### 투자 유의사항\n###### - 투자 전 상품 설명서 및 약관을 반드시 읽어보시기 바랍니다.\n###### - 상상인증권 new MTS 해외 주식 수수료 : 0.10%~0.25%\n###### - 세금 및 기타비용은 수수료 이외에 별도 부과 / 매도 시, 수수료 외 Sec Fee 0.0008% 부과 / 주문건별 체결금액 기준 / 기타 상세 내용 홈페이지 참고\n###### - 이 금융투자상품은 예금자보호법에 따라 보호되지 않습니다.\n###### - 자세한 사항은 당사 고객센터(1566-0900)로 문의주시기 바랍니다.\n\nㅤ\n###### 한국금융투자협회 심사필 제24-01662호 (2024-04-30 ~ 2024-05-31)",isDeleted:!1,meta:{williamRequestId:"6efa0c06-9b9d-4823-837d-15ea742338d2",adId:"poc_sangsangin_push_msg_1"},version:"1.2.4",model:"WRTN_SEARCH",pluginName:"search",liked:!1,disliked:!1,pluginContent:[],reroll:!1,isSensitiveWord:!1,dynamicChipList:["주식 투자의 기본을 알려줄래?","투자에 필요한 자본이 어떻게 돼?","미래 기술에 대한 예측은?"],dynamicChips:[{adId:"poc_sangsangin_push_dynamic_1",category:"advertise",designOption:{logoImage:"https://ad-assets.wrtn.ai/poc/sangsangin/sangsangin_logo.png",light:{adTextColor:"#ffffff",contentTextColor:"#3F8EBB",adBackgroundColor:"#3F8EBB",backgroundColor:"#FFFFFF",strokeColor:"#C7C5BD"},dark:{adTextColor:"#1F3444",contentTextColor:"#D7EBFF",adBackgroundColor:"#ABDDFF",backgroundColor:"#242321",strokeColor:"#42413D"}},eventProperty:{request_id:"ef0910c2-105e-41df-a176-7b025bce73db",advertiser_id:"sangsangin",campaign_id:"poc_sangsangin_1",inventory_id:"inventory_1",inventory_name:"dynamic_chip"},content:"오늘 주식 뽑기로 갓생 가나요?",link:"https://ad-tracker-api.dev.wrtn.club/y5pm1w?inventory=dynamic_chip"},{content:"주식 투자의 기본을 알려줄래?",category:"none"},{content:"투자에 필요한 자본이 어떻게 돼?",category:"none"},{content:"미래 기술에 대한 예측은?",category:"none"}],searchResult:[{adId:"poc_sangsangin_push_reference_1",category:"advertise",designOption:{logoImage:"https://ad-assets.wrtn.ai/poc/sangsangin/sangsangin_logo.png",light:{adTextColor:"#ffffff",contentTextColor:"#3F8EBB",adBackgroundColor:"#3F8EBB",backgroundColor:"#FFFFFF",strokeColor:"#C7C5BD"},dark:{adTextColor:"#1F3444",contentTextColor:"#D7EBFF",adBackgroundColor:"#ABDDFF",backgroundColor:"#242321",strokeColor:"#42413D"}},eventProperty:{request_id:"ddc1ebc2-f110-47fb-b806-5b68b168c8ce",advertiser_id:"sangsangin",campaign_id:"poc_sangsangin_1",inventory_id:"inventory_1",inventory_name:"reference_link"},siteName:"상상인증권",thumbnail:null,title:"지금 바로 상상인증권에서 주식 받아가세요!",display:"상상인이벤트링크",externalLink:"https://ad-tracker-api.dev.wrtn.club/xTVH4A?inventory=reference_link"},{adId:"poc_sangsangin_push_reference_2",category:"advertise",designOption:{logoImage:"https://ad-assets.wrtn.ai/poc/sangsangin/sangsangin_logo.png",light:{adTextColor:"#ffffff",contentTextColor:"#3F8EBB",adBackgroundColor:"#3F8EBB",backgroundColor:"#FFFFFF",strokeColor:"#C7C5BD"},dark:{adTextColor:"#1F3444",contentTextColor:"#D7EBFF",adBackgroundColor:"#ABDDFF",backgroundColor:"#242321",strokeColor:"#42413D"}},adGuidelineText:"한국금융투자협회 심사필 제24-01662호 (2024-04-30 ~ 2024-05-31)",eventProperty:{request_id:"ddc1ebc2-f110-47fb-b806-5b68b168c8ce",advertiser_id:"sangsangin",campaign_id:"poc_sangsangin_1",inventory_id:"inventory_1",inventory_name:"reference_link"},siteName:"상상인증권",thumbnail:"https://ad-assets.wrtn.ai/poc/sangsangin/Background.png",title:"상상인에서 주식 복권 뽑고 ‘엔비디아 가즈아~’",display:"상상인이벤트링크",externalLink:"https://ad-tracker-api.dev.wrtn.club/Qfxs9w?inventory=reference_link"}],status:"end",__t:"PluginOutput",tokens:[{type:"text",count:1299}],createdAt:"2024-05-21T07:35:47.656Z",updatedAt:"2024-05-21T07:35:49.091Z",__v:0,cachedChip:0,parentTurnId:"5bc0a72c-060c-4dbd-b4ce-7ae46b297b38",turnId:"b04333f9-58b9-4092-92e1-6139b6a8dc8e"}]],tempUnit:{_id:"65d592f0b18cdb6b8aa92373",name:"wrtn_search",enableOptions:{reroll:!1,dynamicChip:!0,staticChip:!1,referenceLink:!1,searchLink:!0,draw:!1,stream:!0,loading:!1,code:!1,promptHub:!1},allowAnonymous:!0,countryCode:"KR",appStatus:"released",webStatus:"released",thumbnail:"https://cdn-image.wrtn.ai/Icon/search_2.png",description:"실시간 검색이 가능해요",displayName:"AI 검색",tags:[],priority:10,createdAt:"2024-02-21T06:06:40.379Z",updatedAt:"2024-02-21T06:06:40.379Z",cardDescription:"AI 검색은 실시간 정보를 제공하는 뤼튼의 AI 에이전트입니다.\n최신 정보를 찾고 내용을 종합하여 사용자가 원하는 형태의 답변을 제공합니다. 수많은 정보를 찾아 요약하여 검색 시간을 효율적으로 단축합니다. 검색한 결과를 다듬을 수 있고, 그 결과를 바탕으로 새로운 정보를 생성할 수도 있습니다.",provider:"Wrtn"}},ny={_id:"664c4ecf7b06b76f1a75182a",userId:"6487d9e8958ad287eb8dd353",isDeleted:!1,version:"1.2.0",shareChatIds:[],messagedAt:"2024-05-21T07:35:47.667Z",createdAt:"2024-05-21T07:35:43.354Z",updatedAt:"2024-05-21T07:35:48.021Z",__v:0,topic:"엔비디아 주식을 무료로 받는 방법?",messages:[{_id:"664c4ed362249af066428cdf",chatId:"664c4ecf7b06b76f1a75182a",role:"user",content:"엔비디아 주식을 무료로 받는 방법?",meta:{},model:"WRTN_SEARCH",pluginName:"search",liked:!1,disliked:!1,dynamicChipList:[],dynamicChips:[],searchResult:[],images:[],__t:"PluginInput",createdAt:"2024-05-21T07:35:47.644Z",updatedAt:"2024-05-21T07:35:47.644Z",__v:0},[{_id:"664c4ed362249af066428ce1",userId:"6487d9e8958ad287eb8dd353",chatId:"664c4ecf7b06b76f1a75182a",role:"assistant",type:"PluginOutput",content:"사용자님! 주식에 관심이 있으시군요 \uD83D\uDCC8\n그렇다면 절대 놓치지 말아야 할 혜자로운 이벤트 소식이 있어요.\nㅤ\n상상인증권에서 MTS(모바일 트레이딩 시스템) 오픈 기념으로, 무료로 주식을 당첨받을 수 있는 랜덤박스 이벤트를 진행한대요 \uD83D\uDC40 \n사용자님께 알려드리고 싶어서 이벤트 정보를 요약해왔어요.\nㅤ\n### 『상상인증권 New MTS 오픈 기념 이벤트』 [[1]](https://ad.wrtn.ai/Wey3qg?inventory=cached_chip)\nㅤ\n#### \uD83D\uDC49 이벤트 내용\n1. **21일간 매일** 주식 랜덤 박스를 열 수 있어요.\uD83C\uDF81\n\n2. **최대 10주까지** 무료로 당첨될 수 있어요!\n\n3. 주식에 당첨되지 않아도 추첨을 통해 엔비디아 10주를 받을 수 있어요.\nㅤ\n#### \uD83D\uDC49 이벤트 기간\n2024년 5월 7일(화) ~ 2024년 5월 27일(월)\nㅤ\n#### \uD83D\uDC49 대상\n- 참여 제한 없이 기존 가입자, 신규 가입자 모두 해당\n- 휴대폰 번호 기준 1일 1회 총 21회 참여 가능\n\nㅤ\n#### \uD83D\uDC49 참여방법\n1. 랜덤 박스 이벤트 페이지 내 '랜덤 박스' 열기 클릭\n2. 주식 증정 받을 이름과 휴대폰번호 입력\n3. 주식 당첨 후 상상인증권 NEW MTS 계좌 개설 시 이벤트 종료 후 6월 7일 일괄 지급\n\nㅤ\n###### 이벤트 유의사항\n###### - 참여 대상 : 만 19세 이상 대한민국 국민 누구나 가능합니다. * 기존, 신규고객 모두 / 마케팅 동의 및 이벤트 신청 필수\n###### - 주식은 해외주식 약정 신청을 하셔야 정상 지급됩니다.\n###### - 주식 당첨 후 2024년 05월 31일까지 계좌를 개설하지 않을 시 당첨이 취소됩니다. * 휴대폰 번호당 1일 1회 참여 가능, 당첨 기회 1번\n###### - 당첨된 해외주식은 수량에 상관 없이 당사 계좌로만 입고 가능합니다.\n###### - 본 이벤트 경품 지급은 타인 계좌 대리 수령이 불가능합니다.\n###### - 본 이벤트는 당사 사정 또는 금융당국의 지도 및 권고에 따라 변경되거나 조기 종료될 수 있습니다.\n###### - 본 이벤트 경품은 6월 7일 일괄 지급 예정이며, 당사 사정에 따라 변경될 수 있습니다.\n###### - 본 이벤트 경품 수령에 따른 제세공과금은 당사가 부담합니다.\n\nㅤ\n###### 투자 유의사항\n###### - 투자 전 상품 설명서 및 약관을 반드시 읽어보시기 바랍니다.\n###### - 상상인증권 new MTS 해외 주식 수수료 : 0.10%~0.25%\n###### - 세금 및 기타비용은 수수료 이외에 별도 부과 / 매도 시, 수수료 외 Sec Fee 0.0008% 부과 / 주문건별 체결금액 기준 / 기타 상세 내용 홈페이지 참고\n###### - 이 금융투자상품은 예금자보호법에 따라 보호되지 않습니다.\n###### - 자세한 사항은 당사 고객센터(1566-0900)로 문의주시기 바랍니다.\n\nㅤ\n###### 한국금융투자협회 심사필 제24-01662호 (2024-04-30 ~ 2024-05-31)",isDeleted:!1,meta:{williamRequestId:"6efa0c06-9b9d-4823-837d-15ea742338d2",adId:"poc_sangsangin_push_msg_1"},version:"1.2.4",model:"WRTN_SEARCH",pluginName:"search",liked:!1,disliked:!1,pluginContent:[],reroll:!1,isSensitiveWord:!1,dynamicChipList:["주식 투자의 기본을 알려줄래?","투자에 필요한 자본이 어떻게 돼?","미래 기술에 대한 예측은?"],dynamicChips:[{adId:"poc_sangsangin_push_dynamic_1",category:"advertise",designOption:{logoImage:"https://ad-assets.wrtn.ai/poc/sangsangin/sangsangin_logo.png",light:{adTextColor:"#ffffff",contentTextColor:"#3F8EBB",adBackgroundColor:"#3F8EBB",backgroundColor:"#FFFFFF",strokeColor:"#C7C5BD"},dark:{adTextColor:"#1F3444",contentTextColor:"#D7EBFF",adBackgroundColor:"#ABDDFF",backgroundColor:"#242321",strokeColor:"#42413D"}},eventProperty:{request_id:"ef0910c2-105e-41df-a176-7b025bce73db",advertiser_id:"sangsangin",campaign_id:"poc_sangsangin_1",inventory_id:"inventory_1",inventory_name:"dynamic_chip"},content:"오늘 주식 뽑기로 갓생 가나요?",link:"https://ad.wrtn.ai/6DqvpA?inventory=dynamic_chip"},{content:"주식 투자의 기본을 알려줄래?",category:"none"},{content:"투자에 필요한 자본이 어떻게 돼?",category:"none"},{content:"미래 기술에 대한 예측은?",category:"none"}],searchResult:[{adId:"poc_sangsangin_push_reference_1",category:"advertise",designOption:{logoImage:"https://ad-assets.wrtn.ai/poc/sangsangin/sangsangin_logo.png",light:{adTextColor:"#ffffff",contentTextColor:"#3F8EBB",adBackgroundColor:"#3F8EBB",backgroundColor:"#FFFFFF",strokeColor:"#C7C5BD"},dark:{adTextColor:"#1F3444",contentTextColor:"#D7EBFF",adBackgroundColor:"#ABDDFF",backgroundColor:"#242321",strokeColor:"#42413D"}},eventProperty:{request_id:"ddc1ebc2-f110-47fb-b806-5b68b168c8ce",advertiser_id:"sangsangin",campaign_id:"poc_sangsangin_1",inventory_id:"inventory_1",inventory_name:"reference_link"},siteName:"상상인증권",thumbnail:null,title:"지금 바로 상상인증권에서 주식 받아가세요!",display:"상상인이벤트링크",externalLink:"https://ad.wrtn.ai/dH29Vg?inventory=reference_link"},{adId:"poc_sangsangin_push_reference_2",category:"advertise",designOption:{logoImage:"https://ad-assets.wrtn.ai/poc/sangsangin/sangsangin_logo.png",light:{adTextColor:"#ffffff",contentTextColor:"#3F8EBB",adBackgroundColor:"#3F8EBB",backgroundColor:"#FFFFFF",strokeColor:"#C7C5BD"},dark:{adTextColor:"#1F3444",contentTextColor:"#D7EBFF",adBackgroundColor:"#ABDDFF",backgroundColor:"#242321",strokeColor:"#42413D"}},adGuidelineText:"한국금융투자협회 심사필 제24-01662호 (2024-04-30 ~ 2024-05-31)",eventProperty:{request_id:"ddc1ebc2-f110-47fb-b806-5b68b168c8ce",advertiser_id:"sangsangin",campaign_id:"poc_sangsangin_1",inventory_id:"inventory_1",inventory_name:"reference_link"},siteName:"상상인증권",thumbnail:"https://ad-assets.wrtn.ai/poc/sangsangin/Background.png",title:"상상인에서 주식 복권 뽑고 ‘엔비디아 가즈아~’",display:"상상인이벤트링크",externalLink:"https://ad.wrtn.ai/jhB0UQ?inventory=reference_link"}],status:"end",__t:"PluginOutput",tokens:[{type:"text",count:1299}],createdAt:"2024-05-21T07:35:47.656Z",updatedAt:"2024-05-21T07:35:49.091Z",__v:0,cachedChip:0,parentTurnId:"5bc0a72c-060c-4dbd-b4ce-7ae46b297b38",turnId:"b04333f9-58b9-4092-92e1-6139b6a8dc8e"}]],tempUnit:{_id:"65d592f0b18cdb6b8aa92373",name:"wrtn_search",enableOptions:{reroll:!1,dynamicChip:!0,staticChip:!1,referenceLink:!1,searchLink:!0,draw:!1,stream:!0,loading:!1,code:!1,promptHub:!1},allowAnonymous:!0,countryCode:"KR",appStatus:"released",webStatus:"released",thumbnail:"https://cdn-image.wrtn.ai/Icon/search_2.png",description:"실시간 검색이 가능해요",displayName:"AI 검색",tags:[],priority:10,createdAt:"2024-02-21T06:06:40.379Z",updatedAt:"2024-02-21T06:06:40.379Z",cardDescription:"AI 검색은 실시간 정보를 제공하는 뤼튼의 AI 에이전트입니다.\n최신 정보를 찾고 내용을 종합하여 사용자가 원하는 형태의 답변을 제공합니다. 수많은 정보를 찾아 요약하여 검색 시간을 효율적으로 단축합니다. 검색한 결과를 다듬을 수 있고, 그 결과를 바탕으로 새로운 정보를 생성할 수도 있습니다.",provider:"Wrtn"}},AppChatRoom=()=>{let e=(0,eO.useRouter)(),{trackEvent:t}=(0,ev.Ke)(),n="prod"===tv.Vi?ny:nC,r=n._id;return(0,e_.useEffect)(()=>{let trackAndFetchData=async()=>{var r,o,i;t("view_webview_page",{screen_name:"WebView",feature_name:"ad",advertiser_id:"sangsangin",url:e.pathname});let a=n.messages[1][0].content,l=null!==(r=/\[🔗바로가기\]\(([^)]+)\)/.exec(a))&&void 0!==r?r:[],c=null!==(o=/\[\[1\]\]\(([^)]+)\)/.exec(a))&&void 0!==o?o:[],d=null!==(i=l[1])&&void 0!==i?i:c[1];if(d)try{await e7.default.get(d+"&position=home",{headers:{"Content-Type":"application/json"},withCredentials:!0})}catch(e){}};trackAndFetchData()},[]),(0,eu.tZ)(ChatSocketContainer,{chatId:r,children:(0,eu.tZ)(ChatEvaluationABTestProvider,{children:(0,eu.tZ)(ChatRoomProvider,{unit:n.tempUnit,character:null,chatId:r,chat:n,children:(0,eu.tZ)(eh.gC,{height:"100%",backgroundColor:"$color_bg_screen",children:(0,eu.tZ)(ChatMessageList,{chat:n,chatId:r,isLoading:!1,isAdWebview:!0},"".concat(r,"_").concat(!1))})})})})};var nk=n(20470),nw=n.n(nk);let ChatRoomHead=e=>{let{character:t}=e,n=(0,ef.bU)();return n!==t_.pS.ko?null:(0,eu.tZ)(nw(),{children:t&&(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)("title",{children:characterTitle(n,t)}),(0,eu.tZ)("meta",{name:"description",content:characterDescription(n,t)},"description"),(0,eu.tZ)("meta",{property:"og:description",content:characterDescription(n,t)},"og:description"),(0,eu.tZ)("meta",{property:"og:image",content:characterThumbnail(t)})]})})},characterTitle=(e,t)=>{switch(e){case t_.pS.ko:return"".concat(t.name," | 뤼튼 캐릭터");case t_.pS.ja:return"";default:return"뤼튼"}},characterDescription=(e,t)=>{let n=t.description.split(/([.!?])\s*/)[0];switch(e){case t_.pS.ko:return"".concat(n);case t_.pS.ja:return"";default:return"당신의 첫 AI 에이전트 뤼튼. AI 검색부터 나만의 AI 캐릭터까지, AI의 끝없는 가능성을 탐험해 보세요."}},characterThumbnail=e=>{var t,n,r,o,i,a;return(null===(t=e.profileImage)||void 0===t?void 0:t.w600)?null===(n=e.profileImage)||void 0===n?void 0:n.w600:(null===(r=e.profileImage)||void 0===r?void 0:r.w200)?null===(o=e.profileImage)||void 0===o?void 0:o.w200:(null===(i=e.profileImage)||void 0===i?void 0:i.origin)?null===(a=e.profileImage)||void 0===a?void 0:a.origin:e.thumbnail?e.thumbnail:"https://fe-web-assets.wow.wrtn.ai/og-image.png"},ChatRoomPage=e=>{let{unit:t,character:n}=e;return(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(ChatRoomHead,{unit:t,character:n}),(0,eu.tZ)(eh.gC,{width:"100%",height:"100dvh",overflow:"hidden",backgroundColor:"$color_bg_screen",position:"relative",children:(0,eu.tZ)(ChatRoom,{unit:t,character:n})})]})},ChatRoomV2Page=e=>{let{unit:t}=e,{replace:n}=(0,ex.tv)();return tv.Ts?(0,eu.BX)(eu.HY,{children:["ChatRoomV2Page, ",null==t?void 0:t._id]}):(n("/"),null)},nZ=(0,e_.createContext)({}),BookmarksProvider=e=>{let{children:t}=e;return(0,eu.tZ)(nZ.Provider,{value:{},children:t})},BookmarksLayout=e=>{let{children:t}=e;return(0,eu.tZ)(eh.gC,{width:"100%",alignItems:"center",backgroundColor:"$color_bg_screen",children:(0,eu.tZ)(eh.gC,{width:"100%",alignItems:"center",children:t})})};function ImageList_templateObject(){let e=(0,ep._)(["\n            aspect-ratio: 1.14;\n          "]);return ImageList_templateObject=function(){return e},e}let ImageList=e=>{let{imageList:t}=e,n=1<=t.length&&t.length<5,r=t.length>5,o=n?t.slice(0,1):t.slice(0,5),i=(0,ef.T_)("feature_bookmarks");return(0,eu.tZ)(eh.Ug,{gap:"8px",children:o.map((e,o)=>(0,eu.BX)(eh.xu,{flexShrink:0,position:"relative",borderRadius:"12px",overflow:"hidden",width:n?"100px":"calc((100% / 5) - 6px)",css:(0,em.iv)(ImageList_templateObject()),children:[(0,eu.tZ)("img",{width:"100%",height:"100%",src:e,alt:i("image.alt",{index:o+1})}),!!(r&&4===o)&&(0,eu.BX)(eh.xu,{position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.3)",left:0,right:0,top:0,bottom:0,display:"flex",alignItems:"center",justifyContent:"center",typo:"$100-16-med",color:"#fff",children:["+",i("image_unit",{count:t.length-5})]})]},e))})};function BlogListItem_templateObject(){let e=(0,ep._)(["\n        cursor: pointer;\n        overflow: hidden;\n      "]);return BlogListItem_templateObject=function(){return e},e}function BlogListItem_templateObject1(){let e=(0,ep._)(["\n              overflow: hidden;\n              text-overflow: ellipsis;\n              display: -webkit-box;\n              -webkit-line-clamp: 2;\n              -webkit-box-orient: vertical;\n              line-height: 160%;\n            "]);return BlogListItem_templateObject1=function(){return e},e}let BlogListItem=e=>{var t;let{item:n}=e,{push:r}=(0,ex.tv)(),o="blog"===n.type&&null!==(t=n.content.images)&&void 0!==t?t:[],i=o.length>5,a=1<=o.length&&o.length<5;return(0,eu.tZ)(eh.gC,{onClick:()=>{"blog"===n.type&&n.content&&r("/blog-generator/".concat(n.content.messageId,"?from=bookmark"),void 0,{shallow:!0})},gap:"12px",backgroundColor:"$color_bg_screen",borderRadius:"12px",width:"100%",css:(0,em.iv)(BlogListItem_templateObject()),children:(0,eu.BX)(eh.xu,{gap:i?"20px":"12px",display:"flex",flexDirection:a?"row":"column",children:[(0,eu.BX)(eh.gC,{gap:"12px",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-18-semi",color:"$color_text_primary",children:"blog"===n.type&&n.content.title}),(0,eu.tZ)(eh.Jd,{typo:"$100-16-med",color:"$color_text_secondary",css:(0,em.iv)(BlogListItem_templateObject1()),children:"blog"===n.type&&n.content.content})]}),(0,eu.tZ)(ImageList,{imageList:o})]})})};var nI=n(17144);let getBookmarks=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t="/message-bookmarks",n=[];if((null==e?void 0:e.category)&&n.push("category=".concat(encodeURIComponent(e.category))),null==e?void 0:e.search){var r;n.push("search=".concat(encodeURIComponent(null!==(r=e.search)&&void 0!==r?r:"")))}return n.length>0&&(t+="?".concat(n.join("&"))),ek.Np.BE.get(t)},deleteBookmark=(e,t)=>ek.Np.BE.delete("/message-bookmarks",{data:{contentId:e,type:t}}),toggleBookmarkMemorized=e=>ek.Np.BE.patch("/message-bookmarks/".concat(e,"/memorize")),getMemos=e=>ek.Np.BE.get("/bookmark-memos/".concat(e)),createMemo=(e,t)=>ek.Np.BE.post("/bookmark-memos",{bookmarkId:e,content:t}),deleteMemo=e=>ek.Np.BE.delete("/bookmark-memos/".concat(e)),toggleSavedForSummary=e=>ek.Np.William.post("/summary-generator/update-summary",{saved:e.saved,summaryId:e.id}),useBookmarks=e=>{let{category:t,search:n}=e,r=["/bookmarks",t,n],o=(0,ef.T_)(),{data:i,error:a,mutate:l}=(0,nI.ZP)(r,async()=>{let e=await getBookmarks({category:t,search:n});return e.map(e=>{var t,n,r,i,a,l,c,d,s,u,p,_,m;let h={_id:e._id,type:e.type||"message",content:e.content,memorized:e.memorized,memoCount:e.memoCount,createdAt:e.createdAt,updatedAt:e.updatedAt};switch(e.type||"message"){case"message":default:return{type:"message",content:{...h,messageId:e.messageId,modelInfo:e.modelInfo,referenceItems:e.referenceItems,userId:e.userId,assistantMessage:e.assistantMessage,userMessage:e.userMessage,image:e.image}};case"short-content":return{type:"short-content",content:{...h,modelInfo:{name:"short-content",displayName:o("feature_bookmarks.category.seven_seconds")},shortContent:e.shortContent}};case"blog":return{type:"blog",content:{...h,modelInfo:{name:"blog",displayName:o("feature_bookmarks.category.blog")},messageId:null===(t=e.savedContent)||void 0===t?void 0:t.id,content:null===(n=e.savedContent)||void 0===n?void 0:n.content,title:null===(r=e.savedContent)||void 0===r?void 0:r.title,images:null===(i=e.savedContent)||void 0===i?void 0:i.images}};case"cover-letter":return{type:"cover-letter",content:{...h,messageId:null===(a=e.savedContent)||void 0===a?void 0:a.id,modelInfo:{name:"cover-letter",displayName:o("feature_bookmarks.category.cover_letter")},answer:null===(l=e.savedContent)||void 0===l?void 0:l.answer,question:null===(c=e.savedContent)||void 0===c?void 0:c.question}};case"summary":return{type:"summary",content:{...h,messageId:null===(d=e.savedContent)||void 0===d?void 0:d.id,modelInfo:{name:"summary",displayName:o("feature_bookmarks.category.summary")},content:null===(s=e.savedContent)||void 0===s?void 0:s.content}};case"coding-task":return{type:"coding-task",content:{...h,messageId:null===(u=e.savedContent)||void 0===u?void 0:u.id,modelInfo:{name:"coding-task",displayName:o("feature_bookmarks.category.coding_task")},content:null===(p=e.savedContent)||void 0===p?void 0:p.content,answer:"".concat(null===(_=e.savedContent)||void 0===_?void 0:_.task," \n ").concat(null===(m=e.savedContent)||void 0===m?void 0:m.answer),question:o("feature_bookmarks.coding_task_question")}}}}).sort((e,t)=>new Date(t.content.createdAt).getTime()-new Date(e.content.createdAt).getTime())},{revalidateOnMount:!0,revalidateIfStale:!0,revalidateOnFocus:!1,revalidateOnReconnect:!1}),handleToggleSaved=async(e,t)=>{try{await deleteBookmark(e,t),"summary"===t&&toggleSavedForSummary({saved:!1,id:e}),l(t=>null==t?void 0:t.filter(t=>t.content.messageId!==e),!1)}catch(e){l()}},handleToggleMemorized=async e=>{try{await toggleBookmarkMemorized(e),l(t=>t?t.map(t=>t.content._id===e?{...t,content:{...t.content,memorized:!t.content.memorized}}:t):t,!1)}catch(e){l()}};return{bookmarks:i,isLoading:!a&&!i,isError:a,toggleSaved:handleToggleSaved,toggleBookmarkMemorized:handleToggleMemorized,refetch:()=>l()}},useMemos=e=>{let{data:t,error:n,mutate:r}=(0,eI.dH)(e?"/bookmark-memos/".concat(e):null,()=>getMemos(e),{revalidateIfStale:!1,revalidateOnFocus:!1,revalidateOnReconnect:!1}),handleCreateMemo=async t=>{try{let n=await createMemo(e,t);r(e=>e?[...e,n]:[n],!1)}catch(e){r()}},handleDeleteMemo=async e=>{try{await deleteMemo(e),r(t=>null==t?void 0:t.filter(t=>t._id!==e),!1)}catch(e){r()}};return{memos:t,isLoading:!n&&!t,isError:n,createMemo:handleCreateMemo,deleteMemo:handleDeleteMemo,refetch:()=>r()}};function DeleteModal_templateObject(){let e=(0,ep._)(["\n            ","\n            box-shadow: 0px 1px 2px 0px rgba(0, 0, 0, 0.05),\n              0px 2px 4px -2px rgba(0, 0, 0, 0.1);\n            border: 1px solid ",";\n          "]);return DeleteModal_templateObject=function(){return e},e}function DeleteModal_templateObject1(){let e=(0,ep._)(["\n                width: 132px;\n                height: 40px;\n                background-color: ",";\n                border-radius: 5px;\n\n                ","\n                &:hover {\n                  background-color: #b0b0afff;\n                  color: #090908ff;\n                  border-color: transparent;\n                }\n              "]);return DeleteModal_templateObject1=function(){return e},e}function DeleteModal_templateObject2(){let e=(0,ep._)(["\n                width: 132px;\n                height: 40px;\n                background-color: ",";\n                border-radius: 5px;\n\n                ","\n                &:hover {\n                  background-color: #b0b0afff;\n                  color: #090908ff;\n                  border-color: transparent;\n                }\n              "]);return DeleteModal_templateObject2=function(){return e},e}let DeleteBookMarkModalWithButton=e=>{let t,{deleteId:n,deleteObject:r,customTitle:o,customDescription:i,fromMenu:a,bookmark:l}=e,[c,d]=(0,e_.useState)(!1),{trackEvent:s}=(0,ev.Ke)(),u=(0,ef.T_)();if(l)"message"===l.type?t=l.content:"blog"===l.type?t=l.content:"cover-letter"===l.type?t=l.content:"message"!==l.type&&"blog"!==l.type&&"cover-letter"!==l.type?t=l.content:"summary"===l.type&&(t=l.content);else throw Error("Unknown bookmark type");return(null==l?void 0:l.type)==="short-content"?null:(0,eu.tZ)(eC.CO,{opened:c,onClose:()=>{var e,n;d(!1),s("click_exit_delete_saved_"+a,{content_id:null==t?void 0:t.messageId,purpose:null==t?void 0:null===(e=t.modelInfo)||void 0===e?void 0:e.displayName.replace("Pro모드","AI 과제와 업무 - Pro"),is_pro_mode:(null==t?void 0:null===(n=t.modelInfo)||void 0===n?void 0:n.name)==="pro_mode",is_with_img:!!("image"in t&&t.image&&t.image.imageUrls.length>0),content_type:"chat"})},renderOpener:e=>{let{openModal:n}=e;return(0,eu.tZ)(eC.Lt,{anchor:"right",closable:!c,renderOpener:e=>{let{open:n}=e;return(0,eu.tZ)(eh.zx,{display:"flex",alignItems:"right",onClick:()=>{var e,r;n(),s("click_saved_"+a+"_kebab_btn",{content_id:null==t?void 0:t.messageId,purpose:null==t?void 0:null===(e=t.modelInfo)||void 0===e?void 0:e.displayName.replace("Pro모드","AI 과제와 업무 - Pro"),is_pro_mode:(null==t?void 0:null===(r=t.modelInfo)||void 0===r?void 0:r.name)==="pro_mode",is_with_img:!!("image"in t&&t.image&&t.image.imageUrls.length>0),content_type:"chat"})},children:(0,eu.tZ)(e$.JO,{as:eS.PlJ,size:18,color:"$color_icon_quaternary"})})},renderContent:e=>{let{close:r}=e;return(0,eu.tZ)(eh.xu,{as:"button",bg:"$color_surface_ivory",border:"1px solid",borderColor:"$color_outline_secondary",borderRadius:"8px",boxShadow:"md",padding:"10px 3px 10px 10px",marginLeft:-18,marginTop:35,onClick:()=>{var e,o;n(),r(),s("click_delete_saved_"+a+"_btn",{content_id:null==t?void 0:t.messageId,purpose:null==t?void 0:null===(e=t.modelInfo)||void 0===e?void 0:e.displayName.replace("Pro모드","AI 과제와 업무 - Pro"),is_pro_mode:(null==t?void 0:null===(o=t.modelInfo)||void 0===o?void 0:o.name)==="pro_mode",is_with_img:!!("image"in t&&t.image&&t.image.imageUrls.length>0),content_type:"chat"})},children:(0,eu.BX)(eh.kC,{alignItems:"center",justifyContent:"space-between",gap:"4px",children:[(0,eu.tZ)(e$.JO,{as:eS.$yH,size:18,color:"$color_outline_accent_red"}),(0,eu.tZ)(eh.Jd,{color:"$color_outline_accent_red",typo:"$100-14-semi",mr:"2",children:u("feature_bookmarks.modal.remove.confirm")})]})})}})},renderContent:e=>{let{closeModal:c}=e;return(0,eu.BX)(eh.gC,{backgroundColor:"$color_bg_screen",padding:"32px 24px 20px 24px",borderRadius:"10px",css:e=>{var t;return(0,em.iv)(DeleteModal_templateObject(),"",null===(t=e.colors)||void 0===t?void 0:t.$color_outline_secondary)},children:[(0,eu.BX)(eh.gC,{gap:"10px",children:[(0,eu.tZ)(eh.xu,{textAlign:"center",children:(0,eu.tZ)(eh.Jd,{typo:"$ex_140-18-bold",color:"$color_text_primary",children:o})}),(0,eu.tZ)(eh.xu,{textAlign:"center",children:(0,eu.tZ)(eh.Jd,{typo:"$160-14-med",color:"$color_text_secondary",children:i})})]}),(0,eu.tZ)(eh.xu,{height:32}),(0,eu.BX)(eh.Ug,{gap:"9px",children:[(0,eu.tZ)(eh.zx,{css:e=>{var t;return(0,em.iv)(DeleteModal_templateObject1(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_secondary,"")},color:"$color_text_primary",onClick:()=>{var e,n;c(),s("click_cancel_delete_saved_"+a,{content_id:null==t?void 0:t.messageId,purpose:null==t?void 0:null===(e=t.modelInfo)||void 0===e?void 0:e.displayName.replace("Pro모드","AI 과제와 업무 - Pro"),is_pro_mode:(null==t?void 0:null===(n=t.modelInfo)||void 0===n?void 0:n.name)==="pro_mode",is_with_img:!!("image"in t&&t.image&&t.image.imageUrls.length>0),content_type:"chat"})},children:(0,eu.tZ)(eh.Jd,{typo:"$160-16-semi",children:u("common.button.cancel")})}),(0,eu.tZ)(eh.zx,{css:e=>{var t;return(0,em.iv)(DeleteModal_templateObject2(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_primary,"")},color:"$color_text_ivory",onClick:()=>{var e,o;r&&r(n||"",(null==l?void 0:l.type)?null==l?void 0:l.type:"message"),c(),s("click_confirm_delete_saved_"+a,{content_id:null==t?void 0:t.messageId,purpose:null==t?void 0:null===(e=t.modelInfo)||void 0===e?void 0:e.displayName.replace("Pro모드","AI 과제와 업무 - Pro"),is_pro_mode:(null==t?void 0:null===(o=t.modelInfo)||void 0===o?void 0:o.name)==="pro_mode",is_with_img:!!("image"in t&&t.image&&t.image.imageUrls.length>0),content_type:"chat"})},children:(0,eu.tZ)(eh.Jd,{typo:"$160-16-semi",children:u("common.button.delete")})})]})]})}})};function SendButton_templateObject(){let e=(0,ep._)(["\n        transition: padding 0.2s ease-in-out;\n\n        &:hover {\n          cursor: ",";\n          background-color: ",";\n          padding-right: ",";\n        }\n      "]);return SendButton_templateObject=function(){return e},e}let SendButton=e=>{let{isActive:t,animateOnHover:n,onClick:r,isDisabled:o,canStopGenerate:i,icon:a}=e;return(0,eu.tZ)(eh.gC,{position:"absolute",right:"20px",bottom:"22px",justifyContent:"center",alignItems:"center",backgroundColor:t?"$color_icon_primary":i?"$color_icon_primary":"$color_icon_disabled",borderRadius:"16px",p:"4px",size:"28px",onClick:o?void 0:r,css:e=>(0,em.iv)(SendButton_templateObject(),o?"not-allowed":t?"pointer":"default",t&&(0,eh.JH)({theme:e,overlayColor:"$color_surface_hover",backgroundColor:"$color_icon_primary"}),t&&n&&"8px"),children:a})};function BookmarkMemo_templateObject(){let e=(0,ep._)(["\n                &::placeholder {\n                  color: ",";\n                }\n              "]);return BookmarkMemo_templateObject=function(){return e},e}let MessageWithMemo=e=>{let{bookmarkId:t,bookmark:n,onMemoCountChange:r}=e,[o,i]=(0,e_.useState)(""),[a,l]=(0,e_.useState)(!1),[c,d]=(0,e_.useState)(!1),{user:s}=(0,eT.aF)(),{memos:u,isLoading:p,createMemo:_,deleteMemo:m}=useMemos(t),{trackEvent:h}=(0,ev.Ke)(),g=(0,ef.T_)(),v=(0,ef.bU)();(0,e_.useEffect)(()=>{u&&u.length>=0&&r(u.length)},[u]);let f=n.content,x=!!o&&!a,clickSendButton=async()=>{if(o.trim()&&!a){l(!0);try{var e,t;await _(o),i(""),h("click_leave_memo_btn",{content_id:f.messageId,purpose:null===(e=f.modelInfo)||void 0===e?void 0:e.displayName,is_pro_mode:(null===(t=f.modelInfo)||void 0===t?void 0:t.name)==="pro_mode",is_with_img:!!("image"in f&&f.image&&f.image.imageUrls.length>0),content_type:"chat"})}catch(e){}finally{l(!1)}}},handleDeleteMemo=async e=>{try{await m(e),(0,eq.wp)(g("feature_bookmarks.alert.delete_done"))}catch(e){}},b=(0,e_.useCallback)(e=>{"Enter"===e.key&&(_(o),i(""))},[_]);return(0,eu.BX)(eh.xu,{children:[(0,eu.tZ)(eh.Ug,{width:"100%",maxWidth:"1024px",margin:"0 auto",zIndex:2,children:(0,eu.tZ)(eh.xu,{position:"relative",paddingTop:16,maxWidth:[688,688,688,780],width:"100%",children:(0,eu.BX)(eh.kC,{width:"100%",maxWidth:"720px",height:"50px",borderRadius:"40px",border:"2px solid",borderColor:c?"$color_outline_tertiary":"transparent",backgroundColor:"$color_surface_tertiary",alignItems:"center",padding:"0 0px 0 16px",overflow:"hidden",position:"relative",children:[(0,eu.tZ)(eh.II,{flex:1,typo:"$160-14-med",backgroundColor:"transparent",color:"$color_text_primary",onChange:e=>{i(e.target.value)},value:o,placeholder:g("feature_bookmarks.memo.placeholder"),onKeyPress:b,onFocus:()=>{var e,t;d(!0),h("click_saved_memo_input_box",{content_id:f.messageId,purpose:null===(e=f.modelInfo)||void 0===e?void 0:e.displayName,is_pro_mode:(null===(t=f.modelInfo)||void 0===t?void 0:t.name)==="pro_mode",is_with_img:!!("image"in f&&f.image&&f.image.imageUrls.length>0),content_type:"chat"})},onBlur:()=>{d(!1)},css:e=>{var t;return(0,em.iv)(BookmarkMemo_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_text_disabled)}}),(0,eu.tZ)(eh.xu,{position:"absolute",right:"-5px",top:"45%",width:"38px",height:"38px",children:(0,eu.tZ)(SendButton,{isActive:x,onClick:clickSendButton,icon:(0,eu.tZ)(e$.JO,{as:eS.lA1,color:"$color_surface_tertiary",size:20})})})]})})}),(0,eu.tZ)(eh.gC,{width:"100%",maxWidth:"620px",gap:"12px",marginTop:20,children:p?(0,eu.tZ)(eu.HY,{}):u&&u.length>0?u.map(e=>(0,eu.BX)(eh.gC,{width:"100%",alignItems:"stretch",padding:"0 0",gap:"8px",marginLeft:"5px",children:[(0,eu.BX)(eh.Ug,{justifyContent:"space-between",alignItems:"center",width:"100%",children:[(0,eu.BX)(eh.Ug,{alignItems:"center",gap:"8px",children:[(0,eu.tZ)(e$.Pq,{size:20}),(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_text_secondary",children:(null==s?void 0:s.nickname)||(null==s?void 0:s.name)}),(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_text_quaternary",children:new Date(e.createdAt).toLocaleString(v,{month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})})]}),(0,eu.tZ)(eh.xu,{as:"button",padding:"4px 8px",borderRadius:"4px",backgroundColor:"transparent",children:(0,eu.tZ)(DeleteBookMarkModalWithButton,{deleteId:e._id,deleteObject:handleDeleteMemo,customTitle:g("feature_bookmarks.modal.remove.title"),customDescription:g("feature_bookmarks.modal.remove.sub_title"),fromMenu:"memo",bookmark:n})})]}),(0,eu.tZ)(eh.Ug,{alignItems:"flex-start",gap:"36px",children:(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",flex:1,color:"$color_icon_primary",children:e.content})})]},e._id)):(0,eu.tZ)(eu.HY,{})})]})};function Image_MessageImage_templateObject(){let e=(0,ep._)(["\n        aspect-ratio: ",";\n        &:hover {\n          cursor: pointer;\n          > div {\n            display: flex;\n          }\n        }\n      "]);return Image_MessageImage_templateObject=function(){return e},e}let MessageImage_MessageImage=e=>{let{url:t,onClick:n,border:r,aspectRatio:o,children:i}=e;return(0,eu.tZ)(eh.xu,{padding:"8px",borderRadius:"8px",backgroundImage:"url(".concat(t,")"),backgroundSize:"cover",border:r?"1px solid":void 0,borderColor:"$color_outline_secondary",backgroundPosition:"center",width:"100%",display:"flex",alignItems:"flex-end",justifyContent:"flex-end",css:(0,em.iv)(Image_MessageImage_templateObject(),o?"".concat(o):t_.vc?"4 / 3":"1"),onClick:n,children:i})},MessageImageModel=e=>{let{imageUrlList:t,imageLinks:n,aspectRatioList:r,selectedImageIndex:o,closeModal:i,messageImageFooter:a,onClickPrevious:l,onClickNext:c,onClickExit:d}=e,[s,u]=e_.useState(o),goLeft=()=>{s>0&&(u(s-1),null==l||l(s-1))},goRight=()=>{s<t.length-1&&(u(s+1),null==c||c(s+1))};return(0,eu.BX)(eh.xu,{width:"600px",maxWidth:"80.1587302%",maxHeight:"80.0404585%",height:"auto",children:[(0,eu.tZ)(MessageImage_MessageImage,{border:!0,url:t[s],aspectRatio:null==r?void 0:r.at(s),onClick:n?()=>{window.open(null==n?void 0:n[s],"_blank","noopener,noreferrer")}:void 0,children:null==a?void 0:a(s)}),(0,eu.tZ)(eh.xu,{width:"100%",position:"fixed",bottom:28,left:0,right:0,children:(0,eu.tZ)(eh.Ug,{width:"100%",gap:"16px",justifyContent:"center",alignItems:"center",children:t.map((e,n)=>(0,eu.tZ)(eh.zx,{onClick:()=>u(n),children:(0,eu.tZ)(eh.xu,{width:12,height:12,borderRadius:"50%",backgroundColor:e===t[s]?"$color_icon_brand":"$color_icon_disabled"})},e))})}),(0,eu.tZ)(eh.zx,{onClick:()=>{goLeft()},position:"fixed",left:20,top:"calc(50% - 48px)",style:{cursor:s===t.length-1?"not-allowed":"pointer"},children:(0,eu.tZ)(e$.JO,{as:eS.k9_,size:48,color:"$color_text_white",opacity:0===s?.3:1,style:{cursor:0===s?"not-allowed":"pointer"},onClick:()=>{goLeft()}})}),(0,eu.tZ)(eh.zx,{onClick:()=>{goRight()},position:"fixed",right:20,top:"calc(50% - 48px)",style:{cursor:s===t.length-1?"not-allowed":"pointer"},children:(0,eu.tZ)(e$.JO,{as:eS.xMl,size:48,color:"$color_text_white",opacity:s===t.length-1?.3:1})}),(0,eu.tZ)(eh.zx,{position:"fixed",top:"20px",right:"20px",onClick:()=>{null==d||d(s),i()},children:(0,eu.tZ)(e$.JO,{as:eS.S5X,size:29,color:"$color_icon_white"})})]})};function Image_MessageImageGallery_templateObject(){let e=(0,ep._)(["\n                  display: flex;\n                  width: 50%;\n                "]);return Image_MessageImageGallery_templateObject=function(){return e},e}function Image_MessageImageGallery_templateObject1(){let e=(0,ep._)(["\n                  display: grid;\n                  width: 60px;\n                  height: 60px;\n                  max-width: 100%;\n                  grid-template-columns: repeat(3, 1fr);\n                  grid-template-rows: 1fr;\n                  grid-gap: 16px;\n                "]);return Image_MessageImageGallery_templateObject1=function(){return e},e}function Image_MessageImageGallery_templateObject2(){let e=(0,ep._)(["\n            ","\n          "]);return Image_MessageImageGallery_templateObject2=function(){return e},e}let MessageImageGallery_MessageImageGallery=e=>{let t,{message:n,role:r}=e,{trackEvent:o}=(0,ev.Ke)(),[i,a]=e_.useState(0),l=n.content;if("assistant"===r){var c;t=(null===(c=l.image)||void 0===c?void 0:c.imageUrls)||[]}else"user"===r&&(t=l.userMessage.images||[]);let d=e_.useMemo(()=>"user"===r?t||[]:t.map(e=>e.url)||[],[t,r]),s=l.image&&"SKELETON"===l.image._id,u=l.referenceItems&&l.referenceItems.length>0,p=!u&&1===d.length;return 0!==d.length||s?(0,eu.tZ)(eC.CO,{renderOpener:e=>{let{openModal:t}=e;return(0,eu.BX)(eh.xu,{css:(0,em.iv)(Image_MessageImageGallery_templateObject2(),p?(0,em.iv)(Image_MessageImageGallery_templateObject()):(0,em.iv)(Image_MessageImageGallery_templateObject1())),children:[s?t_.vc?(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(eC.Od,{borderRadius:"8px",aspectRatio:"4 / 3"}),(0,eu.tZ)(eC.Od,{borderRadius:"8px",aspectRatio:"4 / 3"}),(0,eu.tZ)(eC.Od,{borderRadius:"8px",aspectRatio:"4 / 3"}),(0,eu.tZ)(eC.Od,{borderRadius:"8px",aspectRatio:"4 / 3"})]}):(0,eu.tZ)(eu.HY,{children:(0,eu.tZ)(eC.Od,{borderRadius:"8px",aspectRatio:"1"})}):null,d.map((e,n)=>(0,eu.tZ)(MessageImage_MessageImage,{url:e,onClick:()=>{a(n),t(),o("expose_img_expand",{content_id:l.assistantMessage.chatId})}},e))]})},renderContent:e=>{let{closeModal:t}=e;return(0,eu.tZ)(MessageImageModel,{imageUrlList:d,selectedImageIndex:i,closeModal:t})}}):null};function assets_ai_fast_search_extends(){return(assets_ai_fast_search_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var assets_ai_fast_search=function(e){return e_.createElement("svg",assets_ai_fast_search_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),U||(U=e_.createElement("path",{fill:"#F72F08",d:"m6.018 13.031 2.935-10.57a.515.515 0 0 1 .497-.38h7.882c.376 0 .626.39.468.731l-3.678 7.145h3.501c.445 0 .681.525.385.858L8.851 22.109c-.35.394-.996.07-.89-.447l1.963-7.988-3.407.008a.515.515 0 0 1-.499-.65"})))};function assets_ai_search_extends(){return(assets_ai_search_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var assets_ai_search=function(e){return e_.createElement("svg",assets_ai_search_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),D||(D=e_.createElement("path",{fill:"#FFBDB1",d:"M12 23.992c6.63 0 12-5.37 12-11.999C24 5.365 18.623 0 12 0S0 5.37 0 11.999s5.37 11.999 12 11.999z"})),X||(X=e_.createElement("path",{fill:"#FF7963",d:"M12 20.995c4.967 0 8.997-4.029 8.997-8.996S16.967 3.003 12 3.003s-8.997 4.03-8.997 8.996 4.03 8.996 8.997 8.996"})),J||(J=e_.createElement("path",{fill:"#FF4825",d:"M12 17.993c3.312 0 6-2.689 6-6s-2.688-6-6-6-6 2.689-6 6 2.688 6 6 6"})),z||(z=e_.createElement("path",{fill:"#F72F08",d:"M12 15.002a3.003 3.003 0 1 0 0-6.006A3 3 0 0 0 8.997 12 3 3 0 0 0 12 15.002"})),N||(N=e_.createElement("path",{fill:"url(#ai_search_svg__a)",d:"M22.392 6C20.314 2.41 16.439 0 12 0v11.999z",opacity:.5})),H||(H=e_.createElement("defs",null,e_.createElement("linearGradient",{id:"ai_search_svg__a",x1:12.243,x2:17.103,y1:11.512,y2:3.151,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#fff"}),e_.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})))))};function assets_ai_search_dark_extends(){return(assets_ai_search_dark_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var assets_ai_search_dark=function(e){return e_.createElement("svg",assets_ai_search_dark_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),G||(G=e_.createElement("g",{clipPath:"url(#ai_search_dark_svg__a)"},e_.createElement("path",{fill:"#431A11",d:"M12 23.998c6.63 0 12-5.37 12-11.999S18.63 0 12 0 0 5.376 0 12.005s5.37 11.999 12 11.999z"}),e_.createElement("path",{fill:"#7C2614",d:"M12 21.001c4.967 0 8.997-4.03 8.997-8.996S16.967 3.009 12 3.009s-8.997 4.029-8.997 8.996 4.03 8.996 8.997 8.996"}),e_.createElement("path",{fill:"#B3331A",d:"M12 17.999c3.312 0 6-2.689 6-6s-2.688-6-6-6-6 2.689-6 6 2.688 6 6 6"}),e_.createElement("path",{fill:"#F95939",d:"M12 15.002a3.003 3.003 0 1 0 0-6.006A3 3 0 0 0 8.997 12 3 3 0 0 0 12 15.002"}),e_.createElement("path",{fill:"url(#ai_search_dark_svg__b)",d:"M22.392 6.005C20.314 2.421 16.439.006 12 .006v11.999z",opacity:.4}))),W||(W=e_.createElement("defs",null,e_.createElement("linearGradient",{id:"ai_search_dark_svg__b",x1:12.243,x2:17.103,y1:11.518,y2:3.157,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#320C04"}),e_.createElement("stop",{offset:1,stopColor:"#320C04",stopOpacity:0})),e_.createElement("clipPath",{id:"ai_search_dark_svg__a"},e_.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))};function assets_gpt4o_extends(){return(assets_gpt4o_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var assets_gpt4o=function(e){return e_.createElement("svg",assets_gpt4o_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),K||(K=e_.createElement("g",{clipPath:"url(#gpt4o_svg__a)"},e_.createElement("path",{fill:"#FFBDB1",d:"m24 18.092-13.41-7.74V0L24 7.74z"}),e_.createElement("path",{fill:"#FF7963",d:"m20.468 20.063-13.41-7.74V1.97l13.41 7.74z"}),e_.createElement("path",{fill:"#FF4825",d:"m16.936 22.033-13.41-7.74V3.941l13.41 7.74z"}),e_.createElement("path",{fill:"#F72F08",d:"M13.41 24.004 0 16.264V5.906l13.41 7.74v10.358"}),e_.createElement("path",{fill:"url(#gpt4o_svg__b)",d:"m3.585 14.293 9.825 5.669v-6.31L3.585 7.978z",opacity:.5}))),V||(V=e_.createElement("defs",null,e_.createElement("linearGradient",{id:"gpt4o_svg__b",x1:9.694,x2:7.967,y1:19.267,y2:11.616,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#fff"}),e_.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})),e_.createElement("clipPath",{id:"gpt4o_svg__a"},e_.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))};function assets_gpt4o_dark_extends(){return(assets_gpt4o_dark_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var assets_gpt4o_dark=function(e){return e_.createElement("svg",assets_gpt4o_dark_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),Y||(Y=e_.createElement("g",{clipPath:"url(#gpt4o_dark_svg__a)"},e_.createElement("path",{fill:"#431A11",d:"m24 18.092-13.41-7.74V0L24 7.74z"}),e_.createElement("path",{fill:"#7C2614",d:"m20.468 20.063-13.41-7.74V1.97l13.41 7.74z"}),e_.createElement("path",{fill:"#B3331A",d:"m16.936 22.033-13.41-7.74V3.941l13.41 7.74z"}),e_.createElement("path",{fill:"#F95939",d:"M13.41 24.004 0 16.264V5.912l13.41 7.74z"}),e_.createElement("path",{fill:"url(#gpt4o_dark_svg__b)",d:"m3.585 14.293 9.825 5.669v-6.31L3.585 7.978z",opacity:.4}))),q||(q=e_.createElement("defs",null,e_.createElement("linearGradient",{id:"gpt4o_dark_svg__b",x1:12.642,x2:7.07,y1:22.004,y2:11.327,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#320C04"}),e_.createElement("stop",{offset:1,stopColor:"#320C04",stopOpacity:0})),e_.createElement("clipPath",{id:"gpt4o_dark_svg__a"},e_.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))};function assets_icon_pro_symbol_dark_extends(){return(assets_icon_pro_symbol_dark_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var assets_icon_pro_symbol_dark=function(e){return e_.createElement("svg",assets_icon_pro_symbol_dark_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),Q||(Q=e_.createElement("g",{clipPath:"url(#icon_pro_symbol_dark_svg__a)"},e_.createElement("path",{fill:"#3F008F",d:"M21.27 2.731c-1.576-1.577-5.314-.525-9.262 2.309v13.914a30.4 30.4 0 0 0 3.754-3.2c5.12-5.12 7.583-10.948 5.509-13.023"}),e_.createElement("path",{fill:"#6C09EA",d:"M2.735 2.732C4.307 1.16 8.05 2.206 11.998 5.04v13.915a30.4 30.4 0 0 1-3.754-3.2C3.124 10.635.661 4.806 2.735 2.732"}),e_.createElement("path",{fill:"#7230C5",d:"M15.754 8.246c5.12 5.12 7.583 10.948 5.509 13.023-1.577 1.577-5.314.525-9.263-2.309V5.04a30.4 30.4 0 0 1 3.754 3.2z"}),e_.createElement("path",{fill:"url(#icon_pro_symbol_dark_svg__b)",d:"M18.962 12a30.4 30.4 0 0 0-3.2-3.754 30.4 30.4 0 0 0-3.754-3.2V18.96a30.4 30.4 0 0 0 3.754-3.2 30.4 30.4 0 0 0 3.2-3.754z",opacity:.5}),e_.createElement("path",{fill:"#A863FF",d:"M8.244 8.246C3.124 13.36.661 19.189 2.735 21.263c1.578 1.577 5.315.526 9.263-2.309V5.04a30.4 30.4 0 0 0-3.754 3.2z"}))),ee||(ee=e_.createElement("defs",null,e_.createElement("linearGradient",{id:"icon_pro_symbol_dark_svg__b",x1:15.482,x2:15.482,y1:20.537,y2:7.44,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",null),e_.createElement("stop",{offset:1,stopOpacity:0})),e_.createElement("clipPath",{id:"icon_pro_symbol_dark_svg__a"},e_.createElement("path",{fill:"#fff",d:"M2 2h20v20H2z"})))))};function assets_icon_pro_symbol_light_extends(){return(assets_icon_pro_symbol_light_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var assets_icon_pro_symbol_light=function(e){return e_.createElement("svg",assets_icon_pro_symbol_light_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),et||(et=e_.createElement("path",{fill:"#DDCCF3",d:"M21.27 2.731c-1.576-1.577-5.314-.525-9.262 2.309v13.914a30.4 30.4 0 0 0 3.754-3.2c5.12-5.12 7.583-10.948 5.509-13.023"})),en||(en=e_.createElement("path",{fill:"#CFA8FF",d:"M2.735 2.732C4.307 1.16 8.05 2.206 11.998 5.04v13.915a30.4 30.4 0 0 1-3.754-3.2C3.124 10.635.661 4.806 2.735 2.732"})),er||(er=e_.createElement("path",{fill:"#B880FF",d:"M15.754 8.246c5.12 5.12 7.583 10.948 5.509 13.023-1.577 1.577-5.314.525-9.263-2.309V5.04a30.4 30.4 0 0 1 3.754 3.2z"})),eo||(eo=e_.createElement("path",{fill:"url(#icon_pro_symbol_light_svg__a)",d:"M18.962 12a30.4 30.4 0 0 0-3.2-3.754 30.4 30.4 0 0 0-3.754-3.2V18.96a30.4 30.4 0 0 0 3.754-3.2 30.4 30.4 0 0 0 3.2-3.754z",opacity:.5})),ei||(ei=e_.createElement("path",{fill:"#A863FF",d:"M8.244 8.246C3.124 13.36.661 19.189 2.735 21.263c1.578 1.577 5.315.526 9.263-2.309V5.04a30.4 30.4 0 0 0-3.754 3.2z"})),ea||(ea=e_.createElement("defs",null,e_.createElement("linearGradient",{id:"icon_pro_symbol_light_svg__a",x1:15.482,x2:15.482,y1:20.537,y2:7.44,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#fff"}),e_.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})))))};function assets_image_extends(){return(assets_image_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var public_assets_image=function(e){return e_.createElement("svg",assets_image_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),el||(el=e_.createElement("g",{clipPath:"url(#image_svg__a)"},e_.createElement("path",{fill:"#FFBDB1",d:"m2 10.002.006-4.003 3.463-2.002L22.8 14.005 22.795 18l-3.463 2.008z"}),e_.createElement("path",{fill:"#FF7963",d:"m22.8 10.002-.005-4.003-3.463-2.002L2 14.005 2.006 18l3.463 2.008z"}),e_.createElement("path",{fill:"#FF4825",d:"M8.931 1.996 12.401 0l3.462 1.996V22.01L12.4 24l-3.469-1.99z"}),e_.createElement("path",{fill:"#F72F08",d:"m12.4 8 3.463 2.002v4.002L12.4 16.006l-3.469-2.001V10z"}),e_.createElement("path",{fill:"url(#image_svg__b)",d:"M15.863 18.008 12.4 16.006l3.463-2.001z",opacity:.5}),e_.createElement("path",{fill:"url(#image_svg__c)",d:"M8.938 10.002 12.4 8 8.937 6z",opacity:.5}))),ec||(ec=e_.createElement("defs",null,e_.createElement("linearGradient",{id:"image_svg__b",x1:13.19,x2:15.916,y1:13.155,y2:18.524,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#fff"}),e_.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})),e_.createElement("linearGradient",{id:"image_svg__c",x1:11.61,x2:8.884,y1:5.149,y2:10.518,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#fff"}),e_.createElement("stop",{offset:1,stopColor:"#fff",stopOpacity:0})),e_.createElement("clipPath",{id:"image_svg__a"},e_.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))};function assets_image_dark_extends(){return(assets_image_dark_extends=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(null,arguments)}var assets_image_dark=function(e){return e_.createElement("svg",assets_image_dark_extends({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,fill:"none"},e),ed||(ed=e_.createElement("g",{clipPath:"url(#image_dark_svg__a)"},e_.createElement("path",{fill:"#431A11",d:"m2 10.002.006-4.003 3.463-2.002L22.8 14.005 22.795 18l-3.463 2.002z"}),e_.createElement("path",{fill:"#7C2614",d:"m22.8 10.002-.005-4.003-3.463-2.002L2 14.005 2.006 18l3.463 2.002z"}),e_.createElement("path",{fill:"#B3331A",d:"M8.931 1.996 12.401 0l3.462 1.996V22.01L12.4 24l-3.469-1.99z"}),e_.createElement("path",{fill:"#F95939",d:"m12.4 8 3.463 2.002v3.997L12.4 16.006l-3.469-2.007V10z"}),e_.createElement("path",{fill:"url(#image_dark_svg__b)",d:"M15.863 18.008 12.4 16.006l3.463-2.007z",opacity:.4}),e_.createElement("path",{fill:"url(#image_dark_svg__c)",d:"M8.938 10.002 12.4 8 8.937 6z",opacity:.4}))),es||(es=e_.createElement("defs",null,e_.createElement("linearGradient",{id:"image_dark_svg__b",x1:13.19,x2:15.916,y1:13.155,y2:18.524,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#320C04"}),e_.createElement("stop",{offset:1,stopColor:"#320C04",stopOpacity:0})),e_.createElement("linearGradient",{id:"image_dark_svg__c",x1:11.61,x2:8.884,y1:5.149,y2:10.518,gradientUnits:"userSpaceOnUse"},e_.createElement("stop",{stopColor:"#320C04"}),e_.createElement("stop",{offset:1,stopColor:"#320C04",stopOpacity:0})),e_.createElement("clipPath",{id:"image_dark_svg__a"},e_.createElement("path",{fill:"#fff",d:"M0 0h24v24H0z"})))))};let ModelSymbol_ModelSymbol=e=>{let{model:t}=e,{mode:n}=(0,eB.TC)(),r="dark"===n,o=(0,e_.useMemo)(()=>{switch(t){case e2.ChatModel.WRTN_SEARCH:return r?assets_ai_search_dark:assets_ai_search;case e2.ChatModel.WRTN_FAST_SEARCH:return assets_ai_fast_search;case e2.ChatModel.GPT4:return r?assets_gpt4o_dark:assets_gpt4o;case e2.ChatModel.PRO_MODE:return r?assets_icon_pro_symbol_dark:assets_icon_pro_symbol_light;case e2.ChatModel.SD3_TURBO:return r?assets_image_dark:public_assets_image;default:return r?assets_ai_search_dark:assets_ai_search}},[r,t]);return(0,eu.tZ)(o,{})};function SearchResultCard_SearchResultCard_templateObject(){let e=(0,ep._)(["\n  display: -webkit-box;\n  max-height: 40px;\n  line-height: 140%;\n  -webkit-line-clamp: 2;\n  -webkit-box-orient: vertical;\n  overflow: hidden;\n"]);return SearchResultCard_SearchResultCard_templateObject=function(){return e},e}function SearchResultCard_SearchResultCard_templateObject1(){let e=(0,ep._)(["\n      flex-shrink: 0;\n      z-index: 1;\n\n      &:hover {\n        background-color: ",";\n      }\n    "]);return SearchResultCard_SearchResultCard_templateObject1=function(){return e},e}function SearchResultCard_templateObject2(){let e=(0,ep._)(["\n      flex-shrink: 0;\n      z-index: 1;\n      cursor: pointer;\n\n      &:hover {\n        background-color: ",";\n      }\n    "]);return SearchResultCard_templateObject2=function(){return e},e}function SearchResultCard_templateObject3(){let e=(0,ep._)(["\n          flex-shrink: 0;\n        "]);return SearchResultCard_templateObject3=function(){return e},e}let nO=(0,em.iv)(SearchResultCard_SearchResultCard_templateObject()),SearchResultCard_SearchResultCard=e=>{let{searchResult:t,isSkeleton:n,index:r,onClick:o}=e,i=t.type&&"file"===t.type;return n?(0,eu.BX)(eh.gC,{gap:"8px",width:"228px",css:(0,em.iv)(SearchResultCard_templateObject3()),children:[(0,eu.tZ)(eC.Od,{width:"100%",minHeight:"20px",borderRadius:"6px"}),(0,eu.tZ)(eC.Od,{width:"100%",minHeight:"142px",borderRadius:"6px"})]}):(0,eu.tZ)(eh.gC,{width:"100%",height:"100%",minHeight:60,padding:16,gap:"10px",borderRadius:8,backgroundColor:"$color_surface_tertiary",css:e=>{var t,n;return i?(0,em.iv)(SearchResultCard_SearchResultCard_templateObject1(),null===(t=e.colors)||void 0===t?void 0:t.$color_surface_tertiary_hover):(0,em.iv)(SearchResultCard_templateObject2(),null===(n=e.colors)||void 0===n?void 0:n.$color_surface_tertiary_hover)},onClick:e=>{!i&&(e.stopPropagation(),null==o||o(),window.navigator.userAgent.toLowerCase().includes("iphone")||window.navigator.userAgent.toLowerCase().includes("android")?t.externalLink&&window.location.assign(t.externalLink):window.open(t.externalLink,"_blank","noopener noreferrer"))},children:(0,eu.BX)(eh.xu,{display:"flex",flexDirection:"column",gap:"10px",children:[(0,eu.BX)(eh.Ug,{gap:"6px",alignItems:"center",children:[(0,eu.tZ)(e=>{let{searchResult:t,index:n}=e;return t.favicon?(0,eu.tZ)("img",{style:{width:"16px",height:"16px",borderRadius:"16px"},src:t.favicon,alt:"favicon"}):"file"===t.type?(0,eu.tZ)(eh.kC,{width:"16px",height:"16px",backgroundColor:"$color_outline_accent_red",borderRadius:"100%",alignItems:"center",justifyContent:"center",children:(0,eu.tZ)(e$.JO,{as:eS.qTh,size:10,color:"$color_icon_ivory"})}):(0,eu.tZ)(eh.xu,{width:"16px",height:"16px",borderRadius:"16px",backgroundColor:"$color_surface_secondary",display:"flex",justifyContent:"center",alignItems:"center",children:(0,eu.tZ)(eh.Jd,{typo:"$100-12-semi",color:"$color_action_blue_primary",children:n+1})})},{searchResult:t,index:r}),(0,eu.tZ)(eh.Jd,{typo:"$100-12-med",color:"$color_text_tertiary",style:{flex:1,lineHeight:"normal",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:t.siteName})]}),(0,eu.tZ)(eh.Jd,{typo:"$140-14-med",color:"$color_text_primary",css:nO,children:t.title}),(0,eu.tZ)(eh.Jd,{typo:"$140-12-reg",color:"$color_text_secondary",css:nO,children:t.snippet})]})})};function SearchResultList_templateObject(){let e=(0,ep._)(["\n            cursor: ",";\n          "]);return SearchResultList_templateObject=function(){return e},e}let openUrl=(e,t)=>n=>{"file"!==e.type&&(n.stopPropagation(),window.navigator.userAgent.toLowerCase().includes("iphone")||window.navigator.userAgent.toLowerCase().includes("android")?e.externalLink&&window.location.assign(e.externalLink):window.open(e.externalLink,"_blank","noopener noreferrer"),t(e,1))},SearchResultsDisplay=e=>{let{additionalInfo:t,handleClickSearchResult:n}=e;return(0,eu.tZ)(eh.xu,{width:"100%",children:(0,eu.tZ)(eh.kC,{flexWrap:"wrap",justifyContent:"flex-start",margin:"-6px",children:t.slice(0,3).map((e,t)=>(0,eu.tZ)(eh.xu,{width:["100%","100%","calc(50% - 12px)","calc(33.33% - 12px)"],margin:"6px",children:(0,eu.tZ)(SearchResultCard_SearchResultCard,{searchResult:e,isSkeleton:!1,index:t,onClick:n(e,t)})},"".concat(e.title,"-").concat(t)))})})},CompactInfoDisplay=e=>{let{additionalInfo:t,handleClickSearchResult:n}=e;return(0,eu.tZ)(eu.HY,{children:(0,eu.tZ)(eh.Ug,{flexWrap:"wrap",gap:"8px",children:t.map(e=>(0,eu.BX)(eh.Ug,{css:(0,em.iv)(SearchResultList_templateObject(),e.externalLink?"pointer":"default"),padding:"4px 6px",backgroundColor:"$color_surface_tertiary",borderRadius:"12px",gap:"4px",alignItems:"center",justifyContent:"center",onClick:openUrl(e,n),children:[e.favicon&&(0,eu.tZ)("img",{style:{width:10,height:10,borderRadius:"50%"},src:e.favicon,alt:e.title}),"file"===e.type&&(0,eu.tZ)(eh.kC,{width:"10px",height:"10px",backgroundColor:"$color_outline_accent_red",borderRadius:"100%",alignItems:"center",justifyContent:"center",children:(0,eu.tZ)(e$.JO,{as:eS.qTh,size:8,color:"$color_icon_ivory"})}),(0,eu.tZ)(eh.Jd,{typo:"$100-12-reg",color:"$color_text_secondary",children:e.siteName})]},e.content))})})},SearchResultList=e=>{let{assistantContentInfo:t,expanded:n,additionalInfo:r,handleClickSearchResult:o}=e;return!t.isContentLong||t.isContentLong&&n?(0,eu.tZ)(SearchResultsDisplay,{additionalInfo:r,handleClickSearchResult:o}):(0,eu.tZ)(CompactInfoDisplay,{additionalInfo:r,handleClickSearchResult:o})},SummaryListItem=e=>{let{item:t}=e,[n,r]=(0,e_.useState)(!1),o=(0,ef.T_)(),i=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=null==e?void 0:e.split("\n"),a=(null==i?void 0:i.length)>r;return a&&!o?(t=i.slice(0,r).join("\n"),n=i.slice(0,r)):(t=e,n=i),{displayedContent:t,displayedContentLines:n,isContentLong:a}}(t.content,8,n);return(0,eu.tZ)(eh.gC,{gap:"12px",children:(0,eu.tZ)(eh.xu,{gap:"12px",display:"flex",children:(0,eu.tZ)(eh.gC,{gap:"12px",children:(0,eu.BX)(eh.Jd,{typo:"$100-16-med",color:"$color_text_secondary",children:[(0,eu.tZ)(tF.U,{content:i.displayedContent,handleLinkEventFactory:e=>{let{url:t,index:n}=e;return()=>({url:t,index:n})},onClickCode:()=>{}}),i.isContentLong&&!n&&(0,eu.BX)(eh.Ug,{gap:"0px",alignItems:"center",onClick:()=>r(!0),css:{cursor:"pointer",marginTop:"4px"},children:[(0,eu.tZ)(eh.Jd,{typo:"$100-14-semi",color:"$color_text_primary",children:"..."}),(0,eu.tZ)(eh.Jd,{typo:"$100-14-semi",color:"#0793F7",children:o("feature_bookmarks.more")})]})]})})})})},ReferenceItem=e=>{var t;let{item:n,key:r}=e,o=(t=n.title).length<=16?t:t.slice(0,16)+"...",i=n.title.split(".").pop().toUpperCase();return(0,eu.tZ)(eh.xu,{width:200,height:60,border:"1px solid",borderRadius:"8px",borderColor:"$color_outline_secondary",padding:"15px 12px 0",children:(0,eu.BX)(eh.Ug,{gap:"8px",children:[(0,eu.tZ)(eh.xu,{width:30,height:30,borderRadius:"15px",backgroundColor:"$color_outline_accent_red",display:"flex",alignItems:"center",justifyContent:"center",children:(0,eu.tZ)(e$.JO,{as:eS.qTh,size:16,color:"$color_icon_ivory"})}),(0,eu.BX)(eh.gC,{gap:"6px",children:[(0,eu.tZ)(eh.Jd,{color:"$color_text_secondary",typo:"$100-12-med",children:o}),(0,eu.tZ)(eh.Jd,{color:"$color_text_quaternary",typo:"$100-10-semi",children:i})]})]})},r)},UserMessageMedia=e=>{var t,n;let{bookmark:r}=e,o=r.content,i=Array.isArray(null===(t=o.userMessage)||void 0===t?void 0:t.images)&&(null===(n=o.userMessage)||void 0===n?void 0:n.images.length)>0,a=Array.isArray(o.referenceItems)&&o.referenceItems.length>0,l=o.referenceItems||[];return i||a?(0,eu.tZ)(eu.HY,{children:(0,eu.BX)(eh.Ug,{gap:"8px",children:[a&&l.map((e,t)=>(0,eu.tZ)(ReferenceItem,{item:e},t)),i&&(0,eu.tZ)(MessageImageGallery_MessageImageGallery,{message:r,role:"user"})]})}):null};function BookmarkMessage_templateObject(){let e=(0,ep._)(["\n        border: 1px solid ",";\n\n        ","\n      "]);return BookmarkMessage_templateObject=function(){return e},e}function BookmarkMessage_templateObject1(){let e=(0,ep._)(["\n          width: 100%;\n          height: 1px;\n          border-bottom: 1px solid ",";\n          opacity: 0.5;\n        "]);return BookmarkMessage_templateObject1=function(){return e},e}let BookmarkMessage=e=>{var t,n,r,o,i,a;let l,{bookmark:c,onToggleSaved:d,onToggleMemorized:s}=e,u=(0,ef.T_)(),p=(0,ef.bU)(),_="message"!==c.type&&"blog"!==c.type&&"cover-letter"!==c.type&&"summary"!==c.type&&"coding-task"!==c.type,m="blog"===c.type,h="cover-letter"===c.type,g="message"===c.type,v="summary"===c.type,f="coding-task"===c.type;if(g)l=c.content;else if(m)l=c.content;else if(h)l=c.content;else if(_)l=c.content;else if(v)l=c.content;else if(f)l=c.content;else throw Error("Unknown bookmark type");let[x,b]=(0,e_.useState)(!1),[C,y]=(0,e_.useState)(l.memoCount||0),[k,w]=(0,e_.useState)(!1),{trackEvent:Z}=(0,ev.Ke)(),I=(0,e_.useRef)(!1);(0,e_.useEffect)(()=>{var e,t;_||Z("expose_saved_content",{content_id:l.messageId,purpose:null===(e=l.modelInfo)||void 0===e?void 0:e.displayName,is_pro_mode:(null===(t=l.modelInfo)||void 0===t?void 0:t.name)==="pro_mode",is_with_img:!!("image"in l&&l.image&&l.image.imageUrls.length>0),content_type:"chat"})},[]);let O=(0,e_.useCallback)(()=>{w(e=>!e),I.current=!0},[]);(0,e_.useEffect)(()=>{if(!_&&I.current){var e,t;Z("click_saved_content_more_btn",{content_id:l.messageId,purpose:null===(e=l.modelInfo)||void 0===e?void 0:e.displayName,is_pro_mode:(null===(t=l.modelInfo)||void 0===t?void 0:t.name)==="pro_mode",is_with_img:!!("image"in l&&l.image&&l.image.imageUrls.length>0),content_type:"chat"}),I.current=!1}},[k,l]);let S=(0,e_.useCallback)(e=>{y(e)},[]);if(_)return;let B="assistantMessage"in l&&(null===(t=l.assistantMessage)||void 0===t?void 0:t.searchResult)||[],getDisplayedContent=function(e){let t,n,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=null==e?void 0:e.split("\n"),a=(null==i?void 0:i.length)>r;return a&&!o?(t=i.slice(0,r).join("\n"),n=i.slice(0,r)):(t=e,n=i),{displayedContent:t,displayedContentLines:n,isContentLong:a}},$=getDisplayedContent((g&&"assistantMessage"in l?null===(n=l.assistantMessage)||void 0===n?void 0:n.content:"answer"in l?l.answer:"")||"",8,k),M=getDisplayedContent((g&&"userMessage"in l?null===(r=l.userMessage)||void 0===r?void 0:r.content:"question"in l?l.question:"")||"",1,k),handelToggleMemorized=e=>{var t,n;s(e);let r=l.memorized?u("feature_bookmarks.alert.memory_remove"):u("feature_bookmarks.alert.memory_add");(0,eq.wp)(r),Z("click_feed_wrtn_btn",{content_id:l.messageId,purpose:null===(t=l.modelInfo)||void 0===t?void 0:t.displayName,is_pro_mode:(null===(n=l.modelInfo)||void 0===n?void 0:n.name)==="pro_mode",is_with_img:"image"in l&&!!l.image&&l.image.imageUrls.length>0,product_type:"saved",content_type:"chat",last_status:l.memorized?"forget":"remember"})};return(0,eu.BX)(eh.xu,{width:"100%",maxWidth:"680px",backgroundColor:"$color_bg_primary",borderRadius:"8px",padding:"26px",marginY:"12px",css:e=>{var t;return(0,em.iv)(BookmarkMessage_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_secondary,l.memorized&&"\n          position: relative;\n          border: 1px solid #F72F08;\n          \n          &::before {\n            content: '';\n            position: absolute;\n            top: 0;\n            right: 0;\n            bottom: 0;\n            left: 0;\n            background: \n              linear-gradient(to right, rgba(247, 47, 8, 0.03), transparent 15px),\n              linear-gradient(to left, rgba(247, 47, 8, 0.03), transparent 15px),\n              linear-gradient(to bottom, rgba(247, 47, 8, 0.03), transparent 15px),\n              linear-gradient(to top, rgba(247, 47, 8, 0.03), transparent 15px);\n            pointer-events: none;\n          }\n        ")},children:[(0,eu.BX)(eh.Ug,{justifyContent:"space-between",alignItems:"start",marginBottom:"8px",children:[(0,eu.BX)(eh.Ug,{alignItems:"center",gap:"8px",children:[((e,t)=>{switch(e){case"blog":return(0,eu.tZ)(e$.JO,{as:e=>(0,eu.tZ)(e$.o3,{...e}),size:24});case"cover-letter":return(0,eu.tZ)(e$.JO,{as:e=>(0,eu.tZ)(e$.$4,{...e}),size:24});case"summary":return(0,eu.tZ)(e$.JO,{as:e=>(0,eu.tZ)(e$.TD,{...e}),size:24});case"coding-task":return(0,eu.tZ)(e$.JO,{as:e=>(0,eu.tZ)(e$.DL,{...e}),size:24});default:return(null==t?void 0:t.name)?(0,eu.tZ)(ModelSymbol_ModelSymbol,{model:t.name}):null}})(c.type,l.modelInfo),(0,eu.BX)(eh.gC,{gap:"4px",children:[(0,eu.tZ)(eh.Jd,{typo:"$100-14-semi",color:"$color_text_primary",children:null===(o=l.modelInfo)||void 0===o?void 0:o.displayName}),(0,eu.tZ)(eh.Jd,{typo:"$100-12-med",color:"$color_text_tertiary",children:new Date(l.createdAt).toLocaleString(p,{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit",hour12:!1})})]})]}),(0,eu.tZ)(DeleteBookMarkModalWithButton,{deleteId:null!==(a=l.messageId)&&void 0!==a?a:l._id,deleteObject:(e,t)=>{d(e,t),(0,eq.wp)(u("feature_bookmarks.alert.delete_done"))},customTitle:u("feature_bookmarks.modal.memory.title"),customDescription:u.rich("feature_bookmarks.modal.memory.sub_title",{br:()=>(0,eu.tZ)("br",{})}),fromMenu:"content",bookmark:c})]}),!m&&!v&&(0,eu.tZ)(eh.gC,{gap:"8px",children:(0,eu.BX)(eu.HY,{children:[!h&&!f&&(0,eu.tZ)(UserMessageMedia,{bookmark:c}),(0,eu.tZ)(eh.Jd,{typo:"$100-18-bold",color:"$color_text_primary",children:null==M?void 0:null===(i=M.displayedContentLines)||void 0===i?void 0:i.map((e,t)=>(0,eu.tZ)(eh.Jd,{marginTop:2,children:e},t))})]})}),(0,eu.BX)(eh.gC,{gap:"2px",alignItems:"flex-start",marginTop:16,children:[m&&(0,eu.tZ)(BlogListItem,{item:c}),v&&(0,eu.tZ)(SummaryListItem,{item:l}),!m&&!v&&(0,eu.BX)(eh.xu,{width:"100%",children:[(0,eu.tZ)(tF.U,{content:$.displayedContent,handleLinkEventFactory:e=>{let{url:t,index:n}=e;return()=>({url:t,index:n})},onClickCode:()=>(0,eq.wp)(u("common.alert.copy_code_success"))}),(0,eu.tZ)(MessageImageGallery_MessageImageGallery,{message:c,role:"assistant"})]}),(M.isContentLong||$.isContentLong)&&!k&&(0,eu.BX)(eh.Ug,{gap:"0px",alignItems:"center",onClick:O,css:{cursor:"pointer",marginTop:"4px"},children:[(0,eu.tZ)(eh.Jd,{typo:"$100-14-semi",color:"$color_text_primary",children:"..."}),(0,eu.tZ)(eh.Jd,{typo:"$100-14-semi",color:"#0793F7",children:u("feature_bookmarks.more")})]})]}),!m&&!h&&!v&&(0,eu.tZ)(eh.xu,{padding:"20px 0 0 0",children:(0,eu.tZ)(SearchResultList,{assistantContentInfo:$,expanded:k,additionalInfo:B,handleClickSearchResult:()=>()=>{Z("click_chat_recommend_link",{content_id:l.messageId})}})}),(0,eu.tZ)(eh.xu,{padding:"0 20px 20px",css:e=>{var t;return(0,em.iv)(BookmarkMessage_templateObject1(),null===(t=e.colors)||void 0===t?void 0:t.$color_outline_tertiary)}}),(0,eu.BX)(eh.xu,{width:"100%",padding:"20px 0 0 0",children:[(0,eu.BX)(eh.Ug,{justifyContent:"space-between",width:"100%",alignItems:"center",children:[(0,eu.tZ)(eh.zx,{onClick:()=>{var e,t;_||(b(!x),Z("click_leave_saved_memo_btn",{content_id:l.messageId,purpose:null===(e=l.modelInfo)||void 0===e?void 0:e.displayName,is_pro_mode:(null===(t=l.modelInfo)||void 0===t?void 0:t.name)==="pro_mode",is_with_img:"image"in l&&!!l.image&&l.image.imageUrls.length>0,content_type:"chat"}))},children:(0,eu.BX)(eh.Ug,{alignItems:"center",gap:"4px",children:[(0,eu.tZ)(e$.JO,{as:eS.MQJ,size:16,color:"$color_icon_primary"}),(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_icon_primary",children:u("feature_bookmarks.add_memo")}),(0,eu.tZ)(eh.Jd,{color:"#0793F7",children:C})]})}),(0,eu.tZ)(eh.zx,{onClick:()=>handelToggleMemorized(l._id),children:(0,eu.BX)(eh.Ug,{alignItems:"center",gap:"4px",children:[(0,eu.tZ)(e$.JO,{as:l.memorized?e$.dy:e$.Md,size:16}),(0,eu.tZ)(eh.Jd,{typo:"$100-14-semi",color:"#F72F08",children:l.memorized?u("feature_bookmarks.memo.saved"):u("feature_bookmarks.memo.unsaved")})]})})]}),x&&(0,eu.tZ)(eh.xu,{width:"100%",marginTop:"10px",children:(0,eu.tZ)(MessageWithMemo,{bookmarkId:l._id||"",bookmark:c,onMemoCountChange:S})})]})]})};function BookmarksList_templateObject(){let e=(0,ep._)(["\n        display: flex;\n        justify-content: center;\n        align-items: center;\n      "]);return BookmarksList_templateObject=function(){return e},e}let BookmarksList=e=>{let{bookmarks:t,isLoading:n,isError:r,isSearch:o,onToggleSaved:i,onToggleMemorized:a}=e,l=(0,ef.T_)(),CenteredBox=e=>{let{children:t}=e;return(0,eu.tZ)(eh.xu,{width:"100%",height:"60vh",backgroundColor:"$color_bg_screen",css:(0,em.iv)(BookmarksList_templateObject()),children:t})};return n?(0,eu.tZ)(eu.HY,{}):r?(0,eu.tZ)(CenteredBox,{children:(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_text_tertiary",children:l("feature_bookmarks.fetch_error")})}):(null==t?void 0:t.length)===0?(0,eu.tZ)(CenteredBox,{children:(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:"$color_text_tertiary",children:l("feature_bookmarks.empty_list")})}):(0,eu.BX)(eh.xu,{width:"100%",children:[o&&(0,eu.tZ)(eh.Jd,{marginTop:16,typo:"$100-16-bold",color:"$color_text_primary",children:l("feature_bookmarks.search_results",{count:t.length})}),(0,eu.tZ)(eh.gC,{width:"100%",backgroundColor:"$color_bg_screen",alignItems:"center",children:t.map(e=>(0,eu.tZ)(BookmarkMessage,{bookmark:e,onToggleSaved:i,onToggleMemorized:a},e.content._id))})]})};function BookmarksSearch_templateObject(){let e=(0,ep._)(["\n          &::placeholder {\n            color: ",";\n          }\n\n          &::-ms-clear,\n          &::-ms-reveal {\n            display: none;\n          }\n          &::-webkit-search-decoration,\n          &::-webkit-search-cancel-button,\n          &::-webkit-search-results-button,\n          &::-webkit-search-results-decoration {\n            display: none;\n          }\n        "]);return BookmarksSearch_templateObject=function(){return e},e}let BookmarksSearch=e=>{let{placeholder:t,onSearch:n}=e,[r,o]=(0,e_.useState)(""),[i,a]=(0,e_.useState)(!1),[l,c]=(0,e_.useState)(!1),{trackEvent:d}=(0,ev.Ke)(),s=(0,e_.useCallback)(e=>{o(e.target.value),""===e.target.value?a(!1):a(!0)},[]),u=(0,e_.useCallback)(e=>{n(r,e)},[n,r]),p=(0,e_.useCallback)(e=>{"Enter"===e.key&&u(!0)},[u]);return(0,e_.useEffect)(()=>{""===r&&(u(!1),a(!1))},[r,u]),(0,eu.BX)(eh.Ug,{width:"100%",maxWidth:"680px",height:"50px",px:"13px",border:"1px solid",borderRadius:"12px",borderColor:l?"$color_outline_secondary":"$color_outline_tertiary",backgroundColor:"$color_surface_ivory",gap:"10px",alignItems:"center",marginTop:"20px",children:[(0,eu.tZ)(eh.zx,{display:"flex",justifyContent:"center",alignItems:"center",onClick:()=>u(!1),children:(0,eu.tZ)(e$.JO,{as:eS.hsj,color:"$color_icon_tertiary",size:20})}),(0,eu.tZ)(eh.II,{flex:1,typo:"$100-16-med",color:"$color_text_primary",backgroundColor:"transparent",css:e=>{var t;return(0,em.iv)(BookmarksSearch_templateObject(),null===(t=e.colors)||void 0===t?void 0:t.$color_text_textfield_disabled)},type:"search",placeholder:t,value:r,onChange:s,onKeyPress:p,onFocus:()=>{d("click_saved_search_input_box"),c(!0)},onBlur:()=>{c(!1)}}),i&&(0,eu.tZ)(eh.zx,{marginTop:1,onClick:()=>{o(""),d("click_saved_search_query_delete_btn",{input_query:r})},children:(0,eu.tZ)(e$.Of,{})})]})};function Category_CarouselScrollButton_templateObject(){let e=(0,ep._)(["\n          background: ",";\n        "]);return Category_CarouselScrollButton_templateObject=function(){return e},e}function Category_CarouselScrollButton_templateObject1(){let e=(0,ep._)(["\n          ","\n\n          &:hover {\n            background-color: ",";\n          }\n        "]);return Category_CarouselScrollButton_templateObject1=function(){return e},e}let CarouselScrollButton_CarouselScrollButton=e=>{let{onClick:t,direction:n,width:r="91px",height:o="100%",scrollButtonOffset:i}=e,a="left"===n?"90deg":"270deg";return(0,eu.tZ)(eh.xu,{width:r,height:o,position:"absolute",top:"0px",right:"right"===n?"-1px":void 0,left:"left"===n?"-1px":void 0,zIndex:2,css:e=>(0,em.iv)(Category_CarouselScrollButton_templateObject(),"dark"===e.mode?"linear-gradient(".concat(a,", #1A1918 0%, rgba(26, 25, 24, 0.00) 100%)"):"linear-gradient(".concat(a,", #FFF 0%, rgba(255, 255, 255, 0.00) 100%)")),children:(0,eu.tZ)(eh.zx,{position:"absolute",right:"right"===n?"0":void 0,left:"left"===n?"0":void 0,borderRadius:"50%",border:"1px solid",borderColor:"$color_outline_secondary",width:"36px",height:"36px",display:"flex",justifyContent:"center",alignItems:"center",onClick:()=>null==t?void 0:t(),backgroundColor:"$color_surface_tertiary",zIndex:3,css:e=>(0,em.iv)(Category_CarouselScrollButton_templateObject1(),i?"":"transform: translateY(-50%);",(0,eh.JH)({theme:e,overlayColor:"$color_surface_hover",backgroundColor:"$color_surface_tertiary"})),children:(0,eu.tZ)(e$.JO,{as:"left"===n?eS.k9_:eS.xMl,size:24,color:"$color_icon_secondary"})})})};function Category_CarouselContainer_templateObject(){let e=(0,ep._)(["\n          -ms-overflow-style: none; /* IE and Edge */\n          scrollbar-width: none; /* Firefox */\n\n          ::-webkit-scrollbar {\n            display: none; /* Chrome, Safari, Opera*/\n          }\n        "]);return Category_CarouselContainer_templateObject=function(){return e},e}let CarouselContainer_CarouselContainer=e=>{var t;let{renderContent:n,scrollOffset:r=350,scrollButtonOffset:o,containerProps:i,disableButton:a,...l}=e,c=(0,e_.useRef)(null),d=(0,e_.useRef)(null),[s,u]=(0,e_.useState)(!1),[p,_]=(0,e_.useState)(!0),handleScroll=()=>{if(!c.current)return;let e=c.current.scrollLeft>0,t=c.current.scrollLeft+c.current.clientWidth+1<c.current.scrollWidth;u(e),_(t)},handleScrollFactory=e=>{var t;let n="left"===e?-r:r;null===(t=c.current)||void 0===t||t.scrollBy({left:n,behavior:"smooth"}),handleScroll()};return(0,e_.useEffect)(()=>{let e=eU()(()=>{c.current&&handleScroll()},50);return e(),window.addEventListener("resize",e),()=>window.removeEventListener("resize",e)},[c,null==c?void 0:null===(t=c.current)||void 0===t?void 0:t.clientWidth]),(0,e_.useEffect)(()=>{handleScroll()},[c,n]),(0,eu.BX)(eh.xu,{width:"100%",position:"relative",...i,children:[s&&!a&&(0,eu.tZ)(CarouselScrollButton_CarouselScrollButton,{direction:"left",onClick:()=>{handleScrollFactory("left")},width:"61px",scrollButtonOffset:o}),(0,eu.tZ)(eh.Ug,{width:"100%",overflowX:"scroll",overflowY:"hidden",ref:c,css:(0,em.iv)(Category_CarouselContainer_templateObject()),onScroll:handleScroll,children:(0,eu.tZ)(eh.Ug,{width:"fit-content",ref:d,...l,children:n()})}),p&&!a&&(0,eu.tZ)(CarouselScrollButton_CarouselScrollButton,{direction:"right",onClick:()=>{handleScrollFactory("right")},width:"61px",scrollButtonOffset:o})]})};function CategoryChip_templateObject(){let e=(0,ep._)(["\n        &:hover {\n          cursor: pointer;\n          background-color: ",";\n        }\n      "]);return CategoryChip_templateObject=function(){return e},e}function CategoryChip_templateObject1(){let e=(0,ep._)(["\n          white-space: nowrap;\n        "]);return CategoryChip_templateObject1=function(){return e},e}function CategoryChip_templateObject2(){let e=(0,ep._)(["\n        &:hover {\n          cursor: pointer;\n          background-color: ",";\n        }\n      "]);return CategoryChip_templateObject2=function(){return e},e}function CategoryChip_templateObject3(){let e=(0,ep._)(["\n          white-space: nowrap;\n        "]);return CategoryChip_templateObject3=function(){return e},e}let CategoryChip=e=>{let{categoryId:t,category:n,isSelected:r,onClick:o}=e;return"memorized"===t?(0,eu.tZ)(eh.xu,{minWidth:"fit-content",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"20px",p:"10px 12px",border:"1px solid",borderColor:"#F72F08",backgroundColor:r?"#F72F08":"$color_bg_elevated_primary",onClick:o,css:(0,em.iv)(CategoryChip_templateObject(),r?"#F72F08":"rgba(247, 47, 8, 0.05)"),children:(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:r?"$color_text_ivory":"#F72F08",css:(0,em.iv)(CategoryChip_templateObject1()),children:n})},n):(0,eu.tZ)(eh.xu,{minWidth:"fit-content",display:"flex",justifyContent:"center",alignItems:"center",borderRadius:"20px",p:"10px 12px",border:"1px solid",borderColor:r?"none":"$color_outline_tertiary",backgroundColor:r?"$color_surface_chat":"$color_bg_elevated_primary",onClick:o,css:(0,em.iv)(CategoryChip_templateObject2(),r?"var(--color_surface_chat)":"rgba(135, 133, 127, 0.12)"),children:(0,eu.tZ)(eh.Jd,{typo:"$100-14-med",color:r?"$color_text_ivory":"$color_text_tertiary",css:(0,em.iv)(CategoryChip_templateObject3()),children:n})},n)};function CategorySelectorWrapper_templateObject(){let e=(0,ep._)(["\n        transition: top 0.3s;\n      "]);return CategorySelectorWrapper_templateObject=function(){return e},e}let CategorySelectorWrapper=e=>{let{scrollRef:t,children:n}=e,[r,o]=e_.useState(0),[i,a]=e_.useState(!0);return e_.useEffect(()=>{let e=t.current;if(!e)return;let handleScroll=()=>{let t=e.scrollTop;a(r<t),o(t<=0?0:t)};return e.addEventListener("scroll",handleScroll,{passive:!0}),()=>e.removeEventListener("scroll",handleScroll)},[r]),(0,eu.tZ)(eh.gC,{width:"100%",pb:"8px",position:"sticky",top:i?"0px":"48px",zIndex:4,backgroundColor:"$color_surface_ivory",alignItems:"center",css:(0,em.iv)(CategorySelectorWrapper_templateObject()),children:n})},BookmarksHome=()=>{let[e,t]=(0,e_.useState)("all"),[n,r]=(0,e_.useState)(""),{trackEvent:o}=(0,ev.Ke)(),[i,a]=(0,e_.useState)(!1),l=(0,ef.T_)(),c=(0,ef.bU)(),{flag:d}=(0,eR.T6)("fe-web-codingTask-feature"),s=e_.useRef(null),{bookmarks:u,isLoading:p,isError:_,toggleSaved:m,toggleBookmarkMemorized:h}=useBookmarks({category:"all"!==e?e:void 0,search:n});(0,e_.useEffect)(()=>{o("view_saved_home")},[]),(0,e_.useEffect)(()=>{""===n?a(!1):a(!0)},[n]);let g=[{_id:"all",name:l("feature_bookmarks.category.all"),availableLocale:["ko-KR","ja-JP"]},{_id:"memorized",name:l("feature_bookmarks.category.memorized"),availableLocale:["ko-KR","ja-JP"]},{_id:"WRTN_SEARCH",name:l("feature_bookmarks.category.wrtn_search"),availableLocale:["ko-KR","ja-JP"]},{_id:"FAST_AI_SEARCH",name:l("feature_bookmarks.category.fast_ai_search"),availableLocale:["ko-KR","ja-JP"]},{_id:"SD3_TURBO",name:l("feature_bookmarks.category.sd3_turbo"),availableLocale:["ko-KR","ja-JP"]},{_id:"GPT4",name:l("feature_bookmarks.category.gpt4"),availableLocale:["ko-KR","ja-JP"]},{_id:"PRO_MODE",name:l("feature_bookmarks.category.pro_mode"),availableLocale:["ko-KR","ja-JP"]},{_id:"BLOG",name:l("feature_bookmarks.category.blog"),availableLocale:["ko-KR","ja-JP"]},{_id:"COVER-LETTER",name:l("feature_bookmarks.category.cover_letter"),availableLocale:["ko-KR","ja-JP"]},{_id:"SUMMARY",name:l("feature_bookmarks.category.summary"),availableLocale:["ko-KR"]}],v=d?[...g,{_id:"CODING-TASK",name:l("feature_bookmarks.category.coding_task"),availableLocale:["ko-KR"]}]:g,onSelectCategory=n=>{t(n._id),o("click_saved_search_filter_btn",{filter:n._id,last_filter:e})},f=(0,e_.useCallback)((t,n)=>{r(t),o("search_saved",{input_query:t,input_filter:e,method:n?"enter":"btn_click"})},[]);return(0,eu.BX)(eh.gC,{width:"100%",children:[(0,eu.tZ)(tj.m,{title:l("feature_bookmarks.saved")}),(0,eu.tZ)(eh.xu,{width:"100%",display:"flex",justifyContent:"center",height:"calc(100vh - 96px)",overflow:"auto",children:(0,eu.BX)(eh.gC,{width:"100%",maxWidth:"680px",children:[(0,eu.tZ)(eh.xu,{padding:"0 20px",children:(0,eu.tZ)(BookmarksSearch,{placeholder:l("feature_bookmarks.search.placeholder"),onSearch:f})}),(0,eu.tZ)(eh.xu,{padding:"10px 20px 0 20px",width:"100%",children:(0,eu.tZ)(CategorySelectorWrapper,{scrollRef:s,children:(0,eu.tZ)(CarouselContainer_CarouselContainer,{gap:"8px",scrollButtonOffset:8,renderContent:()=>(0,eu.tZ)(eu.HY,{children:v.filter(e=>e.availableLocale.includes(c)).map(t=>(0,eu.tZ)(CategoryChip,{categoryId:t._id,category:t.name,onClick:()=>onSelectCategory(t),isSelected:t._id===e},t._id))})})})}),(0,eu.tZ)(eh.xu,{flex:1,padding:"0 20px 20px",width:"100%",children:(0,eu.tZ)(BookmarksList,{bookmarks:u||[],isLoading:p,isError:_,isSearch:i,onToggleSaved:m,onToggleMemorized:h})})]})})]})},BookmarksPage=()=>(0,eu.tZ)(BookmarksProvider,{children:(0,eu.tZ)(BookmarksLayout,{children:(0,eu.tZ)(BookmarksHome,{})})}),getTrendAiSearchList=e=>ek.Np.William.get("/trend-ai-search",e),getTrendAiSearchKey=(e,t)=>0===e?["/trend-ai-search",String(e)]:t?["/trend-ai-search",String(e),t.nextCursor]:null,useInfiniteTrendAiSearchList=()=>{let{data:e,setSize:t,isLoading:n}=(0,eI.g_)(getTrendAiSearchKey,async e=>await getTrendAiSearchList({params:{limit:4,...e?{cursor:e[2]}:{}}}),{fallback:[]});return{data:e,setSize:t,isLoading:n}},useTrendAiSearchList=function(){let{limit:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{limit:5},{data:t,isLoading:n}=(0,eI.dH)("/trend-ai-search",()=>getTrendAiSearchList({params:{limit:e}}),{fallback:[],revalidateOnFocus:!1,revalidateIfStale:!1,revalidateOnReconnect:!1});return{data:t,isLoading:n}};var nS=n(72975);let TrendAiSearchItemSkeleton=()=>(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(eh.xu,{width:"60px",height:"60px",borderRadius:"8px",border:"1px solid",borderColor:"$color_outline_tertiary",flex:"0 0 auto",overflow:"hidden",children:(0,eu.tZ)(eC.Od,{})}),(0,eu.BX)(eh.gC,{gap:"10px",width:"100%",children:[(0,eu.tZ)(eC.Od,{height:"22px"}),(0,eu.tZ)(eC.Od,{height:"44px"}),(0,eu.tZ)(eC.Od,{width:"60px",height:"16px"})]})]});function TrendAiSearchItem_templateObject(){let e=(0,ep._)(["\n        &:first-of-type {\n          padding-top: 0;\n        }\n      "]);return TrendAiSearchItem_templateObject=function(){return e},e}function TrendAiSearchItem_templateObject1(){let e=(0,ep._)(["\n                overflow: hidden;\n                text-overflow: ellipsis;\n                display: -webkit-box;\n                -webkit-line-clamp: 2;\n                -webkit-box-orient: vertical;\n              "]);return TrendAiSearchItem_templateObject1=function(){return e},e}function TrendAiSearchItem_templateObject2(){let e=(0,ep._)(["\n                overflow: hidden;\n                text-overflow: ellipsis;\n                display: -webkit-box;\n                -webkit-line-clamp: 2;\n                -webkit-box-orient: vertical;\n              "]);return TrendAiSearchItem_templateObject2=function(){return e},e}let TrendAiSearchItem=e=>{let{item:t,isLoading:n,index:r}=e,{getFormatUpdateAt:o}=(0,eZ.xh)(),{postMessage:i}=(0,eg.sW)(),a=n||!t,{trackEvent:l}=(0,ev.Ke)(),appNavigateToDetailPage=e=>{l("click_trend_card",{index:r,trend_id:e,trend_title:null==t?void 0:t.title,section_order:4}),i({type:"navigate",payload:{screen:"trend_ai_search_detail",params:{trendId:e},type:"push"}})};return(0,eu.tZ)(eh.Ug,{onClick:a?void 0:()=>appNavigateToDetailPage(t._id),gap:"12px",padding:"16px 0",borderBottom:"1px solid",borderColor:"$color_divider_secondary",css:(0,em.iv)(TrendAiSearchItem_templateObject()),children:a?(0,eu.tZ)(TrendAiSearchItemSkeleton,{}):(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(eh.xu,{width:"60px",height:"60px",borderRadius:"8px",border:"1px solid",borderColor:"$color_outline_tertiary",flex:"0 0 auto",overflow:"hidden",children:(0,eu.tZ)("img",{alt:t.title,src:t.thumbnail,width:"100%",height:"100%"})}),(0,eu.BX)(eh.gC,{gap:"10px",width:"100%",children:[(0,eu.tZ)(eh.Jd,{typo:"$140-16-semi",color:"$color_text_primary",css:(0,em.iv)(TrendAiSearchItem_templateObject1()),children:t.title}),(0,eu.tZ)(eh.Jd,{typo:"$160-14-med",color:"$color_text_primary",css:(0,em.iv)(TrendAiSearchItem_templateObject2()),children:t.summary}),(0,eu.BX)(eh.Ug,{gap:"4px",alignItems:"center",children:[(0,eu.tZ)(e$.JO,{as:eS.Ar$,size:16,color:"$color_icon_tertiary"}),(0,eu.tZ)(eh.Jd,{typo:"$110-12-med",color:"$color_text_tertiary",children:o(new Date(t.createdAt))})]})]})]})})},TrendAiSearchList=e=>{var t;let{infinite:n=!1}=e,{trackEvent:r}=(0,ev.Ke)(),{data:o,setSize:i,isLoading:a}=useInfiniteTrendAiSearchList(),l=(null==o?void 0:o.flatMap(e=>e.trendAiSearchList))||[],c=(null==o?void 0:null===(t=o[o.length-1])||void 0===t?void 0:t.nextCursor)||!1,d=n?l.slice(1):l,[s,u]=(0,nS.YD)({triggerOnce:!0,threshold:0});return(e_.useEffect(()=>{u&&c&&i(e=>e+1)},[u,c,i]),e_.useEffect(()=>{(null==d?void 0:d.length)>0&&r("view_trend_card",{content:{...null==d?void 0:d.map(e=>e._id)},section_order:4})},[d,r]),eg.sk)?null:(0,eu.BX)(eh.gC,{children:[a?Array.from({length:2}).map((e,t)=>(0,eu.tZ)(TrendAiSearchItem,{index:t,isLoading:a},t)):null==d?void 0:d.map((e,t)=>(0,eu.tZ)(TrendAiSearchItem,{index:t,item:e},t)),n&&!a&&(0,eu.tZ)(eh.xu,{width:"100%",height:"1px",ref:s}),n&&!c&&(0,eu.tZ)(eh.xu,{width:"100%",height:"50px"})]})},TrendAiSearchListHeader=()=>{let e=(0,ef.T_)("chat.trend_ai"),{postMessage:t}=(0,eg.sW)(),{trackEvent:n}=(0,ev.Ke)();return(0,eu.BX)(eh.Ug,{justifyContent:"space-between",children:[(0,eu.tZ)(eh.Jd,{typo:"$140-18-semi",color:"$color_text_primary",children:e("title")}),(0,eu.tZ)(eh.zx,{onClick:()=>{n("click_more_btn",{section_name:"trendAiSearch"}),t({type:"navigate",payload:{screen:"trend_ai_search_all",params:{},type:"push"}})},children:(0,eu.tZ)(e$.JO,{as:eS.xMl,size:24,color:"$color_action_blue_primary"})})]})},AppTrendAiSearch=()=>(0,eu.BX)(eh.gC,{width:"100%",gap:"14px",px:"20px",children:[(0,eu.tZ)(TrendAiSearchListHeader,{}),(0,eu.tZ)(TrendAiSearchList,{})]});function TrendAiSearchThumbnailSkeleton_templateObject(){let e=(0,ep._)(["\n        aspect-ratio: 16 / 9;\n      "]);return TrendAiSearchThumbnailSkeleton_templateObject=function(){return e},e}let TrendAiSearchThumbnailSkeleton=()=>(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(eh.xu,{borderRadius:"12px",border:"1px solid",borderColor:"$color_outline_tertiary",overflow:"hidden",css:(0,em.iv)(TrendAiSearchThumbnailSkeleton_templateObject()),children:(0,eu.tZ)(eC.Od,{})}),(0,eu.BX)(eh.gC,{gap:"10px",children:[(0,eu.tZ)(eC.Od,{height:"22px"}),(0,eu.tZ)(eC.Od,{height:"44px"}),(0,eu.tZ)(eC.Od,{width:"60px",height:"16px"})]})]});function TrendAiSearchThumbnail_templateObject(){let e=(0,ep._)(["\n              aspect-ratio: 16 / 9;\n            "]);return TrendAiSearchThumbnail_templateObject=function(){return e},e}function TrendAiSearchThumbnail_templateObject1(){let e=(0,ep._)(["\n                overflow: hidden;\n                text-overflow: ellipsis;\n                display: -webkit-box;\n                -webkit-line-clamp: 2;\n                -webkit-box-orient: vertical;\n              "]);return TrendAiSearchThumbnail_templateObject1=function(){return e},e}function TrendAiSearchThumbnail_templateObject2(){let e=(0,ep._)(["\n                overflow: hidden;\n                text-overflow: ellipsis;\n                display: -webkit-box;\n                -webkit-line-clamp: 2;\n                -webkit-box-orient: vertical;\n              "]);return TrendAiSearchThumbnail_templateObject2=function(){return e},e}let TrendAiSearchThumbnail=()=>{let{getFormatUpdateAt:e}=(0,eZ.xh)(),{postMessage:t}=(0,eg.sW)(),{data:n,isLoading:r}=useTrendAiSearchList({limit:1}),o=null==n?void 0:n.trendAiSearchList[0],i=r||!o,appNavigateToDetailPage=e=>{t({type:"navigate",payload:{screen:"trend_ai_search_detail",params:{trendId:e},type:"push"}})};return eg.sk?null:(0,eu.tZ)(eh.gC,{onClick:i?void 0:()=>appNavigateToDetailPage(o._id),gap:"16px",borderBottom:"1px solid",borderColor:"$color_divider_secondary",paddingBottom:"14px",children:i?(0,eu.tZ)(TrendAiSearchThumbnailSkeleton,{}):(0,eu.BX)(eu.HY,{children:[(0,eu.tZ)(eh.xu,{borderRadius:"12px",border:"1px solid",borderColor:"$color_outline_tertiary",overflow:"hidden",css:(0,em.iv)(TrendAiSearchThumbnail_templateObject()),children:(0,eu.tZ)("img",{src:o.thumbnail,alt:o.title,width:"100%"})}),(0,eu.BX)(eh.gC,{gap:"10px",children:[(0,eu.tZ)(eh.Jd,{typo:"$140-16-semi",color:"$color_text_primary",css:(0,em.iv)(TrendAiSearchThumbnail_templateObject1()),children:o.title}),(0,eu.tZ)(eh.Jd,{typo:"$160-14-med",color:"$color_text_primary",css:(0,em.iv)(TrendAiSearchThumbnail_templateObject2()),children:o.summary}),(0,eu.BX)(eh.Ug,{gap:"4px",alignItems:"center",children:[(0,eu.tZ)(e$.JO,{as:eS.Ar$,size:16,color:"$color_icon_tertiary"}),(0,eu.tZ)(eh.Jd,{typo:"$110-12-med",color:"$color_text_tertiary",children:e(new Date(o.createdAt))})]})]})]})})};var nB=n(18582);function AppChatHomePage_templateObject(){let e=(0,ep._)(["\n            -webkit-user-select: none;\n            -moz-user-select: none;\n            -ms-user-select: none;\n            user-select: none;\n            -webkit-user-drag: none;\n          "]);return AppChatHomePage_templateObject=function(){return e},e}let AppChatHomePage=()=>(0,eu.tZ)(nB.c,{children:(0,eu.tZ)(ChocoChipABTestProvider,{children:(0,eu.BX)(eh.gC,{width:"100%",minHeight:"100vh",gap:"60px",backgroundColor:"$color_bg_screen",css:(0,em.iv)(AppChatHomePage_templateObject()),children:[(0,eu.tZ)(AppChocoChipList,{}),(0,eu.tZ)(AppCharacterRandomList,{}),(0,eu.tZ)(AppTrendAiSearch,{})]})})});function AppTrendAiSearchPage_templateObject(){let e=(0,ep._)(["\n          -webkit-user-select: none;\n          -moz-user-select: none;\n          -ms-user-select: none;\n          user-select: none;\n          -webkit-user-drag: none;\n        "]);return AppTrendAiSearchPage_templateObject=function(){return e},e}let AppTrendAiSearchPage=()=>{let{trackEvent:e}=(0,ev.Ke)();return e_.useEffect(()=>{e("view_trend_page")},[]),(0,eu.tZ)(nB.c,{children:(0,eu.BX)(eh.gC,{py:"30px",px:["20px","20px","40px"],width:"100%",minHeight:"100vh",gap:"14px",backgroundColor:"$color_bg_screen",css:(0,em.iv)(AppTrendAiSearchPage_templateObject()),children:[(0,eu.tZ)(TrendAiSearchThumbnail,{}),(0,eu.tZ)(TrendAiSearchList,{infinite:!0})]})})},AppAdChatRoomPageHome=()=>(0,eu.tZ)(nB.c,{children:(0,eu.tZ)(eh.gC,{width:"100%",height:"calc(100dvh)",overflow:"hidden",backgroundColor:"$color_bg_screen",position:"relative",children:(0,eu.tZ)(AppChatRoom,{})})}),AssignmentLayout=e=>{let{content:t,title:n}=e;return(0,eu.BX)(eh.gC,{width:"100%",height:"100%",children:[(0,eu.tZ)(tj.m,{title:n}),(0,eu.tZ)(nh.x,{title:"레포트 자동 완성도 무료인가요?"}),(0,eu.tZ)(eh.xu,{width:"100%",height:"100%",overflowY:"auto",overflowX:"hidden",children:t})]})};var n$=n(63570),nM=n(35893);let nR=th()(()=>Promise.all([n.e(5470),n.e(5454),n.e(8463),n.e(4514)]).then(n.bind(n,24514)).then(e=>e.AssignmentForm),{loadableGenerated:{webpack:()=>[24514]},ssr:!1}),Assignment=()=>{let{data:e}=(0,nM.qf)(),t=(0,ef.T_)();return(0,eu.tZ)(n$.WQ,{children:(0,eu.tZ)(n$.GN,{data:e,children:(0,eu.tZ)(n$.N3,{children:(0,eu.tZ)(n$.Z6,{children:(0,eu.tZ)(n$.PO,{children:(0,eu.tZ)(n$.no,{children:(0,eu.tZ)(AssignmentLayout,{title:t("feature_assignment.header"),content:(0,eu.tZ)(nR,{})})})})})})})})},AssignmentPage=()=>{let{trackEvent:e}=(0,ev.Ke)();return(0,e_.useEffect)(()=>{e("view_ai_report_page")},[]),(0,eu.tZ)(Assignment,{})}},51577:function(e,t,n){n.d(t,{sD:function(){return ChatDragDropDetector},aA:function(){return ChatInputWrapper},kb:function(){return d},Z:function(){return InputIconGroup},c7:function(){return SendButton}});var r=n(5079),o=n(54067),i=n(44194),a=n(35237),l=n(48343),c=n(30381);function _templateObject(){let e=(0,r._)(["\n            ","\n            ","\n          "]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,r._)(["\n  resize: none;\n  outline: none;\n  &::placeholder {\n    color: ",";\n    line-height: 160%;\n    font-size: 16px;\n  }\n"]);return _templateObject1=function(){return e},e}function _templateObject2(){let e=(0,r._)(["\n  // richTextarea는 디자인시스템을 사용할 수 없어서 직접 css 작성\n  font-size: 16px;\n  line-height: 160%;\n  font-weight: 500;\n  border: none;\n  background-color: transparent;\n"]);return _templateObject2=function(){return e},e}let d=(0,i.forwardRef)((e,t)=>{let{linkHighlight:n=!1,...r}=e,{flag:i}=(0,c.T6)("fe-web-chat-link"),d={...r,ref:t,maxRows:8,css:commonStyles};return(0,o.tZ)(l.Y4,{...d,css:e=>(0,a.iv)(_templateObject(),s,commonStyles(e)),linkHighlight:i&&n})}),commonStyles=e=>{var t;return(0,a.iv)(_templateObject1(),"dark"===e.mode?e.colors.$color_text_tertiary:null===(t=e.colors)||void 0===t?void 0:t.$color_text_textfield_disabled)},s=(0,a.iv)(_templateObject2());var u=n(19250),p=n(22346),_=n(86396),m=n(6791),h=n(96707),g=n(34715),v=n(9628),f=n(98511),x=n(53423),b=n(77095);let InvisibleFileInput=e=>{let{inputRef:t,onChange:n}=e;return(0,o.tZ)("input",{id:"file_upload_input",ref:t,style:{display:"none"},type:"file",accept:".jpg, .jpeg, .png, .gif, .webp, .pdf, .txt, .hwp, .docx",multiple:!0,onChange:n})};function InputIconGroup_templateObject(){let e=(0,r._)(["\n              &:hover {\n                cursor: ",";\n                background-color: ",";\n              }\n            "]);return InputIconGroup_templateObject=function(){return e},e}function InputIconGroup_templateObject1(){let e=(0,r._)(["\n              &:hover {\n                cursor: ",";\n                background-color: ",";\n              }\n            "]);return InputIconGroup_templateObject1=function(){return e},e}function InputIconGroup_templateObject2(){let e=(0,r._)(["\n              &:hover {\n                cursor: ",";\n                background-color: ",";\n              }\n            "]);return InputIconGroup_templateObject2=function(){return e},e}function _templateObject3(){let e=(0,r._)(["\n              &:hover {\n                cursor: ",";\n                background-color: ",";\n              }\n            "]);return _templateObject3=function(){return e},e}let InputIconGroup=e=>{let{isDisabled:t,drawable:n,promptHub:r,code:d,file:s,fileOptionCallback:C,fileEventProperties:y,iconGroupEventProperties:k,setInputText:w,chatRoomFileLimitExceeded:Z,onError:I}=e,O=i.useRef(null),S=(0,v.T_)("chat.chat_input.icon_group"),B=(0,v.bU)(),{trackEvent:$}=(0,g.Ke)(),{user:M}=(0,b.aF)(),{addAttachments:R,isAvailableAttachment:j}=(0,u.sH)(),{handleOpenLoginDialog:E}=(0,x.tF)(),{flag:A}=(0,c.T6)("fe-web-chat-filechat"),[T,L]=(0,f.FV)(f.WA),F=!t&&j&&!Z,onChangeFiles=async e=>{var t;let n=e.target.files;n&&0!==n.length&&(await R(n,y,{onError:I}),(null===(t=O.current)||void 0===t?void 0:t.value)&&(O.current.value=""))};return n||r||d||s?(0,o.BX)(_.Ug,{gap:"4px",children:[T&&(0,o.tZ)(m.YH,{setInput:w}),s&&A&&(0,o.BX)(l.u,{content:S("tooltip.attach_file"),children:[(0,o.tZ)(_.xu,{p:"4px",size:28,onClick:F?()=>{var e;if(!M)return E();$("click_file_upload_btn",{current_box_number:null==y?void 0:y.current_box_number,chat_id:null==y?void 0:y.chat_id}),null===(e=O.current)||void 0===e||e.click(),null==C||C()}:void 0,onMouseEnter:()=>$("hover_file_upload_btn",{chat_id:null==y?void 0:y.chat_id,purpose:null==k?void 0:k.purpose,is_pro_mode:null==k?void 0:k.is_pro_mode}),borderRadius:"3px",css:e=>{var t;return(0,a.iv)(InputIconGroup_templateObject(),F?"pointer":"not-allowed",null===(t=e.colors)||void 0===t?void 0:t.$color_surface_secondary_hover)},children:(0,o.tZ)(h.JO,{as:p.wJV,color:F?"$color_icon_secondary":"$color_icon_disabled",size:20})}),(0,o.tZ)(InvisibleFileInput,{inputRef:O,onChange:onChangeFiles})]}),"ja-JP"!==B&&M&&r&&(0,o.tZ)(l.u,{content:S("tooltip.prompt_hub"),children:(0,o.tZ)(_.xu,{p:"4px",size:28,onClick:()=>{L(!0),$("click_prompthub_markdown",k)},borderRadius:"3px",css:e=>{var n;return(0,a.iv)(InputIconGroup_templateObject1(),t?"not-allowed":"pointer",null===(n=e.colors)||void 0===n?void 0:n.$color_surface_secondary_hover)},children:(0,o.tZ)(h.JO,{as:p.ZPN,color:t?"$color_icon_disabled":"$color_icon_secondary",size:20})})}),d&&(0,o.tZ)(l.u,{content:S("tooltip.code"),children:(0,o.tZ)(_.xu,{p:"4px",size:28,onClick:()=>{$("click_code_markdown",k),w(e=>e+S("template.code"))},borderRadius:"3px",css:e=>{var n;return(0,a.iv)(InputIconGroup_templateObject2(),t?"not-allowed":"pointer",null===(n=e.colors)||void 0===n?void 0:n.$color_surface_secondary_hover)},children:(0,o.tZ)(h.JO,{as:p.HPd,color:t?"$color_icon_disabled":"$color_icon_secondary",size:20})})}),M&&n&&(0,o.tZ)(l.u,{content:S("tooltip.image"),children:(0,o.tZ)(_.xu,{p:"4px",size:28,onClick:()=>{$("click_draw_markdown"),w(e=>e+"[[넓은 우주 공간이 배경으로 펼쳐져 있으며, 반짝이는 별들과 소용돌이치는 은하들이 그 공간을 채우고 있습니다. 중앙에는 매혹적이고 신비로운 색상의 우주 먼지 구름이 황금빛 털의 골든 리트리버 개를 둘러싸고 있습니다.]] 그려줘")},borderRadius:"3px",css:e=>{var n;return(0,a.iv)(_templateObject3(),t?"not-allowed":"pointer",null===(n=e.colors)||void 0===n?void 0:n.$color_surface_secondary_hover)},children:(0,o.tZ)(h.JO,{as:p._s$,color:t?"$color_icon_disabled":"$color_icon_secondary",size:20})})})]}):null},ChatInputWrapper=e=>{let{children:t,isActive:n,onFocus:r,isDisabled:i,maxWidth:a=650,gap:l="12px",padding:c="20px",attachmentList:d}=e;return(0,o.BX)(_.gC,{position:"relative",padding:c,width:"100%",maxWidth:a,borderRadius:"34px",gap:l,onFocus:r,border:"2px solid",borderColor:n?"$color_outline_tertiary":"transparent",backgroundColor:i?"$color_surface_secondary":"$color_surface_tertiary",children:[d,t]})};function SendButton_templateObject(){let e=(0,r._)(["\n        transition: padding 0.2s ease-in-out;\n\n        &:hover {\n          cursor: ",";\n          background-color: ",";\n          padding-right: ",";\n        }\n      "]);return SendButton_templateObject=function(){return e},e}let SendButton=e=>{let{isActive:t,animateOnHover:n,onClick:r,isDisabled:i,canStopGenerate:l,icon:c,bottom:d="22px"}=e;return(0,o.tZ)(_.gC,{position:"absolute",right:"20px",bottom:d,justifyContent:"center",alignItems:"center",backgroundColor:t?"$color_surface_brand":l?"$color_icon_primary":"$color_icon_disabled",borderRadius:"16px",p:"4px",size:"28px",onClick:i?void 0:r,css:e=>(0,a.iv)(SendButton_templateObject(),i?"not-allowed":t?"pointer":"default",t&&(0,_.JH)({theme:e,overlayColor:"$color_surface_hover",backgroundColor:"$color_surface_brand"}),t&&n&&"8px"),children:c})},ChatDragDropDetector=e=>{let{children:t,fileUploadEventProperties:n}=e,r=(0,i.useRef)(null),{addAttachments:a}=(0,u.sH)(),l=(0,i.useCallback)(async e=>{var t;e.preventDefault(),e.stopPropagation();let r=null===(t=e.dataTransfer)||void 0===t?void 0:t.files;r&&!(r.length<1)&&await a(r,n)},[a,n]);return(0,o.tZ)(_.Ug,{onDrop:l,position:"relative",width:"100%",height:"100%",justifyContent:"center",ref:r,children:t})}},12373:function(e,t,n){n.d(t,{gE:function(){return s},QC:function(){return b},_b:function(){return x},h5:function(){return h},u3:function(){return m},dW:function(){return o},_8:function(){return c},UB:function(){return _},Bb:function(){return p},Bh:function(){return i},GY:function(){return C},Aq:function(){return v},gn:function(){return f},CU:function(){return a},DY:function(){return g},yI:function(){return d},y:function(){return l},BF:function(){return u}});var r=n(45570);let o=(0,r.cn)({key:"chatInputState",default:""}),i=(0,r.cn)({key:"chatTempInputState",default:""}),a=(0,r.cn)({key:"generateStatusState",default:"ready"}),l=(0,r.cn)({key:"shouldRestartState",default:{shouldRestart:!1,params:null}}),c=(0,r.cn)({key:"chatListenState",default:{input:"",isChocoChip:!1,adId:void 0,trendId:void 0,adContext:void 0}});(0,r.cn)({key:"loginDialogState",default:!1}),(0,r.cn)({key:"loginInAppBlockDialogState",default:!1}),(0,r.cn)({key:"nonLoginGenerateLimitState",default:!1});let d=(0,r.cn)({key:"messageEvaluationBannerIndex",default:1}),s=(0,r.cn)({key:"loadingOverlayState",default:!1}),u=(0,r.cn)({key:"socketConnectedState",default:!1}),p=(0,r.cn)({key:"chatRoomAttachmentState",default:[]}),_=(0,r.nZ)({key:"chatRoomAttachmentSelector",get:e=>{let{get:t}=e,n=t(p),r=0,o=0,i=0;return n.forEach(e=>{"image"===e.type?i++:"file"===e.type?o++:"link"===e.type&&r++}),{linkCount:r,fileCount:o,imageCount:i}}}),m=(0,r.cn)({key:"attachmentState",default:[]}),h=(0,r.nZ)({key:"chatListenWithAttachmentsState",get:e=>{let{get:t}=e,n=t(m),r=t(g),o=[],i=[],a=0,l=0;n.forEach(e=>{"image"===e.type?(o.push(e.url),a++):"file"===e.type?(i.push(e._id),a++):"link"===e.type&&(i.push(r[e.url]),l++)});let c=n.every(e=>"success"===e.status);return{attachments:n,images:o,referenceIds:i,success:c,linkCount:l,fileAndImageCount:a,fileCount:n.filter(e=>"file"===e.type).length,totalCount:n.length}}}),g=(0,r.cn)({key:"linkIdMapState",default:{}}),v=(0,r.cn)({key:"fastSearchState",default:!1}),f=(0,r.cn)({key:"fastSearchStateAB",default:""});(0,r.cn)({key:"sentryState",default:{isInitialized:!1}});let x=(0,r.cn)({key:"assignmentIdState",default:""}),b=(0,r.cn)({key:"SelectedMessageIdForImagePopup",default:{messageId:""}}),C=(0,r.cn)({key:"clientMessageId",default:void 0})},19250:function(e,t,n){n.d(t,{L4:function(){return getAttachmentInfo},NH:function(){return getFilteredLinks},Zm:function(){return getPreSignedDocumentURL},R1:function(){return safeEncodeURI},XV:function(){return uploadS3File},sH:function(){return useAttachment},$I:function(){return useChatRoomAttachment},nB:function(){return useLink},y5:function(){return useLinkMetadata},fw:function(){return usePostLinkAnalysis}});var r=n(84631),o=n(701);let getPreSignedImageURL=e=>r.Np.William.get("/image/upload?extension=".concat(e)),getPreSignedDocumentURL=e=>r.Np.William.get("/pro-mode/upload?extension=".concat(e)),uploadS3File=(e,t)=>o.default.put(e,t,{headers:{"Content-Type":t.type}});var i=n(12373),a=n(43938),l=n(34715),c=n(98511),d=n(38072),s=n(10072),u=n(70810);let p={"image/jpeg":"jpeg","image/png":"png","image/gif":"gif","image/webp":"webp"},getAttachmentInfo=e=>{let t=e.match(/\.(pdf|txt|hwp|docx)$/),n=t?t[1]:"",r=e.replace(/\.[^/.]+$/,"");return{title:r,extension:n}},useS3Upload=()=>{let{trackEvent:e}=(0,l.Ke)(),uploadImageToS3=async(t,n)=>{try{let r=await getPreSignedImageURL(p[t.type]),{uploadUrl:o,downloadUrl:i}=r;return await uploadS3File(o,t),e("upload_img_done",n),i}catch(t){var o;e("upload_img_fail",{...n,error_code:(0,r.IZ)(t)?null===(o=t.response)||void 0===o?void 0:o.data.message:"unknown"})}},uploadFileToS3=async e=>{var t;let n=null===(t=getAttachmentInfo(e.name))||void 0===t?void 0:t.extension;if(!n)return;let r=await getPreSignedDocumentURL(n),{fileUuid:o,fileUploadUrl:i}=r;return await uploadS3File(i,e),o};return{uploadImageToS3,uploadFileToS3}};var _=n(92120);let postLinkMetadata=async e=>await r.Np.William.post("/pro-mode/metadata",{url:e}),useLinkMetadata=()=>(0,_._5)("/pro-mode/metadata",async function(e,t){let{arg:n}=t,{url:r}=n;return await postLinkMetadata(r)}),postFileAnalysis=async e=>await r.Np.William.post("/pro-mode/file",e),usePostFileAnalysis=()=>(0,_._5)("/pro-mode/file",async function(e,t){let{arg:n}=t;return await postFileAnalysis(n)}),postLinkAnalysis=async e=>await r.Np.William.post("/pro-mode/link",e),usePostLinkAnalysis=()=>(0,_._5)("/pro-mode/link",async function(e,t){let{arg:n}=t;return await postLinkAnalysis(n)}),getAttachmentList=async e=>await r.Np.William.get("/pro-mode/chat/".concat(e,"/rag")),useChatRoomAttachment=e=>(0,_.dH)(!!e&&"/pro-mode/chat/".concat(e,"/file"),()=>getAttachmentList(e),{revalidateOnFocus:!1}),useAttachment=()=>{let e=(0,s.useTranslations)("use_upload_pending_image"),{trackEvent:t}=(0,l.Ke)(),{uploadFileToS3:n,uploadImageToS3:r}=useS3Upload(),{trigger:o}=usePostFileAnalysis(),p=(0,c.Zl)(i.u3),{linkCount:_,fileAndImageCount:m,totalCount:h}=(0,c.sJ)(i.h5),{getChatIdFromPath:g}=(0,a.dt)(),v=g(),addAttachments=async(n,r,o)=>{let i=3-_;if(n.length>i){var a;return null==o||null===(a=o.onError)||void 0===a||a.call(o,e("maximum_file",{count:3})),[]}let l=Array.from(n).slice(0,i);for(let e=0;e<l.length;e++){let n=l[e],i=n.type.includes("image"),a=!i,c=(0,u.Z)();if(i&&(addAttachment({_id:c,type:"image",url:"",status:"loading"}),t("expose_img_upload_loading",{index:h+e,chat_id:v||""}),uploadImage(n,c,r,{onError:null==o?void 0:o.onError})),a){let{title:i,extension:a}=getAttachmentInfo(n.name);addAttachment({_id:c,type:"file",title:i,extension:a||"",status:"loading",url:""}),t("expose_file_upload_loading",{index:h+e,chat_id:v||""}),uploadFile(n,c,{...r,index:h+e},{onError:null==o?void 0:o.onError})}}},addAttachment=e=>{p(t=>[...t,e])},updateAttachment=(e,t)=>{p(n=>n.map(n=>n._id===e?{...n,...t}:n))},removeAttachment=e=>{p(t=>t.filter(t=>t._id!==e))},uploadImage=async(t,n,o,i)=>{if(t.size>5242880){var a;null==i||null===(a=i.onError)||void 0===a||a.call(i,e("overflow_image_size",{size:5})),removeAttachment(n);return}let l=await r(t,o);if(!l){removeAttachment(n);return}updateAttachment(n,{url:l,status:"success"})},uploadFile=async(r,i,a,l)=>{var c,s,u;if(r.size>10485760){null==l||null===(c=l.onError)||void 0===c||c.call(l,e("overflow_file_size",{size:10})),removeAttachment(i);return}let{extension:p}=getAttachmentInfo(r.name);if(!p){null==l||null===(s=l.onError)||void 0===s||s.call(l,e("not_allow_extension")),removeAttachment(i);return}try{let e=await n(r);if(!e)throw Error("Failed to upload file to S3");let{_id:l,fileUrl:c}=await o({fileUuid:e,extension:p,title:r.name,chatId:v||void 0});if(!l)throw Error("Failed to post file analysis");updateAttachment(i,{_id:l,status:"success",url:c}),t("upload_file_done",{...a,file_id:l,file_name:r.name})}catch(e){updateAttachment(i,{status:"error"}),t("upload_file_fail",{...a,error_status:(0,d.IZ)(e)?null===(u=e.response)||void 0===u?void 0:u.data.message:"unknown"})}};return{addAttachments,updateAttachment,isAvailableAttachment:m<3,totalCount:h}},useLink=e=>{let{linkLimitExceeded:t}=e;return{updateAttachmentsWithLinks:(e,n)=>{let r=[...e],o=0,i=!1,a=r.filter(e=>"link"===e.type).length;return r.forEach((e,t)=>{"link"===e.type&&o<n.length&&(e.url!==n[o]&&(r[t]={...e,url:n[o],status:"loading"},i=!0),o++)}),t||n.slice(o).forEach(e=>{if(a>=2)return;let t=r.some(t=>"link"===t.type&&t.url===e);!t&&(r.push({_id:"link-".concat(a),type:"link",url:e,title:"",favicon:"",status:"loading"}),i=!0,a++)}),{newAttachments:r,isUpdated:i}}}},m=/https?:\/\/(www\.)?[-a-zA-Zㄱ-ㅎ가-힣0-9@:%._+~#=]{1,256}\.[a-zA-Zㄱ-ㅎ가-힣0-9()]{1,6}\b([-a-zA-Zㄱ-ㅎ가-힣0-9()@:%_+.~#?&//=]*)/g,getFilteredLinks=e=>(e.match(m)||[]).filter(t=>{let n=e.indexOf(t);return!(n>0&&('"'===e[n-1]||"'"===e[n-1])||n+t.length<e.length&&('"'===e[n+t.length]||"'"===e[n+t.length]))});function safeEncodeURI(e){try{let t=decodeURI(e);if(t!==e)return e;return encodeURI(e)}catch(t){return e}}},43938:function(e,t,n){n.d(t,{Zr:function(){return useAnonymousDialog_useAnonymousDialog},dt:function(){return useChatPath},Zp:function(){return useCommentEvaluateABTest},Tt:function(){return useGenerateAndPushNormalChatRoom},DD:function(){return useGenerateLatencyMark},kY:function(){return useHomeTopSpacerABTest},Ul:function(){return useIssueTalkGridABTest},_O:function(){return useIssueTalkReduceUIABTest},Jq:function(){return useMoveRecentChat}});var r=n(44194),o=n(12373),i=n(5553),a=n(11894),l=n(33065),c=n(98511);let useGenerateLatencyMark=()=>{let markGenerateStart=()=>{performance.mark("generate-start")};return{markGenerateRequest:()=>{performance.mark("generate-request")},markLandChatRoom:()=>{performance.mark("land-chat-room")},markSearchProcessShown:()=>{performance.mark("search-process-shown")},measurePerformances:()=>{markGenerateStart();try{performance.measure("measureBetweenRequestAndLand","generate-request","land-chat-room"),performance.measure("measureBetweenRequestAndStart","generate-request","generate-start"),performance.measure("measureBetweenRequestAndSearchProcessShown","generate-request","search-process-shown");let e=performance.getEntriesByName("measureBetweenRequestAndLand")[0],t=performance.getEntriesByName("measureBetweenRequestAndStart")[0],n=performance.getEntriesByName("measureBetweenRequestAndSearchProcessShown")[0],r=null==e?void 0:e.duration,o=null==t?void 0:t.duration,i=null==n?void 0:n.duration;return performance.clearMarks(),performance.clearMeasures(),{latencyBetweenRequestAndLand:r,latencyBetweenRequestAndStart:o,latencyBetweenRequestAndSearchProcessShown:i}}catch(e){}}}},useGenerateAndPushNormalChatRoom=()=>{let e=(0,l.tv)(),t=(0,c.Zl)(o._8),{loading:n,refetch:d}=(0,a.c9)("model"),s=(0,r.useCallback)(e=>[...e].sort((e,t)=>null===e.model&&null!==t.model?-1:null!==e.model&&null===t.model?1:0),[]),{createChatMutation:u}=(0,a.hY)("model"),{markGenerateRequest:p}=useGenerateLatencyMark(),{handleEvent:_}=(0,i.m)(),generateAndPushNormalChatRoom=async r=>{let{selectedModel:o,generateMessage:i,callback:l,generation_type:c,trendId:m,adContext:h,adEvent:g}=r;p();let v=await d(),f=s((0,a.Pn)(v)?v.chats:[]),x=n||!(f.length>0)||f[0].model?void 0:f[0];t({input:i,isChocoChip:!1,trendId:m,adContext:h});let b=x?x._id:await u({unitId:o._id,type:"model"}).then(e=>e._id),C="/chat/u/".concat(o._id,"/c/").concat(b,"?type=u").concat(c?"&gt="+c:"");g&&_(g.adEventName,{...g.adEventBody,url:C}),await e.push(C),null==l||l()};return{generateAndPushNormalChatRoom}};var d=n(22933),s=n(77095);let useAnonymousDialog_useAnonymousDialog=e=>{let{handleOpenLoginDialog:t}=(0,d.tF)(),{user:n}=(0,s.aF)();return{handleOpenLoginDialog:t,handleOpenAnonymousDialog:()=>!e||!!e.allowAnonymous||!!n||(t(),!1)}};n(6916);var u=n(44684);n(45570);let useMoveRecentChat=()=>{let e=(0,u.useRouter)(),{chatList:t}=(0,a.c9)();return{moveRecentChat:(n,r,o)=>{if(!n||n.length<1)return;let i=t.find(e=>{var t,r;return(null===(t=e.character)||void 0===t?void 0:t._id)===n||(null===(r=e.tempUnit)||void 0===r?void 0:r._id)===n});if(i&&"c"===r){(null==o?void 0:o.onMoveRecent)&&o.onMoveRecent(),e.push("/chat/u/".concat(n,"/c/").concat(i._id,"?type=").concat(r));return}e.push("/chat/u/".concat(n,"?type=").concat(r))}}};var p=n(30381);let useCommentEvaluateABTest=()=>{let{variant:e,loading:t}=(0,p.i6)("fe-web-issuePost-commentSubmit"),n=(0,r.useMemo)(()=>e.enabled?e.name:void 0,[e.enabled,e.name]);return{loading:t,variant:n}},useHomeTopSpacerABTest=()=>{let{variant:e,loading:t}=(0,p.i6)("fe-web-chatHome-topSpacer"),n=(0,r.useMemo)(()=>e.enabled?e.name:void 0,[e.enabled,e.name]);return{loading:t,variant:n}},useIssueTalkReduceUIABTest=()=>{let{variant:e,loading:t}=(0,p.i6)("fe-web-chatHome-issueTalkReduceUI"),n=(0,r.useMemo)(()=>e.enabled?e.name:void 0,[e.enabled,e.name]);return{loading:t,variant:n}},useIssueTalkGridABTest=()=>{let{variant:e,loading:t}=(0,p.i6)("fe-web-chatHome-issueTalkGrid"),n=(0,r.useMemo)(()=>e.enabled?e.name:void 0,[e.enabled,e.name]);return{loading:t,variant:n}},useChatPath=()=>{let e=(0,l.tv)();return{getChatIdFromPath:()=>e&&e.query&&e.query.params&&Array.isArray(e.query.params)&&e.query.params.length>2&&e.query.params[2]||null}}},98500:function(e,t,n){n.d(t,{P:function(){return SuggestAiProtectBox}});var r=n(54067),o=n(44194),i=n(22346),a=n(86396),l=n(96707),c=n(34715),d=n(9628),s=n(3628),u=n(33065);let useSuggestAiProtectBox=e=>{let{willProtectMessage:t,onSuggest:n}=e,{trackEvent:r}=(0,c.Ke)(),{push:o}=(0,u.tv)(),{setItem:i}=(0,s.Xs)("ai-protect-form-session-state");return{moveToAiProtect:()=>{r("click_ai_protect_recommend_btn");let e=t.slice(0,2e3);i({formData:{content:e,requirements:""}}),null==n||n(),o("/ai-protect")}}},SuggestAiProtectBox=e=>{let{willProtectMessage:t,backgroundColor:n,onSuggest:s}=e,{moveToAiProtect:u}=useSuggestAiProtectBox({willProtectMessage:t,onSuggest:s}),{trackEvent:p}=(0,c.Ke)(),_=(0,d.bU)();return((0,o.useEffect)(()=>{"ko-KR"===_&&p("view_ai_protect_recommend_btn")},[_]),"ko-KR"!==_)?null:(0,r.BX)(a.Ug,{width:"100%",padding:"16px",backgroundColor:n,borderRadius:"10px",gap:"8px",alignItems:"center",children:[(0,r.tZ)(a.Jd,{typo:"$100-14-med",color:"$color_text_primary",children:"글을 자연스러운 말투로 작성해 드려요"}),(0,r.tZ)(a.zx,{onClick:u,children:(0,r.BX)(a.Ug,{gap:"4px",alignItems:"center",children:[(0,r.tZ)(a.Jd,{typo:"$100-14-med",color:"$color_text_brand",children:"AI 탐지 방어 바로가기"}),(0,r.tZ)(l.JO,{as:i.$Qe,size:16,color:"$color_text_brand"})]})})]})}},33321:function(e,t,n){n.d(t,{j:function(){return ChatList}});var r=n(54067),o=n(44194),i=n(86396),a=n(4142),l=n(77095),c=n(27335),d=n(84168),s=n(48343),u=n(9628),p=n(77837),_=n.n(p);let ChatDeleteContainer=e=>{let{selectedChatIdList:t,onCompleted:n,children:o}=e,i=(0,u.T_)(),{deleteChatListMutation:a}=(0,d.h)(),onDelete=async()=>{await a(t)},l=_()(onDelete,300);return(0,r.tZ)(s.cV,{title:i("chat.chat_list.delete_modal.title"),content:i("chat.chat_list.delete_modal.description"),confirm:{text:i("chat.chat_list.delete_modal.confirm"),onClick:async e=>{await l(),e(),c.Am.alert(i("chat.chat_list.delete_modal.alert")),null==n||n()}},cancel:{text:i("chat.chat_list.delete_modal.cancel"),onClick:e=>e()},renderOpener:e=>{let{openModal:t}=e;return o({openDeleteConfirmationModal:t})}})},ChatListContainer=e=>{let{children:t}=e,{user:n}=(0,l.aF)(),{chatList:r,isLoading:o,refetch:i,loadMore:a,hasMore:c}=(0,d.c)(),s=r.filter(e=>{let{model:t}=e;return t});return t({chatList:s,isLoading:o,refetch:i,loadMore:a,hasMore:!!n&&c})};var m=n(3628),h=n(34715),g=n(5079),v=n(35237),f=n(22346),x=n(96707),b=n(3521),C=n(33065),y=n(98511);let ChatTopicUpdater=e=>{let{chatId:t,children:n}=e,[r,i]=(0,o.useState)(!1),{trackEvent:a}=(0,h.Ke)(),{updateChatMutation:l}=(0,d.h)(),updateTopic=async e=>{0!==e.trim().length&&(i(!0),await l(t,e),a("click_edit_chat_name",{chat_id:t}),i(!1))};return n({updateTopic,loading:r})},getChatType=e=>"tempUnit"in e&&e.tempUnit?{chatType:"unit",unitId:e.tempUnit._id}:"modelInfo"in e&&e.modelInfo?{chatType:"unit",unitId:e.modelInfo._id}:{chatType:"unknown",unitId:""};var k=n(50129);let returnModelName=e=>(null==e?void 0:e.modelInfo)?e.modelInfo.displayName:(null==e?void 0:e.tempUnit)?e.tempUnit.displayName:e.model?(0,k.getModelName)(e.model):"";function _templateObject(){let e=(0,g._)(["\n        cursor: ",";\n        &:hover {\n          background-color: var(--color_surface_hover);\n\n          .chat-list-item-button {\n            display: flex;\n          }\n\n          .chat-list-item-topic {\n            max-width: calc(100% - 30px);\n          }\n\n          .chat-update-date-label {\n            display: block;\n          }\n\n          ","\n        }\n      "]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,g._)(["\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            -webkit-line-clamp: 1;\n            -webkit-box-orient: vertical;\n          "]);return _templateObject1=function(){return e},e}function _templateObject2(){let e=(0,g._)(["\n                    white-space: nowrap;\n                    text-overflow: ellipsis;\n                    display: block;\n                    -webkit-line-clamp: 1;\n                    -webkit-box-orient: vertical;\n                  "]);return _templateObject2=function(){return e},e}function _templateObject3(){let e=(0,g._)(["\n                    display: none;\n                  "]);return _templateObject3=function(){return e},e}let ChatListItem=e=>{var t,n,o,l;let{chat:c,onClick:d}=e,{query:s,push:p,replace:_}=(0,C.tv)(),m=(0,u.T_)(),h=(0,y.sJ)(b.CU),g="ready"!==h,k=null!==(o=null==s?void 0:null===(t=s.params)||void 0===t?void 0:t[0])&&void 0!==o?o:"",w=null!==(l=null==s?void 0:null===(n=s.params)||void 0===n?void 0:n[2])&&void 0!==l?l:"",Z=c._id===w,{chatType:I,unitId:O}=getChatType(c),S=returnModelName(c),onClickItem=()=>{Z||g||"unknown"===I||(d(),p("/chat/u/".concat(O,"/c/").concat(c._id),void 0,{shallow:k===O}))},onDeleteComplete=()=>{Z&&_("/chat")};return(0,r.BX)(i.gC,{width:"100%",minHeight:"54px",p:"8px",gap:"12px",borderRadius:"8px",backgroundColor:Z?"$color_surface_secondary":"transparent",css:(0,v.iv)(_templateObject(),g?"not-allowed":"pointer",S>6&&"\n            .chat-list-item-model-name {\n              max-width: 85px;\n            }\n          "),onClick:e=>{onClickItem(),e.stopPropagation()},children:[(0,r.BX)(i.Ug,{gap:"4px",alignItems:"center",children:[(0,r.tZ)(i.Jd,{className:"chat-list-item-model-name",color:"$color_text_secondary",typo:"$100-12-med",maxWidth:"120px",overflow:"hidden",css:(0,v.iv)(_templateObject1()),children:returnModelName(c)}),(0,r.tZ)(i.LZ,{}),(0,r.tZ)(a.Ar,{date:c.messagedAt||c.updatedAt})]}),(0,r.tZ)(i.Ug,{alignItems:"center",position:"relative",children:(0,r.tZ)(a.Ks,{chatId:c._id,children:e=>{let{mode:t,onToggleMode:n}=e;return(0,r.BX)(i.Ug,{width:"100%",alignItems:"center",position:"relative",children:["edit"===t&&(0,r.tZ)(ChatTopicUpdater,{chatId:c._id,children:e=>{let{updateTopic:t}=e;return(0,r.tZ)(a.IU,{value:c.topic||m("chat.chat_list.new_room"),onBlur:n,update:t})}}),"default"===t&&(0,r.tZ)(i.Jd,{className:"chat-list-item-topic",maxWidth:"100%",typo:"$100-14-med",color:"$color_text_primary",overflow:"hidden",css:(0,v.iv)(_templateObject2()),children:c.topic||m("chat.chat_list.new_room")}),"default"===t&&(0,r.BX)(i.Ug,{className:"chat-list-item-button",position:"absolute",right:0,gap:"2px",css:(0,v.iv)(_templateObject3()),children:[(0,r.tZ)(x.JO,{as:f.pkD,size:14,color:"$color_icon_primary",onClick:e=>{e.stopPropagation(),n()}}),(0,r.tZ)(ChatDeleteContainer,{selectedChatIdList:[c._id],onCompleted:onDeleteComplete,children:e=>{let{openDeleteConfirmationModal:t}=e;return(0,r.tZ)(x.JO,{as:f.$yH,size:14,color:"$color_icon_primary",onClick:e=>{e.stopPropagation(),t()}})}})]})]})}})})]})};var w=n(74230);function ChatListSelectItem_templateObject(){let e=(0,g._)(["\n        cursor: pointer;\n\n        &:hover {\n          background-color: var(--color_surface_hover);\n        }\n      "]);return ChatListSelectItem_templateObject=function(){return e},e}function ChatListSelectItem_templateObject1(){let e=(0,g._)(["\n              white-space: nowrap;\n              text-overflow: ellipsis;\n              -webkit-line-clamp: 1;\n              -webkit-box-orient: vertical;\n            "]);return ChatListSelectItem_templateObject1=function(){return e},e}function ChatListSelectItem_templateObject2(){let e=(0,g._)(["\n            white-space: nowrap;\n            text-overflow: ellipsis;\n            display: block;\n            -webkit-line-clamp: 1;\n            -webkit-box-orient: vertical;\n          "]);return ChatListSelectItem_templateObject2=function(){return e},e}let ChatListSelectItem=e=>{let{chat:t,selectedChatIdList:n,selectChatId:o}=e,l=(0,u.T_)(),c=returnModelName(t);return(0,r.BX)(i.Ug,{p:"8px",gap:"12px",minHeight:"54px",alignItems:"center",borderRadius:"8px",css:(0,v.iv)(ChatListSelectItem_templateObject()),backgroundColor:n.includes(t._id)?"$palette_gray_gray_100":"transparent",onClick:()=>o(t._id),children:[(0,r.tZ)(w.d,{checked:n.includes(t._id)}),(0,r.BX)(i.gC,{width:"100%",overflow:"hidden",gap:"10px",children:[(0,r.BX)(i.Ug,{gap:"4px",alignItems:"center",children:[(0,r.tZ)(i.Jd,{color:"$color_text_secondary",typo:"$100-12-med",maxWidth:"85px",overflow:"hidden",css:(0,v.iv)(ChatListSelectItem_templateObject1()),children:c}),(0,r.tZ)(i.LZ,{}),(0,r.tZ)(a.Ar,{date:t.messagedAt||t.updatedAt})]}),(0,r.tZ)(i.Jd,{width:"100%",typo:"$100-14-med",color:"$color_text_primary",overflow:"hidden",css:(0,v.iv)(ChatListSelectItem_templateObject2()),children:t.topic||l("chat.chat_list.new_room")})]})]})},InfiniteChatList=e=>{let{chatList:t,mode:n,selectedChatIdList:o,hasMore:a,loadMore:l,selectChatId:c}=e,{trackEvent:d}=(0,h.Ke)(),s=(0,m.dg)(e=>{e.isIntersecting&&l()});return(0,r.BX)(i.gC,{width:"100%",height:"calc(100% - 56px)",maxHeight:"calc(100% - 56px)",px:"12px",py:"8px",gap:"8px",overflowY:"auto",children:[t.map((e,i)=>"edit"===n?(0,r.tZ)(ChatListSelectItem,{chat:e,selectedChatIdList:o,selectChatId:c},e._id):(0,r.tZ)(ChatListItem,{chat:e,onClick:()=>{d("click_chat",{index:i,chatId:e._id,totalNumbers:t.length,modelName:e.model})}},e._id)),a&&(0,r.tZ)(i.xu,{height:"1px",ref:s})]})};var Z=n(75659);let useLnbColors=()=>{let{mode:e}=(0,Z.TC)();return{LNBbgColor:"light"===e?"$palette_gray_gray_50":"#161514",chatListBgColor:"light"===e?"$palette_gray_gray_20":"#181716",chatListBorderColor:"light"===e?"$palette_gray_gray_100":"$palette_gray_gray_150"}},ChatList=()=>{let{user:e}=(0,l.aF)(),{chatListBgColor:t,chatListBorderColor:n}=useLnbColors();return(0,r.tZ)(i.gC,{width:"180px",minWidth:"180px",height:"100vh",overflow:"hidden",borderRight:"1px solid",borderColor:n,children:(0,r.tZ)(a.s0,{children:o=>{let{mode:l,toggleMode:c}=o;return(0,r.tZ)(a.yd,{children:o=>{let{selectedChatIdList:d,selectChatId:s,selectAllIds:u,clearSelectedIds:p}=o;return(0,r.tZ)(ChatListContainer,{children:o=>{let{chatList:_,loadMore:m,hasMore:h}=o;return(0,r.BX)(r.HY,{children:[(0,r.BX)(i.Ug,{width:"100%",height:"56px",pl:"20px",pr:"12px",borderBottom:"1px solid",borderColor:n,alignItems:"center",children:["default"===l&&(0,r.BX)(r.HY,{children:[(0,r.tZ)(i.LZ,{}),e&&_.length>0&&(0,r.tZ)(a.aU,{onClick:c})]}),"edit"===l&&(0,r.tZ)(ChatDeleteContainer,{selectedChatIdList:d,onCompleted:c,children:e=>{let{openDeleteConfirmationModal:n}=e;return(0,r.tZ)(a.fl,{selectedLength:d.length,isAllSelected:d.length>=_.length,bgColor:t,onCloseEditMode:c,onDelete:n,onRemoveAll:p,onSelectAll:()=>u(_.map(e=>e._id))})}})]}),(0,r.tZ)(InfiniteChatList,{chatList:_,mode:l,selectedChatIdList:d,selectChatId:s,hasMore:h,loadMore:m})]})}})}})}})})}},68440:function(e,t,n){n.d(t,{f:function(){return DragSearchArea}});var r=n(5079),o=n(54067),i=n(35237),a=n(46149),l=n(3628),c=n(16054),d=n(40222),s=n(75659),u=n(96707),p=n(34715),_=n(27335),m=n(7869),h=n(9628);function _templateObject(){let e=(0,r._)(["\n        p {\n          line-height: 140%;\n        }\n      "]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,r._)(["\n                max-width: 100%;\n              "]);return _templateObject1=function(){return e},e}function _templateObject2(){let e=(0,r._)(["\n                white-space: pre-wrap;\n                word-break: break-all;\n              "]);return _templateObject2=function(){return e},e}let MarkdownContent=e=>{let{content:t}=e,n=(0,h.T_)();return(0,o.tZ)(a.gC,{css:(0,i.iv)(_templateObject()),children:(0,o.tZ)(m.U,{colorSet:{primary:"$color_text_ivory",secondary:"$color_text_secondary"},content:t,onClickCode:()=>(0,_.wp)(n("common.alert.copy_code_success")),addonComponents:{img:e=>(0,o.tZ)(a.xu,{...e,as:"img",css:(0,i.iv)(_templateObject1())}),em:e=>(0,o.tZ)(a.Jd,{...e,as:"em",typo:"$ex_180-16-med",color:"$color_text_tertiary",css:(0,i.iv)(_templateObject2())})}})})};function Content_templateObject(){let e=(0,r._)(["\n        &:hover {\n          .closeButton {\n            display: block;\n          }\n        }\n      "]);return Content_templateObject=function(){return e},e}function Content_templateObject1(){let e=(0,r._)(["\n          box-shadow: -2px 4px 10px 0px rgba(59, 63, 78, 0.1),\n            0px 2px 4px 0px rgba(59, 63, 78, 0.03);\n        "]);return Content_templateObject1=function(){return e},e}let Content=e=>{let{content:t,closeMenu:n}=e,{mode:r}=(0,s.TC)(),{trackEvent:l}=(0,p.Ke)();return(0,o.BX)(a.gC,{maxWidth:"440px",position:"relative",css:(0,i.iv)(Content_templateObject()),children:[(0,o.tZ)(a.zx,{className:"closeButton",width:"30px",height:"30px",position:"absolute",top:"-15px",right:"-15px",onClick:()=>{n(),l("close_context_search_result")},display:"none",children:(0,o.tZ)(a.xu,{width:"30px",height:"30px",borderRadius:"20px",backgroundColor:"$color_icon_quaternary",display:"flex",alignItems:"center",justifyContent:"center",children:(0,o.tZ)(u.JO,{as:d.S5X,size:18,color:"$color_icon_white"})})}),(0,o.tZ)(a.gC,{backgroundColor:"dark"===r?"#FCFCFA":"#42413D",borderRadius:"12px",color:"$color_text_ivory",overflow:"hidden",css:(0,i.iv)(Content_templateObject1()),children:(0,o.BX)(a.gC,{width:"100%",overflowY:"auto",maxHeight:"150px",gap:"8px",padding:"16px",children:[(0,o.tZ)(a.Jd,{typo:"$100-14-semi",color:"$color_action_blue_secondary",children:"검색 결과"}),(0,o.tZ)(MarkdownContent,{content:t})]})})]})};var g=n(44194);function SearchButton_templateObject(){let e=(0,r._)(["\n        box-shadow: -2px 4px 10px 0px rgba(59, 63, 78, 0.1), 0px 2px 4px 0px rgba(59, 63, 78, 0.03);\n\n        &:hover {\n          .fastSearchButton {\n            background-color: var(--color_surface_secondary);\n          }\n        }\n      "]);return SearchButton_templateObject=function(){return e},e}let SearchButton=e=>{let{onClick:t}=e,{trackEvent:n}=(0,p.Ke)(),r=(0,h.T_)("feature_drag_search");return(0,g.useEffect)(()=>{n("expose_generate_btn",{feature_menu:"context_search"})},[]),(0,o.tZ)(a.zx,{onClick:()=>{null==t||t(),n("click_generate_btn",{feature_menu:"context_search"})},padding:"4px",borderRadius:"10px",border:"1px solid var(--color_bg_elevated_secondary)",backgroundColor:"var(--color_icon_ivory)",css:(0,i.iv)(SearchButton_templateObject()),children:(0,o.BX)(a.Ug,{alignItems:"center",gap:"6px",padding:"6px",borderRadius:"6px",className:"fastSearchButton",children:[(0,o.tZ)(u.JO,{as:d.hsj,size:16}),(0,o.tZ)(a.Jd,{typo:"$100-14-semi",color:"$color_text_primary",children:r("label")})]})})};var v=n(84631),f=n(53423),x=n(92120),b=n(77095);let postDragSearch=e=>{let{searchInput:t}=e;return v.Np.William.post("/drag-search",{searchInput:t})},SearchContainer=e=>{var t;let{searchInput:n,children:r}=e,{trackEvent:o}=(0,p.Ke)(),{handleOpenLoginDialog:i}=(0,f.tF)(),{user:a}=(0,b.aF)(),{data:l,trigger:c,isMutating:d}=(0,x._5)("/drag-search",async(e,t)=>{let{arg:n}=t;return await postDragSearch(n)},{onSuccess:()=>{o("generate_done",{feature_menu:"context_search"})},onError:()=>{(0,_.wp)("일시적으로 검색에 실패했어요! 다시 시도해주세요")}});return r({search:()=>{if(!(null==a?void 0:a._id)){i();return}c({searchInput:n})},isLoading:d,content:null!==(t=null==l?void 0:l.content)&&void 0!==t?t:""})};var C=n(48343);function SkeletonContent_templateObject(){let e=(0,r._)(["\n        box-shadow: -2px 4px 10px 0px rgba(59, 63, 78, 0.1), 0px 2px 4px 0px rgba(59, 63, 78, 0.03);\n\n        &:hover {\n          .closeButton {\n            display: block;\n          }\n        }\n      "]);return SkeletonContent_templateObject=function(){return e},e}let SkeletonContent=()=>{let{mode:e}=(0,s.TC)(),t="dark"===e,n=t?"linear-gradient(\n           90deg,\n            #F7F7F5 0%,\n            #F7F7F5 25%,\n            #E4E4E1 50%,\n            #F7F7F5 75%,\n            #F7F7F5 100%\n          )":"linear-gradient(\n           90deg,\n            var(--palette_gray_gray_700) 0%,\n            var(--palette_gray_gray_700) 25%,\n            var(--palette_gray_gray_800) 50%,\n            var(--palette_gray_gray_700) 75%,\n            var(--palette_gray_gray_700) 100%\n          )";return(0,o.BX)(a.gC,{gap:"10px",width:"440px",padding:"16px",backgroundColor:t?"#FCFCFA":"#42413D",borderRadius:"12px",css:(0,i.iv)(SkeletonContent_templateObject()),color:"$color_text_ivory",position:"relative",maxHeight:"150px",children:[(0,o.tZ)(C.Od,{width:"52px",height:"14px",borderRadius:"4px",background:n}),(0,o.tZ)(C.Od,{width:"100%",height:"14px",borderRadius:"4px",background:n}),(0,o.tZ)(C.Od,{width:"228px",height:"14px",borderRadius:"4px",background:n})]})},SearchMenu=e=>{let{searchInput:t,closeMenu:n}=e;return(0,o.tZ)(SearchContainer,{searchInput:t,children:e=>{let{search:t,content:r,isLoading:i}=e;return(0,o.BX)(a.gC,{maxWidth:"440px",width:"100%",children:[!i&&!r&&(0,o.tZ)(SearchButton,{onClick:t}),i&&(0,o.tZ)(SkeletonContent,{}),!i&&r&&(0,o.tZ)(Content,{content:r,closeMenu:n})]})}})};function DragSearchArea_templateObject(){let e=(0,r._)(["\n        .Popover > svg {\n          display: none;\n        }\n      "]);return DragSearchArea_templateObject=function(){return e},e}let DragSearchArea=e=>{let{target:t,children:n}=e,r=(0,l.ac)("(min-width: 1024px)");return t?(0,o.BX)(a.gC,{css:(0,i.iv)(DragSearchArea_templateObject()),children:[(0,o.tZ)(c.C8,{target:t,menu:e=>{let{selectedText:t,setMenuOpen:n}=e;return(0,o.tZ)(SearchMenu,{searchInput:null!=t?t:"",closeMenu:()=>n(!1)})},styles:{userSelect:"text",padding:0,borderRadius:0,backgroundColor:"transparent",border:"none",boxShadow:"none"},zIndex:9,allowedPlacements:[r?"top-end":"bottom-end"]}),n]}):n}},62380:function(e,t,n){n.d(t,{w:function(){return m},x:function(){return FreeBanner}});var r=n(5079),o=n(54067);n(44194);var i=n(35237),a=n(50958),l=n(86396),c=n(96707),d=n(3628),s=n(6916),u=n(34715),p=n(9628),_=n(30381);function _templateObject(){let e=(0,r._)(["\n            cursor: pointer;\n          "]);return _templateObject=function(){return e},e}let m=40,h=(0,s.dU)("NEXT_PUBLIC_BASE_URL"),FreeBanner=e=>{let{title:t="뤼튼은 왜 무료인가요?"}=e,{value:n,setItem:r}=(0,d._)("banner_info",{}),s=(0,p.bU)(),g=!n.free_banner,{flag:v}=(0,_.T6)("fe-web-free-banner"),{trackEvent:f}=(0,u.Ke)();return"ko-KR"===s&&v&&g?(0,o.BX)(l.Ug,{width:"100%",height:m,minHeight:m,backgroundColor:"$color_surface_accent_bg_blue",px:"20px",justifyContent:"space-between",alignItems:"center",children:[(0,o.tZ)(l.xu,{width:"18px",height:"18px"}),(0,o.BX)(l.Ug,{gap:"6px",alignItems:"center",children:[(0,o.tZ)(l.Jd,{typo:"$100-14-semi",color:"$color_text_primary",children:t}),(0,o.BX)(l.Ug,{gap:"2px",css:(0,i.iv)(_templateObject()),onClick:()=>{d.sk||(f("click_notice_banner_cache",{content:t}),window.open("".concat(h,"?q=").concat(t),"_blank"))},children:[(0,o.tZ)(l.Jd,{as:"span",typo:"$100-14-semi",color:"$color_action_blue_primary",children:"지금 알아보기"}),(0,o.tZ)(c.JO,{as:a.xMl,size:14,color:"$color_action_blue_primary"})]})]}),(0,o.tZ)(l.zx,{width:"18px",height:"18px",display:"flex",justifyContent:"center",alignItems:"center",onClick:()=>{r({...n,free_banner:!0})},children:(0,o.tZ)(c.JO,{as:a.S5X,size:18,color:"$color_icon_primary"})})]}):null}},18582:function(e,t,n){n.d(t,{x:function(){return WebviewErrorMessageSendProvider},c:function(){return WebviewMessageReceiveProvider}});var r=n(54067),o=n(44194),i=n(88857);let a=["light","dark","system"],WebviewMessageReceiveProvider=e=>{let{children:t}=e,messageHandler=e=>{let t;if(!(null==e?void 0:e.data))return;try{t=JSON.parse(e.data)}catch(e){return}let n=null==t?void 0:t.type,r=null==t?void 0:t.payload;n&&r&&"theme-change"===n&&a.includes(r.mode)&&(0,i.L)(r.mode)};return o.useEffect(()=>(window.addEventListener("message",messageHandler),document.addEventListener("message",e=>messageHandler(e)),()=>{window.removeEventListener("message",messageHandler),document.removeEventListener("message",e=>messageHandler(e))}),[]),(0,r.tZ)(r.HY,{children:t})};var l=n(3628);let WebviewErrorMessageSendProvider=e=>{let{type:t,children:n}=e,{isWebview:r,postMessage:i}=(0,l.sW)();return(o.useEffect(()=>{r&&i({type:"error",payload:{type:t}})},[r,i,t]),r)?null:n}},70153:function(e,t,n){n.d(t,{mQ:function(){return AnimateChangeInHeight},y:function(){return DefaultStepText},WY:function(){return DynamicTrail},NU:function(){return DynamicTrailItem},oC:function(){return HomeScrollButton},ko:function(){return ProgressBar},tm:function(){return s},xE:function(){return ScrollButton},$j:function(){return Spinner}});var r=n(44194),o=n(83262),i=n(54067),a=n(6644),l=n(32060),c=n(96707);let TextCursor=()=>(0,i.tZ)(l.E.div,{style:{display:"inline-block",transform:"translateY(2px)",marginLeft:"-2px"},initial:{opacity:0},animate:{opacity:1},transition:{repeat:1/0,duration:.5,repeatType:"reverse"},children:(0,i.tZ)(c.JO,{as:c.C$,color:"$color_icon_brand",size:16})}),DefaultStepText=e=>{let{currentWaitingText:t,showCursor:n}=e;return(0,i.tZ)(o.xu,{position:"relative",overflow:"hidden",children:(0,i.tZ)(a.M,{children:(0,i.tZ)(l.E.div,{initial:{y:"100%"},animate:{y:0},exit:{y:"-100%",position:"absolute"},transition:{duration:.5},children:(0,i.BX)(o.xu,{typo:"$ex_180-16-med",color:"$color_text_quaternary",children:[t,n&&(0,i.tZ)(TextCursor,{})]})},t)})})};n(26484);let AnimateChangeInHeight=e=>{let{children:t,border:n,isClosed:a}=e,c=(0,r.useRef)(null),[d,s]=(0,r.useState)("auto");return(0,r.useEffect)(()=>{if(c.current){let e=new ResizeObserver(e=>{let t=e[0].contentRect.height;s(t)});return e.observe(c.current),()=>{e.disconnect()}}},[c]),(0,i.tZ)(l.E.div,{style:{height:d,border:n,overflow:"hidden"},animate:a?{height:0,opacity:0}:{height:d,opacity:1},transition:{duration:.3},children:(0,i.tZ)(o.gC,{ref:c,gap:"10px",children:t})})},ScrollButton=e=>{let{isShow:t=!0,style:n,children:r}=e;return(0,i.tZ)(l.E.button,{initial:{transform:"translateY(10px)",opacity:0},animate:{transform:t?"translateY(0px)":"translateY(10px)",opacity:t?1:0},style:{...n,margin:"0 auto",width:"fit-content",height:"fit-content"},children:r})},d=(0,l.E)(r.forwardRef(function(e,t){return(0,i.tZ)(o.zx,{ref:t,...e,children:e.children})})),HomeScrollButton=e=>{let{isShow:t=!0,children:n}=e;return(0,i.tZ)(d,{initial:{transform:"translateY(10px)",opacity:0},animate:{transform:t?"translateY(0px)":"translateY(10px)",opacity:t?1:0},position:"fixed",bottom:["16px","16px","40px","40px"],right:["16px","16px","40px","40px"],margin:"0 auto",width:"fit-content",height:"fit-content",zIndex:7,children:n})},Spinner=e=>{let{size:t=16,bg:n="$color_outline_brand"}=e;return(0,i.tZ)(l.E.div,{initial:"start",animate:"end",variants:{start:{rotateX:0,rotateY:0},end:{rotateX:0,rotateY:540,transition:{duration:.9,ease:"easeOut",repeat:1/0,repeatDelay:.5}}},style:{display:"flex",justifyContent:"center",alignItems:"center",color:"white",margin:"auto"},children:(0,i.tZ)(o.xu,{width:t,height:t,borderRadius:"50%",overflow:"hidden",backgroundColor:n})})};var s=n(39064);let u={hidden:{opacity:0,y:20},show:{opacity:1,y:0}},p={hidden:{opacity:0},show:{opacity:1,transition:{staggerChildren:.1,delayChildren:.2,duration:.7}}},DynamicTrail=e=>{let{children:t,style:n,listVariants:r=p}=e;return(0,i.tZ)(a.M,{children:(0,i.tZ)(l.E.div,{variants:r,initial:"hidden",animate:"show",style:{width:"100%",display:"flex",flexDirection:"column",gap:"10px",...n},children:t})})},DynamicTrailItem=e=>{let{children:t,style:n,itemVariants:r=u}=e;return(0,i.tZ)(l.E.div,{style:{width:"100%",...n},variants:r,children:t})},_=(0,l.E)(r.forwardRef(function(e,t){return(0,i.tZ)(o.xu,{ref:t,...e,children:e.children})})),ProgressBar=e=>{let{progress:t=0,color:n="$color_outline_primary"}=e;return(0,i.tZ)(_,{initial:{width:"0%"},animate:{width:"".concat(t,"%")},transition:{duration:.5,delay:.5},height:"100%",borderRadius:"10px",backgroundColor:n,position:"absolute",top:"0",left:"0"})}},64145:function(e,t,n){n.d(t,{q:function(){return r.Z}});var r=n(90492)},5559:function(e,t,n){n.d(t,{Z:function(){return ToggleSwitchV2}});var r=n(5079),o=n(48328),i=n(86396);function _templateObject(){let e=(0,r._)(["\n  position: relative;\n  display: inline-block;\n  width: 54px;\n  height: 28px;\n  padding: 4px 5px;\n  border-radius: 14px;\n  background-color: ",";\n\n  cursor: pointer;\n"]);return _templateObject=function(){return e},e}function _templateObject1(){let e=(0,r._)(["\n  position: absolute;\n  height: 20px;\n  width: 20px;\n  border-radius: 10px;\n  background-color: ",";\n\n  -webkit-transition: 0.4s;\n  transition: 0.4s;\n\n  -webkit-transform: ",";\n  -ms-transform: ",";\n  transform: ",";\n"]);return _templateObject1=function(){return e},e}o.Z.label(_templateObject(),e=>e.backgroundColor),o.Z.span(_templateObject1(),e=>e.color,e=>e.checked?"translateX(24px)":void 0,e=>e.checked?"translateX(24px)":void 0,e=>e.checked?"translateX(24px)":void 0);var a=n(54067);n(44194);var l=n(35237);function ToggleSwitchV2_templateObject(){let e=(0,r._)(["\n        cursor: pointer;\n        transition: background-color 0.4s;\n\n        ","\n      "]);return ToggleSwitchV2_templateObject=function(){return e},e}function ToggleSwitchV2_templateObject1(){let e=(0,r._)(["\n          -webkit-transition: 0.4s;\n          transition: 0.4s;\n\n          -webkit-transform: ",";\n          -ms-transform: ",";\n          transform: ",";\n        "]);return ToggleSwitchV2_templateObject1=function(){return e},e}let c={width:40,height:24,px:2,py:2,borderRadius:50,bg:{checked:"$color_action_blue_secondary",unchecked:"$color_icon_disabled",disabled:"$color_action_blue_secondary"}},d={size:20,bg:{checked:"$palette_gray_gray_white",unchecked:"$palette_gray_gray_white"}},ToggleSwitchV2=e=>{let{toggle:t,shadow:n,disabled:r,onToggle:o,onHover:s,onMouseEnter:u,onMouseLeave:p,containerData:_=c,sliderData:m=d,containerProps:h,sliderProps:g,innerItem:v}=e,f=_.width-m.size-2*_.px;return(0,a.tZ)(i.xu,{position:"relative",display:"inline-block",width:"".concat(_.width,"px"),height:"".concat(_.height,"px"),px:"".concat(_.px,"px"),py:"".concat(_.py,"px"),borderRadius:"".concat(_.borderRadius,"px"),backgroundColor:r?_.bg.disabled:t?_.bg.checked:_.bg.unchecked,onClick:r?void 0:o,onMouseOver:r?void 0:s,onMouseEnter:r?void 0:u,onMouseLeave:r?void 0:p,css:(0,l.iv)(ToggleSwitchV2_templateObject(),r&&"\n          cursor: not-allowed;\n\n        "),...h,children:(0,a.tZ)(i.xu,{display:"flex",justifyContent:"center",alignItems:"center",position:"absolute",width:"".concat(m.size,"px"),height:"".concat(m.size,"px"),backgroundColor:t?m.bg.checked:m.bg.unchecked,borderRadius:"50%",boxShadow:n?"0px 2px 3px rgba(0, 0, 0, 0.1)":"",css:(0,l.iv)(ToggleSwitchV2_templateObject1(),t?"translateX(".concat(f,"px)"):void 0,t?"translateX(".concat(f,"px)"):void 0,t?"translateX(".concat(f,"px)"):void 0),...g,children:v})})}},26281:function(e,t,n){n.d(t,{ai:function(){return a},Gz:function(){return i},k0:function(){return o}});var r=n(34151);let o=new r.x,i=new r.x,a=new r.x},35229:function(e,t,n){n.d(t,{un:function(){return formatPhoneNumber},lW:function(){return formatYYYYMMDD},kV:function(){return markdownToText},x2:function(){return parseFileName},bI:function(){return removeNonNumeric}});var r=n(96049),o=n(48061),i=n.n(o);let markdownToText=e=>{let t=(0,r.Qc)(e,{async:!1}),n=t.replace(/\$\$([\s\S]*?)\$\$/g,(e,t)=>formatLatex(t)).replace(/\$([\s\S]*?)\$/g,(e,t)=>formatLatex(t)),o=(function(e){var t;let n=new DOMParser,r=n.parseFromString(e,"text/html");return null!==(t=r.documentElement.textContent)&&void 0!==t?t:""})(i()(n)).trim();return o.replace(/\[\d+\]/g,"").trim()};function formatLatex(e){return e.replace(/\\text\{([^}]+)\}/g,"$1").replace(/\\quad/g," ").replace(/\\sum/g,"∑").replace(/\\infty/g,"∞").replace(/\\frac{([^}]+)}{([^}]+)}/g,"$1/$2").replace(/_([a-zA-Z0-9]+)/g,"($1)").replace(/\^([a-zA-Z0-9]+)/g,"^($1)").replace(/\\left\(|\\right\)/g,"").replace(/\\([a-zA-Z]+)|{|}/g,"").replace(/&gt;/g,">").replace(/\s+/g," ").trim()}function removeNonNumeric(e){return e.replace(/[^0-9]/g,"")}function formatYYYYMMDD(e){let t=removeNonNumeric(e);return t.length<=4?t.replace(/^(\d{4})/,"$1/"):t.length<=5?t.replace(/^(\d{4})(\d{1})/,"$1/$2"):t.length<=6?t.replace(/^(\d{4})(\d{2})/,"$1/$2/"):t.replace(/^(\d{4})(\d{2})(\d+)/,"$1/$2/$3")}function formatPhoneNumber(e){let t=removeNonNumeric(e);return t.length<=3?t.replace(/^(\d{3})/,"$1-"):t.length<=6?t.replace(/^(\d{3})(\d)/,"$1-$2"):t.length<=7?t.replace(/^(\d{3})(\d{4})/,"$1-$2-"):t.replace(/^(\d{3})(\d{4})(\d+)/,"$1-$2-$3")}function parseFileName(e){let t=e.match(/\.(\w+)$/),n=t?t[1]:"",r=e.replace(/\.[^/.]+$/,"");return{title:r,extension:n}}},88857:function(e,t,n){n.d(t,{L:function(){return changeTheme}});var r=n(43621);let changeTheme=e=>{let t=new Date;t.setFullYear(t.getFullYear()+99),(0,r.d8)("user-theme",e,{sameSite:"lax",path:"/",expires:t}),document.body.dataset.theme=e}},52708:function(e,t,n){n.d(t,{_:function(){return getUnitList},u7:function(){return useUnitList}});var r=n(84631);let getUnitList=e=>r.Np.William.get("/models?platform=web",{headers:{"wrtn-locale":e}});var o=n(6916),i=n(92120);let useUnitList=()=>(0,i.dH)("/units",async()=>{let e=await getUnitList(o.MV||"ko-KR");return e},{errorRetryCount:0,fallbackData:[],revalidateOnFocus:!1})}}]);